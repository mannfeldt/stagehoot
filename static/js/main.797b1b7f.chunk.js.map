{"version":3,"sources":["components/common/CountdownAnimation.scss","base.js","components/common/Header.js","components/quiz/create/Question.js","components/common/utils/appUtil.js","components/minigame/snake/Snake.js","components/quiz/create/GenerateQuizForm.js","components/quiz/create/QuestionForm.js","components/quiz/create/CreateQuiz.js","components/minigame/create/CreateTetris.js","components/minigame/create/CreateSnake.js","components/minigame/create/CreateMinigame.js","components/pages/Create.js","components/quiz/host/PhaseSetup.js","components/quiz/host/PhaseConnection.js","components/common/CountdownAnimation.js","components/quiz/host/PhaseStarting.js","components/quiz/host/PhaseAwaitingQuestion.js","components/quiz/host/PhaseShowQuestion.js","components/quiz/AnswerOption.js","components/common/Timer.js","components/quiz/host/AnswerCounter.js","components/quiz/host/PhaseAnswer.js","components/quiz/Podium.js","components/quiz/host/PhaseFinalResult.js","components/quiz/AnswerChart.js","components/quiz/Leaderboard.js","components/quiz/host/PhaseResultQuestion.js","components/quiz/host/PhaseEnd.js","components/quiz/host/Quiz.js","components/minigame/host/PhaseSetup.js","components/minigame/host/PhaseConnection.js","components/minigame/host/PhaseStarting.js","components/common/utils/minigameUtil.js","components/minigame/tetris/Tetris.js","components/minigame/host/PhaseFinalResult.js","components/minigame/host/PhaseEnd.js","components/minigame/snake/SnakeStarting.js","components/minigame/host/Minigame.js","components/pages/Host.js","components/quiz/play/PhaseConnection.js","components/quiz/play/PhaseStarting.js","components/quiz/play/PhaseAwaitingQuestion.js","components/quiz/play/PhaseShowQuestion.js","components/quiz/play/PhaseAnswer.js","components/quiz/play/PhaseFinalResult.js","components/quiz/play/PhaseResultQuestion.js","components/quiz/play/Quiz.js","components/quiz/play/PhaseEnd.js","components/minigame/play/PhaseConnection.js","components/minigame/play/PhaseStarting.js","components/minigame/play/PhaseFinalResult.js","components/minigame/snake/SnakeController.js","components/minigame/tetris/TetrisController.js","components/minigame/play/Minigame.js","components/pages/Play.js","components/pages/Home.js","components/common/CustomizedSnackbars.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","cyanColor","redColor","purpleColor","greenColor","fire","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","titleText","options","react_default","a","createElement","id","AppBar_default","position","Toolbar_default","className","Link","to","Component","Question","expanded","deleteQuestion","bind","assertThisInitialized","question","classes","Card_default","card","CardHeader_default","action","IconButton_default","onClick","DeleteOutlined_default","title","subheader","timelimit","CardContent_default","Typography_default","variant","align","List_default","correctAnswers","map","answer","index","ListItem_default","key","ListItemText_default","primary","wrongAnswers","withStyles","theme","maxWidth","calculateDefaultTimeLimit","aType","Math","floor","join","length","parseDOM","s","DOMParser","parseFromString","concat","body","textContent","parseDOMArray","arr","result","i","push","ctx","canvas","GenerateQuizForm","handleChange","name","event","setState","defineProperty","target","value","handleChangeSelect","nrOfQuestions","category","difficulty","generateQuestions","_this$state","_this$props","addQuestions","showSnackbar","url","fetch","then","response","json","generated","response_code","questions","results","generatedQuestion","correct_answer","incorrect_answers","qType","type","snack","message","_this$state2","Grid_default","container","item","xs","md","FormControl_default","fullWidth","TextField_default","label","margin","onChange","InputLabel_default","htmlFor","Select_default","inputProps","MenuItem_default","Button_default","QuestionForm","handleTrueFalse","correctAnswer","wrongAnswerOne","wrongAnswerTwo","wrongAnswerThree","sendQuestion","toggleGenerateQuestion","addQuestion","q","isTimelimit","disabled","create_GenerateQuizForm","required","component","FormLabel_default","RadioGroup_default","aria-label","FormControlLabel_default","control","Radio_default","CreateQuiz","handleChangeBool","checked","gametype","gamemode","timescore","gamePass","createQuiz","max","apply","toConsumableArray","o","qs","e","indexOf","splice","_this$state3","password","tile","quiz","_this2","_this$state4","spacing","index_es","autoComplete","FormGroup_default","Switch_default","create_QuestionForm","create_Question","transitionDelay","CreateTetris","validateGame","createGame","minigame","CreateSnake","racetarget","opponentCollision","eatOpponents","wallCollision","CreateMinigame","setGameType","create_CreateSnake","create_CreateTetris","Create","gameId","g","game","possible","charAt","random","generateGameId","created","Date","now","status","phase","that","gameRef","database","ref","set","error","errorText","localStorage","setItem","create_CreateQuiz","create_CreateMinigame","PhaseSetup","surveyPlayers","answerStreak","nameGenerator","remoteMode","useTeams","randomizeQuestionOrder","autoPlayQuestions","startGame","createTeamGame","createClassicGame","teamMode","currentQuestion","gameFunc","update","PhaseConnection","nextPhase","players","values","player","paragraph","CountdownAnimation","speed","viewBox","d","PureComponent","PhaseStarting","counter","startCounter","setInterval","clearInterval","components_common_CountdownAnimation","PhaseAwaitingQuestion","PhaseShowQuestion","phaseTime","setTimeout","answers","shuffle","array","temp","answerStyles","icon","Cake_default","color","ExtensionOutlined_default","FavoriteBorder_default","StarBorder_default","AnswerOption","design","answerQuestion","Paper_default","playAnswer","style","backgroundColor","paper","root","flexGrow","paddingTop","unit","paddingBottom","textAlign","palette","text","secondary","width","height","float","fontSize","marginLeft","Timer","startValue","currentCount","completed","CircularProgress_default","circle","colorSecondary","thickness","size","marginBottom","AnswerCounter","LinearProgress_default","bar","PhaseAnswer","started","isTimelimited","playerKeys","keys","answersCollected","answerCollectedPercentage","common_Timer","ceil","host_AnswerCounter","quiz_AnswerOption","colors","Podium","getChartData","getChartOptions","getChartHeight","chartData","labels","datasets","data","borderWidth","rawPlayerData","playerScoreData","score","j","sort","b","maxIndex","padding","maintainAspectRatio","showTooltips","responsiveAnimationDuration","animation","easing","duration","onProgress","animationObject","onAnimationProgress","chart","textBaseline","font","stepratio","currentStep","numSteps","meta","getDatasetMeta","hidden","forEach","element","dataString","toString","fillStyle","tooltipPosition","fillText","x","y","_model","scales","yAxes","ticks","beginAtZero","display","xAxes","legend","tooltips","enabled","events","layout","left","right","top","bottom","maxHeight","es","getWinnerString","PhaseFinalResult","quiz_Podium","restart","quit","alert","AnswerChart","getAnswerData","answerData","topPlayer","playerKey","playerAnswers","nrOfAnswers","borderColor","beginPath","rect","_view","fill","img","Image","src","PUBLIC_PATH","ypos","drawImage","Leaderboard","handleChangePage","page","handleChangeRowsPerPage","rowsPerPage","leaderboardData","getLeaderboardData","startScoreCounter","getScoreCellWidth","newLeaderBoard","done","currentQuestionScore","totalScore","leaderboard","playerList","questionId","lastScore","scoreWidth","Table_default","table","TableBody_default","slice","TableRow_default","TableCell_default","getLeaderboardScore","TablePagination_default","count","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","whiteSpace","PhaseResultQuestion","nextQuestion","finalizeQuiz","isLastQuestion","quiz_AnswerChart","quiz_Leaderboard","end","PhaseEnd","Quiz","host_PhaseSetup","host_PhaseConnection","host_PhaseStarting","host_PhaseAwaitingQuestion","host_PhaseShowQuestion","host_PhaseAnswer","host_PhaseResultQuestion","host_PhaseFinalResult","host_PhaseEnd","multiplayerMode","gridSize","getRandomStartingPosTop","snakes","canvasWidth","snakesDown","filter","direction","existingValues","Set","getRandomStartingPos","getRandomStartingPosBottom","canvasSettings","xMax","getRandomStartingPosRight","yMax","getRandomStartingPosLeft","canvasHeight","round","some","v","detectSelfCollision","snake","detectWallCollision","snakeHead","leftCollison","topCollison","rightCollison","bottomCollison","Snake","togglePausGame","isPaused","overlay","window","innerHeight","innerWidth","nrOfFoods","gameTicker","winners","len","actions","moves","pos","minigameUtil","foods","amount","initialFoods","active","settings","border","respawntime","food","background","drawSnakes","generateFood","generateSnakes","resetCanvas","drawFood","detectCollisions","initControllerListener","generateFoods","isEndGame","renderOverlay","app","document","querySelector","getContext","snakeRef","on","snapshot","nextSnake","val","move","console","log","_this$props$game$mini","dead","alive","winner","reduce","prev","current","fillRect","nextSnakes","teleportSnakes","_loop","respawning","startPos","keyPress","currentDirection","movement","up","down","nextMove","shift","coordinate","unshift","collidedFood","find","f","pop","globalCompositeOperation","strokestyle","len2","bodyPos","strokeRect","_this$state5","currentSnake","opponentSnake","k","_this$state6","globalAlpha","headX","headY","snakeName","namePosition","yPos","role","tabIndex","onKeyDown","Tetris","replayGame","chunkify","nr","n","out","SNAKE_COLORS","SNAKE_NAMES","SnakeStarting","snakeGenerator","classic","createSnakes","team","createTeamSnakes","coop","createCoopSnakes","actionChunks","snakeId","controlActions","Minigame","minigame_host_PhaseSetup","minigame_host_PhaseConnection","snake_SnakeStarting","snake_Snake","minigame_host_PhaseFinalResult","minigame_host_PhaseEnd","minigame_host_PhaseStarting","tetris_Tetris","Host","getItem","updateGame","fetchGame","initGameListiner","restartGame","quitGame","endGame","toggleHeader","orderByChild","equalTo","once","child","gameKey","gameFunctions","host_Quiz","host_Minigame","authId","playerCreated","createPlayer","generateName","addPlayer","generatePlayer","adjectives","nouns","finalName","currentNames","playerName","playersInLobby","selectedAnswer","hasAnswered","answerTime","startTime","undefined","timeFactorUsed","playerAnswer","saveAnswer","panel","getPlayerAnswerData","answerDataList","currentPlayer","time","playerData","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","newLeaderboardPosition","oldLeaderboardPosition","wrongAnswer","noAnswer","currentQuestionId","lastPhase","play_PhaseConnection","play_PhaseStarting","updatePlayer","play_PhaseAwaitingQuestion","play_PhaseShowQuestion","play_PhaseAnswer","play_PhaseResultQuestion","play_PhaseFinalResult","_this$props2","SnakeController","handleAction","playerSnake","allControlActions","displayName","react","includes","ExpandLess_default","ChevronRight_default","ChevronLeft_default","opacity","TetrisController","minigame_play_PhaseConnection","minigame_play_PhaseStarting","snake_SnakeController","minigame_play_PhaseFinalResult","tetris_TetrisController","Play","storedPlayerKey","playerRef","play_Quiz","play_Minigame","Home","sm","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","MySnackbarContentWrapper","green","dark","amber","iconVariant","marginRight","alignItems","onClose","other","objectWithoutProperties","Icon","SnackbarContent_default","assign","aria-describedby","classNames","close","Close_default","CustomizedSnackbars","handleClose","reason","hideSnackbar","Snackbar_default","anchorOrigin","vertical","horizontal","open","autoHideDuration","React","App","showHeader","HashRouter","common_Header","Route","exact","path","render","pages_Play","pages_Host","pages_Create","pages_Home","common_CustomizedSnackbars","Boolean","location","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.797b1b7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cyanColor\":\"#80DEEA\",\"redColor\":\"#EF9A9A\",\"purpleColor\":\"#CE93D8\",\"greenColor\":\"#C5E1A5\"};","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\n//PROD\r\nvar prodConfig = {\r\n  apiKey: \"AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU\",\r\n  authDomain: \"stagehoot.firebaseapp.com\",\r\n  databaseURL: \"https://stagehoot.firebaseio.com\",\r\n  projectId: \"stagehoot\",\r\n  storageBucket: \"stagehoot.appspot.com\",\r\n  messagingSenderId: \"589747985768\"\r\n};\r\n\r\n//DEV\r\n\r\nconst fire = firebase.initializeApp(prodConfig);\r\n\r\nexport { fire }","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { fire } from '../../base';\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let titleText = 'Stagehoot';\r\n    if (fire.options.projectId === 'ettkilomjol-dev') {\r\n      titleText = 'Ett Kilo Mjl DEV';\r\n    }\r\n\r\n    return (\r\n      <div id=\"header\">\r\n        <AppBar position=\"static\">\r\n          <Toolbar className=\"toolbar\">\r\n            <div className=\"appbar-container--left\">\r\n              <Link className=\"appbar-title text-big\" to=\"/\">\r\n                {titleText}\r\n              </Link>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Header;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\n\r\nconst styles = theme => ({\r\n    card: {\r\n        maxWidth: 400,\r\n    },\r\n});\r\nclass Question extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: false\r\n        };\r\n        this.deleteQuestion = this.deleteQuestion.bind(this);\r\n    }\r\n\r\n    deleteQuestion() {\r\n        this.props.deleteQuestion(this.props.question);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardHeader\r\n                    action={\r\n                        <IconButton onClick={this.deleteQuestion}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    }\r\n                    title={this.props.question.question}\r\n                    subheader={this.props.question.timelimit ? this.props.question.timelimit + ' seconds' : 'default timelimit'}\r\n                />\r\n                <CardContent>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                    <List>\r\n                        {this.props.question.correctAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                    <List>\r\n                        {this.props.question.wrongAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                </CardContent>\r\n\r\n\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Question);","function generateGameId() {\r\n  let id = '';\r\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    id += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return id;\r\n}\r\nfunction calculateDefaultTimeLimit(question) {\r\n  if (question.aType === 'multiple' || question.aType === 'boolean') {\r\n    return 10 + Math.floor((question.correctAnswers.join().length + question.wrongAnswers.join().length) / 50);\r\n  } if (question.aType === 'free') {\r\n    return 20;\r\n  } if (question.aType === 'player') {\r\n    // answer blir 4-8 random utvalda till varje frga\r\n    return 20;\r\n  }\r\n  return 20;\r\n}\r\nfunction parseDOM(s) {\r\n  const parser = new DOMParser();\r\n  const dom = parser.parseFromString(\r\n    `<!doctype html><body>${s}`,\r\n    'text/html',\r\n  );\r\n  const decodedString = dom.body.textContent;\r\n  return decodedString;\r\n}\r\n\r\nfunction parseDOMArray(arr) {\r\n  const result = [];\r\n  for (let i = 0; i < arr.length; i++) {\r\n    result.push(parseDOM(arr[i]));\r\n  }\r\n  return result;\r\n}\r\nexport {\r\n  generateGameId,\r\n  calculateDefaultTimeLimit,\r\n  parseDOMArray,\r\n  parseDOM,\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { fire } from '../../../base';\r\nimport * as minigameUtil from '../../common/utils/minigameUtil';\r\n\r\nlet ctx;\r\nlet canvas;\r\nconst gridSize = 20;\r\n\r\nclass Snake extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // fr att gra det mer smooth. s behver jag typ dela upp tandet s att det sker i flera tick? fr just nu r ett tick storleken p food och allt annat\r\n    // lite delay nr jag kar speeden. r det olika delay fr olika snakes? optimera senare.\r\n    const canvasHeight = Math.floor(window.innerHeight / gridSize) * gridSize;\r\n    const canvasWidth = Math.floor(window.innerWidth / gridSize) * gridSize;\r\n    const nrOfFoods = props.game.minigame.snakes.length * 2;\r\n\r\n    this.state = {\r\n      gameTicker: null,\r\n      ticks: 0,\r\n      winners: [],\r\n      snakes: minigameUtil.getSnakesInStartingPosition(props.game.minigame.snakes, { height: canvasHeight, width: canvasWidth }),\r\n      foods: minigameUtil.getInitialFoods(nrOfFoods),\r\n      settings: {\r\n        snake: {\r\n          size: gridSize,\r\n          speed: props.game.minigame.difficulty,\r\n          border: '#000',\r\n          respawntime: 3,\r\n        },\r\n        food: {\r\n          background: '#EC5E0B',\r\n          border: '#73AA24',\r\n        },\r\n        canvas: {\r\n          height: canvasHeight,\r\n          width: canvasWidth,\r\n          background: '#F5F5F5',\r\n          border: '#000',\r\n        },\r\n      },\r\n    };\r\n\r\n    this.drawSnakes = this.drawSnakes.bind(this);\r\n    this.generateFood = this.generateFood.bind(this);\r\n    this.generateSnakes = this.generateSnakes.bind(this);\r\n    this.resetCanvas = this.resetCanvas.bind(this);\r\n    this.drawFood = this.drawFood.bind(this);\r\n    this.detectCollisions = this.detectCollisions.bind(this);\r\n    this.initControllerListener = this.initControllerListener.bind(this);\r\n    this.generateFoods = this.generateFoods.bind(this);\r\n    this.isEndGame = this.isEndGame.bind(this);\r\n    this.togglePausGame = this.togglePausGame.bind(this);\r\n    this.renderOverlay = this.renderOverlay.bind(this);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    const {\r\n      snakes, settings,\r\n    } = this.state;\r\n    const app = document.querySelector('#snakeboard');\r\n\r\n    canvas = app.querySelector('canvas');\r\n    ctx = canvas.getContext('2d');\r\n    this.resetCanvas();\r\n    this.generateSnakes();\r\n    this.generateFoods();\r\n    const that = this;\r\n    const gameTicker = setInterval(() => {\r\n      if (that.state.isPaused) {\r\n        if (that.state.overlay) {\r\n          return;\r\n        }\r\n        that.renderOverlay();\r\n        return;\r\n      }\r\n      if (that.state.winners.length === 0) {\r\n        that.resetCanvas();\r\n        that.generateSnakes();\r\n        that.generateFoods();\r\n        that.detectCollisions();\r\n        that.isEndGame();\r\n      } else {\r\n        that.nextPhase();\r\n      }\r\n    }, settings.snake.speed);\r\n\r\n    this.setState({ gameTicker });\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      const snake = snakes[i];\r\n      this.initControllerListener(snake);\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // kan jag ha det hr?\r\n\r\n    return false;\r\n  }\r\n\r\n  togglePausGame = () => {\r\n    // async!!\r\n    this.setState(state => ({\r\n      isPaused: !state.isPaused,\r\n      overlay: false,\r\n    }));\r\n  }\r\n\r\n  nextPhase() {\r\n    const {\r\n      gameTicker, snakes, winners, ticks,\r\n    } = this.state;\r\n    const { game, gameFunc } = this.props;\r\n    clearInterval(gameTicker);\r\n    game.minigame.snakes = snakes;\r\n    game.minigame.winners = winners;\r\n    game.minigame.ticks = ticks;\r\n    game.phase = 'final_result';\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  initControllerListener(snake) {\r\n    const { game } = this.props;\r\n    const snakeRef = fire.database().ref(`/games/${game.key}/minigame/snakes/${snake.id}`);\r\n    const that = this;\r\n    snakeRef.on('value', (snapshot) => {\r\n      const nextSnake = snapshot.val();\r\n      if (nextSnake && !that.state.isPaused) {\r\n        that.setState((state) => {\r\n          const snakes = [...state.snakes];\r\n          // kolla s att detta r okej stt, blir snakes index alltid rtt kopplat till snake.id? ska jag fixa ett riktigt ID fr att vara sker? allts ett pushid\r\n          if (nextSnake.move) {\r\n            snakes[snake.id].moves.push(nextSnake.move);\r\n          }\r\n          return {\r\n            snakes,\r\n          };\r\n        });\r\n      } else {\r\n        console.log('move error');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  isEndGame() {\r\n    const { snakes } = this.state;\r\n    const { game: { minigame: { gamemode, racetarget } } } = this.props;\r\n\r\n    // if survavalmode continue game if more than 1 snake is alive\r\n    // kolla performance p denna filter funktion jmfrt med loopen under\r\n    if (gamemode === 'survival' && snakes.filter(s => !s.dead).length > 1) {\r\n      return;\r\n      /*\r\n      const l = snakes.length;\r\n      let alive = 0;\r\n      for (let i = 0; i < l; i++) {\r\n        if (!snakes[i].dead) {\r\n          alive += 1;\r\n        }\r\n        if (alive > 1) {\r\n          return;\r\n        }\r\n      }\r\n      */\r\n    }\r\n    // if race continue game if no one has reached racetarget\r\n    if (gamemode === 'race' && !snakes.some(s => s.body.length >= racetarget)) {\r\n      return;\r\n    }\r\n\r\n    // its gameover, lets find the winner/winners\r\n    let winners = [];\r\n    if (gamemode === 'survival') {\r\n      const alive = snakes.filter(s => !s.dead);\r\n      if (alive.length === 1) {\r\n        winners = alive;\r\n      } else {\r\n        const winner = snakes.reduce((prev, current) => ((prev.score > current.score) ? prev : current));\r\n        winners.push(winner);\r\n      }\r\n    } else if (gamemode === 'race') {\r\n      winners = snakes.filter(s => s.body.length >= racetarget);\r\n    }\r\n    this.setState(() => ({\r\n      winners,\r\n      isPaused: true,\r\n      overlay: false,\r\n    }));\r\n\r\n    /*\r\n\r\n    if (gamemode === 'survival') {\r\n      if (snakes.length === 1 && snakes[0].dead) {\r\n        winners.push(snakes[0]);\r\n      } else {\r\n        for (let i = 0; i < l; i++) {\r\n          if (!snakes[i].dead) {\r\n            winners.push(snakes[i]);\r\n          }\r\n          // should not be possible as she check for this first thing in this function\r\n          // if (winners.length > 1) {\r\n          //  return;\r\n          // }\r\n        }\r\n        // om det inte finns ngon levande alla s betyder det att de sista tog samtidigt. d vinner den som r lngst av alla\r\n        if (winners.length === 0) {\r\n          let winnerIndex = 0;\r\n          let highestScore = 0;\r\n          for (let i = 0; i < l; i++) {\r\n            if (snakes[i].score > highestScore) {\r\n              winnerIndex = i;\r\n              highestScore = snakes[i].score;\r\n            }\r\n          }\r\n          winners.push(snakes[winnerIndex]);\r\n        }\r\n      }\r\n    } else if (gamemode === 'race') {\r\n      for (let i = 0; i < l; i++) {\r\n        if (snakes[i].body.length >= racetarget) {\r\n          winners.push(snakes[i]);\r\n        }\r\n      }\r\n    }\r\n    if (winners.length > 0) {\r\n      this.setState(() => ({\r\n        winners,\r\n        isPaused: true,\r\n        overlay: false,\r\n      }));\r\n    }\r\n    */\r\n  }\r\n\r\n  resetCanvas() {\r\n    const { settings } = this.state;\r\n    canvas.width = settings.canvas.width;\r\n    canvas.height = settings.canvas.height;\r\n\r\n    ctx.fillStyle = settings.canvas.background;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  }\r\n\r\n  generateSnakes() {\r\n    // i alla sna hr dpelarspecifika metoder mste jag ta in vilken snake/player det gller\r\n    const { snakes, foods, settings } = this.state;\r\n    const { game } = this.props;\r\n    const nextSnakes = [];\r\n    const teleportSnakes = !game.minigame.wallCollision;\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      // behver jag gra en copy? spelar det ngon roll?\r\n      const snake = snakes[i];\r\n      if (snake.respawning) {\r\n        if (Date.now() > snake.respawntime) {\r\n          snake.dead = false;\r\n          snake.respawning = false;\r\n        }\r\n        nextSnakes.push(snake);\r\n        continue;\r\n      } else if (snake.dead) {\r\n        if (game.minigame.gamemode === 'survival') {\r\n          snake.body = [];\r\n          nextSnakes.push(snake);\r\n          continue;\r\n        } else if (game.minigame.gamemode === 'race') {\r\n          const xMax = settings.canvas.width - gridSize;\r\n          const yMax = settings.canvas.height - gridSize;\r\n          const startPos = minigameUtil.getRandomCanvasPositionMargin(yMax, xMax);\r\n          snake.body = [{\r\n            x: startPos.x,\r\n            y: startPos.y,\r\n          }, {\r\n            x: startPos.x - gridSize,\r\n            y: startPos.y,\r\n          }, {\r\n            x: startPos.x - (gridSize * 2),\r\n            y: startPos.y,\r\n          }, {\r\n            x: startPos.x - (gridSize * 3),\r\n            y: startPos.y,\r\n          }];\r\n          snake.direction = 'right';\r\n          snake.respawning = true;\r\n          snake.respawntime = Date.now() + (settings.snake.respawntime * 1000);\r\n          nextSnakes.push(snake);\r\n          continue;\r\n        }\r\n      }\r\n      // testa denna perfomance mot tidigare switch. ngon skillnad? kan tnka mig att denna r lite lngsammare d jag mste definera alla 4directions varje gng\r\n      const movement = {\r\n        up: {\r\n          x: snake.body[0].x,\r\n          y: teleportSnakes && (snake.body[0].y === 0) ? canvas.height - gridSize : snake.body[0].y - gridSize,\r\n        },\r\n        down: {\r\n          x: snake.body[0].x,\r\n          y: teleportSnakes && (snake.body[0].y >= canvas.height - gridSize) ? 0 : snake.body[0].y + gridSize,\r\n        },\r\n        right: {\r\n          x: teleportSnakes && (snake.body[0].x >= canvas.width - gridSize) ? 0 : snake.body[0].x + gridSize,\r\n          y: snake.body[0].y,\r\n        },\r\n        left: {\r\n          x: teleportSnakes && (snake.body[0].x === 0) ? canvas.width - gridSize : snake.body[0].x - gridSize,\r\n          y: snake.body[0].y,\r\n        },\r\n      };\r\n      const nextMove = snake.moves.shift();\r\n      if (!minigameUtil.isInvalidMove(nextMove, snake.direction)) {\r\n        snake.direction = nextMove;\r\n      }\r\n\r\n      // The snake moves by adding a piece to the beginning \"this.snake.unshift(coordinate)\" and removing the last piece \"this.snake.pop()\"\r\n      // Except when it eats the food in which case there is no need to remove a piece and the added piece will make it grow\r\n      const coordinate = movement[snake.direction];\r\n      snake.body.unshift(coordinate);\r\n\r\n      const collidedFood = foods.find(f => f.active && snake.body[0].x === f.x && snake.body[0].y === f.y);\r\n\r\n      if (collidedFood) {\r\n        snake.score += 10;\r\n        collidedFood.active = false;\r\n      } else {\r\n        snake.body.pop();\r\n      }\r\n      nextSnakes.push(snake);\r\n    }\r\n    this.setState(state => ({\r\n      snakes: nextSnakes,\r\n      foods,\r\n      ticks: state.ticks + 1,\r\n    }));\r\n    // kan det inte blir problem hr? litar jag p att state.snakes hunnit updateras innan de ritas ut? ska jag inte skicka in det? drawSnakes(nextSNakes)\r\n    // och sen updaterar jag state eftert?\r\n    this.drawSnakes(nextSnakes);\r\n  }\r\n\r\n  drawSnakes(nextSnakes) {\r\n    const { settings, ticks } = this.state;\r\n    ctx.globalCompositeOperation = 'multiply';\r\n    ctx.strokestyle = settings.snake.border;\r\n    for (let i = 0, len = nextSnakes.length; i < len; i++) {\r\n      const snake = nextSnakes[i];\r\n      if (snake.respawning && ticks % 2 === 0) {\r\n        ctx.fillStyle = settings.canvas.background;\r\n      } else {\r\n        ctx.fillStyle = snake.color;\r\n      }\r\n      // Draw each piece\r\n\r\n      // om tv snakes r ver varandra s finns en schysst style fr det som han gick igenom p redev. dr frgerna frn bda kan blandas till en ljusare eller mrkar.\r\n      for (let j = 0, len2 = snake.body.length; j < len2; j++) {\r\n        const bodyPos = snake.body[j];\r\n        ctx.fillRect(bodyPos.x, bodyPos.y, gridSize, gridSize);\r\n        ctx.strokeRect(bodyPos.x, bodyPos.y, gridSize, gridSize);\r\n      }\r\n\r\n\r\n      // this.game.direction = this.game.nextDirection;\r\n    }\r\n    /*\r\n        jag kr rakt av p direction, verkar fungera och snabbare response d? om jag vill ha tillbaka nextdirection s ta fram denna metod och stt i snakeListenern att den ska stta nextDirection\r\n        this.setState(function (state, props) {\r\n            let snakes = state.snakes;\r\n            for (let i = 0; i < snakes.length; i++) {\r\n                snakes[i].direction = snakes[i].nextDirection;\r\n            }\r\n            return {\r\n                snakes: snakes,\r\n            };\r\n        });\r\n        */\r\n  }\r\n\r\n  generateFoods() {\r\n    const { foods } = this.state;\r\n    // fungerar detta? const och ingen kopia? blir det updaterat? risk att allt blir object istllet fr arrays? cost [foods] = this.state?\r\n    // const nextFoods = [...foods ];\r\n    for (let i = 0, len = foods.length; i < len; i++) {\r\n      let food = foods[i];\r\n      if (!food.active) {\r\n        food = this.generateFood();\r\n      }\r\n      this.drawFood(food);\r\n      foods[i] = food;\r\n    }\r\n    this.setState(() => ({\r\n      foods,\r\n    }));\r\n  }\r\n\r\n  generateFood() {\r\n    const { snakes, settings } = this.state;\r\n\r\n    const xMax = settings.canvas.width - gridSize;\r\n    const yMax = settings.canvas.height - gridSize;\r\n\r\n    const x = Math.round((Math.random() * xMax) / gridSize) * gridSize;\r\n    const y = Math.round((Math.random() * yMax) / gridSize) * gridSize;\r\n    /*\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      const snake = snakes[i];\r\n      const collision = snake.body.some(b => b.x === x && b.y === y);\r\n      if (collision) {\r\n        return this.generateFood();\r\n      }\r\n    }\r\n    */\r\n    // fungerar denna tro?\r\n    const collision = snakes.some(s => s.body.some(b => b.x === x && b.y === y));\r\n    if (collision) {\r\n      return this.generateFood();\r\n    }\r\n    return {\r\n      active: true,\r\n      x,\r\n      y,\r\n    };\r\n  }\r\n\r\n  drawFood(food) {\r\n    const { settings } = this.state;\r\n    // denna metod kallas lite vl mnga gnger?? ioptimera?\r\n    ctx.fillStyle = settings.food.background;\r\n    ctx.strokestyle = settings.food.border;\r\n\r\n    ctx.fillRect(food.x, food.y, gridSize, gridSize);\r\n    ctx.strokeRect(food.x, food.y, gridSize, gridSize);\r\n  }\r\n\r\n  detectCollisions() {\r\n    // bryt ut de olika detectcollision till purecfunctions? optiering viktigt\r\n    // ha olika modes fr krock med motstndare\r\n    // 2. krock med motstndare s hnder inget\r\n    // 3. krock med motstndare s ts motstndaren upp (head-on-head s dr bda)\r\n    // 4. korck med motstndare s dr man\r\n    // modes krock med vgg:\r\n    // 1. man dr\r\n    // 2. man kommer ut p andra sidan\r\n    // vad hnder om man fr en selfcollision sammtidigt som ngon fr en opponentcollision i den?\r\n    // mode d:\r\n    // nr man dr s fr man terstlls man till liten mask\r\n    // nr man dr s r man dd fr alltid\r\n\r\n    // Self collison\r\n    // It's impossible for the first 3 pieces of the snake to self collide so the loop starts at 4\r\n\r\n    // fixa en bttre metod fr alla snakes senare\r\n\r\n    // fundra och test som det hr r den mest effektiva lsningen? eller om jag gr ngra checks i ondan?\r\n    // jag vill nog bara gra en gemensam setState call efter den hr loopen. s alla ndringar fr t.ex. handleDeath\r\n    let { snakes } = this.state;\r\n    const { game: { minigame } } = this.props;\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      if (snakes[i].dead) {\r\n        continue;\r\n      }\r\n      if (minigameUtil.detectSelfCollision(snakes[i])) {\r\n        // vilken av dessa fungerar?\r\n        snakes[i].dead = true;\r\n        // snakes[i].dead = true;\r\n\r\n        // this.handleDeath(snake);\r\n      }\r\n      if (minigame.wallCollision && minigameUtil.detectWallCollision(snakes[i].body[0], canvas.height, canvas.width)) {\r\n        snakes[i].dead = true;\r\n      }\r\n    }\r\n\r\n    if (minigame.opponentCollision) {\r\n      // hr inne s ndrar jag om i snakes genom att dda dem som ska ddas och klyver om det ska klyvas osv. det som returneras ska vara korrekta snakes\r\n      snakes = minigameUtil.detectOpponentCollision(snakes, minigame.eatOpponents);\r\n    }\r\n    this.setState(() => ({\r\n      snakes,\r\n    }));\r\n  }\r\n\r\n  renderOverlay() {\r\n    const { ticks, snakes, winners } = this.state;\r\n    const { game } = this.props;\r\n    this.setState(() => ({\r\n      overlay: true,\r\n    }));\r\n    ctx.globalAlpha = 0.4;\r\n    ctx.textAlign = 'center';\r\n    ctx.font = '100px roboto';\r\n    ctx.fillStyle = '#000000';\r\n    if (ticks === 1) {\r\n      ctx.fillText('Click to start', canvas.width / 2, canvas.height / 2);\r\n    } else if (winners.length > 0) {\r\n      ctx.fillText('Game over', canvas.width / 2, canvas.height / 2);\r\n    } else {\r\n      ctx.fillText('Paused', canvas.width / 2, canvas.height / 2);\r\n    }\r\n    ctx.globalAlpha = 1;\r\n    ctx.font = '20px roboto';\r\n\r\n\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      const snake = snakes[i];\r\n      if (!snake.body[0]) {\r\n        continue;\r\n      }\r\n      let headX = Math.max(gridSize, snake.body[0].x);\r\n      let headY = Math.max(gridSize, snake.body[0].y);\r\n      if (headX >= canvas.width) {\r\n        headX = canvas.width - (gridSize * 2);\r\n      }\r\n      if (headY >= canvas.height) {\r\n        headY = canvas.height - (gridSize * 2);\r\n      }\r\n      const snakeName = snake.playerKeys.length === 1 ? game.players[snake.playerKeys[0]].name : snake.name;\r\n      ctx.fillStyle = snake.color;\r\n\r\n      const namePosition = {\r\n        right: { textAlign: 'center', yPos: headY - (gridSize / 5) },\r\n        left: { textAlign: 'start', yPos: headY - (gridSize / 5) },\r\n        up: { textAlign: 'start', yPos: headY - (gridSize / 5) },\r\n        down: { textAlign: 'start', yPos: headY + (gridSize * 2) },\r\n      };\r\n      ctx.textAlign = namePosition[snake.direction].textAlign;\r\n      ctx.fillText(snakeName, headX, namePosition[snake.direction].yPos);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\" id=\"snakeboard\" role=\"button\" tabIndex={0} onClick={this.togglePausGame} onKeyDown={this.togglePausGame}>\r\n        <canvas />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnake.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default Snake;\r\n","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport PropTypes from 'prop-types';\r\nimport { parseDOM, parseDOMArray } from '../../common/utils/appUtil';\r\n\r\n\r\nclass GenerateQuizForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nrOfQuestions: '10',\r\n      category: '0',\r\n      difficulty: '0',\r\n      aType: '0',\r\n\r\n    };\r\n    this.generateQuestions = this.generateQuestions.bind(this);\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  generateQuestions() {\r\n    const {\r\n      nrOfQuestions, category, difficulty, aType,\r\n    } = this.state;\r\n    const { addQuestions, showSnackbar } = this.props;\r\n    let url = 'https://opentdb.com/api.php?';\r\n    if (nrOfQuestions !== '0') {\r\n      url += `amount=${nrOfQuestions}`;\r\n    }\r\n    if (category !== '0') {\r\n      url += `&category=${category}`;\r\n    }\r\n    if (difficulty !== '0') {\r\n      url += `&difficulty=${difficulty}`;\r\n    }\r\n    if (aType !== '0') {\r\n      url += `&type=${aType}`;\r\n    }\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then((generated) => {\r\n        if (generated.response_code === 0) {\r\n          const questions = [];\r\n          for (let i = 0; i < generated.results.length; i++) {\r\n            const generatedQuestion = generated.results[i];\r\n            const question = {\r\n              question: parseDOM(generatedQuestion.question),\r\n              correctAnswers: [parseDOM(generatedQuestion.correct_answer)],\r\n              wrongAnswers: parseDOMArray(generatedQuestion.incorrect_answers),\r\n              qType: 'text',\r\n              aType: generatedQuestion.type,\r\n              category: generatedQuestion.category,\r\n              difficulty: generatedQuestion.difficulty,\r\n            };\r\n            questions.push(question);\r\n          }\r\n          addQuestions(questions);\r\n        } else {\r\n          const snack = {\r\n            variant: 'error',\r\n            message: `Could not generate questions( code: ${generated.response_code})`,\r\n          };\r\n          showSnackbar(snack);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    const {\r\n      nrOfQuestions, category, difficulty, aType,\r\n    } = this.state;\r\n    return (\r\n      <div>\r\n        <Grid container>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <TextField\r\n                label=\"Number of questions\"\r\n                name=\"nrOfQuestions\"\r\n                value={nrOfQuestions}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('nrOfQuestions')}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"category\">Category</InputLabel>\r\n              <Select\r\n                value={category || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"category\"\r\n                inputProps={{\r\n                  id: 'category',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any category</MenuItem>\r\n                <MenuItem value=\"9\">General Knowledge</MenuItem>\r\n                <MenuItem value=\"10\">Entertainment: Books</MenuItem>\r\n                <MenuItem value=\"11\">Entertainment: Film</MenuItem>\r\n                <MenuItem value=\"12\">Entertainment: Music</MenuItem>\r\n                <MenuItem value=\"13\">Entertainment: Musicals and Theatres</MenuItem>\r\n                <MenuItem value=\"14\">Entertainment: Television</MenuItem>\r\n                <MenuItem value=\"15\">Entertainment: Video Games</MenuItem>\r\n                <MenuItem value=\"16\">Entertainment: Board Games</MenuItem>\r\n                <MenuItem value=\"17\">Science and Nature</MenuItem>\r\n                <MenuItem value=\"18\">Science: Computers</MenuItem>\r\n                <MenuItem value=\"19\">Science: Mathematics</MenuItem>\r\n                <MenuItem value=\"20\">Mythology</MenuItem>\r\n                <MenuItem value=\"21\">Sports</MenuItem>\r\n                <MenuItem value=\"22\">Geography</MenuItem>\r\n                <MenuItem value=\"23\">History</MenuItem>\r\n                <MenuItem value=\"24\">Politics</MenuItem>\r\n                <MenuItem value=\"25\">Art</MenuItem>\r\n                <MenuItem value=\"26\">Celebrities</MenuItem>\r\n                <MenuItem value=\"27\">Animals</MenuItem>\r\n                <MenuItem value=\"28\">Vehicles</MenuItem>\r\n                <MenuItem value=\"29\">Entertainment: Comics</MenuItem>\r\n                <MenuItem value=\"30\">Science: Gadgets</MenuItem>\r\n                <MenuItem value=\"31\">Entertainment: Japanese Anime and Manga</MenuItem>\r\n                <MenuItem value=\"32\">Entertainment: Cartoon and Animations</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"difficulty\">Difficulty</InputLabel>\r\n              <Select\r\n                value={difficulty || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"difficulty\"\r\n                inputProps={{\r\n                  id: 'difficulty',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any difficulty</MenuItem>\r\n                <MenuItem value=\"easy\">Easy</MenuItem>\r\n                <MenuItem value=\"medium\">Medium</MenuItem>\r\n                <MenuItem value=\"hard\">Hard</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"aType\">Answer type</InputLabel>\r\n              <Select\r\n                value={aType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"aType\"\r\n                inputProps={{\r\n                  id: 'aType',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any type</MenuItem>\r\n                <MenuItem value=\"multiple\">Multiple choice</MenuItem>\r\n                <MenuItem value=\"boolean\">True/False</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n\r\n            <Button onClick={this.generateQuestions} variant=\"contained\">Generate</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGenerateQuizForm.propTypes = {\r\n  addQuestions: PropTypes.func.isRequired,\r\n  showSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default GenerateQuizForm;\r\n","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport PropTypes from 'prop-types';\r\nimport GenerateQuizForm from './GenerateQuizForm';\r\n\r\nclass QuestionForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      question: '',\r\n      correctAnswer: '',\r\n      wrongAnswerOne: '',\r\n      wrongAnswerTwo: '',\r\n      wrongAnswerThree: '',\r\n      timelimit: '10',\r\n      qType: 'text',\r\n      aType: 'multiple',\r\n      generateQuestions: true,\r\n\r\n    };\r\n    this.sendQuestion = this.sendQuestion.bind(this);\r\n    this.toggleGenerateQuestion = this.toggleGenerateQuestion.bind(this);\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleTrueFalse = (event) => {\r\n    const answer = event.target.value;\r\n    this.setState({\r\n      correctAnswer: answer,\r\n      wrongAnswerOne: answer === 'true' ? 'false' : 'true',\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  sendQuestion() {\r\n    const {\r\n      question, correctAnswer, wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree, timelimit, qType, aType,\r\n    } = this.state;\r\n    const { addQuestion } = this.props;\r\n    const q = {\r\n      question,\r\n      correctAnswers: [correctAnswer],\r\n      wrongAnswers: [wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree],\r\n      timelimit,\r\n      qType,\r\n      aType,\r\n    };\r\n    this.setState({\r\n      question: '',\r\n      correctAnswer: '',\r\n      wrongAnswerOne: '',\r\n      wrongAnswerTwo: '',\r\n      wrongAnswerThree: '',\r\n    });\r\n    addQuestion(q);\r\n  }\r\n\r\n  toggleGenerateQuestion() {\r\n    const { generateQuestions } = this.state;\r\n    this.setState({\r\n      generateQuestions: !generateQuestions,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      question, correctAnswer, wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree, timelimit, qType, aType, generateQuestions,\r\n    } = this.state;\r\n    const { addQuestions, showSnackbar, isTimelimit } = this.props;\r\n    if (generateQuestions) {\r\n      return (\r\n        <div>\r\n          <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Custom questions</Button>\r\n          <Button onClick={this.toggleGenerateQuestion} disabled variant=\"contained\">Auto generate questions</Button>\r\n          <GenerateQuizForm addQuestions={addQuestions} showSnackbar={showSnackbar} />\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <Grid container>\r\n          <Grid item xs={12}>\r\n            <Button onClick={this.toggleGenerateQuestion} disabled variant=\"contained\">Custom questions</Button>\r\n            <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Auto generate questions</Button>\r\n          </Grid>\r\n          <Grid item xs={12} md={12}>\r\n            <FormControl required fullWidth>\r\n              <InputLabel htmlFor=\"qtype-required\">Question type</InputLabel>\r\n              <Select\r\n                value={qType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"qType\"\r\n                inputProps={{\r\n                  id: 'qtype-required',\r\n                }}\r\n              >\r\n                <MenuItem value=\"text\">Text</MenuItem>\r\n                <MenuItem value=\"image\">Image</MenuItem>\r\n                <MenuItem value=\"video\">Video</MenuItem>\r\n\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={12}>\r\n            <FormControl required fullWidth>\r\n              <InputLabel htmlFor=\"aType-required\">Answer type</InputLabel>\r\n              <Select\r\n                value={aType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"aType\"\r\n                inputProps={{\r\n                  id: 'aType-required',\r\n                }}\r\n              >\r\n                <MenuItem value=\"boolean\">True/false</MenuItem>\r\n                <MenuItem value=\"player\">Player</MenuItem>\r\n                <MenuItem value=\"multiple\">Mulitichoice</MenuItem>\r\n                <MenuItem value=\"free\">Free text</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <FormControl fullWidth>\r\n              <TextField\r\n                label=\"Question\"\r\n                name=\"question\"\r\n                value={question}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('question')}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          {aType === 'multiple'\r\n                        && (\r\n                        <Grid container>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Correct answer\"\r\n                                name=\"correctAnswer\"\r\n                                margin=\"normal\"\r\n                                value={correctAnswer}\r\n                                onChange={this.handleChange('correctAnswer')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerOne\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerOne}\r\n                                onChange={this.handleChange('wrongAnswerOne')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerTwo\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerTwo}\r\n                                onChange={this.handleChange('wrongAnswerTwo')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerThree\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerThree}\r\n                                onChange={this.handleChange('wrongAnswerThree')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                        </Grid>\r\n                        )\r\n                    }\r\n          {aType === 'boolean'\r\n                        && (\r\n                        <div>\r\n                          <Grid item xs={12}>\r\n\r\n                            <FormControl component=\"fieldset\">\r\n                              <FormLabel component=\"legend\">Answer</FormLabel>\r\n                              <RadioGroup\r\n                                aria-label=\"answer\"\r\n                                name=\"correctAnswer\"\r\n                                value={correctAnswer}\r\n                                onChange={this.handleTrueFalse}\r\n                              >\r\n                                <FormControlLabel value=\"true\" control={<Radio />} label=\"True\" />\r\n                                <FormControlLabel value=\"false\" control={<Radio />} label=\"False\" />\r\n                              </RadioGroup>\r\n                            </FormControl>\r\n                          </Grid>\r\n                        </div>\r\n                        )\r\n                    }\r\n          {isTimelimit\r\n                        && (\r\n                        <Grid item xs={12}>\r\n\r\n                          <FormControl>\r\n                            <TextField\r\n                              label=\"Time limit\"\r\n                              name=\"timelimit\"\r\n                              type=\"number\"\r\n                              value={timelimit}\r\n                              margin=\"normal\"\r\n                              onChange={this.handleChange('timelimit')}\r\n                            />\r\n                          </FormControl>\r\n                        </Grid>\r\n                        )\r\n                    }\r\n          <Grid item xs={12}>\r\n            <Button onClick={this.sendQuestion} variant=\"contained\">Add question</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nQuestionForm.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  addQuestion: PropTypes.func.isRequired,\r\n  addQuestions: PropTypes.func.isRequired,\r\n  isTimelimit: PropTypes.bool.isRequired,\r\n};\r\nexport default QuestionForm;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { Typography } from '@material-ui/core';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport PropTypes from 'prop-types';\r\nimport Question from './Question';\r\nimport QuestionForm from './QuestionForm';\r\nimport { calculateDefaultTimeLimit } from '../../common/utils/appUtil';\r\n\r\n\r\nclass CreateQuiz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'quiz',\r\n      gamemode: 'normal',\r\n      timelimit: true,\r\n      timescore: false,\r\n      questions: [],\r\n      gamePass: '',\r\n    };\r\n    this.addQuestion = this.addQuestion.bind(this);\r\n    this.addQuestions = this.addQuestions.bind(this);\r\n    this.deleteQuestion = this.deleteQuestion.bind(this);\r\n    this.createQuiz = this.createQuiz.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    addQuestion(q) {\r\n      const { questions, timelimit } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      const question = q;\r\n      if (questions.length === 0) {\r\n        question.id = 1;\r\n      } else {\r\n        // rknar ut ett id som det nuvarande hgsta id+1. Kan d anvnda id bde som unik identifierare och som index\r\n        question.id = Math.max(...questions.map(o => o.id)) + 1;\r\n      }\r\n      if (timelimit && !question.timelimit) {\r\n        question.timelimit = calculateDefaultTimeLimit(question);\r\n      }\r\n      questions.push(question);\r\n      this.setState({\r\n        questions,\r\n      });\r\n      const snack = {\r\n        variant: 'success',\r\n        message: 'Added question',\r\n      };\r\n      showSnackbar(snack);\r\n    }\r\n\r\n    addQuestions(qs) {\r\n      const { questions, timelimit } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      for (let i = 0; i < qs.length; i++) {\r\n        const question = qs[i];\r\n        if (questions.length === 0) {\r\n          question.id = 1;\r\n        } else {\r\n          question.id = Math.max(...questions.map(o => o.id)) + 1;\r\n        }\r\n        if (timelimit && !question.timelimit) {\r\n          question.timelimit = calculateDefaultTimeLimit(question);\r\n        }\r\n        questions.push(question);\r\n      }\r\n      this.setState({\r\n        questions,\r\n      });\r\n      const snack = {\r\n        variant: 'success',\r\n        message: 'Added questions',\r\n      };\r\n      showSnackbar(snack);\r\n    }\r\n\r\n    deleteQuestion(question) {\r\n      const { questions } = this.state;\r\n      const index = questions.map(e => e.id).indexOf(question.id);\r\n      questions.splice(index, 1);\r\n      this.setState({\r\n        questions,\r\n      });\r\n    }\r\n\r\n    createQuiz() {\r\n      const { createQuiz } = this.props;\r\n      const {\r\n        timelimit, gamePass, gametype, title, timescore, questions,\r\n      } = this.state;\r\n      const game = {\r\n        password: gamePass,\r\n        gametype,\r\n        tile: title,\r\n        quiz: {\r\n          gamemode: 'normal',\r\n          timelimit,\r\n          timescore,\r\n          questions,\r\n        },\r\n      };\r\n      createQuiz(game);\r\n    }\r\n\r\n    render() {\r\n      const {\r\n        timelimit, gamePass, gametype, title, timescore, gamemode, questions,\r\n      } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          <Grid container spacing={8}>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New quiz</Typography>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <form autoComplete=\"off\">\r\n                <Grid item xs={12}>\r\n                  <FormControl required fullWidth>\r\n                    <InputLabel htmlFor=\"gametype-required\">Gametype</InputLabel>\r\n                    <Select\r\n                      value={gametype || ''}\r\n                      onChange={this.handleChangeSelect}\r\n                      name=\"gametype\"\r\n                      inputProps={{\r\n                        id: 'gametype-required',\r\n                      }}\r\n                    >\r\n                      <MenuItem value=\"quiz\">Quiz</MenuItem>\r\n                      <MenuItem value=\"survey\">Survey</MenuItem>\r\n                      <MenuItem value=\"discussion\">Discussion</MenuItem>\r\n                      <MenuItem value=\"minigame\">Mini game</MenuItem>\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl required fullWidth>\r\n                    <InputLabel htmlFor=\"gametype-required\">Gamemode</InputLabel>\r\n                    <Select\r\n                      value={gamemode || ''}\r\n                      onChange={this.handleChangeSelect}\r\n                      name=\"gamemode\"\r\n                      inputProps={{\r\n                        id: 'gamemode-required',\r\n                      }}\r\n                    >\r\n                      <MenuItem value=\"normal\">Normal</MenuItem>\r\n                      <MenuItem value=\"wild\">Wild</MenuItem>\r\n\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl component=\"fieldset\">\r\n                    <FormLabel component=\"legend\">Game options</FormLabel>\r\n                    <FormGroup>\r\n                      <FormControlLabel\r\n                        control={(\r\n                          <Switch\r\n                            checked={timelimit}\r\n                            onChange={this.handleChangeBool('timelimit')}\r\n                            value=\"timelimit\"\r\n                          />\r\n)}\r\n                        label=\"Time limited questions\"\r\n                      />\r\n                      <FormControlLabel\r\n                        control={(\r\n                          <Switch\r\n                            checked={timescore}\r\n                            onChange={this.handleChangeBool('timescore')}\r\n                            value=\"timescore\"\r\n                          />\r\n)}\r\n                        label=\"Time based score\"\r\n                      />\r\n                    </FormGroup>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl>\r\n                    <TextField\r\n                      label=\"Title\"\r\n                      name=\"title\"\r\n                      value={title}\r\n                      margin=\"normal\"\r\n                      onChange={this.handleChange('title')}\r\n                    />\r\n                  </FormControl>\r\n                  <FormControl>\r\n                    <TextField\r\n                      label=\"Password\"\r\n                      type=\"password\"\r\n                      name=\"gamePass\"\r\n                      margin=\"normal\"\r\n                      value={gamePass}\r\n                      onChange={this.handleChange('gamePass')}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button onClick={this.createQuiz} variant=\"contained\">Create quiz</Button>\r\n                </Grid>\r\n              </form>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <QuestionForm addQuestions={this.addQuestions} addQuestion={this.addQuestion} isTimelimit={!!timelimit} showSnackbar={showSnackbar} />\r\n            </Grid>\r\n            <Grid container>\r\n              {questions.map((question, index) => (\r\n                <Grid item xs={12} md={6} key={question.id}>\r\n                  <Question question={question} transitionDelay={index} deleteQuestion={this.deleteQuestion} />\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateQuiz.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  createQuiz: PropTypes.func.isRequired,\r\n};\r\nexport default CreateQuiz;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nclass CreateTetris extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'tetris',\r\n      gamemode: 'survival',\r\n      password: '',\r\n    };\r\n\r\n    this.validateGame = this.validateGame.bind(this);\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    createGame() {\r\n      const { createGame } = this.props;\r\n      const {\r\n        password, gametype, title, gamemode,\r\n      } = this.state;\r\n      const minigame = {\r\n        gamemode,\r\n      };\r\n      const game = {\r\n        password,\r\n        gametype,\r\n        title,\r\n        minigame,\r\n      };\r\n      createGame(game);\r\n    }\r\n\r\n    render() {\r\n      const {\r\n        password, title, gamemode,\r\n      } = this.state;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          <Grid container spacing={8}>\r\n            <form autoComplete=\"off\">\r\n              <Grid item xs={4}>\r\n                <FormControl required>\r\n                  <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                  <Select\r\n                    value={gamemode || ''}\r\n                    onChange={this.handleChangeSelect}\r\n                    name=\"gamemode\"\r\n                    inputProps={{\r\n                      id: 'gamemode-required',\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"survival\">Survival</MenuItem>\r\n                    <MenuItem value=\"race\">Race</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    margin=\"normal\"\r\n                    onChange={this.handleChange('title')}\r\n                  />\r\n                </FormControl>\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    margin=\"normal\"\r\n                    value={password}\r\n                    onChange={this.handleChange('password')}\r\n                  />\r\n                </FormControl>\r\n\r\n                <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n              </Grid>\r\n            </form>\r\n\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateTetris.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateTetris;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass CreateSnake extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'snake',\r\n      gamemode: 'survival',\r\n      racetarget: 20,\r\n      opponentCollision: false,\r\n      eatOpponents: false,\r\n      wallCollision: true,\r\n      password: '',\r\n      difficulty: '300',\r\n    };\r\n\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    createGame() {\r\n      const { createGame } = this.props;\r\n      const {\r\n        password, gametype, title, gamemode, wallCollision,\r\n        opponentCollision, eatOpponents, racetarget, difficulty,\r\n      } = this.state;\r\n      const minigame = {\r\n        gamemode,\r\n        wallCollision,\r\n        eatOpponents,\r\n        opponentCollision,\r\n        racetarget,\r\n        difficulty,\r\n      };\r\n      const game = {\r\n        password,\r\n        gametype,\r\n        title,\r\n        minigame,\r\n      };\r\n      createGame(game);\r\n    }\r\n\r\n    /*\r\n    validateGame(game) {\r\n      // validera lsenord r tillrckligt starkt hr\r\n      //eller direkt efter input om det finns ngon smart lsning.\r\n      // kolla p gametype hur ha en secifik validering fr varje type\r\n      return true;\r\n    }\r\n\r\n    clearForm() {\r\n\r\n    }\r\n*/\r\n    render() {\r\n      const {\r\n        password, title, gamemode, wallCollision,\r\n        opponentCollision, eatOpponents, racetarget, difficulty,\r\n      } = this.state;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          <Grid container spacing={24}>\r\n            <form autoComplete=\"off\">\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"h4\">New Snake game</Typography>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <FormControl required fullWidth>\r\n                  <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                  <Select\r\n                    value={gamemode || ''}\r\n                    fullWidth\r\n                    onChange={this.handleChangeSelect}\r\n                    name=\"gamemode\"\r\n                    inputProps={{\r\n                      id: 'gamemode-required',\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"survival\">Survival</MenuItem>\r\n                    <MenuItem value=\"race\">Race</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <FormControl required fullWidth>\r\n                  <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n                  <Select\r\n                    value={difficulty || ''}\r\n                    fullWidth\r\n                    onChange={this.handleChangeSelect}\r\n                    name=\"difficulty\"\r\n                    inputProps={{\r\n                      id: 'difficulty-required',\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"500\">Easy</MenuItem>\r\n                    <MenuItem value=\"300\">Medium</MenuItem>\r\n                    <MenuItem value=\"100\">Hard</MenuItem>\r\n                    <MenuItem value=\"75\">Pro</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n\r\n                {gamemode === 'race'\r\n                                && (\r\n                                <FormControl>\r\n                                  <TextField\r\n                                    label=\"Snake length\"\r\n                                    name=\"racetarget\"\r\n                                    type=\"number\"\r\n                                    value={racetarget}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('racetarget')}\r\n                                  />\r\n                                </FormControl>\r\n                                )\r\n                            }\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <FormControl component=\"fieldset\">\r\n                  <FormControlLabel\r\n                    control={(\r\n                      <Switch\r\n                        checked={wallCollision}\r\n                        onChange={this.handleChangeBool('wallCollision')}\r\n                        value=\"wallCollision\"\r\n                      />\r\n                    )}\r\n                    label=\"Wall collisions\"\r\n                  />\r\n                </FormControl>\r\n\r\n                <FormControl component=\"fieldset\">\r\n                  <FormControlLabel\r\n                    control={(\r\n                      <Switch\r\n                        checked={opponentCollision}\r\n                        onChange={this.handleChangeBool('opponentCollision')}\r\n                        value=\"opponentCollision\"\r\n                      />\r\n                    )}\r\n                    label=\"Opponent collisions\"\r\n                  />\r\n                </FormControl>\r\n                <FormControl component=\"fieldset\">\r\n                  <FormControlLabel\r\n                    control={(\r\n                      <Switch\r\n                        checked={opponentCollision && eatOpponents}\r\n                        disabled={!opponentCollision}\r\n                        onChange={this.handleChangeBool('eatOpponents')}\r\n                        value=\"eatOpponents\"\r\n                      />\r\n                    )}\r\n                    label=\"Eat opponent on collision\"\r\n                  />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    margin=\"normal\"\r\n                    onChange={this.handleChange('title')}\r\n                  />\r\n                </FormControl>\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    margin=\"normal\"\r\n                    value={password}\r\n                    onChange={this.handleChange('password')}\r\n                  />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n              </Grid>\r\n            </form>\r\n\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateSnake.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateSnake;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Typography, Card,\r\n} from '@material-ui/core';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CreateTetris from './CreateTetris';\r\nimport CreateSnake from './CreateSnake';\r\n\r\nclass CreateMinigame extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      gametype: '',\r\n    };\r\n  }\r\n\r\n    setGameType = name => (event) => {\r\n      this.setState({ gametype: name });\r\n    };\r\n\r\n    render() {\r\n      const { createGame } = this.props;\r\n      const { gametype } = this.state;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          {!gametype && (\r\n\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('snake')}>\r\n                <CardHeader title=\"Snake\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Create a classic game of snake or change the modes to fit your audience</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('tetris')}>\r\n                <CardHeader title=\"Tetris\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Game is not available yet</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n          )}\r\n          {gametype === 'snake' && <CreateSnake createGame={createGame} />}\r\n          {gametype === 'tetris' && <CreateTetris createGame={createGame} />}\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateMinigame.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateMinigame;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography, Card } from '@material-ui/core';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport CreateQuiz from '../quiz/create/CreateQuiz';\r\nimport { fire } from '../../base';\r\nimport CreateMinigame from '../minigame/create/CreateMinigame';\r\nimport { generateGameId } from '../common/utils/appUtil';\r\n\r\nclass Create extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      gametype: '',\r\n      gameId: '',\r\n    };\r\n    this.createGame = this.createGame.bind(this);\r\n    // this.validateGame = this.validateGame.bind(this);\r\n  }\r\n\r\n    setGameType = name => () => {\r\n      this.setState({ gametype: name });\r\n    };\r\n\r\n    createGame(g) {\r\n      const game = g;\r\n      game.gameId = generateGameId();\r\n      game.created = Date.now();\r\n      game.status = 'CREATED';\r\n      game.phase = 'setup';\r\n\r\n      const that = this;\r\n      // game push f ett id.\r\n      const gameRef = fire.database().ref('/games').push();\r\n      game.key = gameRef.key;\r\n      gameRef.set(game, (error) => {\r\n        if (error) {\r\n          that.setState({\r\n            errorText: `Error: ${error}`,\r\n          });\r\n          const snack = {\r\n            variant: 'error',\r\n            message: 'Unexpected internal error',\r\n          };\r\n          that.props.showSnackbar(snack);\r\n        } else {\r\n          const snack = {\r\n            variant: 'success',\r\n            message: 'Successfully created!',\r\n          };\r\n          that.props.showSnackbar(snack);\r\n          that.setState({\r\n            gameId: game.gameId,\r\n            gametype: 'done',\r\n          });\r\n          localStorage.setItem('RecentGameId', game.gameId);\r\n\r\n          // show gameid and password\r\n          // show button to start game / navigate to host\r\n        }\r\n      });\r\n    }\r\n\r\n    render() {\r\n      const { gametype, gameId } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          {!gametype && (\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('quiz')}>\r\n                <CardHeader title=\"Quiz\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Create your own quiz or generate one fast and easy</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('minigame')}>\r\n                <CardHeader title=\"Mini Game\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Create a game to play just for fun or team building purposes</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('survey')}>\r\n                <CardHeader title=\"Survey\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Survey your audience</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType('discussion')}>\r\n                <CardHeader title=\"Discussion\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Create a discussion on a sppecified topic</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n          )}\r\n          {gametype === 'quiz' && <CreateQuiz createQuiz={this.createGame} showSnackbar={showSnackbar} />}\r\n          {gametype === 'minigame' && <CreateMinigame createGame={this.createGame} showSnackbar={showSnackbar} />}\r\n          {gametype === 'done'\r\n                    && (\r\n                    <div>\r\n                      <Typography variant=\"h2\">\r\n                        <span>Created game ID: </span>\r\n                        {' '}\r\n                        <span className=\"dynamic-text\">{gameId}</span>\r\n                      </Typography>\r\n                      <Link to=\"/host\">Host game</Link>\r\n                    </div>\r\n                    )\r\n                }\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreate.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default Create;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Switch from '@material-ui/core/Switch';\r\nclass PhaseSetup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            surveyPlayers: false,\r\n            answerStreak: true,\r\n            nameGenerator: false,\r\n            remoteMode: false,\r\n            useTeams: false,\r\n            randomizeQuestionOrder: false,\r\n            autoPlayQuestions: false,\r\n\r\n        };\r\n        this.startGame = this.startGame.bind(this);\r\n        this.createTeamGame = this.createTeamGame.bind(this);\r\n        this.createClassicGame = this.createClassicGame.bind(this);\r\n\r\n\r\n    }\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    createTeamGame() {\r\n        this.startGame(true);\r\n    }\r\n    createClassicGame() {\r\n        this.startGame(false);\r\n    }\r\n    startGame(teamMode) {\r\n        let game = {};\r\n        let quiz = this.props.game.quiz;\r\n        quiz.surveyPlayers = this.state.surveyPlayers;\r\n        quiz.answerStreak = this.state.answerStreak;\r\n        quiz.nameGenerator = this.state.nameGenerator;\r\n        quiz.remoteMode = this.state.remoteMode;\r\n        quiz.useTeams = teamMode;\r\n        quiz.autoPlayQuestions = this.state.autoPlayQuestions;\r\n        quiz.randomizeQuestionOrder = this.state.randomizeQuestionOrder;\r\n        quiz.currentQuestion = 0;\r\n\r\n        game.quiz = quiz;\r\n        game.phase = \"connection\";\r\n        game.status = \"IN_PROGRESS\";\r\n        this.props.gameFunc.update(game);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h4\">Game Settings</Typography>\r\n                <Button onClick={this.createClassicGame} variant=\"contained\">Classic</Button>\r\n                <Button onClick={this.createTeamGame} variant=\"contained\">Team mode</Button>\r\n\r\n                <FormControl component=\"fieldset\">\r\n                    <FormGroup>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.nameGenerator}\r\n                                    onChange={this.handleChangeBool('nameGenerator')}\r\n                                    value=\"nameGenerator\"\r\n                                />\r\n                            }\r\n                            label=\"Generate names for players\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.remoteMode}\r\n                                    onChange={this.handleChangeBool('remoteMode')}\r\n                                    value=\"remoteMode\"\r\n                                />\r\n                            }\r\n                            label=\"Remote playmode\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.answerStreak}\r\n                                    onChange={this.handleChangeBool('answerStreak')}\r\n                                    value=\"answerStreak\"\r\n                                />\r\n                            }\r\n                            label=\"Use answer scorestreak\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.surveyPlayers}\r\n                                    onChange={this.handleChangeBool('surveyPlayers')}\r\n                                    value=\"surveyPlayers\"\r\n                                />\r\n                            }\r\n                            label=\"Survey players after game\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.randomizeQuestionOrder}\r\n                                    onChange={this.handleChangeBool('randomizeQuestionOrder')}\r\n                                    value=\"randomizeQuestionOrder\"\r\n                                />\r\n                            }\r\n                            label=\"Randomize question order\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.autoPlayQuestions}\r\n                                    onChange={this.handleChangeBool('autoPlayQuestions')}\r\n                                    value=\"autoPlayQuestions\"\r\n                                />\r\n                            }\r\n                            label=\"Auto play questions\"\r\n                        />\r\n\r\n                    </FormGroup>\r\n                </FormControl>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseSetup;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  nextPhase() {\r\n    this.props.gameFunc.update({ phase: 'starting' });\r\n  }\r\n\r\n  // add function to kick player\r\n  render() {\r\n    let players = this.props.game.players;\r\n    if (!players) {\r\n      players = [];\r\n    } else {\r\n      players = Object.values(players);\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">\r\n            <span>Join game with Game ID: </span>\r\n            <span className=\"dynamic-text\">{this.props.game.gameId}</span>\r\n\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">{this.props.game.title}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid container>\r\n            {players.map((player, index) => (\r\n              <Grid key={index} item xs={3}>\r\n                <Typography paragraph variant=\"body1\" className=\"dynamic-text\">{player.name}</Typography>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Button onClick={this.nextPhase} variant=\"contained\">Start</Button>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default PhaseConnection;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './CountdownAnimation.scss';\r\n\r\nclass CountdownAnimation extends PureComponent {\r\n  // jag skulle kunna lgga en counter hr som rendrerar null efter ngra sekunder\r\n  // s att r skert att den inte hinner loopa\r\n  render() {\r\n    const { speed } = this.props;\r\n    if (speed === 'slow') {\r\n      return (\r\n        <div className=\"demo_slow\">\r\n          <div className=\"demo_slow__colored-blocks\">\r\n            <div className=\"demo_slow__colored-blocks-rotater\">\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n            </div>\r\n            <div className=\"demo_slow__colored-blocks-inner\" />\r\n            <div className=\"demo_slow__text\">Ready</div>\r\n          </div>\r\n          <div className=\"demo_slow__inner\">\r\n            <svg className=\"demo_slow__numbers\" viewBox=\"0 0 100 100\">\r\n              <defs>\r\n                <path className=\"demo_slow__num-path-1\" d=\"M40,28 55,22 55,78\" />\r\n                <path className=\"demo_slow__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\" />\r\n                <path className=\"demo_slow__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\" />\r\n                <path className=\"demo_slow__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\" />\r\n                <path className=\"demo_slow__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\" />\r\n              </defs>\r\n              <path\r\n                className=\"demo_slow__numbers-path\"\r\n                d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r\n          l0,-61 L40,28\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"demo\">\r\n        <div className=\"demo__colored-blocks\">\r\n          <div className=\"demo__colored-blocks-rotater\">\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n          </div>\r\n          <div className=\"demo__colored-blocks-inner\" />\r\n          <div className=\"demo__text\">Ready</div>\r\n        </div>\r\n        <div className=\"demo__inner\">\r\n          <svg className=\"demo__numbers\" viewBox=\"0 0 100 100\">\r\n            <defs>\r\n              <path className=\"demo__num-path-1\" d=\"M40,28 55,22 55,78\" />\r\n              <path className=\"demo__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\" />\r\n              <path className=\"demo__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\" />\r\n              <path className=\"demo__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\" />\r\n              <path className=\"demo__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\" />\r\n            </defs>\r\n            <path\r\n              className=\"demo__numbers-path\"\r\n              d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r\n          l0,-61 L40,28\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCountdownAnimation.propTypes = {\r\n  speed: PropTypes.string.isRequired,\r\n};\r\nexport default CountdownAnimation;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"awaiting_question\" });\r\n    }\r\n    //p componentDidMount s starta en timer eller liknande. koppla timern till ngot visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //nr timern r klar s updateras phase till nsta\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h2\">Starting quiz</Typography>\r\n                <CountdownAnimation speed=\"slow\" />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"show_question\" });\r\n    }\r\n    //p componentDidMount s starta en timer eller liknande. koppla timern till ngot visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //nr timern r klar s updateras phase till nsta\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n            <Typography variant=\"h2\">Loading next question</Typography>\r\n                <CountdownAnimation speed=\"slow\"/>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      question: '',\r\n    };\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question });\r\n    const phaseTime = 3000 + (question.question.length * 20);\r\n    setTimeout(this.nextPhase, phaseTime);\r\n  }\r\n\r\n  nextPhase() {\r\n    let answers = [];\r\n    if (this.state.question.aType === 'multiple') {\r\n      answers = this.state.question.wrongAnswers.concat(this.state.question.correctAnswers);\r\n      answers = this.shuffle(answers);\r\n    } else if (this.state.question.aType === 'boolean') {\r\n      answers = ['True', 'False'];\r\n    }\r\n    if (answers.length) {\r\n      const game = {};\r\n      game.phase = 'answer';\r\n      game.quiz = this.props.game.quiz;\r\n      game.quiz.questions[game.quiz.currentQuestion].answers = answers;\r\n      this.props.gameFunc.update(game);\r\n    } else {\r\n      this.props.gameFunc.update({ phase: 'answer' });\r\n    }\r\n  }\r\n\r\n  shuffle(array) {\r\n    let counter = array.length;\r\n    while (counter > 0) {\r\n      const index = Math.floor(Math.random() * counter);\r\n      counter--;\r\n      const temp = array[counter];\r\n      array[counter] = array[index];\r\n      array[index] = temp;\r\n    }\r\n    return array;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n          <div className=\"phase-container\">\r\n              <div className=\"quiz-top-section\">\r\n                  <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n\r\n                </div>\r\n              <div className=\"quiz-middle-section\" />\r\n              <div className=\"quiz-bottom-section\" />\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseShowQuestion;\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        paddingTop: theme.spacing.unit * 2,\r\n        paddingBottom: theme.spacing.unit * 2,\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    playAnswer: {\r\n        width: '50vw',\r\n        height: '100%',\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    icon: {\r\n        float: 'left',\r\n        fontSize: '28',\r\n        color: 'white',\r\n        marginLeft: '10px'\r\n    },\r\n    answer: {\r\n        fontSize: '24',\r\n        color: 'white',\r\n    }\r\n});\r\n\r\nconst answerStyles = [{\r\n    icon: <CakeIcon />,\r\n    color: '#80DEEA',\r\n},\r\n{\r\n    icon: <ExtensionIcon />,\r\n    color: '#EF9A9A',\r\n},\r\n{\r\n    icon: <FavoriteIcon />,\r\n    color: '#CE93D8',\r\n},\r\n{\r\n    icon: <StarIcon />,\r\n    color: '#C5E1A5'\r\n}];\r\n\r\nclass AnswerOption extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        /*\r\n                        p play answer vill jag inte skriva texten utan bara ha rtt frg + symbol. play answer ska vara strre. men det kanske jag kan fixa via cssklass i playanswer.\r\n                        p host answer har jag rtt frg symbol + text\r\n        \r\n                        symboler icons: hjrta,stjrna,blomma (filter_vintage), berg, pusselbit(extension), cloud\r\n                        trekant, fyrkant, cirkel,\r\n                        1,2,3,4 (finns som icon)\r\n                        a,b,c,d (finns inte om icon)\r\n                        vlj 4 coola frger, grn rd bl gul?\r\n                        tnk p att det kan vara tv alternativ\r\n        */\r\n    }\r\n\r\n    render() {\r\n        let design = answerStyles[this.props.index];\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className=\"full-height\">\r\n                {this.props.answerQuestion && <Paper onClick={() => { this.props.answerQuestion(this.props.answer) }} className={classes.playAnswer} style={{ backgroundColor: design.color }}>\r\n                    <div className=\"button-answer-icon\">{design.icon}</div>\r\n                    {this.props.remoteMode && <div className={classes.answer}>{this.props.answer}</div>}\r\n                </Paper>\r\n                }\r\n                {!this.props.answerQuestion && <Paper className={classes.paper} style={{ backgroundColor: design.color }}>\r\n                    <div className={classes.icon}>{design.icon}</div>\r\n                    <div className={classes.answer}>{this.props.answer}</div>\r\n                </Paper>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerOption);","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n  text: {\r\n    marginBottom: '-200px',\r\n    fontSize: '86px',\r\n    paddingTop: '160px',\r\n  },\r\n  circle: {\r\n    color: '#6JpDK4',\r\n\r\n  },\r\n});\r\nclass Timer extends PureComponent {\r\n  render() {\r\n    const {\r\n      classes, text, value, startValue,\r\n    } = this.props;\r\n    let currentCount = value === null ? startValue : value;\r\n    const start = startValue < 1 ? 0 : startValue;\r\n\r\n    if (currentCount < 0) {\r\n      currentCount = 0;\r\n    }\r\n    const completed = currentCount / start;\r\n\r\n    return (\r\n      <div className={classes.container}>\r\n        <Typography variant=\"caption\" className={classes.text}>{text}</Typography>\r\n        <CircularProgress\r\n          className={classes.circle}\r\n          classes={{\r\n            colorSecondary: classes.circle,\r\n          }}\r\n          variant=\"static\"\r\n          value={completed * 100}\r\n          thickness={4}\r\n          size={300}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTimer.propTypes = {\r\n  text: PropTypes.string,\r\n  value: PropTypes.number,\r\n  startValue: PropTypes.number,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(Timer);\r\n","import React, { Component } from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    bar: {\r\n        color: '#32386D'\r\n    }\r\n});\r\nclass AnswerCounter extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Typography variant=\"h5\">Answers collected</Typography>\r\n                <LinearProgress className={classes.bar} variant=\"determinate\" value={this.props.value} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerCounter);","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\nimport Timer from '../../common/Timer';\r\nimport AnswerCounter from './AnswerCounter';\r\n\r\nclass PhaseAnswer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      counter: null,\r\n      timelimit: 0,\r\n      started: false,\r\n      isTimelimited: true,\r\n      question: {\r\n        question: '',\r\n        answers: [],\r\n      },\r\n    };\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const that = this;\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question, isTimelimited: this.props.game.quiz.timelimit, timelimit: question.timelimit * 10 });\r\n    if (this.props.game.quiz.timelimit) {\r\n      const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n      let counter = question.timelimit * 10;\r\n      const i = setInterval(() => {\r\n        let answersCollected = 0;\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n          if (that.props.game.players[playerKeys[i]].answers && that.props.game.players[playerKeys[i]].answers[question.id]) {\r\n            answersCollected++;\r\n          }\r\n        }\r\n        counter--;\r\n        that.setState({ counter, started: true });\r\n        if (counter <= -5 || answersCollected === playerKeys.length) {\r\n          that.nextPhase();\r\n          clearInterval(i);\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  nextPhase() {\r\n    this.props.gameFunc.update({ phase: 'result_question' });\r\n  }\r\n\r\n  render() {\r\n    let answers = [];\r\n    if (this.props.game) {\r\n      answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n    }\r\n    let answersCollected = 0;\r\n    const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      if (this.props.game.players[playerKeys[i]].answers && this.props.game.players[playerKeys[i]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]) {\r\n        answersCollected++;\r\n      }\r\n    }\r\n    const answerCollectedPercentage = (answersCollected / playerKeys.length) * 100;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          {!this.state.isTimelimited && <Button onClick={this.nextPhase}>Next</Button>}\r\n          {this.state.isTimelimited && <Timer startValue={this.state.timelimit} value={this.state.counter} text={Math.ceil(this.state.counter / 10)} />\r\n                    }\r\n          <div className=\"quiz-answercounter-container\">\r\n            <AnswerCounter value={answerCollectedPercentage} />\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n\r\n          <Grid container className=\"align-bottom\">\r\n            {answers.map((answer, index) => (\r\n              <Grid key={index} item xs={6}>\r\n                <AnswerOption answer={answer} index={index} />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseAnswer;\r\n","import React, { Component } from 'react';\r\nimport { HorizontalBar } from 'react-chartjs-2';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst colors = ['#80DEEA', '#EF9A9A', '#CE93D8', '#C5E1A5'];\r\nconst MAX_PLAYERS = 20;\r\nconst PLAYER_BAR_HEIGHT_INCREMENT = 30;\r\nconst MAX_HEIGHT_PODIUM = 740;\r\nclass Podium extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getChartData = this.getChartData.bind(this);\r\n        this.getChartOptions = this.getChartOptions.bind(this);\r\n        this.getChartHeight = this.getChartHeight.bind(this);\r\n\r\n    }\r\n    getChartData() {\r\n        let chartData = {\r\n            labels: [],\r\n            datasets: [{\r\n                data: [],\r\n                label: 'podium',\r\n                backgroundColor: [],\r\n                borderWidth: 1,\r\n            }]\r\n        };\r\n\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        let rawPlayerData = [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let playerScoreData = {};\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let score = 0;\r\n            if (player.answers) {\r\n                for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                    let question = this.props.game.quiz.questions[j];\r\n                    let answer = player.answers[question.id];\r\n                    if (answer) {\r\n                        score += answer.score;\r\n                    }\r\n                }\r\n                playerScoreData.score = score;\r\n                playerScoreData.name = player.name;\r\n                rawPlayerData.push(playerScoreData);\r\n            }\r\n        }\r\n        rawPlayerData.sort((a, b) => b.score - a.score); // For ascending sort\r\n        let maxIndex = rawPlayerData.length > MAX_PLAYERS ? MAX_PLAYERS : rawPlayerData.length;\r\n        for (let i = 0; i < maxIndex; i++) {\r\n            chartData.labels.push(rawPlayerData[i].name);\r\n            chartData.datasets[0].data.push(rawPlayerData[i].score);\r\n            chartData.datasets[0].backgroundColor.push(colors[i % 4]);\r\n        }\r\n\r\n        return chartData;\r\n    }\r\n    getChartHeight() {\r\n        let chartData = this.getChartData();\r\n        let height = 70 + (chartData.labels.length * PLAYER_BAR_HEIGHT_INCREMENT);\r\n        if (height > MAX_HEIGHT_PODIUM) {\r\n            height = MAX_HEIGHT_PODIUM;\r\n        }\r\n        return height;\r\n    }\r\n\r\n    getChartOptions() {\r\n        let chartHeight = this.getChartHeight();\r\n        let padding = (MAX_HEIGHT_PODIUM - chartHeight) / 2;\r\n        let options = {\r\n            maintainAspectRatio: false,\r\n            showTooltips: false,\r\n            responsiveAnimationDuration: 1000,\r\n            animation: {\r\n                easing: 'easeInOutCubic',\r\n                duration: '2000',\r\n                onProgress: function (animation) {\r\n                    animation.animationObject.onAnimationProgress = function () {\r\n                        let ctx = this.chart.ctx;\r\n                        let chart = this.chart;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.textBaseline = \"bottom\";\r\n                        ctx.font = \"20px Roboto\";\r\n\r\n                        let stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n                        let meta = chart.getDatasetMeta(0);\r\n                        if (!meta.hidden) {\r\n                            meta.data.forEach(function (element, index) {\r\n                                // Draw the text in black, with the specified font\r\n\r\n                                // Just naively convert to string for now\r\n                                let dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio).toString();\r\n                                ctx.fillStyle = colors[index % 4];\r\n\r\n                                let position = element.tooltipPosition();\r\n                                ctx.fillText(dataString, position.x+2+(dataString.length*6), position.y + (element._model.height/2));\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                },\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    },\r\n                    display: true,\r\n                    beginAtZero: true,\r\n                }],\r\n                xAxes: [{\r\n                    display: true,\r\n                    beginAtZero: true,\r\n                }]\r\n            },\r\n            legend: {\r\n                display: false,\r\n            },\r\n            tooltips: {\r\n                enabled: false\r\n            },\r\n            events: [],\r\n            layout: {\r\n                padding: {\r\n                    left: 0,\r\n                    right: 60,\r\n                    top: padding,\r\n                    bottom: padding,\r\n                }\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n    getWinnerString() {\r\n        return \"Congratulations [name of player]! \";\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div style={{maxHeight: MAX_HEIGHT_PODIUM}}>\r\n                <HorizontalBar data={this.getChartData} height={MAX_HEIGHT_PODIUM}\r\n                    options={this.getChartOptions()} />\r\n                <Typography variant=\"subtitle1\">{this.getWinnerString()}</Typography>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Podium;","import React, { Component } from 'react';\r\nimport Podium from '../Podium';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h2\">Final score</Typography>\r\n\r\n                    <Podium game={this.props.game} />\r\n                </div>\r\n                <div className=\"align-bottom \">\r\n                    <div>\r\n\r\n                        <Button onClick={this.props.gameFunc.restart}>Replay quiz</Button>\r\n                        <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                        <Button onClick={() => alert('show results')}>Show results</Button>\r\n                        <Button onClick={() => alert('start survey')}>Start survey</Button>\r\n                        <Button>\r\n                            <Link to={'/create'}>Host game</Link>\r\n                        </Button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\nconst PUBLIC_PATH = process.env.PUBLIC_URL;\r\n\r\nconst answerStyles = [{\r\n    icon: <CakeIcon />,\r\n    color: '#80DEEA',\r\n},\r\n{\r\n    icon: <ExtensionIcon />,\r\n    color: '#EF9A9A',\r\n},\r\n{\r\n    icon: <FavoriteIcon />,\r\n    color: '#CE93D8',\r\n},\r\n{\r\n    icon: <StarIcon />,\r\n    color: '#C5E1A5'\r\n}];\r\n\r\nclass AnswerChart extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getChartData = this.getChartData.bind(this);\r\n        this.getChartOptions = this.getChartOptions.bind(this);\r\n        this.getChartHeight = this.getChartHeight.bind(this);\r\n        this.getAnswerData = this.getAnswerData.bind(this);\r\n\r\n    }\r\n    getAnswerData() {\r\n        let answerData = {\r\n            data: [],\r\n            topPlayer: {\r\n                score: 0,\r\n                playerKey: ''\r\n            },\r\n            correctAnswers: [],\r\n        };\r\n        let playerAnswers = [];\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            if (!player.answers) {\r\n                continue;\r\n            }\r\n            let answer = player.answers[currentQuestion.id];\r\n            if (answer) {\r\n\r\n                playerAnswers.push(answer.answer);\r\n                if (answer.score > answerData.topPlayer.score) {\r\n                    answerData.topPlayer.score = answer.score;\r\n                    answerData.topPlayer.playerKey = player.key;\r\n                }\r\n            }\r\n        }\r\n        for (let j = 0; j < currentQuestion.answers.length; j++) {\r\n            let nrOfAnswers = 0;\r\n            for (let i = 0; i < playerAnswers.length; i++) {\r\n                if (currentQuestion.answers.indexOf(playerAnswers[i]) === j) {\r\n                    nrOfAnswers++;\r\n                }\r\n            }\r\n            answerData.data.push(nrOfAnswers);\r\n\r\n            if (currentQuestion.correctAnswers.indexOf(currentQuestion.answers[j]) > -1) {\r\n                answerData.correctAnswers.push(j);\r\n            }\r\n        }\r\n\r\n        return answerData;\r\n    }\r\n\r\n    getChartData() {\r\n        let chartData = {\r\n            labels: [],\r\n            datasets: [{\r\n                data: [],\r\n                label: 'asdf',\r\n                backgroundColor: [],\r\n                borderWidth: 1,\r\n            }]\r\n        };\r\n        let data = this.getAnswerData();\r\n        chartData.datasets[0].borderColor = [];\r\n        chartData.datasets[0].data = data.data;\r\n        for (let i = 0; i < data.data.length; i++) {\r\n            chartData.labels.push(\"\");\r\n            chartData.datasets[0].backgroundColor.push(answerStyles[i].color);\r\n        }\r\n        return chartData;\r\n    }\r\n\r\n    getChartHeight() {\r\n        let answerData = this.getAnswerData();\r\n        let topvalue = Math.max(...answerData.data);\r\n        let incrementHeightPerAnswer = 25;\r\n        let minHeight = 65;\r\n        let maxHeight = 300;\r\n        let height = minHeight + (topvalue * incrementHeightPerAnswer);\r\n        if (height > maxHeight) {\r\n            return maxHeight;\r\n        }\r\n        return height;\r\n    }\r\n\r\n    getChartOptions() {\r\n        let that = this;\r\n        let options = {\r\n            maintainAspectRatio: false,\r\n            showTooltips: false,\r\n            responsiveAnimationDuration: 1000,\r\n            animation: {\r\n                easing: 'easeInOutCubic',\r\n                duration: '2000',\r\n                onProgress: function (animation) {\r\n                    let answerData = that.getAnswerData();\r\n                    animation.animationObject.onAnimationProgress = function () {\r\n                        let ctx = this.chart.ctx;\r\n                        let chart = this.chart;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.fillStyle = \"black\";\r\n                        ctx.textBaseline = \"bottom\";\r\n                        ctx.font = \"24px Roboto\";\r\n\r\n                        let stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n\r\n                        let meta = chart.getDatasetMeta(0);\r\n                        if (!meta.hidden) {\r\n                            meta.data.forEach(function (element, index) {\r\n\r\n                                let dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio);\r\n\r\n                                let position = element.tooltipPosition();\r\n                                ctx.fillStyle = answerStyles[index].color;\r\n                                ctx.fillText(dataString, position.x, position.y - 2);\r\n                                ctx.beginPath();\r\n                                ctx.rect(position.x - element._view.width / 2, chart.height - 32, element._view.width, 22);\r\n                                ctx.fill();\r\n                                if (answerData.correctAnswers.indexOf(index) > -1) {\r\n\r\n                                    let img = new Image();\r\n                                    img.src = PUBLIC_PATH + \"/baseline-done_outline-24px.svg\";\r\n                                    img.height = 100;\r\n                                    img.width = 100;\r\n                                    let ypos = chart.height - 34;\r\n                                    //ta bort onlead wrapper fr att gra det instant\r\n                                    ctx.drawImage(img, position.x - 12, ypos);\r\n                                }\r\n                            });\r\n                        }\r\n                        /*\r\n                                                for (let i = 0; i < answerData.data.length; i++) {\r\n                                                    let value = Math.floor(answerData.data[i] * stepratio);\r\n                                                    //om det inte r ngon som svarar s blir meta[0] undefined frsta gngen. gr jag in p nytt p gamet som host s fungerar det\r\n                                                    //ha ngon specifik hantering fr om ingen har svarat alls\r\n                                                    var meta = this.chart.getDatasetMeta(0);\r\n                                                    let metadata = meta.data[i];\r\n                        \r\n                                                    ctx.fillStyle = answerStyles[i].color;\r\n                                                    ctx.fillText(value, metadata._view.x, metadata._view.y - 2);\r\n                                                    ctx.beginPath();\r\n                                                    ctx.rect(metadata._view.x - metadata._view.width / 2, this.chart.height - 32, metadata._view.width, 22);\r\n                                                    ctx.fill();\r\n                                                    if (answerData.correctAnswers.indexOf(i) > -1) {\r\n                        \r\n                                                        let img = new Image();\r\n                                                        img.src = \"/baseline-done_outline-24px.svg\";\r\n                                                        img.height = 100;\r\n                                                        img.width = 100;\r\n                                                        let ypos = this.chart.height - 34;\r\n                                                        //ta bort onlead wrapper fr att gra det instant\r\n                                                        ctx.drawImage(img, metadata._view.x - 12, ypos);\r\n                        \r\n                                                    }\r\n                                                }\r\n                        \r\n                                                */\r\n                    }\r\n\r\n\r\n                },\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    },\r\n                    display: false,\r\n                    beginAtZero: true,\r\n                }],\r\n                xAxes: [{\r\n                    display: false,\r\n                }]\r\n            },\r\n            legend: {\r\n                display: false,\r\n            },\r\n            tooltips: {\r\n                enabled: false\r\n            },\r\n            events: [],\r\n            layout: {\r\n                padding: {\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 25,\r\n                    bottom: 40,\r\n                }\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Bar data={this.getChartData} height={this.getChartHeight()}\r\n                options={this.getChartOptions()} />\r\n        );\r\n    }\r\n}\r\n\r\nexport default AnswerChart;","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    table: {\r\n        maxWidth: 700,\r\n        whiteSpace: 'nowrap',\r\n    },\r\n});\r\n\r\nclass Leaderboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            leaderboardData: this.getLeaderboardData(),\r\n            page: 0,\r\n            rowsPerPage: 10,\r\n        };\r\n        this.startScoreCounter = this.startScoreCounter.bind(this);\r\n        this.getScoreCellWidth = this.getScoreCellWidth.bind(this);\r\n\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(this.startScoreCounter, 2000);\r\n\r\n\r\n    }\r\n    startScoreCounter() {\r\n        let that = this;\r\n        let i = setInterval(function () {\r\n            let newLeaderBoard = that.state.leaderboardData;\r\n            let done = true;\r\n            for (let i = 0; i < newLeaderBoard.players.length; i++) {\r\n                let player = newLeaderBoard.players[i];\r\n                if (player.currentQuestionScore > 0) {\r\n                    done = false;\r\n                    player.currentQuestionScore--;\r\n                    player.totalScore++;\r\n                }\r\n            }\r\n            newLeaderBoard.players.sort(function (a, b) {\r\n                return (b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0;\r\n            });\r\n            that.setState({ leaderboard: newLeaderBoard });\r\n            if (done) {\r\n                clearInterval(i);\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    getLeaderboardData() {\r\n        let leaderboard = {\r\n            players: [],\r\n        };\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        let playerList = [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let playerScoreData = {};\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let score = 0;\r\n            if (player.answers) {\r\n                for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                    let question = this.props.game.quiz.questions[j];\r\n                    let answer = player.answers[question.id];\r\n                    if (answer) {\r\n                        if (answer.questionId === currentQuestion.id) {\r\n                            playerScoreData.currentQuestionScore = answer.score;\r\n                            playerScoreData.lastScore = answer.score;\r\n\r\n                        } else {\r\n                            score += answer.score;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            playerScoreData.totalScore = score;\r\n            playerScoreData.name = player.name;\r\n            playerScoreData.key = player.key;\r\n            playerList.push(playerScoreData);\r\n        }\r\n\r\n        playerList.sort(function (a, b) {\r\n            return (b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0;\r\n        });\r\n        leaderboard.players = playerList;\r\n        return leaderboard;\r\n\r\n    }\r\n    getLeaderboardScore(player) {\r\n        if (player.currentQuestionScore === 0) {\r\n            return player.totalScore + \" (+\" + player.lastScore + \")\";\r\n        } else {\r\n            return player.totalScore + \"           \";\r\n            //return player.totalScore + \" (+\" + player.currentQuestionScore + \")\";\r\n        }\r\n    }\r\n\r\n    getScoreCellWidth(){\r\n        let length = 0;\r\n        let leaderboardData = this.getLeaderboardData();\r\n        for(let i = 0; i<leaderboardData.players.length; i++){\r\n            let player= leaderboardData.players[i];\r\n            let scoreWidth = player.totalScore + \" (+\" + player.lastScore + \")\";\r\n            if(scoreWidth.length>length){\r\n                length = scoreWidth.length;\r\n            }\r\n        }\r\n\r\n\r\n        return (length*6)+65;\r\n    }\r\n\r\n    handleChangePage = (event, page) => {\r\n        this.setState({ page });\r\n    };\r\n    handleChangeRowsPerPage = event => {\r\n        this.setState({ rowsPerPage: event.target.value });\r\n    };\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { leaderboardData, rowsPerPage, page } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Table className={classes.table}>\r\n                    <TableBody>\r\n                        {leaderboardData.players.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((player, index) =>\r\n                            <TableRow key={player.key}>\r\n                                <TableCell padding=\"dense\">{index + 1}</TableCell>\r\n                                <TableCell>{player.name}</TableCell>\r\n                                <TableCell style={{width: this.getScoreCellWidth()}}>{this.getLeaderboardScore(player)}</TableCell>\r\n                            </TableRow>\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n                {leaderboardData.players.length > 10 && <TablePagination\r\n                    component=\"div\"\r\n                    count={leaderboardData.players.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    backIconButtonProps={{\r\n                        'aria-label': 'Previous Page',\r\n                    }}\r\n                    nextIconButtonProps={{\r\n                        'aria-label': 'Next Page',\r\n                    }}\r\n                    onChangePage={this.handleChangePage}\r\n                    onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n\r\n                />}\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Leaderboard);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport AnswerOption from '../AnswerOption';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\n\r\nclass PhaseResultQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    this.nextQuestion = this.nextQuestion.bind(this);\r\n    this.finalizeQuiz = this.finalizeQuiz.bind(this);\r\n  }\r\n  // om jag vill frsvra fusk s gmmer jag correctanswer/wronganswers frn Play.js och gr rttningen i Host genom att play bara anger vilket svarsalternativ de valt\r\n  // i host nr jag kommer hit s rttar jag alla svar och updaterar varje players score\r\n  // play for tillbaka updateringen och visar score och rtt/fel.\r\n  //\r\n\r\n  // alternativet som r mindre skert men effektivare datamssigt r att play rttar och skriver score, d slipper jag ocks spara hur snabbt spelaren svarade utan kan gra scoreberkningen \"offline\"\r\n  // kr p detta alternativ d det r snabbast att bygga.\r\n\r\n  /*\r\n                HostResultQuestion: nu r det dags att brja visa resultat. se ver om min datastruktur r hllbar?\r\nmed answers, currenq, osv. jag vill ha staplar likt kahootver hur mnga som rstade p varje och en top lista ver scoresom fylls i lite coolt med animationer\r\nTyprkna upp pongen och ha en horizontel stapel som visualiserar hur mycket ngon leder .\r\ni play.js s visas det personliga resultatetsamt sin placering totalt. ven dr cool animation med score som rknar upp\r\nsvg animationer? ettkilomjol stats.js?? skipa chart lib. gr en helt egen komponent som animeras. eller nej ta in chart.js och ha enkel bar chart fr result.\r\ncorrect answer r en vissfrg eller nt. rita ut siffran p dem. leaderboard rendreras i en componentdr score rknas upp ett i taget,\r\nkolla p javascript fr det.kanske ha npgon bakgrund p en div som matchar width till storlek?\r\nleader=100% och alla andra r en brkdel av leaders score iw idth\r\n\r\n\r\nstrukturera upp denna vy och hostanswer vyn till 3 segment. top middle bottom. top dr frgan visas, middle dr counter/resultatet visas, bottom dr svarsalternativen visas.\r\nanvnd Grid och vh fr att f till detta. kolla kahoot. top 20vh, middle 40vh, bottom 40vh?\r\nlgg till ngon frg/symbol p varje svarsalternativ anvnd index fr att styra vilken som fr vilket, ha fyra olika designer.\r\nkolla om jag ska anvnda chart.js fr svarsresultatet, finns det ngon enkel chart med bara staplarna utan axlar och text? lgg till texten sjlv? ngon annan lib? det ska se ut som kahhot\r\nmed siffra fr hur mnga som valde ett alternaiv och markering fr vilket som var det rtta.\r\nha en enkel tabell fr leaderboard? men fixa s pongen strmas in. alt en horozontal bar\r\n\r\nhttps://stackoverflow.com/questions/31631354/how-to-display-data-values-on-chart-js\r\naxis.display=false;\r\ndetta + rtt frg + en extra symbol p det rtta svaret s r vi hemma!\r\n\r\n                                3. fixa finalResultHost: podium.js + leaderboard(?) (tnker mig att podium r en barchart med top 3 eller 10 players?)\r\n                                yaxeln r baserad p totalscore. ovanfr eller i baren verticalt s skrivs namnet. score visas ocks och rknas upp likt answerChart.\r\n                                Det hela r vldigt likt answerChart. informationen som ska visas p varje bar r totalscore, position, playername,\r\n                                Vinnarens namn ska presenteras nedan i strre text och med guldkrona? istllet fr att hlla p med baren.\r\n                                playerPodium visas p playerFinalResult: den innehller bara en stapel fr playern sjlv och namnet visas inte?\r\n                                finalresult kan ven innehlla lite rolig fakta som vem som svarade snabbast,\r\n                                playerfinalresult kan innehlla en hel tabell dr man kan se alla sina svar!\r\n                                frgenummer, score, time (grn eller rd rad), klickar man p en rad fr man se hela frgan med alla alternativ, vilket som var rtt och vilket man sjlv svarade\r\n                                5. phaseEndHost: action fr restart, create new game, save result(export),\r\n\r\n                                6.phaseEndPlay: thanks for playing, creat your own game here..\r\n                                7. testa ha en \"chat\" i finalresult/connecting. en ruta dr varje Play kan skriva ett meddelande som sedan visas upp i host :)\r\n                                7. kolla p snake. test hur reaktionstiden r i quiz frn nr play klickar till host skriver ut answers collected:\r\n\r\n\r\n                                                 generalisera s att answerchart bara tar in ett gameobj. lgg getnaswerdata i answerchart.js d kan jag anvnda answerchart enkelt frn Playsidan.\r\n                            samma sak med leaderboard. de r komponenter som tar in ett obj och spottar ut en visualisering.\r\n                            1. mobilanpassa hela host.\r\n                            2. skapa remote mode. dr man ska kunna klara sig genom spelet utan att kolla p hosten.\r\n                            3. man ska se frgorna, se resultaten. i princip allt som hosten ser men inte ngra actionknappar.\r\n                            players invididuella information kan visas i bottom eller top i liten text.\r\n                            lyft ven in countdown i start och waiting p play i remote mode.\r\n                            styr allt genom if stats i render()?\r\n                            4. ta fram bttre classer / variants p typohraphy som funkar i mobilen. lgg till ngon rolig frg/annan variant p dynamisk information:\r\n                            t.ex. welcome player.name ska namnet sticka ut lite frn welcome styls.\r\n                            display1/4 ser bra ut men rcker inte till. Behver ngra mindre och varierade. leta upp frdiga headers online fr h1/h6?\r\n                            eller skapa bara egna klasser. vanlig paragraph, header1, header2, header3, header4, med egen color, fontsize, font, typ som display fast mindre\r\n    */\r\n  nextQuestion() {\r\n    const game = {};\r\n    game.quiz = this.props.game.quiz;\r\n    game.quiz.currentQuestion = game.quiz.currentQuestion + 1;\r\n    game.phase = 'awaiting_question';\r\n    this.props.gameFunc.update(game);\r\n  }\r\n\r\n  finalizeQuiz() {\r\n    this.props.gameFunc.update({ phase: 'final_result' });\r\n  }\r\n\r\n  render() {\r\n    let answers = [];\r\n    let currentQuestion = '';\r\n    if (this.props.game) {\r\n      currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n      answers = currentQuestion.answers;\r\n    }\r\n    const nextQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion + 1];\r\n    const isLastQuestion = typeof nextQuestion === 'undefined';\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h6\" style={{ float: 'right' }}>{`GameID:${this.props.game.gameId}`}</Typography>\r\n          <Typography variant=\"h5\">{currentQuestion.question}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n              <div className=\"quiz-answer-chart\">\r\n                <AnswerChart game={this.props.game} />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <div>\r\n                <Leaderboard game={this.props.game} />\r\n              </div>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <div>\r\n                {isLastQuestion && <Button onClick={this.finalizeQuiz}>Finalize result</Button>}\r\n                {!isLastQuestion && <Button onClick={this.nextQuestion}>Next question</Button>}\r\n\r\n                <Button onClick={this.props.gameFunc.restart}>Restart quiz</Button>\r\n                <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                <Button onClick={this.props.gameFunc.end}>End quiz</Button>\r\n\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Grid className=\"align-bottom\" container>\r\n            {answers.map((answer, index) => (\r\n              <Grid key={index} item xs={6}>\r\n                <AnswerOption answer={answer} index={index} />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseResultQuestion;\r\n","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                HostEnd\r\n                toggleHeader()\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport PhaseSetup from './PhaseSetup';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\n\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"host-container\">\r\n                {this.props.game.phase === \"setup\" && <PhaseSetup game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"awaiting_question\" && <PhaseAwaitingQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"show_question\" && <PhaseShowQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"answer\" && <PhaseAnswer game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"result_question\" && <PhaseResultQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"final_result\" && <PhaseFinalResult game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"end\" && <PhaseEnd game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quiz;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nclass PhaseSetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      surveyPlayers: false,\r\n      nameGenerator: false,\r\n      gamemode: props.game.minigame.gamemode,\r\n      racetarget: props.game.minigame.racetarget,\r\n      opponentCollision: props.game.minigame.opponentCollision,\r\n      eatOpponents: props.game.minigame.eatOpponents,\r\n      wallCollision: props.game.minigame.wallCollision,\r\n      difficulty: props.game.minigame.difficulty,\r\n    };\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    startGame = (multiplayerMode) => {\r\n      const { game, gameFunc } = this.props;\r\n      const {\r\n        surveyPlayers, nameGenerator, wallCollision,\r\n        opponentCollision, eatOpponents, racetarget, difficulty, gamemode,\r\n      } = this.state;\r\n      const minigame = {\r\n        surveyPlayers,\r\n        nameGenerator,\r\n        multiplayerMode,\r\n        wallCollision,\r\n        opponentCollision,\r\n        eatOpponents,\r\n        racetarget,\r\n        difficulty,\r\n        gamemode,\r\n      };\r\n      game.minigame = minigame;\r\n      game.phase = 'connection';\r\n      game.status = 'IN_PROGRESS';\r\n      gameFunc.update(game);\r\n    };\r\n\r\n    render() {\r\n      const {\r\n        surveyPlayers, nameGenerator, wallCollision,\r\n        opponentCollision, eatOpponents, racetarget, difficulty, gamemode,\r\n      } = this.state;\r\n      return (\r\n        <div className=\"phase-container\">\r\n          <Typography variant=\"h4\">Game Settings</Typography>\r\n          <Button onClick={() => this.startGame('classic')} variant=\"contained\">Classic</Button>\r\n          <Button onClick={() => this.startGame('coop')} variant=\"contained\">Co-op multiplayer</Button>\r\n          <Button onClick={() => this.startGame('team')} variant=\"contained\">Team multiplayer</Button>\r\n          <FormControl component=\"fieldset\">\r\n            <FormGroup>\r\n              <FormControlLabel\r\n                control={(\r\n                  <Switch\r\n                    checked={nameGenerator}\r\n                    onChange={this.handleChangeBool('nameGenerator')}\r\n                    value=\"nameGenerator\"\r\n                  />\r\n                )}\r\n                label=\"Generate names for players\"\r\n              />\r\n              <FormControl required>\r\n                <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                <Select\r\n                  value={gamemode || ''}\r\n                  onChange={this.handleChangeSelect}\r\n                  name=\"gamemode\"\r\n                  inputProps={{\r\n                    id: 'gamemode-required',\r\n                  }}\r\n                >\r\n                  <MenuItem value=\"survival\">Survival</MenuItem>\r\n                  <MenuItem value=\"race\">Race</MenuItem>\r\n\r\n                </Select>\r\n              </FormControl>\r\n\r\n              {gamemode === 'race'\r\n                            && (\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Snake length\"\r\n                                name=\"racetarget\"\r\n                                type=\"number\"\r\n                                value={racetarget}\r\n                                margin=\"normal\"\r\n                                onChange={this.handleChange('racetarget')}\r\n                              />\r\n                            </FormControl>\r\n                            )\r\n                        }\r\n              <FormControl required>\r\n                <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n                <Select\r\n                  value={difficulty || ''}\r\n                  onChange={this.handleChangeSelect}\r\n                  name=\"difficulty\"\r\n                  inputProps={{\r\n                    id: 'difficulty-required',\r\n                  }}\r\n                >\r\n                  <MenuItem value=\"500\">Easy</MenuItem>\r\n                  <MenuItem value=\"300\">Medium</MenuItem>\r\n                  <MenuItem value=\"100\">Hard</MenuItem>\r\n                  <MenuItem value=\"75\">Pro</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Switch\r\n                      checked={wallCollision}\r\n                      onChange={this.handleChangeBool('wallCollision')}\r\n                      value=\"wallCollision\"\r\n                    />\r\n                )}\r\n                  label=\"Wall collisions\"\r\n                />\r\n              </FormControl>\r\n\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Switch\r\n                      checked={opponentCollision}\r\n                      onChange={this.handleChangeBool('opponentCollision')}\r\n                      value=\"opponentCollision\"\r\n                    />\r\n                )}\r\n                  label=\"Opponent collisions\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Switch\r\n                      checked={opponentCollision && eatOpponents}\r\n                      disabled={!opponentCollision}\r\n                      onChange={this.handleChangeBool('eatOpponents')}\r\n                      value=\"eatOpponents\"\r\n                    />\r\n                )}\r\n                  label=\"Eat opponent on collision\"\r\n                />\r\n              </FormControl>\r\n              <FormControlLabel\r\n                control={(\r\n                  <Switch\r\n                    checked={surveyPlayers}\r\n                    onChange={this.handleChangeBool('surveyPlayers')}\r\n                    value=\"surveyPlayers\"\r\n                  />\r\n                )}\r\n                label=\"Survey players after game\"\r\n              />\r\n            </FormGroup>\r\n          </FormControl>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nPhaseSetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseSetup;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: 'starting' });\r\n  }\r\n\r\n  render() {\r\n    const { game } = this.props;\r\n    let { players } = game;\r\n    if (!players) {\r\n      players = [];\r\n    } else {\r\n      players = Object.values(players);\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">\r\n            <span>Join game with Game ID: </span>\r\n            <span className=\"dynamic-text\">{game.gameId}</span>\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">{game.title}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid container>\r\n            {players.map(player => (\r\n              <Grid key={player.key} item xs={3}>\r\n                <Typography paragraph variant=\"body1\" className=\"dynamic-text\">{player.name}</Typography>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Button onClick={this.nextPhase} variant=\"contained\">Start</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseConnection;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n    this.startCounter();\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    const counter = 5;\r\n    const i = setInterval(() => {\r\n      that.setState(state => ({\r\n        counter: state.counter + 1,\r\n      }));\r\n\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: 'gameplay' });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseStarting;\r\n","const gridSize = 20;\r\nfunction isInvalidMove(keyPress, currentDirection) {\r\n  if (!keyPress) {\r\n    return true;\r\n  }\r\n  const invalidMovment = {\r\n    left: 'right', right: 'left', up: 'down', down: 'up',\r\n  };\r\n  return invalidMovment[keyPress] === currentDirection;\r\n}\r\nfunction getInitialFoods(amount) {\r\n  const initialFoods = [];\r\n  for (let i = 0; i < amount; i++) {\r\n    const food = {\r\n      active: false,\r\n    };\r\n    initialFoods.push(food);\r\n  }\r\n  return initialFoods;\r\n}\r\n// vissa snakes lyckas inte ta foods? r det en bugg med konstiga synkningar mot state nr det r s mnga?\r\n// det verkar inte heller fungera med positioneringen indexof. Ormarna hamnar ibland precis brevid varandra.\r\nfunction getSnakesInStartingPosition(snakes, canvasSettings) {\r\n  for (let i = 0, len = snakes.length; i < len; i++) {\r\n    const snake = snakes[i];\r\n    snake.direction = snake.actions[i % 4];\r\n    snake.moves = [];\r\n    let pos;\r\n    switch (snake.direction) {\r\n      case 'right':\r\n        pos = getRandomStartingPosLeft(snakes, canvasSettings.height);\r\n        snake.body = [{\r\n          x: pos.x,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x - gridSize,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x - (gridSize * 2),\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x - (gridSize * 3),\r\n          y: pos.y,\r\n        }];\r\n        break;\r\n      case 'left':\r\n        pos = getRandomStartingPosRight(snakes, canvasSettings);\r\n        snake.body = [{\r\n          x: pos.x,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x + gridSize,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x + (gridSize * 2),\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x + (gridSize * 3),\r\n          y: pos.y,\r\n        }];\r\n        break;\r\n      case 'up':\r\n        pos = getRandomStartingPosBottom(snakes, canvasSettings);\r\n        snake.body = [{\r\n          x: pos.x,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y + gridSize,\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y + (gridSize * 2),\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y + (gridSize * 3),\r\n        }];\r\n        break;\r\n      case 'down':\r\n        pos = getRandomStartingPosTop(snakes, canvasSettings.width);\r\n        snake.body = [{\r\n          x: pos.x,\r\n          y: pos.y,\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y - gridSize,\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y - (gridSize * 2),\r\n        }, {\r\n          x: pos.x,\r\n          y: pos.y - (gridSize * 3),\r\n        }];\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return snakes;\r\n}\r\n\r\nfunction getRandomStartingPosTop(snakes, canvasWidth) {\r\n  const snakesDown = snakes.filter(s => s.direction === 'down' && s.body);\r\n  const existingValues = [...new Set(snakesDown.map(s => s.body[0].x))];\r\n\r\n  const margin = gridSize * 8;\r\n  const xMax = canvasWidth - (margin * 2);\r\n  const y = gridSize * 2;\r\n  const x = getRandomStartingPos(xMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosBottom(snakes, canvasSettings) {\r\n  const snakesDown = snakes.filter(s => s.direction === 'up' && s.body);\r\n  const existingValues = [...new Set(snakesDown.map(s => s.body[0].x))];\r\n\r\n  const margin = gridSize * 8;\r\n  const xMax = canvasSettings.width - (margin * 2);\r\n  const y = canvasSettings.height - (gridSize * 3);\r\n  const x = getRandomStartingPos(xMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosRight(snakes, canvasSettings) {\r\n  const snakesDown = snakes.filter(s => s.direction === 'left' && s.body);\r\n  const existingValues = [...new Set(snakesDown.map(s => s.body[0].y))];\r\n\r\n  const margin = gridSize * 8;\r\n  const yMax = canvasSettings.height - (margin * 2);\r\n  const x = canvasSettings.width - (gridSize * 3);\r\n  const y = getRandomStartingPos(yMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosLeft(snakes, canvasHeight) {\r\n  const snakesDown = snakes.filter(s => s.direction === 'right' && s.body);\r\n  const existingValues = [...new Set(snakesDown.map(s => s.body[0].y))];\r\n\r\n  const margin = gridSize * 8;\r\n  const yMax = canvasHeight - (margin * 2);\r\n  const x = gridSize * 2;\r\n  const y = getRandomStartingPos(yMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPos(max, margin, existingValues) {\r\n  const value = Math.round((Math.random() * max) / gridSize) * gridSize + margin;\r\n  const posTaken = existingValues.some(v => v === value || v === value - gridSize || v === value + gridSize);\r\n\r\n  if (posTaken) {\r\n    return getRandomStartingPos(max, margin, existingValues, gridSize);\r\n  }\r\n  return value;\r\n}\r\nfunction getRandomCanvasPositionMargin(yMax, xMax) {\r\n  const x = Math.round((Math.random() * (xMax - (gridSize * 14))) / gridSize) * gridSize + (gridSize * 4);\r\n  const y = Math.round((Math.random() * (yMax - (gridSize * 2))) / gridSize) * gridSize + (gridSize * 2);\r\n  return { x, y };\r\n}\r\n// denna function r inte s ltt, kan troligen frenklas\r\nfunction detectOpponentCollision(snakes, eatOpponents) {\r\n  for (let i = 0, len = snakes.length; i < len; i++) {\r\n    if (snakes[i].dead) {\r\n      // om den redan r dd s fortstt. t.ex. en headon s kr jag bda tv till dead direkt.\r\n      continue;\r\n    }\r\n    const currentSnake = snakes[i];\r\n    for (let j = 0; j < len; j++) {\r\n      // om opponents r dd s ska man inte kunna krocka med den. dda snakes har ju fortfarande coordinater. alt r att ta bort coordinaterna\r\n      if (j === i || snakes[j].dead) {\r\n        continue;\r\n      }\r\n      const opponentSnake = snakes[j];\r\n      // lgga till en function dr om man ter body[1] s dr opponent?\r\n      for (let k = 0, len2 = opponentSnake.body.length; k < len2; k++) {\r\n        const collision = opponentSnake.body[k].x === currentSnake.body[0].x && opponentSnake.body[k].y === currentSnake.body[0].y;\r\n        if (collision) {\r\n          if (k === 0) {\r\n            currentSnake.dead = true;\r\n            opponentSnake.dead = true;\r\n            // collision head>head\r\n          } else if (eatOpponents) {\r\n            // snakes\r\n            if (k === 1) {\r\n              opponentSnake.dead = true;\r\n            } else {\r\n              opponentSnake.body.length = k;\r\n              len2 = k;\r\n\r\n              // snakes[j].body.length = k;\r\n            }\r\n            // kan jag anvnda opponentSnakeBody istllet fr snakes[j].body\r\n            // opponentSnakeBody.length = k;?\r\n          } else {\r\n            currentSnake.dead = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return snakes;\r\n}\r\n\r\nfunction detectSelfCollision(snake) {\r\n  const { body } = snake;\r\n  if (body.length < 5) {\r\n    return false;\r\n  }\r\n  // denna r nog inte lika snabb som for loopen?\r\n  const collision = body.slice(4).some(b => b.x === body[0].x && b.y === body[0].y);\r\n  return collision;\r\n  /*\r\n    for (let i = 4, len = body.length; i < len; i++) {\r\n      const selfCollison = body[i].x === body[0].x && body[i].y === body[0].y;\r\n      if (selfCollison) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n    */\r\n}\r\n\r\nfunction detectWallCollision(snakeHead, maxHeight, maxWidth) {\r\n  const leftCollison = snakeHead.x < 0;\r\n  const topCollison = snakeHead.y < 0;\r\n  const rightCollison = snakeHead.x > maxWidth - gridSize;\r\n  const bottomCollison = snakeHead.y > maxHeight - gridSize;\r\n  return leftCollison || topCollison || rightCollison || bottomCollison;\r\n}\r\n/*\r\n  util functions that i can move to snakeUtil.js\r\n  */\r\nexport {\r\n  detectOpponentCollision,\r\n  getRandomCanvasPositionMargin,\r\n  getSnakesInStartingPosition,\r\n  getInitialFoods,\r\n  detectWallCollision,\r\n  detectSelfCollision,\r\n  getRandomStartingPosLeft,\r\n  getRandomStartingPosRight,\r\n  getRandomStartingPosBottom,\r\n  getRandomStartingPosTop,\r\n  isInvalidMove,\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nclass Tetris extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                tetris.js\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tetris;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseFinalResult extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.replayGame = this.replayGame.bind(this);\r\n  }\r\n\r\n  replayGame() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: 'starting' });\r\n  }\r\n\r\n  /*\r\nskriv ut vinnaren och hur lng tid gamet tog\r\n(anvnd minigame.ticks och minigame.difficulty fr att rkna ut sekunder)\r\nminigame.winners inner hller vinnare/vinnarna.\r\nkan vara s att winners inte finns om det snakes.length === 1\r\n men d r ju den \"vinnaren\". typ i coop singelplayer\r\npodium\r\n  */\r\n  render() {\r\n    const { gameFunc, game } = this.props;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-middle-section\">\r\n          <Typography variant=\"h2\">Final score</Typography>\r\n          <Typography variant=\"h2\">{game.minigame.winners[0].name}</Typography>\r\n        </div>\r\n        <div className=\"align-bottom \">\r\n          <div>\r\n            <Button onClick={this.replayGame}>Replay game</Button>\r\n            <Button onClick={gameFunc.restart}>Re-host game</Button>\r\n            <Button onClick={gameFunc.quit}>Quit game</Button>\r\n            <Button onClick={() => alert('show results')}>Show results</Button>\r\n            <Button onClick={() => alert('start survey')}>Start survey</Button>\r\n            <Button>\r\n              <Link to=\"/create\">Create new game</Link>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseFinalResult.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseFinalResult;\r\n","import React, { PureComponent } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseEnd extends PureComponent {\r\n  render() {\r\n    const { game } = this.props;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography>{`hur seer detta ut konstigt med dollarsign?HostEnd toggleheader()${game.title}`}</Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseEnd.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseEnd;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nfunction chunkify(a, nr) {\r\n  let n = nr;\r\n  if (n < 2) { return [a]; }\r\n  const len = a.length;\r\n  const out = [];\r\n  let i = 0;\r\n  let size;\r\n  if (len % n === 0) {\r\n    size = Math.floor(len / n);\r\n    while (i < len) {\r\n      out.push(a.slice(i, i += size));\r\n    }\r\n  } else {\r\n    while (i < len) {\r\n      size = Math.ceil((len - i) / n);\r\n      n -= 1;\r\n      out.push(a.slice(i, i += size));\r\n    }\r\n  }\r\n  return out;\r\n}\r\nfunction createSnakes(players) {\r\n  const playerKeys = Object.keys(players);\r\n  const snakes = [];\r\n  // mocka flera spelare genom att loopa p x och sen byt player.key till playerKeys[0]\r\n  for (let i = 0; i < playerKeys.length; i++) {\r\n    const player = players[playerKeys[i]];\r\n    const snake = {\r\n      playerKeys: [player.key],\r\n      actions: ['up', 'down', 'right', 'left'],\r\n      score: 0,\r\n      color: SNAKE_COLORS[i % SNAKE_COLORS.length],\r\n      name: SNAKE_NAMES[i % SNAKE_NAMES.length],\r\n      // start positioner ska randomas helt, inklusive direction, varanan ska starta nereifrn upp, uppifrn ner, hger till vnster, vnster till gger..\r\n      // fyra olika random metoder och y mste vara unikt fr de som kr horizontelt och x mste vara unikt fr som kr vertikalt, kanske ven ett mellanrum mellan varje snake\r\n      id: i,\r\n    };\r\n    snakes.push(snake);\r\n    // hr ska jag lgga till sd et finns en food per player?\r\n    // foods.push(food);\r\n  }\r\n  return snakes;\r\n}\r\n\r\nfunction createTeamSnakes(players) {\r\n  const playerKeys = Object.keys(players);\r\n  const startingY = 100;\r\n  const startingX = 300;\r\n  const snakes = [];\r\n  const nrOfSnakes = playerKeys;\r\n  // coop snakes hr vil jag kunna hitta ultimata updelningen. man ska kunna vara 2 eller 4 per orm. om det r ojmnt antal fr man vara en 3a.\r\n  // chunkify tar in playerkeys och en siffra p hur mnga snakes det ska vara och delar upp dem men d behver jag veta hur mnga snakes jag vill ha?\r\n  // kanske fr gra en helt egen chunkify? behver veta hur mgna snakes jag vill ha och sen kanske det lser sig sjlvt i loopen\r\n\r\n  for (let i = 0; i < playerKeys.length; i++) {\r\n    const player = players[playerKeys[i]];\r\n    const snake = {\r\n      playerKeys: [player.key],\r\n      direction: 'right',\r\n      id: i,\r\n      score: 0,\r\n      body: [{\r\n        x: startingX,\r\n        y: startingY,\r\n      }, {\r\n        x: startingX - gridSize,\r\n        y: startingY,\r\n      }, {\r\n        x: startingX - (gridSize * 2),\r\n        y: startingY,\r\n      }, {\r\n        x: startingX - (gridSize * 3),\r\n        y: startingY,\r\n      }],\r\n\r\n    };\r\n    snakes.push(snake);\r\n    // hr ska jag lgga till sd et finns en food per player?\r\n    // foods.push(food);\r\n  }\r\n  return snakes;\r\n}\r\nfunction createCoopSnakes(players) {\r\n  // alla players kontrollerar samma snake. antingen med en knapp var, eller s har alla alla knappar?\r\n  // kanske en spelare fr bara 1 klick? samarbetesvning.\r\n  const playerKeys = Object.keys(players);\r\n  const startingY = 90;\r\n  const startingX = 300;\r\n  const snakes = [];\r\n  const snake = {\r\n    playerKeys,\r\n    direction: 'right',\r\n    actions: ['up', 'down', 'right', 'left'],\r\n    score: 0,\r\n    color: SNAKE_COLORS[Math.floor(Math.random() * SNAKE_COLORS.length)],\r\n    name: SNAKE_NAMES[Math.floor(Math.random() * SNAKE_NAMES.length)],\r\n    id: 0,\r\n    body: [{\r\n      x: startingX,\r\n      y: startingY,\r\n    }, {\r\n      x: startingX - gridSize,\r\n      y: startingY,\r\n    }, {\r\n      x: startingX - (gridSize * 2),\r\n      y: startingY,\r\n    }, {\r\n      x: startingX - (gridSize * 3),\r\n      y: startingY,\r\n    }],\r\n  };\r\n  snakes.push(snake);\r\n  return snakes;\r\n}\r\nconst SNAKE_COLORS = ['#F44336',\r\n  '#9C27B0',\r\n  '#2196F3',\r\n  '#4CAF50',\r\n  '#FFEB3B',\r\n  '#FF9800',\r\n  '#607D8B',\r\n  '#795548',\r\n  '#E91E63',\r\n  '#3F51B5',\r\n  '#673AB7',\r\n  '#00BCD4',\r\n  '#03A9F4',\r\n  '#8BC34A',\r\n  '#CDDC39',\r\n  '#009688',\r\n  '#FFC107',\r\n  '#FF5722',\r\n];\r\nconst SNAKE_NAMES = ['Stan',\r\n  'Jane',\r\n  'Sara',\r\n  'Dan',\r\n  'Lisa',\r\n  'Joe',\r\n  'Rose',\r\n  'Ray',\r\n  'Lyra',\r\n  'Sam',\r\n  'Lucy',\r\n  'Ben',\r\n  'Noa',\r\n  'Mark',\r\n  'Eve',\r\n  'Ned',\r\n  'Ann',\r\n  'Todd'];\r\nconst gridSize = 20;\r\nclass SnakeStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.startCounter();\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    let counter = 5;\r\n    const i = setInterval(() => {\r\n      counter -= 1;\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game, gameFunc } = this.props;\r\n    let snakes = [];\r\n    const snakeGenerator = {\r\n      classic: createSnakes(game.players),\r\n      team: createTeamSnakes(game.players),\r\n      coop: createCoopSnakes(game.players),\r\n    };\r\n    snakes = snakeGenerator[game.minigame.multiplayerMode];\r\n\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      const actionChunks = chunkify(snakes[i].actions, snakes[i].playerKeys.length);\r\n      for (let j = 0; j < snakes[i].playerKeys.length; j++) {\r\n        const player = game.players[snakes[i].playerKeys[j]];\r\n        player.snakeId = snakes[i].id;\r\n        player.controlActions = actionChunks[j];\r\n      }\r\n    }\r\n\r\n    game.minigame.snakes = snakes;\r\n    game.phase = 'gameplay';\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnakeStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default SnakeStarting;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PhaseSetup from './PhaseSetup';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport Snake from '../snake/Snake';\r\nimport Tetris from '../tetris/Tetris';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseEnd from './PhaseEnd';\r\nimport SnakeStarting from '../snake/SnakeStarting';\r\n\r\nclass Minigame extends PureComponent {\r\n  render() {\r\n    const { game, gameFunc } = this.props;\r\n    switch (game.gametype) {\r\n      case 'snake':\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === 'setup' && <PhaseSetup game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'connection' && <PhaseConnection game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'starting' && <SnakeStarting game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'gameplay' && <Snake game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'final_result' && <PhaseFinalResult game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'end' && <PhaseEnd game={game} gameFunc={gameFunc} />}\r\n          </div>\r\n        );\r\n      case 'tetris':\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === 'setup' && <PhaseSetup game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'connection' && <PhaseConnection game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'starting' && <PhaseStarting game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'gameplay' && <Tetris game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'final_result' && <PhaseFinalResult game={game} gameFunc={gameFunc} />}\r\n            {game.phase === 'end' && <PhaseEnd game={game} gameFunc={gameFunc} />}\r\n          </div>\r\n        );\r\n      default:\r\n        return (null);\r\n    }\r\n  }\r\n}\r\nMinigame.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default Minigame;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { fire } from '../../base';\r\nimport Quiz from '../quiz/host/Quiz';\r\nimport Minigame from '../minigame/host/Minigame';\r\n\r\nclass Host extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      game: {},\r\n      gameId: localStorage.getItem('RecentGameId') || '',\r\n      password: '',\r\n\r\n    };\r\n    this.updateGame = this.updateGame.bind(this);\r\n    this.fetchGame = this.fetchGame.bind(this);\r\n    this.initGameListiner = this.initGameListiner.bind(this);\r\n    this.restartGame = this.restartGame.bind(this);\r\n    this.quitGame = this.quitGame.bind(this);\r\n    this.endGame = this.endGame.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    updateGame(game) {\r\n      const that = this;\r\n      // se till att inte updatera game.players...\r\n      // game som kommer in hr ska bara innehlla det som ska uppdateras.\r\n      // updateras med gamesettings, phasechanges, currenquestionId etc\r\n      fire.database().ref(`games/${that.state.game.key}`).update(game, (error) => {\r\n        if (error) {\r\n          const snack = {\r\n            variant: 'error',\r\n            message: 'Unexpected internal error',\r\n          };\r\n          that.props.showSnackbar(snack);\r\n        } else {\r\n        }\r\n      });\r\n    }\r\n\r\n    restartGame() {\r\n      const game = {};\r\n      game.players = [];\r\n      game.phase = 'setup';\r\n      this.updateGame(game);\r\n    }\r\n\r\n    quitGame() {\r\n      this.updateGame({ phase: null });\r\n      this.props.toggleHeader(true);\r\n    }\r\n\r\n    endGame() {\r\n      this.updateGame({ phase: 'final_result' });\r\n    }\r\n\r\n\r\n    fetchGame() {\r\n      const that = this;\r\n      fire.database().ref('games').orderByChild('gameId').equalTo(that.state.gameId)\r\n        .once('value', (snapshot) => {\r\n          if (snapshot.val()) {\r\n            let game;\r\n            snapshot.forEach((child) => {\r\n              game = child.val();\r\n            });\r\n            if (game.password === that.state.password) {\r\n              that.initGameListiner(game.key);\r\n              that.props.toggleHeader();\r\n            } else {\r\n              const snack = {\r\n                variant: 'error',\r\n                message: 'Could not find matching game',\r\n              };\r\n              that.props.showSnackbar(snack);\r\n            }\r\n          } else {\r\n            const snack = {\r\n              variant: 'info',\r\n              message: 'No game found',\r\n            };\r\n            that.props.showSnackbar(snack);\r\n          }\r\n        });\r\n    }\r\n\r\n    initGameListiner(gameKey) {\r\n      const gameRef = fire.database().ref(`games/${gameKey}`);\r\n      const that = this;\r\n      gameRef.on('value', (snapshot) => {\r\n        const game = snapshot.val();\r\n        if (game) {\r\n          // kan blir problem med asynch setstate?\r\n          that.setState({\r\n            game,\r\n          });\r\n        } else {\r\n          that.setState({\r\n            game: '',\r\n          });\r\n        }\r\n      });\r\n      // koppla this.state.game till gameKey\r\n      // lgg till en likadan listener i Play.\r\n      // hosts gamelistiner ska lyssna p alla ndringar. Play ska inte lyssna p andra players ndringar om det gr. ngot att optimera i framtiden.\r\n      // ett alt r att lyfta ut Players till en egen root? kan lgga phase och currentq i en game.state och sen r det allt som Player lyssnar p?\r\n      // men play behver ocks behva synca sin egna player.\r\n    }\r\n\r\n    render() {\r\n      // behver bara updatera phase till firebase nr det r phases som play bryr sig om. t.ex. inte setup d play bara kan connecta till games som r i phase==connection\r\n      // lgg till tv rutor hr fr att ska fram ett game med hjlp av gameid och pass.\r\n\r\n      // strukturera filerna fr host och play. kommentera i varje fil vad syftet med den r. vad den ska updatera i game etc.\r\n      // HostSetup updates settings and sets phase to connection on action\r\n      // connection shows players and sets phase to starting on action\r\n      // starting shows a countdown sets phase to awating_question and currentQuestion to 0(or some id) after countdown\r\n      // awaiting_question shows countdown and sets phase to show question after countdown\r\n      // show_question shows question and sets phase to answer after countdown\r\n      // answer shows q&a, countdown, nrPlayersAnswered, sets phase to result_question after countdown\r\n      // result_question shows stats about the answers, correct answer, hightscorelist etc, sets phase to awaiting_question and currentQuestion++ on action.\r\n      // result_question sets phase to final_result if questions are all done.\r\n      // final_result shows result of all players. top 3 and/or all. sets phase to end on action\r\n      // end shows options for replay, export result, etc.\r\n      const gameFunctions = {\r\n        update: this.updateGame,\r\n        restart: this.restartGame,\r\n        end: this.endGame,\r\n        quit: this.quitGame,\r\n      };\r\n      if (!this.state.game.phase) {\r\n        return (\r\n          <div className=\"page-container host-page\">\r\n            <FormControl>\r\n              <TextField\r\n                label=\"Game ID\"\r\n                name=\"Game ID\"\r\n                value={this.state.gameId}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('gameId')}\r\n              />\r\n            </FormControl>\r\n            <FormControl>\r\n              <TextField\r\n                label=\"Password\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                margin=\"normal\"\r\n                value={this.state.password}\r\n                onChange={this.handleChange('password')}\r\n              />\r\n            </FormControl>\r\n            <Button onClick={this.fetchGame} variant=\"contained\">Fetch</Button>\r\n          </div>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"page-container host-page\">\r\n          {this.state.game.gametype === 'quiz' && <Quiz game={this.state.game} gameFunc={gameFunctions} />}\r\n          {this.state.game.gametype === 'snake' && <Minigame game={this.state.game} gameFunc={gameFunctions} />}\r\n          {this.state.game.gametype === 'tetris' && <Minigame game={this.state.game} gameFunc={gameFunctions} />}\r\n\r\n\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nexport default Host;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            authId: '',\r\n            playerCreated: false,\r\n        };\r\n        this.createPlayer = this.createPlayer.bind(this);\r\n        this.generateName = this.generateName.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //problem vid restart s skapas en ny anvndare. test spara playerkey till localhost och testa anvnda den keyn om den passar\r\n        if (!this.props.playerKey && this.props.game.quiz.nameGenerator) {\r\n            this.props.addPlayer(this.generatePlayer());\r\n        }\r\n    }\r\n    createPlayer() {\r\n        //validera s att namnet inte r taget.\r\n        let player = {\r\n            name: this.state.name,\r\n            score: 0,\r\n\r\n        }\r\n        this.props.addPlayer(player);\r\n        this.setState({ playerCreated: true });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    generatePlayer() {\r\n        //skriv upp en lista med namn. kanske anvnda tv arrayer en med adjekktiv och en med substantiv \"crazy tomato\" etc. \r\n        //anvnd generateName(this.game.players) den randomar ett namn, kollar om namnet redan finns och randomar igen isfall.\r\n        //randomar xx antal gnger sen lgger den till ett extra adjektiv\r\n        let name = this.generateName();\r\n        let player = {\r\n            name: name,\r\n            score: 0,\r\n        }\r\n        return player;\r\n    }\r\n    generateName() {\r\n        let adjectives = [\"adamant\", \"adroit\", \"amatory\", \"animistic\", \"antic\", \"arcadian\", \"baleful\", \"bellicose\", \"bilious\", \"boorish\", \"calamitous\", \"caustic\", \"cerulean\", \"comely\", \"concomitant\", \"contumacious\", \"corpulent\", \"crapulous\", \"defamatory\", \"didactic\", \"dilatory\", \"dowdy\", \"efficacious\", \"effulgent\", \"egregious\", \"endemic\", \"equanimous\", \"execrable\", \"fastidious\", \"feckless\", \"fecund\", \"friable\", \"fulsome\", \"garrulous\", \"guileless\", \"gustatory\", \"heuristic\", \"histrionic\", \"hubristic\", \"incendiary\", \"insidious\", \"insolent\", \"intransigent\", \"inveterate\", \"invidious\", \"irksome\", \"jejune\", \"jocular\", \"judicious\", \"lachrymose\", \"limpid\", \"loquacious\", \"luminous\", \"mannered\", \"mendacious\", \"meretricious\", \"minatory\", \"mordant\", \"munificent\", \"nefarious\", \"noxious\", \"obtuse\", \"parsimonious\", \"pendulous\", \"pernicious\", \"pervasive\", \"petulant\", \"platitudinous\", \"precipitate\", \"propitious\", \"puckish\", \"querulous\", \"quiescent\", \"rebarbative\", \"recalcitant\", \"redolent\", \"rhadamanthine\", \"risible\", \"ruminative\", \"sagacious\", \"salubrious\", \"sartorial\", \"sclerotic\", \"serpentine\", \"spasmodic\", \"strident\", \"taciturn\", \"tenacious\", \"tremulous\", \"trenchant\", \"turbulent\", \"turgid\", \"ubiquitous\", \"uxorious\", \"verdant\", \"voluble\", \"voracious\", \"wheedling\", \"withering\", \"zealous\"];\r\n        let nouns = [\"ninja\", \"chair\", \"pancake\", \"statue\", \"unicorn\", \"rainbows\", \"laser\", \"senor\", \"bunny\", \"captain\", \"nibblets\", \"cupcake\", \"carrot\", \"gnomes\", \"glitter\", \"potato\", \"salad\", \"toejam\", \"curtains\", \"beets\", \"toilet\", \"exorcism\", \"stick figures\", \"mermaid eggs\", \"sea barnacles\", \"dragons\", \"jellybeans\", \"snakes\", \"dolls\", \"bushes\", \"cookies\", \"apples\", \"ice cream\", \"ukulele\", \"kazoo\", \"banjo\", \"opera singer\", \"circus\", \"trampoline\", \"carousel\", \"carnival\", \"locomotive\", \"hot air balloon\", \"praying mantis\", \"animator\", \"artisan\", \"artist\", \"colorist\", \"inker\", \"coppersmith\", \"director\", \"designer\", \"flatter\", \"stylist\", \"leadman\", \"limner\", \"make-up artist\", \"model\", \"musician\", \"penciller\", \"producer\", \"scenographer\", \"set decorator\", \"silversmith\", \"teacher\", \"auto mechanic\", \"beader\", \"bobbin boy\", \"clerk of the chapel\", \"filling station attendant\", \"foreman\", \"maintenance engineering\", \"mechanic\", \"miller\", \"moldmaker\", \"panel beater\", \"patternmaker\", \"plant operator\", \"plumber\", \"sawfiler\", \"shop foreman\", \"soaper\", \"stationary engineer\", \"wheelwright\", \"woodworkers\"];\r\n        let finalName = \"\";\r\n        let currentNames = [];\r\n        if (this.props.game.players) {\r\n            currentNames = Object.values(this.props.game.players).map(a => a.name);\r\n        }\r\n        for (let i = 0; i < 20; i++) {\r\n            let name = \"\";\r\n            if (i > 10) {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            } else {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            }\r\n            if (currentNames.indexOf(name) > -1) {\r\n                continue;\r\n            } else {\r\n                finalName = name;\r\n                break;\r\n            }\r\n        }\r\n        return finalName;\r\n\r\n    }\r\n\r\n    render() {\r\n        let players = this.props.game.players;\r\n        let playerName = '';\r\n        if (players && this.props.playerKey) {\r\n            playerName = players[this.props.playerKey].name;\r\n        }\r\n        let playersInLobby = [];\r\n        if (players) {\r\n            playersInLobby = Object.values(players);\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>! </Typography>\r\n\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography paragraph variant=\"subtitle1\">Players in lobby</Typography>\r\n                                <Grid container>\r\n                                    {playersInLobby.map((player, index) =>\r\n                                        <Grid key={player.key} item md={3} xs={6}>\r\n                                            <Typography paragraph variant=\"body1\">{player.name}</Typography>\r\n                                        </Grid>)}\r\n                                </Grid>\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                                <Typography paragraph variant=\"subtitle1\">Waiting for the host to start the game</Typography>\r\n\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>!</Typography>\r\n                                <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Starting quiz</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Starting quiz...</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Loading question</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">{this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the question on the screen!</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseShowQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\n\r\nclass PhaseAnswer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      counter: 0,\r\n      question: {},\r\n      hasAnswered: false,\r\n      selectedAnswer: '',\r\n    };\r\n    this.answerQuestion = this.answerQuestion.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question, startTime: Date.now() });\r\n  }\r\n\r\n    answerQuestion = (answer) => {\r\n      this.setState({ selectedAnswer: answer, hasAnswered: true });\r\n      const answerTime = Date.now() - this.state.startTime;\r\n      const correct = this.state.question.correctAnswers.indexOf(answer) > -1;\r\n      let score = 0;\r\n      // anvnd object speed={easy: 100, medium: 200, hard:300} score += speed[question.difficulty]\r\n      if (correct) {\r\n        switch (this.state.question.difficulty) {\r\n          case 'easy':\r\n            score += 100;\r\n            break;\r\n          case 'medium':\r\n            score += 200;\r\n            break;\r\n          case 'hard':\r\n            score += 300;\r\n            break;\r\n          case undefined:\r\n            score += 200;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        if (this.props.game.quiz.timelimit && this.state.question.timelimit) {\r\n          // let timeRemaining = this.state.question.timelimit - answerTime;\r\n          const timeFactorUsed = answerTime / (this.state.question.timelimit * 1000);\r\n          const timeBonus = Math.floor((score / Math.max(0.2, timeFactorUsed)) / 10);\r\n          score += timeBonus;\r\n        }\r\n      }\r\n      const playerAnswer = {\r\n        answer,\r\n        score,\r\n        answerTime,\r\n        questionId: this.state.question.id,\r\n      };\r\n      this.props.saveAnswer(playerAnswer);\r\n    };\r\n\r\n    render() {\r\n        let answers = [];\r\n        if (this.props.game) {\r\n            answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography paragraph variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span> \r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } \r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-middle-and-bottom-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} remoteMode={true} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            \r\n        } \r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span>\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } \r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-complete-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            \r\n        \r\n    }\r\n}\r\nexport default PhaseAnswer;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Podium from '../Podium';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: null\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    handleChange = panel => (event, expanded) => {\r\n        this.setState({\r\n            expanded: expanded ? panel : false,\r\n        });\r\n    };\r\n    getPlayerAnswerData() {\r\n        let answerDataList = [];\r\n\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n\r\n        for (let i = 0; i < this.props.game.quiz.questions.length; i++) {\r\n            let answerData = {\r\n                question: {},\r\n                score: 0,\r\n                time: 0,\r\n                answer: '',\r\n            };\r\n            let question = this.props.game.quiz.questions[i];\r\n\r\n            if (currentPlayer.answers[question.id]) {\r\n                answerData.score = currentPlayer.answers[question.id].score;\r\n                answerData.answer = currentPlayer.answers[question.id].answer;\r\n                answerData.time = currentPlayer.answers[question.id].answerTime;\r\n            } else {\r\n                answerData.score = 0;\r\n                answerData.answer = \"no answer\";\r\n                answerData.time = 0;\r\n            }\r\n            answerData.question = question;\r\n\r\n            answerDataList.push(answerData);\r\n        }\r\n        return answerDataList;\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let playerData = this.getPlayerAnswerData();\r\n            return (<div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h5\">Quiz finished</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"subtitle1\">You finished\r\n                        <span className=\"dynamic-text\">2nd</span> with a score of  <span className=\"dynamic-text\">560</span>\r\n                    </Typography>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography >Final scoretable</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div>\r\n                                <Podium game={this.props.game} />\r\n                            </div>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography>Your own data</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails style={{display:'block'}}>\r\n                            {playerData.map((data, index) =>\r\n                                <ExpansionPanel key={data.question.id} expanded={this.state.expanded === data.question.id} onChange={this.handleChange(data.question.id)}>\r\n                                    <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                        <Typography variant=\"subtitle1\">{data.question.question}</Typography>\r\n                                        <Typography variant=\"subtitle2\">{data.score}pt</Typography>\r\n                                    </ExpansionPanelSummary>\r\n                                    <ExpansionPanelDetails>\r\n                                        <Typography>Your answer: {data.answer}</Typography>\r\n                                        <Typography>Your time: {data.time/1000}sec</Typography>\r\n\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                                        <List>\r\n                                            {data.question.correctAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                                        <List>\r\n                                            {data.question.wrongAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                    </ExpansionPanelDetails>\r\n                                </ExpansionPanel>\r\n                            )}\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                </div>\r\n            </div>);\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\nimport { Typography } from '@material-ui/core';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\nclass PhaseResultQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    getPlayerAnswerData() {\r\n        let answerData = {\r\n            totalScore: 0,\r\n            currentQuestionScore: 0,\r\n            newLeaderboardPosition: 1,\r\n            oldLeaderboardPosition: 1,\r\n            answerTime: 0,\r\n            hasAnswered: false,\r\n        };\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n        for (let j = 0; j < Object.keys(currentPlayer.answers).length; j++) {\r\n            let question = this.props.game.quiz.questions[j];\r\n            let answer = currentPlayer.answers[question.id];\r\n            if (answer) {\r\n                if (answer.questionId === currentQuestion.id) {\r\n                    answerData.hasAnswered = true;\r\n                    answerData.currentQuestionScore = answer.score;\r\n                    answerData.answerTime = answer.answerTime;\r\n                }\r\n                answerData.totalScore += answer.score;\r\n            }\r\n        }\r\n\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            if (playerKeys[i] === currentPlayer.key) {\r\n                continue;\r\n            }\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let totalScore = 0;\r\n            let currentQuestionScore = 0;\r\n            for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                let question = this.props.game.quiz.questions[j];\r\n                let answer = player.answers[question.id];\r\n                if (answer) {\r\n                    if (answer.questionId === currentQuestion.id) {\r\n                        currentQuestionScore = answer.score;\r\n                    }\r\n                    totalScore += answer.score;\r\n                }\r\n            }\r\n            if (totalScore > answerData.totalScore) {\r\n                answerData.newLeaderboardPosition++;\r\n            }\r\n            if (totalScore - currentQuestionScore > answerData.totalScore - answerData.currentQuestionScore) {\r\n                answerData.oldLeaderboardPosition++;\r\n            }\r\n        }\r\n\r\n        return answerData;\r\n    }\r\n    render() {\r\n        let playerData = this.getPlayerAnswerData();\r\n        let wrongAnswer = playerData.hasAnswered && playerData.currentQuestionScore === 0;\r\n        let correctAnswer = playerData.currentQuestionScore > 0;\r\n        let noAnswer = !playerData.hasAnswered;\r\n\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let answers = [];\r\n            let currentQuestion = \"\";\r\n            if (this.props.game) {\r\n                currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n                answers = currentQuestion.answers;\r\n            }\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        {correctAnswer > 0 && <Typography variant=\"h5\">Correct answer!</Typography>}\r\n                        {wrongAnswer && <Typography variant=\"h5\">Wrong answer!</Typography>}\r\n                        {noAnswer && <Typography variant=\"h5\">You did not answer the question</Typography>}\r\n                        {!noAnswer &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Score:  <span className=\"dynamic-text\">{playerData.totalScore}</span> Time:  <span className=\"dynamic-text\">{playerData.answerTime / 1000}</span> seconds</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition !== playerData.newLeaderboardPosition &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Old position:{playerData.oldLeaderboardPosition} New position:{playerData.newLeaderboardPosition}</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition === playerData.newLeaderboardPosition &&\r\n                            <Typography variant=\"body1\">Position:{playerData.newLeaderboardPosition}</Typography>\r\n                        }\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Grid container>\r\n                            <Grid item md={6} xs={12}>\r\n                                <div className=\"quiz-answer-chart\">\r\n\r\n                                    <AnswerChart game={this.props.game} />\r\n                                </div>\r\n                            </Grid>\r\n                            <Grid item md={6} xs={12}>\r\n                                <div>\r\n                                    <Leaderboard game={this.props.game} />\r\n                                </div>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                        <Grid container>\r\n                            {answers.map((answer, index) =>\r\n                                <Grid key={index} item xs={6}>\r\n                                    <AnswerOption answer={answer} index={index} />\r\n                                </Grid>)}\r\n                        </Grid>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        {correctAnswer > 0 && <Typography paragraph variant=\"h5\">Correct answer!</Typography>}\r\n                        {wrongAnswer && <Typography paragraph variant=\"h5\">Wrong answer!</Typography>}\r\n                        {noAnswer && <Typography paragraph variant=\"h5\">You did not answer the question</Typography>}\r\n\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        {!noAnswer &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Score:{playerData.totalScore}</Typography>\r\n                                <Typography variant=\"body1\">Time:{playerData.answerTime / 1000} seconds</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition !== playerData.newLeaderboardPosition &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Old position:{playerData.oldLeaderboardPosition}</Typography>\r\n                                <Typography variant=\"body1\">New position:{playerData.newLeaderboardPosition}</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition === playerData.newLeaderboardPosition &&\r\n                            <Typography variant=\"body1\">Position:{playerData.newLeaderboardPosition}</Typography>\r\n                        }\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                        <Typography variant=\"subtitle1\">Look at the screen to se overall player results</Typography>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseResultQuestion;","import React, { Component } from 'react';\r\nimport { fire } from '../../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.saveAnswer = this.saveAnswer.bind(this);\r\n    }\r\n\r\n    saveAnswer(answer) {\r\n        let that = this;\r\n        let currentQuestionId = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;\r\n        fire.database().ref('/games/' + that.props.game.key + '/players/' + this.props.playerKey + '/answers/' + currentQuestionId).set(answer, function (error) {\r\n            if (error) {\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n                let snack = {\r\n                    variant: \"success\",\r\n                    message: \"Successfully updated player!\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let lastPhase = this.props.game.phase === \"final_result\" || this.props.game.phase === \"end\";\r\n        return (\r\n            <div className=\"play-container\">\r\n                {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} addPlayer={this.props.createPlayer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"awaiting_question\" && <PhaseAwaitingQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"show_question\" && <PhaseShowQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"answer\" && <PhaseAnswer game={this.props.game} saveAnswer={this.saveAnswer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"result_question\" && <PhaseResultQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                {lastPhase  && <PhaseFinalResult game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quiz;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                PlayEnd\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nfunction generateName(currentNames) {\r\n  const adjectives = ['adamant', 'adroit', 'amatory', 'animistic', 'antic', 'arcadian', 'baleful', 'bellicose', 'bilious', 'boorish', 'calamitous', 'caustic', 'cerulean', 'comely', 'concomitant', 'contumacious', 'corpulent', 'crapulous', 'defamatory', 'didactic', 'dilatory', 'dowdy', 'efficacious', 'effulgent', 'egregious', 'endemic', 'equanimous', 'execrable', 'fastidious', 'feckless', 'fecund', 'friable', 'fulsome', 'garrulous', 'guileless', 'gustatory', 'heuristic', 'histrionic', 'hubristic', 'incendiary', 'insidious', 'insolent', 'intransigent', 'inveterate', 'invidious', 'irksome', 'jejune', 'jocular', 'judicious', 'lachrymose', 'limpid', 'loquacious', 'luminous', 'mannered', 'mendacious', 'meretricious', 'minatory', 'mordant', 'munificent', 'nefarious', 'noxious', 'obtuse', 'parsimonious', 'pendulous', 'pernicious', 'pervasive', 'petulant', 'platitudinous', 'precipitate', 'propitious', 'puckish', 'querulous', 'quiescent', 'rebarbative', 'recalcitant', 'redolent', 'rhadamanthine', 'risible', 'ruminative', 'sagacious', 'salubrious', 'sartorial', 'sclerotic', 'serpentine', 'spasmodic', 'strident', 'taciturn', 'tenacious', 'tremulous', 'trenchant', 'turbulent', 'turgid', 'ubiquitous', 'uxorious', 'verdant', 'voluble', 'voracious', 'wheedling', 'withering', 'zealous'];\r\n  const nouns = ['ninja', 'chair', 'pancake', 'statue', 'unicorn', 'rainbows', 'laser', 'senor', 'bunny', 'captain', 'nibblets', 'cupcake', 'carrot', 'gnomes', 'glitter', 'potato', 'salad', 'toejam', 'curtains', 'beets', 'toilet', 'exorcism', 'stick figures', 'mermaid eggs', 'sea barnacles', 'dragons', 'jellybeans', 'snakes', 'dolls', 'bushes', 'cookies', 'apples', 'ice cream', 'ukulele', 'kazoo', 'banjo', 'opera singer', 'circus', 'trampoline', 'carousel', 'carnival', 'locomotive', 'hot air balloon', 'praying mantis', 'animator', 'artisan', 'artist', 'colorist', 'inker', 'coppersmith', 'director', 'designer', 'flatter', 'stylist', 'leadman', 'limner', 'make-up artist', 'model', 'musician', 'penciller', 'producer', 'scenographer', 'set decorator', 'silversmith', 'teacher', 'auto mechanic', 'beader', 'bobbin boy', 'clerk of the chapel', 'filling station attendant', 'foreman', 'maintenance engineering', 'mechanic', 'miller', 'moldmaker', 'panel beater', 'patternmaker', 'plant operator', 'plumber', 'sawfiler', 'shop foreman', 'soaper', 'stationary engineer', 'wheelwright', 'woodworkers'];\r\n  let finalName = '';\r\n  for (let i = 0; i < 20; i++) {\r\n    let name = '';\r\n    if (i > 10) {\r\n      name = `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`;\r\n    } else {\r\n      name = `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`;\r\n    }\r\n    if (currentNames.indexOf(name) > -1) {\r\n      continue;\r\n    } else {\r\n      finalName = name;\r\n      break;\r\n    }\r\n  }\r\n  return finalName;\r\n}\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: '',\r\n    };\r\n    this.createPlayer = this.createPlayer.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { playerKey, game, addPlayer } = this.props;\r\n    if (!playerKey && game.minigame.nameGenerator) {\r\n      addPlayer(this.generatePlayer());\r\n    }\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  createPlayer() {\r\n    const { name } = this.state;\r\n    const { addPlayer } = this.props;\r\n    // validera s att namnet inte r taget.\r\n    const player = {\r\n      name,\r\n      score: 0,\r\n    };\r\n    addPlayer(player);\r\n  }\r\n\r\n  generatePlayer() {\r\n    const { game } = this.props;\r\n    let currentNames = [];\r\n    if (game.players) {\r\n      currentNames = Object.values(game.players).map(a => a.name);\r\n    }\r\n    const name = generateName(currentNames);\r\n    const player = {\r\n      name,\r\n      score: 0,\r\n    };\r\n    return player;\r\n  }\r\n\r\n\r\n  render() {\r\n    const { game, playerKey } = this.props;\r\n    const { name } = this.state;\r\n    let playerName = '';\r\n    if (game.players && playerKey && game.players[playerKey]) {\r\n      playerName = game.players[playerKey].name;\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        {playerName\r\n          ? (\r\n            <div>\r\n              <div className=\"quiz-top-section\" />\r\n              <div className=\"quiz-middle-section\">\r\n                <Typography variant=\"h5\">\r\n                  <span>Welcome</span>\r\n                  <span className=\"dynamic-text\">{playerName}</span>\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n              </div>\r\n              <div className=\"quiz-bottom-section\" />\r\n            </div>\r\n          )\r\n          : (\r\n            <div>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Name\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange('name')}\r\n                />\r\n              </FormControl>\r\n              <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n            </div>\r\n          )\r\n            }\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  playerKey: PropTypes.string,\r\n  addPlayer: PropTypes.func.isRequired,\r\n};\r\nexport default PhaseConnection;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\">\r\n          <Typography variant=\"h5\">Starting game...</Typography>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseStarting;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseFinalResult extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\">\r\n          <Typography variant=\"h5\">Look at the screen. playerKey</Typography>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseFinalResult;\r\n","import React, { Component, Fragment } from 'react';\r\nimport LeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport RightIcon from '@material-ui/icons/ChevronRight';\r\nimport UpIcon from '@material-ui/icons/ExpandLess';\r\nimport DownIcon from '@material-ui/icons/ExpandMore';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport { fire } from '../../../base';\r\n\r\nclass SnakeController extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleAction = this.handleAction.bind(this);\r\n  }\r\n\r\n  handleAction(name) {\r\n    const { playerKey, game } = this.props;\r\n    const currentPlayer = game.players[playerKey];\r\n\r\n    fire.database().ref(`/games/${game.key}/minigame/snakes/${currentPlayer.snakeId}/move`).set(name, (error) => {\r\n      if (error) {\r\n        console.log('error updated snake move');\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { game, playerKey } = this.props;\r\n    const currentPlayer = game.players[playerKey];\r\n    const playerSnake = game.minigame.snakes[currentPlayer.snakeId];\r\n\r\n    const allControlActions = playerSnake.actions;\r\n    const displayName = playerSnake.playerKeys.length === 1 ? currentPlayer.name : playerSnake.name;\r\n\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"player-controlls-container\">\r\n          {allControlActions.map(action => (\r\n            <Fragment key={action}>\r\n              {currentPlayer.controlActions.includes(action)\r\n                ? (\r\n                  <Button key={action} className={`player-controlls-action player-controlls-${action}`} onClick={() => { this.handleAction(action); }} style={{ backgroundColor: playerSnake.color }}>\r\n                    {action === 'up' && <UpIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'down' && <DownIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'right' && <RightIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'left' && <LeftIcon className=\"player-controlls-icon\" />}\r\n                  </Button>\r\n                )\r\n                : (\r\n                  <Button key={action} className={`player-controlls-action player-controlls-${action}`} style={{ backgroundColor: playerSnake.color, opacity: 0.3 }}>\r\n                    {action === 'up' && <UpIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'down' && <DownIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'right' && <RightIcon className=\"player-controlls-icon\" />}\r\n                    {action === 'left' && <LeftIcon className=\"player-controlls-icon\" />}\r\n                  </Button>\r\n                )\r\n                            }\r\n            </Fragment>\r\n          ))}\r\n          <div className=\"player-controlls-action player-controlls-middle\">\r\n            <Typography variant=\"body1\">{displayName}</Typography>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnakeController.propTypes = {\r\n  playerKey: PropTypes.string.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default SnakeController;\r\n","import React, { Component } from 'react';\r\n\r\nclass TetrisController extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                TetrisController.js\r\n\r\n                hr  ska jag visa knappar fr moves. och en metod hr som tar knapptrycket och updaterar en specifik property i firebase baserat p gameid, playerkey etc.\r\n                mste ha med snakeId in i dnena kommmponent?\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TetrisController;","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport SnakeController from '../snake/SnakeController';\r\nimport TetrisController from '../tetris/TetrisController';\r\n\r\nclass Minigame extends PureComponent {\r\n  render() {\r\n    const {\r\n      game, playerKey, createPlayer,\r\n    } = this.props;\r\n    const lastPhase = game.phase === 'final_result' || game.phase === 'end';\r\n    switch (game.gametype) {\r\n      case 'snake':\r\n        return (\r\n          <div className=\"play-container\">\r\n            {game.phase === 'connection' && <PhaseConnection game={game} addPlayer={createPlayer} playerKey={playerKey} />}\r\n            {game.phase === 'starting' && <PhaseStarting game={game} />}\r\n            {game.phase === 'gameplay' && <SnakeController game={game} playerKey={playerKey} />}\r\n            {lastPhase && <PhaseFinalResult game={game} playerKey={playerKey} />}\r\n          </div>\r\n        );\r\n      case 'tetris':\r\n        return (\r\n          <div className=\"play-container\">\r\n            {game.phase === 'connection' && <PhaseConnection game={game} addPlayer={createPlayer} playerKey={playerKey} />}\r\n            {game.phase === 'starting' && <PhaseStarting game={game} />}\r\n            {game.phase === 'gameplay' && <TetrisController game={game} />}\r\n            {lastPhase && <PhaseFinalResult game={game} playerKey={playerKey} />}\r\n          </div>\r\n        );\r\n      default:\r\n        return (null);\r\n    }\r\n  }\r\n}\r\nMinigame.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  createPlayer: PropTypes.func.isRequired,\r\n  playerKey: PropTypes.string.isRequired,\r\n};\r\nexport default Minigame;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { fire } from '../../base';\r\nimport Quiz from '../quiz/play/Quiz';\r\nimport Minigame from '../minigame/play/Minigame';\r\n\r\nclass Play extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      game: {},\r\n      gameId: '',\r\n      playerKey: '',\r\n\r\n    };\r\n    this.createPlayer = this.createPlayer.bind(this);\r\n    this.fetchGame = this.fetchGame.bind(this);\r\n  }\r\n\r\n  fetchGame() {\r\n    const that = this;\r\n    fire.database().ref('games').orderByChild('gameId').equalTo(that.state.gameId)\r\n      .once('value', (snapshot) => {\r\n        if (snapshot.val()) {\r\n          let game;\r\n          snapshot.forEach((child) => {\r\n            game = child.val();\r\n          });\r\n          // fr skapa en ny attribut, canPlayerJoin true/false om det begvs\r\n          if (game.phase === 'connection') {\r\n            const storedPlayerKey = localStorage.getItem('RecentPlayerKey');\r\n            if (storedPlayerKey && game.players && game.players[storedPlayerKey]) {\r\n              that.setState({ playerKey: storedPlayerKey });\r\n            }\r\n\r\n            that.initGameListiner(game.key);\r\n            const snack = {\r\n              variant: 'success',\r\n              message: 'Connected to game',\r\n            };\r\n            that.props.showSnackbar(snack);\r\n            that.props.toggleHeader(false);\r\n          } else if (game.phase === 'setup') {\r\n            const snack = {\r\n              variant: 'error',\r\n              message: 'Game is not yet started',\r\n            };\r\n            that.props.showSnackbar(snack);\r\n          } else {\r\n            const storedPlayerKey = localStorage.getItem('RecentPlayerKey');\r\n            if (storedPlayerKey && game.players && game.players[storedPlayerKey]) {\r\n              that.setState({ playerKey: storedPlayerKey });\r\n              that.initGameListiner(game.key);\r\n              const snack = {\r\n                variant: 'success',\r\n                message: 'Connected to game',\r\n              };\r\n              that.props.showSnackbar(snack);\r\n              that.props.toggleHeader(false);\r\n            } else {\r\n              const snack = {\r\n                variant: 'error',\r\n                message: 'Game is in progress',\r\n              };\r\n              that.props.showSnackbar(snack);\r\n            }\r\n          }\r\n        } else {\r\n          const snack = {\r\n            variant: 'info',\r\n            message: 'No game found',\r\n          };\r\n          that.props.showSnackbar(snack);\r\n        }\r\n      });\r\n  }\r\n\r\n  initGameListiner(gameKey) {\r\n    const gameRef = fire.database().ref(`games/${gameKey}`);\r\n    const that = this;\r\n    gameRef.on('value', (snapshot) => {\r\n      const game = snapshot.val();\r\n      if (game) {\r\n        // kan blir problem med asynch setstate?\r\n        that.setState({\r\n          game,\r\n        });\r\n      } else {\r\n        that.setState({\r\n          game: '',\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    createPlayer(player) {\r\n      const playerRef = fire.database().ref(`/games/${this.state.game.key}/players`).push();\r\n      player.key = playerRef.key;\r\n      const that = this;\r\n      playerRef.set(player, (error) => {\r\n        if (error) {\r\n          const snack = {\r\n            variant: 'error',\r\n            message: 'Unexpected internal error',\r\n          };\r\n          that.props.showSnackbar(snack);\r\n        } else {\r\n          that.setState({\r\n            playerKey: player.key,\r\n          });\r\n          localStorage.setItem('RecentPlayerKey', player.key);\r\n        }\r\n      });\r\n    }\r\n\r\n    render() {\r\n      if (!this.state.game.phase) {\r\n        return (\r\n          <div className=\"page-container play-page\">\r\n            <FormControl>\r\n              <TextField\r\n                label=\"Game ID\"\r\n                name=\"Game ID\"\r\n                value={this.state.gameId}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('gameId')}\r\n              />\r\n            </FormControl>\r\n            <Button onClick={this.fetchGame} variant=\"contained\">Join</Button>\r\n          </div>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"page-container play-page\">\r\n          {this.state.game.gametype === 'quiz' && <Quiz game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n          {this.state.game.gametype === 'snake' && <Minigame game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n          {this.state.game.gametype === 'tetris' && <Minigame game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nexport default Play;\r\n","import React, { Component } from 'react';\r\nimport { Typography, Card } from '@material-ui/core';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app-page home-page\">\r\n        <Grid container spacing={24}>\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h3\">Welcome to stagehoot</Typography>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Link to=\"/play\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Play\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Connect to a game</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Link to=\"/host\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Host\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Host a created game</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Link to=\"/create\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Create\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Create a game</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport green from '@material-ui/core/colors/green';\r\nimport amber from '@material-ui/core/colors/amber';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst styles1 = theme => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nfunction MySnackbarContent(props) {\r\n  const {\r\n    classes, message, onClose, variant, ...other\r\n  } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={classes[variant]}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={(\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={classNames(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n            )}\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"Close\"\r\n          color=\"inherit\"\r\n          className={classes.close}\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nMySnackbarContent.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  variant: PropTypes.oneOf(['success', 'warning', 'error', 'info']).isRequired,\r\n};\r\n\r\nconst MySnackbarContentWrapper = withStyles(styles1)(MySnackbarContent);\r\n\r\nclass CustomizedSnackbars extends React.Component {\r\n    handleClose = (reason) => {\r\n      const { hideSnackbar } = this.props;\r\n      if (reason === 'clickaway') {\r\n        return;\r\n      }\r\n      hideSnackbar();\r\n    };\r\n\r\n    render() {\r\n      const { snack } = this.props;\r\n      return (\r\n        <div>\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'left',\r\n            }}\r\n            open={snack.open}\r\n            autoHideDuration={6000}\r\n            onClose={this.handleClose}\r\n          >\r\n            <MySnackbarContentWrapper\r\n              onClose={this.handleClose}\r\n              variant={snack.variant}\r\n              message={snack.message}\r\n            />\r\n          </Snackbar>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCustomizedSnackbars.propTypes = {\r\n  snack: PropTypes.object,\r\n  hideSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default CustomizedSnackbars;\r\n","import React, { Component } from 'react';\nimport './App.scss';\nimport { fire } from './base';\nimport Header from './components/common/Header';\nimport Create from './components/pages/Create';\nimport Host from './components/pages/Host';\nimport Play from './components/pages/Play';\nimport Home from './components/pages/Home';\nimport CustomizedSnackbars from './components/common/CustomizedSnackbars';\n\nimport {\n  HashRouter as Router,\n  Route,\n} from \"react-router-dom\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      snack: '',\n      showHeader: true,\n    };\n    this.showSnackbar = this.showSnackbar.bind(this);\n    this.hideSnackbar = this.hideSnackbar.bind(this);\n    this.toggleHeader = this.toggleHeader.bind(this);\n\n  }\n  hideSnackbar() {\n    let snack = this.state.snack;\n    snack.open = false;\n    this.setState({\n      snack: snack,\n    });\n  }\n  showSnackbar(snack) {\n    snack.open = true;\n    this.setState({\n      snack: snack,\n    });\n  }\n  toggleHeader(value) {\n    this.setState({ showHeader: value });\n  }\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          {this.state.showHeader && <Header />}\n          <div id=\"content\">\n            <Route exact path=\"/play\" render={() => <Play showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/host\" render={() => <Host showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/create\" render={() => <Create showSnackbar={this.showSnackbar} />} />\n            <Route exact path=\"/\" render={() => <Home />} />\n          </div>\n          {this.state.snack && <CustomizedSnackbars snack={this.state.snack} hideSnackbar={this.hideSnackbar} />}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}