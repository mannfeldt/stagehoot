{"version":3,"sources":["components/common/CountdownAnimation.scss","components/minigame/snake/Snake.js","base.js","components/common/Header.js","components/quiz/create/GenerateQuizForm.js","components/quiz/create/QuestionForm.js","components/quiz/create/Question.js","components/quiz/create/CreateQuiz.js","components/minigame/create/CreateSnake.js","components/minigame/create/CreateTetris.js","components/minigame/create/CreateMinigame.js","components/pages/Create.js","components/quiz/host/PhaseSetup.js","components/quiz/host/PhaseConnection.js","components/common/CountdownAnimation.js","components/quiz/host/PhaseStarting.js","components/quiz/host/PhaseAwaitingQuestion.js","components/quiz/host/PhaseShowQuestion.js","components/quiz/AnswerOption.js","components/common/Timer.js","components/quiz/host/AnswerCounter.js","components/quiz/host/PhaseAnswer.js","components/quiz/Podium.js","components/quiz/host/PhaseFinalResult.js","components/quiz/AnswerChart.js","components/quiz/Leaderboard.js","components/quiz/host/PhaseResultQuestion.js","components/quiz/host/PhaseEnd.js","components/quiz/host/Quiz.js","components/minigame/host/PhaseSetup.js","components/minigame/host/PhaseConnection.js","components/minigame/host/PhaseStarting.js","components/minigame/tetris/Tetris.js","components/minigame/host/PhaseFinalResult.js","components/minigame/host/PhaseEnd.js","components/minigame/snake/SnakeStarting.js","components/minigame/host/Minigame.js","components/pages/Host.js","components/quiz/play/PhaseConnection.js","components/quiz/play/PhaseStarting.js","components/quiz/play/PhaseAwaitingQuestion.js","components/quiz/play/PhaseShowQuestion.js","components/quiz/play/PhaseAnswer.js","components/quiz/play/PhaseFinalResult.js","components/quiz/play/PhaseResultQuestion.js","components/quiz/play/Quiz.js","components/quiz/play/PhaseEnd.js","components/minigame/play/PhaseConnection.js","components/minigame/play/PhaseStarting.js","components/minigame/play/PhaseFinalResult.js","components/minigame/play/PhaseEnd.js","components/minigame/snake/SnakeController.js","components/minigame/tetris/TetrisController.js","components/minigame/play/Minigame.js","components/pages/Play.js","components/pages/Home.js","components/common/CustomizedSnackbars.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","cyanColor","redColor","purpleColor","greenColor","ctx","canvas","fire","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","openMenu","event","setState","anchorEl","currentTarget","state","bind","assertThisInitialized","handleClose","titleText","options","route","window","location","href","substr","indexOf","react_default","a","createElement","id","AppBar_default","position","Toolbar_default","className","Link","to","Button_default","IconButton_default","onClick","MoreVert_default","Menu_default","open","onClose","items","push","key","length","MenuItem_default","Component","GenerateQuizForm","handleChange","name","defineProperty","target","value","handleChangeSelect","nrOfQuestions","category","difficulty","aType","generateQuestions","parseDOMArray","s","DOMParser","parseFromString","body","textContent","arr","result","i","parseDOM","that","url","fetch","then","response","json","generated","response_code","questions","results","generatedQuestion","question","correctAnswers","correct_answer","wrongAnswers","incorrect_answers","qType","type","addQuestions","snack","variant","message","showSnackbar","FormControl_default","TextField_default","label","margin","onChange","InputLabel_default","htmlFor","Select_default","inputProps","QuestionForm","handleTrueFalse","answer","correctAnswer","wrongAnswerOne","wrongAnswerTwo","wrongAnswerThree","timelimit","answerBool","sendQuestion","toggleGenerateQuestion","addQuestion","create_GenerateQuizForm","required","component","FormLabel_default","RadioGroup_default","aria-label","FormControlLabel_default","control","Radio_default","isTimelimit","Question","expanded","deleteQuestion","classes","Card_default","card","CardHeader_default","action","DeleteOutlined_default","title","subheader","CardContent_default","Typography_default","align","List_default","map","index","ListItem_default","ListItemText_default","primary","withStyles","theme","maxWidth","CreateQuiz","handleChangeBool","checked","gametype","gamemode","timescore","gameid","gamePass","validateGame","createQuiz","Math","floor","join","max","apply","o","calculateDefaultTimeLimit","existingQuestions","e","splice","game","password","tile","quiz","_this2","Grid_default","container","spacing","autoComplete","item","xs","FormGroup_default","Switch_default","create_QuestionForm","create_Question","transitionDelay","CreateSnake","racetarget","opponentCollision","eatOpponents","wallCollision","createGame","minigame","disabled","CreateTetris","CreateMinigame","setGameType","create_CreateSnake","create_CreateTetris","Create","gameId","generateGameId","created","Date","now","status","phase","gameRef","database","ref","set","error","errorText","localStorage","setItem","possible","charAt","random","create_CreateQuiz","create_CreateMinigame","index_es","PhaseSetup","surveyPlayers","answerStreak","nameGenerator","remoteMode","useTeams","randomizeQuestionOrder","autoPlayQuestions","startGame","createTeamGame","createClassicGame","teamMode","currentQuestion","gameFunc","update","PhaseConnection","nextPhase","players","values","player","paragraph","CountdownAnimation","speed","viewBox","d","PhaseStarting","counter","startCounter","setInterval","clearInterval","components_common_CountdownAnimation","PhaseAwaitingQuestion","PhaseShowQuestion","phaseTime","setTimeout","answers","concat","shuffle","array","temp","answerStyles","icon","Cake_default","color","ExtensionOutlined_default","FavoriteBorder_default","StarBorder_default","AnswerOption","design","answerQuestion","Paper_default","playAnswer","style","backgroundColor","paper","root","flexGrow","paddingTop","unit","paddingBottom","textAlign","palette","text","secondary","width","height","float","fontSize","marginLeft","Timer","currentCount","startValue","completed","CircularProgress_default","circle","colorSecondary","thickness","size","marginBottom","AnswerCounter","LinearProgress_default","bar","PhaseAnswer","started","isTimelimited","playerKeys","keys","answersCollected","answerCollectedPercentage","common_Timer","ceil","host_AnswerCounter","quiz_AnswerOption","colors","Podium","getChartData","getChartOptions","getChartHeight","chartData","labels","datasets","data","borderWidth","rawPlayerData","playerScoreData","score","j","sort","b","maxIndex","padding","maintainAspectRatio","showTooltips","responsiveAnimationDuration","animation","easing","duration","onProgress","animationObject","onAnimationProgress","chart","textBaseline","font","stepratio","currentStep","numSteps","meta","getDatasetMeta","hidden","forEach","element","dataString","toString","fillStyle","tooltipPosition","fillText","x","y","_model","scales","yAxes","ticks","beginAtZero","display","xAxes","legend","tooltips","enabled","events","layout","left","right","top","bottom","maxHeight","es","getWinnerString","PhaseFinalResult","quiz_Podium","restart","quit","alert","AnswerChart","getAnswerData","answerData","topPlayer","playerKey","playerAnswers","nrOfAnswers","borderColor","toConsumableArray","beginPath","rect","_view","fill","img","Image","src","PUBLIC_PATH","ypos","drawImage","Leaderboard","handleChangePage","page","handleChangeRowsPerPage","rowsPerPage","leaderboardData","getLeaderboardData","startScoreCounter","getScoreCellWidth","newLeaderBoard","done","currentQuestionScore","totalScore","leaderboard","playerList","questionId","lastScore","scoreWidth","_this$state","Table_default","table","TableBody_default","slice","TableRow_default","TableCell_default","getLeaderboardScore","TablePagination_default","count","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","whiteSpace","PhaseResultQuestion","nextQuestion","finalizeQuiz","isLastQuestion","md","quiz_AnswerChart","quiz_Leaderboard","end","PhaseEnd","Quiz","host_PhaseSetup","host_PhaseConnection","host_PhaseStarting","host_PhaseAwaitingQuestion","host_PhaseShowQuestion","host_PhaseAnswer","host_PhaseResultQuestion","host_PhaseFinalResult","host_PhaseEnd","multiplayerMode","Snake","gameTicker","settings","snake","border","respawntime","food","background","innerWidth","innerHeight","snakes","getSnakesInStartingPosition","initialFoods","active","foods","drawSnakes","generateFood","generateSnakes","resetCanvas","drawFood","detectCollisions","endGame","initControllerListener","generateFoods","isEndGame","detectOpponentCollision","detectSelfCollision","direction","actions","pos","getRandomStartingPosLeft","getRandomStartingPosRight","getRandomStartingPosBottom","getRandomStartingPosTop","existingValues","gridSize","xMax","getRandomStartingPos","yMax","round","app","document","querySelector","getContext","globalCompositeOperation","snakeRef","on","snapshot","val","move","console","log","dead","snakesRemaining","fillRect","_this3","_loop","respawning","startPos","getRandomCanvasPositionMargin","coordinate","unshift","eatenFood","pop","strokestyle","strokeRect","_this4","currentSnakeBody","opponentSnakeBody","k","leftCollison","topCollison","rightCollison","bottomCollison","Tetris","SNAKE_COLORS","SNAKE_NAMES","SnakeStarting","snakesize","createSnakes","createCoopSnakes","n","len","out","createTeamSnakes","actionChunks","chunkify","snakeId","controlActions","Minigame","minigame_host_PhaseSetup","minigame_host_PhaseConnection","snake_SnakeStarting","snake_Snake","minigame_host_PhaseFinalResult","minigame_host_PhaseEnd","minigame_host_PhaseStarting","tetris_Tetris","Host","getItem","updateGame","fetchGame","initGameListiner","restartGame","quitGame","toggleHeader","orderByChild","equalTo","once","child","gameKey","gameFunctions","host_Quiz","host_Minigame","authId","playerCreated","createPlayer","generateName","addPlayer","generatePlayer","adjectives","nouns","finalName","currentNames","playerName","playersInLobby","selectedAnswer","hasAnswered","answerTime","startTime","undefined","timeFactorUsed","playerAnswer","saveAnswer","panel","getPlayerAnswerData","answerDataList","currentPlayer","time","playerData","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","newLeaderboardPosition","oldLeaderboardPosition","wrongAnswer","noAnswer","currentQuestionId","lastPhase","play_PhaseConnection","play_PhaseStarting","updatePlayer","play_PhaseAwaitingQuestion","play_PhaseShowQuestion","play_PhaseAnswer","play_PhaseResultQuestion","play_PhaseFinalResult","SnakeController","handleAction","keyPress","currentDirection","currentSnake","validateDirectionChange","playerSnake","allControlActions","react","ExpandLess_default","ChevronRight_default","ChevronLeft_default","opacity","TetrisController","minigame_play_PhaseConnection","minigame_play_PhaseStarting","snake_SnakeController","minigame_play_PhaseFinalResult","tetris_TetrisController","Play","storedPlayerKey","playerRef","play_Quiz","play_Minigame","Home","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","MySnackbarContentWrapper","green","dark","amber","iconVariant","marginRight","alignItems","other","objectWithoutProperties","Icon","SnackbarContent_default","assign","classNames","aria-describedby","close","Close_default","CustomizedSnackbars","reason","hideSnackbar","Snackbar_default","anchorOrigin","vertical","horizontal","autoHideDuration","React","App","showHeader","HashRouter","common_Header","Route","exact","path","render","pages_Play","pages_Host","pages_Create","pages_Home","common_CustomizedSnackbars","Boolean","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9056a189.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"cyanColor\":\"#80DEEA\",\"redColor\":\"#EF9A9A\",\"purpleColor\":\"#CE93D8\",\"greenColor\":\"#C5E1A5\"};","import React, { Component } from 'react';\r\nimport { fire } from '../../../base';\r\n\r\nlet ctx;\r\nlet canvas;\r\n\r\nclass Snake extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //för att göra det mer smooth. så behöver jag typ dela upp ätandet så att det sker i flera tick? för just nu är ett tick storleken på food och allt annat\r\n        //lite delay när jag ökar speeden. är det olika delay för olika snakes? optimera senare.\r\n        this.state = {\r\n            gameTicker: null,\r\n            ticks: 0,\r\n            settings: {\r\n                snake: {\r\n                    size: 10,\r\n                    speed: this.props.game.minigame.difficulty,\r\n                    border: '#000',\r\n                    respawntime: 3,\r\n                },\r\n                food: {\r\n                    background: '#EC5E0B',\r\n                    border: '#73AA24',\r\n                },\r\n                canvas: {\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight,\r\n                    background: '#F5F5F5',\r\n                    border: '#000'\r\n                },\r\n            }\r\n        };\r\n        this.state.snakes = this.getSnakesInStartingPosition(this.props.game.minigame.snakes, this.state.settings);\r\n        let initialFoods = [];\r\n        for (let i = 0; i < this.props.game.minigame.snakes.length*3; i++) {\r\n            let food = {\r\n                index: i,\r\n                active: false,\r\n            }\r\n            initialFoods.push(food);\r\n        }\r\n        this.state.foods = initialFoods;\r\n\r\n        this.drawSnakes = this.drawSnakes.bind(this);\r\n        this.generateFood = this.generateFood.bind(this);\r\n        this.generateSnakes = this.generateSnakes.bind(this);\r\n        this.resetCanvas = this.resetCanvas.bind(this);\r\n        this.drawFood = this.drawFood.bind(this);\r\n        this.detectCollisions = this.detectCollisions.bind(this);\r\n        this.endGame = this.endGame.bind(this);\r\n        this.initControllerListener = this.initControllerListener.bind(this);\r\n        this.generateFoods = this.generateFoods.bind(this);\r\n        this.isEndGame = this.isEndGame.bind(this);\r\n        this.detectOpponentCollision = this.detectOpponentCollision.bind(this);\r\n        this.detectSelfCollision = this.detectSelfCollision.bind(this);\r\n\r\n    }\r\n    //vissa snakes lyckas inte äta foods? är det en bugg med konstiga synkningar mot state när det är så många?\r\n    //det verkar inte heller fungera med positioneringen indexof. Ormarna hamnar ibland precis brevid varandra.\r\n    getSnakesInStartingPosition(snakes, settings) {\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let snake = snakes[i];\r\n            snake.direction = snake.actions[i % 4];\r\n            let pos;\r\n            switch (snake.direction) {\r\n                case 'right':\r\n                    pos = this.getRandomStartingPosLeft(snakes, settings);\r\n                    snake.body = [{\r\n                        x: pos.x,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x - settings.snake.size,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x - (settings.snake.size * 2),\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x - (settings.snake.size * 3),\r\n                        y: pos.y,\r\n                    }];\r\n                    break;\r\n                case 'left':\r\n                    pos = this.getRandomStartingPosRight(snakes, settings);\r\n                    snake.body = [{\r\n                        x: pos.x,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x + settings.snake.size,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x + (settings.snake.size * 2),\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x + (settings.snake.size * 3),\r\n                        y: pos.y,\r\n                    }];\r\n                    break;\r\n                case 'up':\r\n                    pos = this.getRandomStartingPosBottom(snakes, settings);\r\n                    snake.body = [{\r\n                        x: pos.x,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y + settings.snake.size,\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y + (settings.snake.size * 2),\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y + (settings.snake.size * 3),\r\n                    }];\r\n                    break;\r\n                case 'down':\r\n                    pos = this.getRandomStartingPosTop(snakes, settings);\r\n                    snake.body = [{\r\n                        x: pos.x,\r\n                        y: pos.y,\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y - settings.snake.size,\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y - (settings.snake.size * 2),\r\n                    }, {\r\n                        x: pos.x,\r\n                        y: pos.y - (settings.snake.size * 3),\r\n                    }];\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return snakes;\r\n\r\n\r\n    }\r\n    getRandomStartingPosTop(snakes, settings) {\r\n\r\n        let existingValues = [];\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let snake = snakes[i];\r\n            if (snake.direction === \"down\" && snake.body) {\r\n                existingValues.push(snake.body[0].y);\r\n            }\r\n        }\r\n\r\n        let gridSize = settings.snake.size;\r\n        let margin = gridSize * 8;\r\n        let xMax = settings.canvas.width - (margin * 2);\r\n        let y = gridSize * 2;\r\n        let x = this.getRandomStartingPos(xMax, margin, existingValues, gridSize);\r\n        return { x: x, y: y };\r\n    }\r\n    getRandomStartingPosBottom(snakes, settings) {\r\n\r\n        let existingValues = [];\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let snake = snakes[i];\r\n            if (snake.direction === \"up\" && snake.body) {\r\n                existingValues.push(snake.body[0].y);\r\n            }\r\n        }\r\n\r\n        let gridSize = settings.snake.size;\r\n        let margin = gridSize * 8;\r\n        let xMax = settings.canvas.width - (margin * 2);\r\n        let y = settings.canvas.height - (gridSize * 3);\r\n        let x = this.getRandomStartingPos(xMax, margin, existingValues, gridSize);\r\n        return { x: x, y: y };\r\n    }\r\n    getRandomStartingPosRight(snakes, settings) {\r\n\r\n        let existingValues = [];\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let snake = snakes[i];\r\n            if (snake.direction === \"left\" && snake.body) {\r\n                existingValues.push(snake.body[0].y);\r\n            }\r\n        }\r\n\r\n        let gridSize = settings.snake.size;\r\n        let margin = gridSize * 8;\r\n        let yMax = settings.canvas.height - (margin * 2);\r\n        let x = settings.canvas.width - (gridSize * 3);\r\n        let y = this.getRandomStartingPos(yMax, margin, existingValues, gridSize);\r\n        return { x: x, y: y };\r\n    }\r\n    getRandomStartingPosLeft(snakes, settings) {\r\n        let existingValues = [];\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let snake = snakes[i];\r\n            if (snake.direction === \"right\" && snake.body) {\r\n                existingValues.push(snake.body[0].y);\r\n            }\r\n        }\r\n        let gridSize = settings.snake.size;\r\n        let margin = gridSize * 8;\r\n        let yMax = settings.canvas.height - (margin * 2);\r\n        let x = gridSize * 2;\r\n        let y = this.getRandomStartingPos(yMax, margin, existingValues, gridSize);\r\n        return { x: x, y: y };\r\n\r\n    }\r\n    getRandomStartingPos(max, margin, existingValues, gridSize) {\r\n        let value = Math.round((Math.random() * max) / gridSize) * gridSize + margin;\r\n        if (existingValues.indexOf(value) > -1 ||\r\n            existingValues.indexOf(value + gridSize) > -1 ||\r\n            existingValues.indexOf(value - gridSize) > -1) {\r\n            return this.getRandomStartingPos(max, margin, existingValues, gridSize);\r\n        }\r\n        return value;\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let app = document.querySelector('#snakeboard');\r\n\r\n        canvas = app.querySelector('canvas');\r\n        ctx = canvas.getContext('2d');\r\n        ctx.globalCompositeOperation = \"screen\"\r\n\r\n        //problem vid restart så skapas en ny användare. test spara playerkey till localhost och testa använda den keyn om den passar\r\n        this.generateSnakes();\r\n\r\n        let gameTicker = setInterval(() => {\r\n            if (!this.isEndGame()) {\r\n                this.detectCollisions();\r\n                this.generateSnakes();\r\n            } else {\r\n                this.endGame();\r\n            }\r\n        }, this.state.settings.snake.speed);\r\n\r\n        this.setState({ gameTicker: gameTicker });\r\n\r\n        for (let i = 0; i < this.state.snakes.length; i++) {\r\n            let snake = this.state.snakes[i];\r\n            this.initControllerListener(snake);\r\n        }\r\n    }\r\n    initControllerListener(snake) {\r\n        var snakeRef = fire.database().ref('/games/' + this.props.game.key + '/minigame/snakes/' + snake.id);\r\n        let that = this;\r\n        snakeRef.on('value', function (snapshot) {\r\n            let snake = snapshot.val();\r\n            if (snake) {\r\n                //kan blir problem med asynch setstate?\r\n                that.setState(function (state, props) {\r\n                    let snakes = [...state.snakes];\r\n                    //kolla så att detta är okej sätt, blir snakes index alltid rätt kopplat till snake.id? ska jag fixa ett riktigt ID för att vara säker? alltså ett pushid\r\n                    if (snake.move) {\r\n                        snakes[snake.id].direction = snake.move;\r\n                    }\r\n                    return {\r\n                        snakes: snakes\r\n                    };\r\n                });\r\n            } else {\r\n                console.log(\"move error\");\r\n            }\r\n        });\r\n        //koppla this.state.game till gameKey\r\n        //lägg till en likadan listener i Play.\r\n        //hosts gamelistiner ska lyssna på alla ändringar. Play ska inte lyssna på andra players ändringar om det går. något att optimera i framtiden.\r\n        //ett alt är att lyfta ut Players till en egen root? kan lägga phase och currentq i en game.state och sen är det allt som Player lyssnar på?\r\n        //men play behöver också behöva synca sin egna player.\r\n    }\r\n    isEndGame() {\r\n        //om det är survival så returnera true om det bara finns en snake kvar in game\r\n\r\n        //om det är reace så returnera true som någon snake har nått winning score/length,\r\n\r\n        if (this.props.game.minigame.gamemode === \"survival\") {\r\n            if (this.state.snakes.length === 1) {\r\n                return this.state.snakes[0].dead;\r\n            }\r\n            let snakesRemaining = 0;\r\n            for (let i = 0; i < this.state.snakes.length; i++) {\r\n                if (!this.state.snakes[i].dead) {\r\n                    snakesRemaining += 1;\r\n                }\r\n                if (snakesRemaining > 1) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n\r\n        } else if (this.props.game.minigame.gamemode === \"race\") {\r\n            for (let i = 0; i < this.state.snakes.length; i++) {\r\n                if (this.state.snakes[i].body.length >= this.props.game.minigame.racetarget) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    shouldComponentUpdate(){\r\n        //kan jag ha det här?\r\n        return false;\r\n    }\r\n\r\n\r\n    resetCanvas() {\r\n        // Full screen size\r\n\r\n        canvas.width = this.state.settings.canvas.width;\r\n        canvas.height = this.state.settings.canvas.height;\r\n\r\n\r\n        // Background\r\n        ctx.fillStyle = this.state.settings.canvas.background;\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        //lägg in denna i callbacken? eller hur fungar det?\r\n        //funkar det ens att updater this.state.ctx.fillRect()? eller behöcer jag spara vissa canvas saker utanför react?\r\n    }\r\n    getRandomCanvasPositionMargin(gridSize, yMax, xMax) {\r\n        let x = Math.round((Math.random() * (xMax - (gridSize * 14))) / gridSize) * gridSize + (gridSize * 4);\r\n        let y = Math.round((Math.random() * (yMax - (gridSize * 2))) / gridSize) * gridSize + (gridSize * 2);\r\n        return { x: x, y: y };\r\n\r\n    }\r\n    generateSnakes() {\r\n        //i alla såna här dpelarspecifika metoder måste jag ta in vilken snake/player det gäller\r\n        let snakes = [];\r\n        for (let i = 0; i < this.state.snakes.length; i++) {\r\n            //behöver jag göra en copy? spelar det någon roll?\r\n            let snake = this.state.snakes[i];\r\n            if (snake.respawning) {\r\n                if (Date.now() > snake.respawntime) {\r\n                    snake.dead = false;\r\n                    snake.respawning = false;\r\n                }\r\n                snakes.push(snake);\r\n                //kanske ta bort contrinue? så att den hoppar igång direkt?\r\n                continue;\r\n            } else if (snake.dead) {\r\n                if (this.props.game.minigame.gamemode === \"survival\") {\r\n                    snake.body = [];\r\n                    snakes.push(snake);\r\n                    continue;\r\n                } else if (this.props.game.minigame.gamemode === \"race\") {\r\n                    const gridSize = this.state.settings.snake.size;\r\n                    const xMax = this.state.settings.canvas.width - gridSize;\r\n                    const yMax = this.state.settings.canvas.height - gridSize;\r\n                    let startPos = this.getRandomCanvasPositionMargin(gridSize, yMax, xMax);\r\n                    snake.body = [{\r\n                        x: startPos.x,\r\n                        y: startPos.y,\r\n                    }, {\r\n                        x: startPos.x - gridSize,\r\n                        y: startPos.y,\r\n                    }, {\r\n                        x: startPos.x - (gridSize * 2),\r\n                        y: startPos.y,\r\n                    }, {\r\n                        x: startPos.x - (gridSize * 3),\r\n                        y: startPos.y,\r\n                    }]\r\n                    snake.direction = \"right\";\r\n                    //räkna ut och sätt ny body (length,x,y). \r\n                    //snake.dead = false;\r\n                    snake.respawning = true;\r\n                    snake.respawntime = Date.now() + (this.state.settings.snake.respawntime * 1000);\r\n                    snakes.push(snake);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let body = snake.body;\r\n            let coordinate;\r\n\r\n            switch (snake.direction) {\r\n                case 'right':\r\n                    coordinate = {\r\n                        x: body[0].x + this.state.settings.snake.size,\r\n                        y: body[0].y\r\n                    };\r\n                    break;\r\n                case 'up':\r\n                    coordinate = {\r\n                        x: body[0].x,\r\n                        y: body[0].y - this.state.settings.snake.size\r\n                    };\r\n                    break;\r\n                case 'left':\r\n                    coordinate = {\r\n                        x: body[0].x - this.state.settings.snake.size,\r\n                        y: body[0].y\r\n                    };\r\n                    break;\r\n                case 'down':\r\n                    coordinate = {\r\n                        x: body[0].x,\r\n                        y: body[0].y + this.state.settings.snake.size\r\n                    };\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            // The snake moves by adding a piece to the beginning \"this.snake.unshift(coordinate)\" and removing the last piece \"this.snake.pop()\"\r\n            // Except when it eats the food in which case there is no need to remove a piece and the added piece will make it grow\r\n            body.unshift(coordinate);\r\n\r\n\r\n            this.resetCanvas();\r\n            let eatenFood;\r\n            let foods = [...this.state.foods];\r\n            for (let j = 0; j < foods.length; j++) {\r\n                let food = foods[j];\r\n                if (body[0].x === food.x && body[0].y === food.y) {\r\n                    eatenFood = food;\r\n                    break;\r\n                }\r\n            }\r\n            //const ateFood = body[0].x === this.state.food.coordinates.x && body[0].y === this.state.food.coordinates.y;\r\n\r\n\r\n            if (eatenFood) {\r\n                this.setState(function (state, props) {\r\n                    let foods = [...state.foods];\r\n                    foods[eatenFood.index].active = false;\r\n                    return {\r\n                        foods: foods,\r\n                    };\r\n                });\r\n                snake.score += 10;\r\n            } else {\r\n                body.pop();\r\n            }\r\n            //snake.body = body;\r\n            snakes.push(snake);\r\n        }\r\n        this.setState(function (state, props) {\r\n            let ticks = state.ticks;\r\n            return {\r\n                snakes: snakes,\r\n                ticks: ticks + 1,\r\n            };\r\n        });\r\n\r\n        this.generateFoods();\r\n        this.drawSnakes();\r\n    }\r\n\r\n    drawSnakes() {\r\n        const size = this.state.settings.snake.size;\r\n        //ctx.globalCompositeOperation = \"multiply\";\r\n\r\n        for (let i = 0; i < this.state.snakes.length; i++) {\r\n            let snake = this.state.snakes[i];\r\n            if (snake.respawning && this.state.ticks % 2 === 0) {\r\n                ctx.fillStyle = this.state.settings.canvas.background;\r\n            } else {\r\n                ctx.fillStyle = snake.color;\r\n            }\r\n            ctx.strokestyle = this.state.settings.snake.border;\r\n            let body = snake.body;\r\n            // Draw each piece\r\n\r\n            //om två snakes är över varandra så finns en schysst style för det som han gick igenom på öredev. där färgerna från båda kan blandas till en ljusare eller mörkar.\r\n            body.forEach(coordinate => {\r\n                ctx.fillRect(coordinate.x, coordinate.y, size, size);\r\n                ctx.strokeRect(coordinate.x, coordinate.y, size, size);\r\n            });\r\n\r\n\r\n            //this.game.direction = this.game.nextDirection;\r\n        }\r\n        /*\r\n        jag kör rakt av på direction, verkar fungera och snabbare response då? om jag vill ha tillbaka nextdirection så ta fram denna metod och sätt i snakeListenern att den ska sätta nextDirection\r\n        this.setState(function (state, props) {\r\n            let snakes = state.snakes;\r\n            for (let i = 0; i < snakes.length; i++) {\r\n                snakes[i].direction = snakes[i].nextDirection;\r\n            }\r\n            return {\r\n                snakes: snakes,\r\n            };\r\n        });\r\n        */\r\n    }\r\n\r\n    generateFoods() {\r\n        let foods = [...this.state.foods];\r\n        for (let i = 0; i < foods.length; i++) {\r\n            let food = foods[i];\r\n            this.generateFood(food);\r\n        }\r\n        this.setState(function (state, props) {\r\n            //state.ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n            return {\r\n                foods: foods,\r\n            };\r\n        });\r\n    }\r\n\r\n    generateFood(food) {\r\n        // If there is uneaten food on the canvas there's no need to regenerate it\r\n\r\n        if (food.active) {\r\n            this.drawFood(food);\r\n            return;\r\n        }\r\n\r\n        const gridSize = this.state.settings.snake.size;\r\n        const xMax = this.state.settings.canvas.width - gridSize;\r\n        const yMax = this.state.settings.canvas.height - gridSize;\r\n\r\n        food.x = Math.round((Math.random() * xMax) / gridSize) * gridSize;\r\n        food.y = Math.round((Math.random() * yMax) / gridSize) * gridSize;\r\n        //this.drawFood(x, y);\r\n\r\n        // Make sure the generated coordinates do not conflict with the snake's present location\r\n        // If so recall this method recursively to try again\r\n        for (let i = 0; i < this.state.snakes.length; i++) {\r\n            let snake = this.state.snakes[i];\r\n            snake.body.forEach(coordinate => {\r\n                const foodSnakeConflict = coordinate.x === food.x && coordinate.y === food.y;\r\n                if (foodSnakeConflict) {\r\n                    this.generateFood();\r\n                } else {\r\n                    this.drawFood(food);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    drawFood(food) {\r\n        //denna metod kallas lite väl många gånger?? ioptimera?\r\n        const size = this.state.settings.snake.size;\r\n        ctx.fillStyle = this.state.settings.food.background;\r\n        ctx.strokestyle = this.state.settings.food.border;\r\n\r\n        ctx.fillRect(food.x, food.y, size, size);\r\n        ctx.strokeRect(food.x, food.y, size, size);\r\n        food.active = true;\r\n\r\n    }\r\n\r\n    detectCollisions() {\r\n        //ha olika modes för krock med motståndare\r\n        //2. krock med motståndare så händer inget\r\n        //3. krock med motståndare så äts motståndaren upp (head-on-head så dör båda)\r\n        //4. korck med motståndare så dör man\r\n        //modes krock med vägg:\r\n        //1. man dör\r\n        //2. man kommer ut på andra sidan\r\n        //vad händer om man får en selfcollision sammtidigt som någon får en opponentcollision i den?\r\n        //mode dö:\r\n        //när man dör så får man återställs man till liten mask\r\n        //när man dör så är man död för alltid\r\n\r\n        // Self collison\r\n        // It's impossible for the first 3 pieces of the snake to self collide so the loop starts at 4\r\n\r\n        //fixa en bättre metod för alla snakes senare\r\n\r\n        //fundra och test som det här är den mest effektiva lösningen? eller om jag gör några checks i onödan?\r\n        //jag vill nog bara göra en gemensam setState call efter den här loopen. så alla ändringar för t.ex. handleDeath\r\n        let snakes = this.state.snakes;\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            if (snakes[i].dead) {\r\n                continue;\r\n            }\r\n            if (this.detectSelfCollision(snakes[i])) {\r\n                //vilken av dessa fungerar?\r\n                snakes[i].dead = true;\r\n                //snakes[i].dead = true;\r\n\r\n                //this.handleDeath(snake);\r\n            }\r\n        }\r\n\r\n        if (this.props.game.minigame.opponentCollision) {\r\n            //här inne så ändrar jag om i snakes genom att döda dem som ska dödas och klyver om det ska klyvas osv. det som returneras ska vara korrekta snakes\r\n            snakes = this.detectOpponentCollision(snakes);\r\n        }\r\n        this.setState(function (state, props) {\r\n            return {\r\n                snakes: snakes,\r\n            };\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    detectOpponentCollision(snakes) {\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            if (snakes[i].dead) {\r\n                //om den redan är död så fortsätt. t.ex. en headon så kör jag båda två till dead direkt.\r\n                continue;\r\n            }\r\n            let currentSnakeBody = snakes[i].body;\r\n            for (let j = 0; j < snakes.length; j++) {\r\n                //om opponents är död så ska man inte kunna krocka med den. döda snakes har ju fortfarande coordinater. alt är att ta bort coordinaterna\r\n                if (j === i || snakes[j].dead) {\r\n                    continue;\r\n                }\r\n                let opponentSnakeBody = snakes[j].body;\r\n                //lägga till en function där om man äter body[1] så där opponent?\r\n                for (let k = 0; k < opponentSnakeBody.length; k++) {\r\n                    const collision = opponentSnakeBody[k].x === currentSnakeBody[0].x && opponentSnakeBody[k].y === currentSnakeBody[0].y;\r\n                    if (collision) {\r\n                        if (k === 0) {\r\n                            snakes[i].dead = true;\r\n                            snakes[j].dead = true;\r\n                            //collision head>head\r\n                        } else if (this.props.game.minigame.eatOpponents) {\r\n                            //snakes\r\n                            snakes[j].body.length = k;\r\n                            //kan jag använda opponentSnakeBody istället för snakes[j].body\r\n                            //opponentSnakeBody.length = k;?\r\n\r\n                        } else {\r\n                            snakes[i].dead = true;\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        //loppa igenom alla snakes och se om det finns collision, blir loop i en loop?\r\n        //fixa till alla snakes som har krockat, dvs kolla vilka modes som är aktiva och klyv/döda snakes accordingly\r\n\r\n        //loopa alla snakes utom en själv och se om man krockat med någon. \r\n        // om det är en krock så kolla om det eatOpponent är true. \r\n        //Är det true och man inte krockat med opponent.body[0]så ska opponent klyvas på den punkten om det är false så ska man själv dö (handleDeath(snake))\r\n        return snakes;\r\n    }\r\n    detectSelfCollision(snake) {\r\n        let body = snake.body;\r\n        for (let i = 4; i < body.length; i++) {\r\n            const selfCollison = body[i].x === body[0].x && body[i].y === body[0].y;\r\n\r\n            if (selfCollison) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // Wall collison\r\n        const leftCollison = body[0].x < 0;\r\n        const topCollison = body[0].y < 0;\r\n        const rightCollison = body[0].x > canvas.width - this.state.settings.snake.size;\r\n        const bottomCollison = body[0].y > canvas.height - this.state.settings.snake.size;\r\n\r\n        if (leftCollison || topCollison || rightCollison || bottomCollison) {\r\n            //this.handleDeath(snake);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    endGame() {\r\n\r\n        clearInterval(this.state.gameTicker);\r\n        alert(\"game over\");\r\n        //this.setUpGame();\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\" id=\"snakeboard\">\r\n                <canvas></canvas>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Snake;","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\n//PROD\r\nvar prodConfig = {\r\n  apiKey: \"AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU\",\r\n  authDomain: \"stagehoot.firebaseapp.com\",\r\n  databaseURL: \"https://stagehoot.firebaseio.com\",\r\n  projectId: \"stagehoot\",\r\n  storageBucket: \"stagehoot.appspot.com\",\r\n  messagingSenderId: \"589747985768\"\r\n};\r\n\r\n//DEV\r\n\r\nconst fire = firebase.initializeApp(prodConfig);\r\n\r\nexport { fire }","import React, { Component } from 'react';\r\n//import './header.css';\r\nimport { Link } from 'react-router-dom';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n//import headerImg from './header.jpg';\r\nimport { fire } from '../../base';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      anchorEl: null\r\n    };\r\n    this.openMenu = this.openMenu.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n\r\n  }\r\n\r\n  openMenu = event => {\r\n    this.setState({\r\n      anchorEl: event.currentTarget,\r\n    });\r\n  };\r\n\r\n  handleClose() {\r\n    this.setState({\r\n      anchorEl: null\r\n    });\r\n  }\r\n\r\n  render() {\r\n    function MenuItemList(props) {\r\n      let items = [];\r\n      items.push(<Link key={items.length} to={'/'}><MenuItem onClick={props.onClose}>Home</MenuItem></Link>);\r\n      items.push(<Link key={items.length} to={'/play'}><MenuItem onClick={props.onClose}>Play</MenuItem></Link>);\r\n      items.push(<Link key={items.length} to={'/host'}><MenuItem onClick={props.onClose} >Host</MenuItem></Link>);\r\n      items.push(<Link key={items.length} to={'/create'}><MenuItem onClick={props.onClose} >Create</MenuItem></Link>);\r\n      return (<div className=\"header-menulist\">\r\n        {items}\r\n      </div>);\r\n    }\r\n\r\n    let titleText = \"Stagehoot\";\r\n    if (fire.options.projectId === \"ettkilomjol-dev\") {\r\n      titleText = \"Ett Kilo Mjöl DEV\";\r\n    }\r\n    let route = window.location.href.substr(window.location.href.indexOf(\"/#/\") + 2);\r\n\r\n    return (\r\n      <div id=\"header\">\r\n        <AppBar position=\"static\">\r\n          <Toolbar className=\"toolbar\">\r\n            <div className=\"appbar-container--left\">\r\n              <Link className=\"appbar-title text-big\" to={'/'}>\r\n                {titleText}\r\n              </Link>\r\n              <span className=\"hide-mobile\">\r\n                <Link to={'/'}>\r\n                  <Button className={route === \"/\" ? 'appbar-nav-button selected-route':'appbar-nav-button'}>\r\n                    Home\r\n                  </Button>\r\n                </Link>\r\n                <Link to={'/play'}>\r\n                  <Button className={route === \"/play\" ? 'appbar-nav-button selected-route':'appbar-nav-button'}>\r\n                    Play\r\n                  </Button>\r\n                </Link>\r\n                <Link to={'/host'}>\r\n                  <Button className={route === \"/host\" ? 'appbar-nav-button selected-route':'appbar-nav-button'}>\r\n                    Host\r\n                  </Button>\r\n                </Link>\r\n                <Link to={'/create'}>\r\n                  <Button className={route === \"/create\" ? 'appbar-nav-button selected-route':'appbar-nav-button'}>\r\n                    Create\r\n                  </Button>\r\n                </Link>\r\n              </span>\r\n            </div>\r\n            <div className=\"appbar-container--right hide-desktop\">\r\n              <IconButton onClick={this.openMenu}>\r\n                <MoreVertIcon />\r\n              </IconButton>\r\n              <Menu open={!!this.state.anchorEl} onClose={this.handleClose} anchorEl={this.state.anchorEl}>\r\n                <MenuItemList onClose={this.handleClose} />\r\n              </Menu>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div >\r\n    );\r\n  }\r\n}\r\nexport default Header;","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nclass GenerateQuizForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            nrOfQuestions: '10',\r\n            category: '0',\r\n            difficulty: '0',\r\n            aType: '0',\r\n\r\n        };\r\n        this.generateQuestions = this.generateQuestions.bind(this);\r\n        this.parseDOMArray = this.parseDOMArray.bind(this);\r\n    }\r\n    parseDOM(s){\r\n        let parser = new DOMParser();\r\n        let dom = parser.parseFromString(\r\n            '<!doctype html><body>' + s,\r\n            'text/html');\r\n        let decodedString = dom.body.textContent;\r\n        return decodedString;\r\n    }\r\n    parseDOMArray(arr){\r\n        let result = [];\r\n        for(let i =0; i<arr.length; i++){\r\n            result.push(this.parseDOM(arr[i]));\r\n        }\r\n        return result;\r\n    }\r\n    generateQuestions() {\r\n        let that = this;\r\n        let url = \"https://opentdb.com/api.php?\";\r\n        if (this.state.nrOfQuestions !== \"0\") {\r\n            url += \"amount=\" + this.state.nrOfQuestions;\r\n        }\r\n        if (this.state.category !== \"0\") {\r\n            url += \"&category=\" + this.state.category;\r\n        }\r\n        if (this.state.difficulty !== \"0\") {\r\n            url += \"&difficulty=\" + this.state.difficulty;\r\n        }\r\n        if (this.state.aType !== \"0\") {\r\n            url += \"&type=\" + this.state.aType;\r\n        }\r\n        fetch(url)\r\n            .then(function (response) {\r\n                return response.json();\r\n            })\r\n            .then(function (generated) {\r\n                if (generated.response_code === 0) {\r\n                    let questions = [];\r\n                    for (let i = 0; i < generated.results.length; i++) {\r\n                        let generatedQuestion = generated.results[i];\r\n                        let question = {\r\n                            question: that.parseDOM(generatedQuestion.question),\r\n                            correctAnswers: [that.parseDOM(generatedQuestion.correct_answer)],\r\n                            wrongAnswers: that.parseDOMArray(generatedQuestion.incorrect_answers),\r\n                            qType: \"text\",\r\n                            aType: generatedQuestion.type,\r\n                            category: generatedQuestion.category,\r\n                            difficulty: generatedQuestion.difficulty,\r\n                        };\r\n                        questions.push(question);\r\n                    }\r\n                    that.props.addQuestions(questions);\r\n                } else {\r\n                    let snack = {\r\n                        variant: 'error',\r\n                        message: 'Could not generate questions( code: ' + generated.response_code + ')',\r\n                    }\r\n                    that.props.showSnackbar(snack);\r\n                }\r\n\r\n            });\r\n\r\n\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n    render() {\r\n        return (\r\n            <div>\r\n                <FormControl>\r\n                    <TextField\r\n                        label=\"Number of questions\"\r\n                        name=\"nrOfQuestions\"\r\n                        value={this.state.nrOfQuestions}\r\n                        margin=\"normal\"\r\n                        onChange={this.handleChange('nrOfQuestions')}\r\n                    />\r\n                </FormControl>\r\n                <FormControl >\r\n                    <InputLabel htmlFor=\"category\">Category</InputLabel>\r\n                    <Select\r\n                        value={this.state.category || \"\"}\r\n                        onChange={this.handleChangeSelect}\r\n                        name=\"category\"\r\n                        inputProps={{\r\n                            id: 'category',\r\n                        }}\r\n                    >\r\n                        <MenuItem value={\"0\"}>Any category</MenuItem>\r\n                        <MenuItem value={\"9\"}>General Knowledge</MenuItem>\r\n                        <MenuItem value={\"10\"}>Entertainment: Books</MenuItem>\r\n                        <MenuItem value={\"11\"}>Entertainment: Film</MenuItem>\r\n                        <MenuItem value={\"12\"}>Entertainment: Music</MenuItem>\r\n                        <MenuItem value={\"13\"}>Entertainment: Musicals and Theatres</MenuItem>\r\n                        <MenuItem value={\"14\"}>Entertainment: Television</MenuItem>\r\n                        <MenuItem value={\"15\"}>Entertainment: Video Games</MenuItem>\r\n                        <MenuItem value={\"16\"}>Entertainment: Board Games</MenuItem>\r\n                        <MenuItem value={\"17\"}>Science and Nature</MenuItem>\r\n                        <MenuItem value={\"18\"}>Science: Computers</MenuItem>\r\n                        <MenuItem value={\"19\"}>Science: Mathematics</MenuItem>\r\n                        <MenuItem value={\"20\"}>Mythology</MenuItem>\r\n                        <MenuItem value={\"21\"}>Sports</MenuItem>\r\n                        <MenuItem value={\"22\"}>Geography</MenuItem>\r\n                        <MenuItem value={\"23\"}>History</MenuItem>\r\n                        <MenuItem value={\"24\"}>Politics</MenuItem>\r\n                        <MenuItem value={\"25\"}>Art</MenuItem>\r\n                        <MenuItem value={\"26\"}>Celebrities</MenuItem>\r\n                        <MenuItem value={\"27\"}>Animals</MenuItem>\r\n                        <MenuItem value={\"28\"}>Vehicles</MenuItem>\r\n                        <MenuItem value={\"29\"}>Entertainment: Comics</MenuItem>\r\n                        <MenuItem value={\"30\"}>Science: Gadgets</MenuItem>\r\n                        <MenuItem value={\"31\"}>Entertainment: Japanese Anime and Manga</MenuItem>\r\n                        <MenuItem value={\"32\"}>Entertainment: Cartoon and Animations</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl >\r\n                    <InputLabel htmlFor=\"difficulty\">Difficulty</InputLabel>\r\n                    <Select\r\n                        value={this.state.difficulty || \"\"}\r\n                        onChange={this.handleChangeSelect}\r\n                        name=\"difficulty\"\r\n                        inputProps={{\r\n                            id: 'difficulty',\r\n                        }}\r\n                    >\r\n                        <MenuItem value={\"0\"}>Any difficulty</MenuItem>\r\n                        <MenuItem value={\"easy\"}>Easy</MenuItem>\r\n                        <MenuItem value={\"medium\"}>Medium</MenuItem>\r\n                        <MenuItem value={\"hard\"}>Hard</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl >\r\n                    <InputLabel htmlFor=\"aType\">Answer type</InputLabel>\r\n                    <Select\r\n                        value={this.state.aType || \"\"}\r\n                        onChange={this.handleChangeSelect}\r\n                        name=\"aType\"\r\n                        inputProps={{\r\n                            id: 'aType',\r\n                        }}\r\n                    >\r\n                        <MenuItem value={\"0\"}>Any type</MenuItem>\r\n                        <MenuItem value={\"multiple\"}>Multiple choice</MenuItem>\r\n                        <MenuItem value={\"boolean\"}>True/False</MenuItem>\r\n                    </Select>\r\n                </FormControl>\r\n                <Button onClick={this.generateQuestions} variant=\"contained\">Generate</Button>\r\n            </div >\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default GenerateQuizForm;","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport GenerateQuizForm from './GenerateQuizForm';\r\n\r\nclass QuestionForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            question: '',\r\n            correctAnswer: '',\r\n            wrongAnswerOne: '',\r\n            wrongAnswerTwo: '',\r\n            wrongAnswerThree: '',\r\n            timelimit: '10',\r\n            qType: 'text',\r\n            aType: 'multiple',\r\n            answerBool: '',\r\n            generateQuestions: true,\r\n\r\n        };\r\n        this.sendQuestion = this.sendQuestion.bind(this);\r\n        this.toggleGenerateQuestion = this.toggleGenerateQuestion.bind(this);\r\n\r\n    }\r\n    sendQuestion() {\r\n        let question = {\r\n            question: this.state.question,\r\n            correctAnswers: [this.state.correctAnswer],\r\n            wrongAnswers: [this.state.wrongAnswerOne, this.state.wrongAnswerTwo, this.state.wrongAnswerThree],\r\n            timelimit: this.state.timelimit,\r\n            qType: this.state.qType,\r\n            aType: this.state.aType,\r\n        };\r\n        this.setState({\r\n            question: '',\r\n            correctAnswer: '',\r\n            wrongAnswerOne: '',\r\n            wrongAnswerTwo: '',\r\n            wrongAnswerThree: '',\r\n        });\r\n        this.props.addQuestion(question);\r\n    }\r\n    toggleGenerateQuestion(){\r\n        this.setState({\r\n            generateQuestions: !this.state.generateQuestions\r\n        });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    handleTrueFalse = event => {\r\n        let answer = event.target.value;\r\n        this.setState({\r\n            correctAnswer: answer,\r\n            wrongAnswerOne: answer === \"true\" ? 'false' : 'true',\r\n        });\r\n    };\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n    render() {\r\n        if (this.state.generateQuestions) {\r\n            return (\r\n                <div>\r\n                    <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Custom questions</Button>\r\n                    <GenerateQuizForm addQuestions={this.props.addQuestions} showSnackbar={this.props.showSnackbar} />\r\n                </div >\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Auto generate questions</Button>\r\n\r\n                    <FormControl required >\r\n                        <InputLabel htmlFor=\"qtype-required\">Question type</InputLabel>\r\n                        <Select\r\n                            value={this.state.qType || \"\"}\r\n                            onChange={this.handleChangeSelect}\r\n                            name=\"qtype\"\r\n                            inputProps={{\r\n                                id: 'qtype-required',\r\n                            }}\r\n                        >\r\n                            <MenuItem value={\"text\"}>Text</MenuItem>\r\n                            <MenuItem value={\"image\"}>Image</MenuItem>\r\n                            <MenuItem value={\"video\"}>Video</MenuItem>\r\n\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl required >\r\n                        <InputLabel htmlFor=\"aType-required\">Answer type</InputLabel>\r\n                        <Select\r\n                            value={this.state.aType || \"\"}\r\n                            onChange={this.handleChangeSelect}\r\n                            name=\"aType\"\r\n                            inputProps={{\r\n                                id: 'aType-required',\r\n                            }}\r\n                        >\r\n                            <MenuItem value={\"boolean\"}>True/false</MenuItem>\r\n                            <MenuItem value={\"player\"}>Player</MenuItem>\r\n                            <MenuItem value={\"multiple\"}>Mulitichoice</MenuItem>\r\n                            <MenuItem value={\"free\"}>Free text</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                    <FormControl>\r\n                        <TextField\r\n                            label=\"Question\"\r\n                            name=\"question\"\r\n                            value={this.state.question}\r\n                            margin=\"normal\"\r\n                            onChange={this.handleChange('question')}\r\n                        />\r\n                    </FormControl>\r\n                    {this.state.aType === \"multiple\" &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Correct answer\"\r\n                                    name=\"correctAnswer\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.correctAnswer}\r\n                                    onChange={this.handleChange('correctAnswer')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Wrong answer\"\r\n                                    name=\"wrongAnswerOne\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.wrongAnswerOne}\r\n                                    onChange={this.handleChange('wrongAnswerOne')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Wrong answer\"\r\n                                    name=\"wrongAnswerTwo\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.wrongAnswerTwo}\r\n                                    onChange={this.handleChange('wrongAnswerTwo')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Wrong answer\"\r\n                                    name=\"wrongAnswerThree\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.wrongAnswerThree}\r\n                                    onChange={this.handleChange('wrongAnswerThree')}\r\n                                />\r\n                            </FormControl>\r\n                        </div>\r\n                    }\r\n                    {this.state.aType === \"boolean\" &&\r\n                        <div>\r\n                            <FormControl component=\"fieldset\">\r\n                                <FormLabel component=\"legend\">Answer</FormLabel>\r\n                                <RadioGroup\r\n                                    aria-label=\"answer\"\r\n                                    name=\"correctAnswer\"\r\n                                    value={this.state.correctAnswer}\r\n                                    onChange={this.handleTrueFalse}\r\n                                >\r\n                                    <FormControlLabel value=\"true\" control={<Radio />} label=\"True\" />\r\n                                    <FormControlLabel value=\"false\" control={<Radio />} label=\"False\" />\r\n                                </RadioGroup>\r\n                            </FormControl>\r\n                        </div>\r\n                    }\r\n                    {this.props.isTimelimit &&\r\n                        <FormControl>\r\n                            <TextField\r\n                                label=\"Time limit\"\r\n                                name=\"timelimit\"\r\n                                type=\"number\"\r\n                                value={this.state.timelimit}\r\n                                margin=\"normal\"\r\n                                onChange={this.handleChange('timelimit')}\r\n                            />\r\n                        </FormControl>\r\n                    }\r\n                    <Button onClick={this.sendQuestion} variant=\"contained\">Add question</Button>\r\n                </div >\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default QuestionForm;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\n\r\nconst styles = theme => ({\r\n    card: {\r\n        maxWidth: 400,\r\n    },\r\n});\r\nclass Question extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: false\r\n        };\r\n        this.deleteQuestion = this.deleteQuestion.bind(this);\r\n    }\r\n\r\n    deleteQuestion() {\r\n        this.props.deleteQuestion(this.props.question);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardHeader\r\n                    action={\r\n                        <IconButton onClick={this.deleteQuestion}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    }\r\n                    title={this.props.question.question}\r\n                    subheader={this.props.question.timelimit ? this.props.question.timelimit + ' seconds' : 'default timelimit'}\r\n                />\r\n                <CardContent>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                    <List>\r\n                        {this.props.question.correctAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                    <List>\r\n                        {this.props.question.wrongAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                </CardContent>\r\n\r\n\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Question);","import React, { Component } from 'react';\r\nimport QuestionForm from './QuestionForm';\r\nimport Question from './Question';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Input from '@material-ui/core/Input';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport FilledInput from '@material-ui/core/FilledInput';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nclass CreateQuiz extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: '',\r\n            gametype: 'quiz',\r\n            gamemode: 'normal',\r\n            timelimit: true,\r\n            timescore: false,\r\n            questions: [],\r\n            gameid: '',\r\n            gamePass: '',\r\n        };\r\n        this.addQuestion = this.addQuestion.bind(this);\r\n        this.addQuestions = this.addQuestions.bind(this);\r\n        this.deleteQuestion = this.deleteQuestion.bind(this);\r\n        this.validateGame = this.validateGame.bind(this);\r\n        this.createQuiz = this.createQuiz.bind(this);\r\n\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n    calculateDefaultTimeLimit(question) {\r\n        if (question.aType === 'multiple' || question.aType === 'boolean') {\r\n            return 10 + Math.floor((question.correctAnswers.join().length + question.wrongAnswers.join().length) / 50);\r\n        } else if (question.aType === \"free\") {\r\n            return 20;\r\n        } else if (question.aType === \"player\") {\r\n            //answer blir 4-8 random utvalda till varje fråga\r\n            return 20;\r\n        }\r\n    }\r\n    addQuestion(question) {\r\n        let questions = this.state.questions;\r\n        if (questions.length === 0) {\r\n            question.id = 1;\r\n        } else {\r\n            //räknar ut ett id som det nuvarande högsta id+1. Kan då använda id både som unik identifierare och som index\r\n            question.id = Math.max.apply(Math, questions.map(function (o) { return o.id; })) + 1;\r\n        }\r\n        if (this.state.timelimit && !question.timelimit) {\r\n            question.timelimit = this.calculateDefaultTimeLimit(question);\r\n        }\r\n        questions.push(question);\r\n        this.setState({\r\n            questions: questions\r\n        });\r\n        let snack = {\r\n            variant: \"success\",\r\n            message: \"Added question\"\r\n        }\r\n        this.props.showSnackbar(snack);\r\n    }\r\n    addQuestions(questions) {\r\n        let existingQuestions = this.state.questions;\r\n        for (let i = 0; i < questions.length; i++) {\r\n            let question = questions[i];\r\n            if (existingQuestions.length === 0) {\r\n                question.id = 1;\r\n            } else {\r\n                question.id = Math.max.apply(Math, existingQuestions.map(function (o) { return o.id; })) + 1;\r\n            }\r\n            if (this.state.timelimit && !question.timelimit) {\r\n                question.timelimit = this.calculateDefaultTimeLimit(question);\r\n            }\r\n            existingQuestions.push(question);\r\n        }\r\n        this.setState({\r\n            questions: existingQuestions\r\n        });\r\n        let snack = {\r\n            variant: \"success\",\r\n            message: \"Added questions\"\r\n        }\r\n        this.props.showSnackbar(snack);\r\n    }\r\n    deleteQuestion(question) {\r\n        let questions = this.state.questions;\r\n        const index = questions.map(e => e.id).indexOf(question.id);\r\n        questions.splice(index, 1);\r\n        this.setState({\r\n            questions: questions\r\n        });\r\n    }\r\n    createQuiz() {\r\n        let game = {};\r\n        game = {\r\n            password: this.state.gamePass,\r\n            gametype: this.state.gametype,\r\n            tile: this.state.title,\r\n            quiz: {\r\n                gamemode: 'normal',\r\n                timelimit: this.state.timelimit,\r\n                timescore: this.state.timescore,\r\n                questions: this.state.questions,\r\n            }\r\n        };\r\n        this.props.createQuiz(game);\r\n    }\r\n    validateGame(game) {\r\n        //validera lösenord är tillräckligt starkt här eller direkt efter input om det finns någon smart lösning.\r\n        //kolla på gametype hur ha en secifik validering för varje type\r\n        return true;\r\n\r\n    }\r\n    clearForm() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-page create-page\">\r\n                <Grid container spacing={8}>\r\n                    <form autoComplete=\"off\">\r\n                        <Grid item xs={4}>\r\n                            <FormControl required >\r\n                                <InputLabel htmlFor=\"gametype-required\">Gametype</InputLabel>\r\n                                <Select\r\n                                    value={this.state.gametype || \"\"}\r\n                                    onChange={this.handleChangeSelect}\r\n                                    name=\"gametype\"\r\n                                    inputProps={{\r\n                                        id: 'gametype-required',\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value={\"quiz\"}>Quiz</MenuItem>\r\n                                    <MenuItem value={\"survey\"}>Survey</MenuItem>\r\n                                    <MenuItem value={\"discussion\"}>Discussion</MenuItem>\r\n                                    <MenuItem value={\"minigame\"}>Mini game</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <FormControl required >\r\n                                <InputLabel htmlFor=\"gametype-required\">Gamemode</InputLabel>\r\n                                <Select\r\n                                    value={this.state.gamemode || \"\"}\r\n                                    onChange={this.handleChangeSelect}\r\n                                    name=\"gamemode\"\r\n                                    inputProps={{\r\n                                        id: 'gamemode-required',\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value={\"normal\"}>Normal</MenuItem>\r\n                                    <MenuItem value={\"wild\"}>Wild</MenuItem>\r\n\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <FormControl component=\"fieldset\">\r\n                                <FormLabel component=\"legend\">Game options</FormLabel>\r\n                                <FormGroup>\r\n                                    <FormControlLabel\r\n                                        control={\r\n                                            <Switch\r\n                                                checked={this.state.timelimit}\r\n                                                onChange={this.handleChangeBool('timelimit')}\r\n                                                value=\"timelimit\"\r\n                                            />\r\n                                        }\r\n                                        label=\"Time limited questions\"\r\n                                    />\r\n                                    <FormControlLabel\r\n                                        control={\r\n                                            <Switch\r\n                                                checked={this.state.timescore}\r\n                                                onChange={this.handleChangeBool('timescore')}\r\n                                                value=\"timescore\"\r\n                                            />\r\n                                        }\r\n                                        label=\"Time based score\"\r\n                                    />\r\n                                </FormGroup>\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Title\"\r\n                                    name=\"title\"\r\n                                    value={this.state.title}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('title')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    name=\"gamePass\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.gamePass}\r\n                                    onChange={this.handleChange('gamePass')}\r\n                                />\r\n                            </FormControl>\r\n\r\n                            <Button onClick={this.createQuiz} variant=\"contained\">Create</Button>\r\n                        </Grid>\r\n                    </form>\r\n                    <Grid item xs={8}>\r\n\r\n                        <QuestionForm addQuestions={this.addQuestions} addQuestion={this.addQuestion} isTimelimit={!!this.state.timelimit} showSnackbar={this.props.showSnackbar} />\r\n                    </Grid>\r\n\r\n                        {this.state.questions.map((question, index) =>\r\n                            <Grid item xs={6} key={question.id}>\r\n\r\n                                <Question question={question} transitionDelay={index} deleteQuestion={this.deleteQuestion} />\r\n                            </Grid>\r\n                        )}\r\n                </Grid>\r\n            </div >\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateQuiz;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nclass CreateSnake extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: '',\r\n            gametype: 'snake',\r\n            gamemode: 'survival',\r\n            racetarget: 20,\r\n            opponentCollision: false,\r\n            eatOpponents: false,\r\n            wallCollision: true,\r\n            gameid: '',\r\n            gamePass: '',\r\n            difficulty: '300',\r\n        };\r\n\r\n        this.validateGame = this.validateGame.bind(this);\r\n        this.createGame = this.createGame.bind(this);\r\n\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    createGame() {\r\n        let game = {};\r\n        game = {\r\n            password: this.state.gamePass,\r\n            gametype: this.state.gametype,\r\n            tile: this.state.title,\r\n            minigame: {\r\n                gamemode: this.state.gamemode,\r\n                wallCollision: this.state.wallCollision,\r\n                eatOpponents: this.state.opponentCollision && this.state.eatOpponents,\r\n                opponentCollision: this.state.opponentCollision,\r\n                racetarget: this.state.racetarget,\r\n                difficulty: this.state.difficulty,\r\n\r\n            }\r\n        };\r\n        this.props.createGame(game);\r\n    }\r\n    validateGame(game) {\r\n        //validera lösenord är tillräckligt starkt här eller direkt efter input om det finns någon smart lösning.\r\n        //kolla på gametype hur ha en secifik validering för varje type\r\n        return true;\r\n\r\n    }\r\n    clearForm() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-page create-page\">\r\n                <Grid container spacing={8}>\r\n                    <form autoComplete=\"off\">\r\n                        <Grid item xs={4}>\r\n                            <FormControl required >\r\n                                <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                                <Select\r\n                                    value={this.state.gamemode || \"\"}\r\n                                    onChange={this.handleChangeSelect}\r\n                                    name=\"gamemode\"\r\n                                    inputProps={{\r\n                                        id: 'gamemode-required',\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value={\"survival\"}>Survival</MenuItem>\r\n                                    <MenuItem value={\"race\"}>Race</MenuItem>\r\n\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            {this.props.gamemode === \"race\" &&\r\n                                <FormControl>\r\n                                    <TextField\r\n                                        label=\"Snake length\"\r\n                                        name=\"racetarget\"\r\n                                        type=\"number\"\r\n                                        value={this.state.racetarget}\r\n                                        margin=\"normal\"\r\n                                        onChange={this.handleChange('racetarget')}\r\n                                    />\r\n                                </FormControl>\r\n                            }\r\n                            <FormControl required >\r\n                                <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n                                <Select\r\n                                    value={this.state.difficulty || \"\"}\r\n                                    onChange={this.handleChangeSelect}\r\n                                    name=\"difficulty\"\r\n                                    inputProps={{\r\n                                        id: 'difficulty-required',\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value={\"500\"}>Easy</MenuItem>\r\n                                    <MenuItem value={\"300\"}>Medium</MenuItem>\r\n                                    <MenuItem value={\"100\"}>Hard</MenuItem>\r\n                                    <MenuItem value={\"75\"}>Pro</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                            <FormControl component=\"fieldset\">\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Switch\r\n                                            checked={this.state.wallCollision}\r\n                                            onChange={this.handleChangeBool('wallCollision')}\r\n                                            value=\"wallCollision\"\r\n                                        />\r\n                                    }\r\n                                    label=\"Wall collisions\"\r\n                                />\r\n                            </FormControl>\r\n\r\n                            <FormControl component=\"fieldset\">\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Switch\r\n                                            checked={this.state.opponentCollision}\r\n                                            onChange={this.handleChangeBool('opponentCollision')}\r\n                                            value=\"opponentCollision\"\r\n                                        />\r\n                                    }\r\n                                    label=\"Opponent collisions\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl component=\"fieldset\">\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Switch\r\n                                            checked={this.state.opponentCollision && this.state.eatOpponents}\r\n                                            disabled={!this.state.opponentCollision}\r\n                                            onChange={this.handleChangeBool('eatOpponents')}\r\n                                            value=\"eatOpponents\"\r\n                                        />\r\n                                    }\r\n                                    label=\"Eat opponent on collision\"\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Title\"\r\n                                    name=\"title\"\r\n                                    value={this.state.title}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('title')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    name=\"gamePass\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.gamePass}\r\n                                    onChange={this.handleChange('gamePass')}\r\n                                />\r\n                            </FormControl>\r\n\r\n                            <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n                        </Grid>\r\n                    </form>\r\n\r\n                </Grid>\r\n            </div >\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateSnake;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nclass CreateTetris extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            title: '',\r\n            gametype: 'tetris',\r\n            gamemode: 'survival',\r\n            gameid: '',\r\n            gamePass: '',\r\n        };\r\n\r\n        this.validateGame = this.validateGame.bind(this);\r\n        this.createGame = this.createGame.bind(this);\r\n\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    createGame() {\r\n        let game = {};\r\n        game = {\r\n            password: this.state.gamePass,\r\n            gametype: this.state.gametype,\r\n            tile: this.state.title,\r\n            minigame: {\r\n                gamemode: this.state.gamemode,\r\n            }\r\n        };\r\n        this.props.createGame(game);\r\n    }\r\n    validateGame(game) {\r\n        //validera lösenord är tillräckligt starkt här eller direkt efter input om det finns någon smart lösning.\r\n        //kolla på gametype hur ha en secifik validering för varje type\r\n        return true;\r\n\r\n    }\r\n    clearForm() {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-page create-page\">\r\n                <Grid container spacing={8}>\r\n                    <form autoComplete=\"off\">\r\n                        <Grid item xs={4}>\r\n                            <FormControl required >\r\n                                <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                                <Select\r\n                                    value={this.state.gamemode || \"\"}\r\n                                    onChange={this.handleChangeSelect}\r\n                                    name=\"gamemode\"\r\n                                    inputProps={{\r\n                                        id: 'gamemode-required',\r\n                                    }}\r\n                                >\r\n                                    <MenuItem value={\"survival\"}>Survival</MenuItem>\r\n                                    <MenuItem value={\"race\"}>Race</MenuItem>\r\n\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Title\"\r\n                                    name=\"title\"\r\n                                    value={this.state.title}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('title')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    name=\"gamePass\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.gamePass}\r\n                                    onChange={this.handleChange('gamePass')}\r\n                                />\r\n                            </FormControl>\r\n\r\n                            <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n                        </Grid>\r\n                    </form>\r\n\r\n                </Grid>\r\n            </div >\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateTetris;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport CreateSnake from './CreateSnake';\r\nimport CreateTetris from './CreateTetris';\r\n\r\nclass CreateMinigame extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            gametype:''\r\n        };\r\n    }\r\n\r\n    setGameType = name => event => {\r\n        this.setState({ gametype: name });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-page create-page\">\r\n                {!this.state.gametype && <Grid container spacing={24}>\r\n                    <Button onClick={this.setGameType(\"snake\")} variant=\"contained\">Snake</Button>\r\n                    <Button onClick={this.setGameType(\"tetris\")} variant=\"contained\">Tetris</Button>\r\n                </Grid>}\r\n                skulle kunna ha generallisering här i minigame? \r\n                gemensamma phases som ligger under minigame/play minigame/host och sen kan det finnas en mapp för varje game minigame/snake som innehåller vissa specifika phases\r\n                {this.state.gametype === \"snake\" && <CreateSnake createGame={this.props.createGame}/>}\r\n                {this.state.gametype === \"tetris\" && <CreateTetris createGame={this.props.createGame}/>}\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default CreateMinigame;","import React, { Component } from 'react';\r\nimport { fire } from '../../base';\r\nimport CreateQuiz from '../quiz/create/CreateQuiz';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Typography } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport CreateMinigame from '../minigame/create/CreateMinigame';\r\n\r\nclass Create extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            gametype: '',\r\n            gameId: '',\r\n        };\r\n        this.createGame = this.createGame.bind(this);\r\n        this.validateGame = this.validateGame.bind(this);\r\n        this.generateGameId = this.generateGameId.bind(this);\r\n\r\n    }\r\n\r\n    setGameType = name => event => {\r\n        this.setState({ gametype: name });\r\n    };\r\n\r\n    createGame(game) {\r\n        game.gameId = this.generateGameId();\r\n        game.created = Date.now();\r\n        game.status = \"CREATED\";\r\n        game.phase = \"setup\";\r\n        if (!this.validateGame(game)) {\r\n            return;\r\n        }\r\n\r\n        let that = this;\r\n        //game push få ett id.\r\n        let gameRef = fire.database().ref('/games').push();\r\n        game.key = gameRef.key;\r\n        gameRef.set(game, function (error) {\r\n            if (error) {\r\n                that.setState({\r\n                    errorText: 'Error: ' + error,\r\n                });\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n                let snack = {\r\n                    variant: \"success\",\r\n                    message: \"Successfully created!\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n                that.setState({\r\n                    gameId: game.gameId,\r\n                    gametype: 'done'\r\n                });\r\n                localStorage.setItem('RecentGameId', game.gameId);\r\n\r\n                //show gameid and password\r\n                //show button to start game / navigate to host\r\n            }\r\n        });\r\n    }\r\n    validateGame(game) {\r\n        //validera lösenord är tillräckligt starkt här eller direkt efter input om det finns någon smart lösning.\r\n        //kolla på gametype hur ha en secifik validering för varje type\r\n        let snack = {\r\n            variant: \"error\",\r\n            message: \"explain error or errors/\"\r\n        }\r\n        //this.props.showSnackbar(snack);\r\n        return true;\r\n\r\n    }\r\n\r\n    generateGameId() {\r\n        let id = \"\";\r\n        let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n        for (var i = 0; i < 6; i++) {\r\n            id += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        }\r\n\r\n        return id;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app-page create-page\">\r\n                {!this.state.gametype && <Grid container spacing={24}>\r\n                    <Button onClick={this.setGameType(\"quiz\")} variant=\"contained\">Quiz</Button>\r\n                    <Button onClick={this.setGameType(\"survey\")} variant=\"contained\">Survey</Button>\r\n                    <Button onClick={this.setGameType(\"minigame\")} variant=\"contained\">Mini game</Button>\r\n                    <Button onClick={this.setGameType(\"discussion\")} variant=\"contained\">Discussion</Button>\r\n                </Grid>}\r\n                {this.state.gametype === \"quiz\" && <CreateQuiz createQuiz={this.createGame} showSnackbar={this.props.showSnackbar} />}\r\n                {this.state.gametype === \"minigame\" && <CreateMinigame createGame={this.createGame} showSnackbar={this.props.showSnackbar} />}\r\n                {this.state.gametype === \"done\" &&\r\n                    <div>\r\n                        <Typography variant=\"h2\">Created game ID:  <span className=\"dynamic-text\">{this.state.gameId}</span></Typography>\r\n                        <Link to={'/host'}>Host game</Link>\r\n                    </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Create;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Switch from '@material-ui/core/Switch';\r\nclass PhaseSetup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            surveyPlayers: false,\r\n            answerStreak: true,\r\n            nameGenerator: false,\r\n            remoteMode: false,\r\n            useTeams: false,\r\n            randomizeQuestionOrder: false,\r\n            autoPlayQuestions: false,\r\n\r\n        };\r\n        this.startGame = this.startGame.bind(this);\r\n        this.createTeamGame = this.createTeamGame.bind(this);\r\n        this.createClassicGame = this.createClassicGame.bind(this);\r\n\r\n\r\n    }\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    createTeamGame() {\r\n        this.startGame(true);\r\n    }\r\n    createClassicGame() {\r\n        this.startGame(false);\r\n    }\r\n    startGame(teamMode) {\r\n        let game = {};\r\n        let quiz = this.props.game.quiz;\r\n        quiz.surveyPlayers = this.state.surveyPlayers;\r\n        quiz.answerStreak = this.state.answerStreak;\r\n        quiz.nameGenerator = this.state.nameGenerator;\r\n        quiz.remoteMode = this.state.remoteMode;\r\n        quiz.useTeams = teamMode;\r\n        quiz.autoPlayQuestions = this.state.autoPlayQuestions;\r\n        quiz.randomizeQuestionOrder = this.state.randomizeQuestionOrder;\r\n        quiz.currentQuestion = 0;\r\n\r\n        game.quiz = quiz;\r\n        game.phase = \"connection\";\r\n        game.status = \"IN_PROGRESS\";\r\n        this.props.gameFunc.update(game);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h4\">Game Settings</Typography>\r\n                <Button onClick={this.createClassicGame} variant=\"contained\">Classic</Button>\r\n                <Button onClick={this.createTeamGame} variant=\"contained\">Team mode</Button>\r\n\r\n                <FormControl component=\"fieldset\">\r\n                    <FormGroup>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.nameGenerator}\r\n                                    onChange={this.handleChangeBool('nameGenerator')}\r\n                                    value=\"nameGenerator\"\r\n                                />\r\n                            }\r\n                            label=\"Generate names for players\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.remoteMode}\r\n                                    onChange={this.handleChangeBool('remoteMode')}\r\n                                    value=\"remoteMode\"\r\n                                />\r\n                            }\r\n                            label=\"Remote playmode\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.answerStreak}\r\n                                    onChange={this.handleChangeBool('answerStreak')}\r\n                                    value=\"answerStreak\"\r\n                                />\r\n                            }\r\n                            label=\"Use answer scorestreak\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.surveyPlayers}\r\n                                    onChange={this.handleChangeBool('surveyPlayers')}\r\n                                    value=\"surveyPlayers\"\r\n                                />\r\n                            }\r\n                            label=\"Survey players after game\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.randomizeQuestionOrder}\r\n                                    onChange={this.handleChangeBool('randomizeQuestionOrder')}\r\n                                    value=\"randomizeQuestionOrder\"\r\n                                />\r\n                            }\r\n                            label=\"Randomize question order\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.autoPlayQuestions}\r\n                                    onChange={this.handleChangeBool('autoPlayQuestions')}\r\n                                    value=\"autoPlayQuestions\"\r\n                                />\r\n                            }\r\n                            label=\"Auto play questions\"\r\n                        />\r\n\r\n                    </FormGroup>\r\n                </FormControl>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseSetup;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"starting\" });\r\n    }\r\n    //add function to kick player\r\n    render() {\r\n        let players = this.props.game.players;\r\n        if (!players) {\r\n            players = [];\r\n        } else {\r\n            players = Object.values(players);\r\n        }\r\n        return (\r\n            <div className=\"phase-container\">\r\n\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h2\">Join game with Game ID:  <span className=\"dynamic-text\">{this.props.game.gameId}</span></Typography>\r\n                    <Typography variant=\"subtitle1\">{this.props.game.title}</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Grid container>\r\n                        {players.map((player, index) =>\r\n                            <Grid key={index} item xs={3}>\r\n                                <Typography paragraph variant=\"body1\">{player.name}</Typography>\r\n                            </Grid>)}\r\n                    </Grid>\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                    <Button onClick={this.nextPhase} variant=\"contained\">Start</Button>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport './CountdownAnimation.scss';\r\n\r\nclass CountdownAnimation extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n//jag skulle kunna lägga en counter här som rendrerar null efter några sekunder så att är säkert att den inte hinner loopa \r\n    render() {\r\n      if(this.props.speed === \"slow\"){\r\n\r\n        return (\r\n          <div className=\"demo_slow\">\r\n<div className=\"demo_slow__colored-blocks\">\r\n  <div className=\"demo_slow__colored-blocks-rotater\">\r\n    <div className=\"demo_slow__colored-block\"></div>\r\n    <div className=\"demo_slow__colored-block\"></div>\r\n    <div className=\"demo_slow__colored-block\"></div>\r\n    <div className=\"demo_slow__colored-block\"></div>\r\n  </div>\r\n  <div className=\"demo_slow__colored-blocks-inner\"></div>\r\n  <div className=\"demo_slow__text\">Ready</div>\r\n</div>\r\n<div className=\"demo_slow__inner\">\r\n  <svg className=\"demo_slow__numbers\" viewBox=\"0 0 100 100\">\r\n    <defs>\r\n      <path className=\"demo_slow__num-path-1\" d=\"M40,28 55,22 55,78\"/>\r\n      <path className=\"demo_slow__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\"/>\r\n      <path className=\"demo_slow__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\"/>\r\n      <path className=\"demo_slow__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\"/>\r\n      <path className=\"demo_slow__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\"/>\r\n    </defs>\r\n    <path className=\"demo_slow__numbers-path\" \r\n          d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19 \r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73 \r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83 \r\n          l0,-61 L40,28\" />\r\n  </svg>\r\n</div>\r\n</div>\r\n        );\r\n      }else{\r\n        return (\r\n          <div className=\"demo\">\r\n<div className=\"demo__colored-blocks\">\r\n  <div className=\"demo__colored-blocks-rotater\">\r\n    <div className=\"demo__colored-block\"></div>\r\n    <div className=\"demo__colored-block\"></div>\r\n    <div className=\"demo__colored-block\"></div>\r\n    <div className=\"demo__colored-block\"></div>\r\n  </div>\r\n  <div className=\"demo__colored-blocks-inner\"></div>\r\n  <div className=\"demo__text\">Ready</div>\r\n</div>\r\n<div className=\"demo__inner\">\r\n  <svg className=\"demo__numbers\" viewBox=\"0 0 100 100\">\r\n    <defs>\r\n      <path className=\"demo__num-path-1\" d=\"M40,28 55,22 55,78\"/>\r\n      <path className=\"demo__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\"/>\r\n      <path className=\"demo__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\"/>\r\n      <path className=\"demo__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\"/>\r\n      <path className=\"demo__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\"/>\r\n    </defs>\r\n    <path className=\"demo__numbers-path\" \r\n          d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19 \r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73 \r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83 \r\n          l0,-61 L40,28\" />\r\n  </svg>\r\n</div>\r\n</div>\r\n        );\r\n      }\r\n    }\r\n}\r\n\r\nexport default CountdownAnimation;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"awaiting_question\" });\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h2\">Starting quiz</Typography>\r\n                <CountdownAnimation speed=\"slow\" />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"show_question\" });\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n            <Typography variant=\"h2\">Loading next question</Typography>\r\n                <CountdownAnimation speed=\"slow\"/>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            question: '',\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        let question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        this.setState({ question })\r\n        let phaseTime = 3000 + (question.question.length * 20);\r\n        setTimeout(this.nextPhase, phaseTime);\r\n    }\r\n    nextPhase() {\r\n        let answers = [];\r\n        if (this.state.question.aType === 'multiple') {\r\n            answers = this.state.question.wrongAnswers.concat(this.state.question.correctAnswers);\r\n            answers = this.shuffle(answers);\r\n        } else if (this.state.question.aType === 'boolean') {\r\n            answers = ['True', 'False'];\r\n        }\r\n        if (answers.length) {\r\n            let game = {};\r\n            game.phase = \"answer\";\r\n            game.quiz = this.props.game.quiz;\r\n            game.quiz.questions[game.quiz.currentQuestion].answers = answers;\r\n            this.props.gameFunc.update(game);\r\n\r\n        } else {\r\n            this.props.gameFunc.update({ phase: \"answer\" });\r\n        }\r\n    }\r\n    shuffle(array) {\r\n        let counter = array.length;\r\n        while (counter > 0) {\r\n            let index = Math.floor(Math.random() * counter);\r\n            counter--;\r\n            let temp = array[counter];\r\n            array[counter] = array[index];\r\n            array[index] = temp;\r\n        }\r\n        return array;\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseShowQuestion;","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    paper: {\r\n        paddingTop: theme.spacing.unit * 2,\r\n        paddingBottom: theme.spacing.unit * 2,\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    playAnswer: {\r\n        width: '50vw',\r\n        height: '100%',\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    icon: {\r\n        float: 'left',\r\n        fontSize: '28',\r\n        color: 'white',\r\n        marginLeft: '10px'\r\n    },\r\n    answer: {\r\n        fontSize: '24',\r\n        color: 'white',\r\n    }\r\n});\r\n\r\nconst answerStyles = [{\r\n    icon: <CakeIcon />,\r\n    color: '#80DEEA',\r\n},\r\n{\r\n    icon: <ExtensionIcon />,\r\n    color: '#EF9A9A',\r\n},\r\n{\r\n    icon: <FavoriteIcon />,\r\n    color: '#CE93D8',\r\n},\r\n{\r\n    icon: <StarIcon />,\r\n    color: '#C5E1A5'\r\n}];\r\n\r\nclass AnswerOption extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        /*\r\n                        på play answer vill jag inte skriva texten utan bara ha rätt färg + symbol. play answer ska vara större. men det kanske jag kan fixa via cssklass i playanswer.\r\n                        på host answer har jag rätt färg symbol + text\r\n        \r\n                        symboler icons: hjärta,stjärna,blomma (filter_vintage), berg, pusselbit(extension), cloud\r\n                        trekant, fyrkant, cirkel,\r\n                        1,2,3,4 (finns som icon)\r\n                        a,b,c,d (finns inte om icon)\r\n                        välj 4 coola färger, grön röd blå gul?\r\n                        tänk på att det kan vara två alternativ\r\n        */\r\n    }\r\n\r\n    render() {\r\n        let design = answerStyles[this.props.index];\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className=\"full-height\">\r\n                {this.props.answerQuestion && <Paper onClick={() => { this.props.answerQuestion(this.props.answer) }} className={classes.playAnswer} style={{ backgroundColor: design.color }}>\r\n                    <div className=\"button-answer-icon\">{design.icon}</div>\r\n                    {this.props.remoteMode && <div className={classes.answer}>{this.props.answer}</div>}\r\n                </Paper>\r\n                }\r\n                {!this.props.answerQuestion && <Paper className={classes.paper} style={{ backgroundColor: design.color }}>\r\n                    <div className={classes.icon}>{design.icon}</div>\r\n                    <div className={classes.answer}>{this.props.answer}</div>\r\n                </Paper>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerOption);","import React, { Component } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n    text: {\r\n        marginBottom: '-200px',\r\n        fontSize: '86px',\r\n        paddingTop: '160px',\r\n    },\r\n    circle: {\r\n        color: '#6JpDK4',\r\n\r\n    }\r\n});\r\nclass Timer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        //let currentCount = this.props.startValue - this.props.value;\r\n        let currentCount = this.props.value === null ? this.props.startValue : this.props.value;\r\n        let startValue = this.props.startValue;\r\n        if (startValue < 1) {\r\n            startValue = 1;\r\n        }\r\n        if (currentCount < 0) {\r\n            currentCount = 0;\r\n        }\r\n        let completed = currentCount / startValue;\r\n\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <Typography variant=\"caption\" className={classes.text}>{this.props.text}</Typography>\r\n                <CircularProgress className={classes.circle}\r\n                    classes={{\r\n                        colorSecondary: classes.circle,\r\n                    }}\r\n                    variant=\"static\"\r\n                    value={completed * 100}\r\n                    thickness={4}\r\n                    size={300}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withStyles(styles)(Timer);","import React, { Component } from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    bar: {\r\n        color: '#32386D'\r\n    }\r\n});\r\nclass AnswerCounter extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Typography variant=\"h5\">Answers collected</Typography>\r\n                <LinearProgress className={classes.bar} variant=\"determinate\" value={this.props.value} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerCounter);","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport AnswerOption from '../AnswerOption';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Timer from '../../common/Timer';\r\nimport AnswerCounter from './AnswerCounter';\r\nclass PhaseAnswer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: null,\r\n            timelimit: 0,\r\n            started: false,\r\n            isTimelimited: true,\r\n            question: {\r\n                question: '',\r\n                answers: [],\r\n            },\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        let that = this;\r\n        let question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        this.setState({ question: question, isTimelimited: this.props.game.quiz.timelimit, timelimit: question.timelimit * 10 });\r\n        if (this.props.game.quiz.timelimit) {\r\n\r\n            let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n            let counter = question.timelimit * 10;\r\n            let i = setInterval(function () {\r\n                let answersCollected = 0;\r\n                for (let i = 0; i < playerKeys.length; i++) {\r\n                    if (that.props.game.players[playerKeys[i]].answers && that.props.game.players[playerKeys[i]].answers[question.id]) {\r\n                        answersCollected++;\r\n                    }\r\n                }\r\n                counter--;\r\n                that.setState({ counter: counter, started: true });\r\n                if (counter <= -5 || answersCollected === playerKeys.length) {\r\n                    that.nextPhase();\r\n                    clearInterval(i);\r\n                }\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"result_question\" });\r\n    }\r\n    render() {\r\n        let answers = [];\r\n        if (this.props.game) {\r\n            answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n        }\r\n        let answersCollected = 0;\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            if (this.props.game.players[playerKeys[i]].answers && this.props.game.players[playerKeys[i]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]) {\r\n                answersCollected++;\r\n            }\r\n        }\r\n        let answerCollectedPercentage = (answersCollected / playerKeys.length) * 100;\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    {!this.state.isTimelimited && <Button onClick={this.nextPhase}>Next</Button>}\r\n                    {this.state.isTimelimited && <Timer startValue={this.state.timelimit} value={this.state.counter} text={Math.ceil(this.state.counter / 10)} />\r\n                    }\r\n                    <div className=\"quiz-answercounter-container\">\r\n                        <AnswerCounter value={answerCollectedPercentage} />\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n\r\n                    <Grid container spacing={8}>\r\n                        {answers.map((answer, index) =>\r\n                            <Grid key={index} item xs={6}>\r\n                                <AnswerOption answer={answer} index={index} />\r\n                            </Grid>)}\r\n                    </Grid>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default PhaseAnswer;","import React, { Component } from 'react';\r\nimport { HorizontalBar } from 'react-chartjs-2';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst colors = ['#80DEEA', '#EF9A9A', '#CE93D8', '#C5E1A5'];\r\nconst MAX_PLAYERS = 20;\r\nconst PLAYER_BAR_HEIGHT_INCREMENT = 30;\r\nconst MAX_HEIGHT_PODIUM = 740;\r\nclass Podium extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getChartData = this.getChartData.bind(this);\r\n        this.getChartOptions = this.getChartOptions.bind(this);\r\n        this.getChartHeight = this.getChartHeight.bind(this);\r\n\r\n    }\r\n    getChartData() {\r\n        let chartData = {\r\n            labels: [],\r\n            datasets: [{\r\n                data: [],\r\n                label: 'podium',\r\n                backgroundColor: [],\r\n                borderWidth: 1,\r\n            }]\r\n        };\r\n\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        let rawPlayerData = [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let playerScoreData = {};\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let score = 0;\r\n            if (player.answers) {\r\n                for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                    let question = this.props.game.quiz.questions[j];\r\n                    let answer = player.answers[question.id];\r\n                    if (answer) {\r\n                        score += answer.score;\r\n                    }\r\n                }\r\n                playerScoreData.score = score;\r\n                playerScoreData.name = player.name;\r\n                rawPlayerData.push(playerScoreData);\r\n            }\r\n        }\r\n        rawPlayerData.sort((a, b) => b.score - a.score); // For ascending sort\r\n        let maxIndex = rawPlayerData.length > MAX_PLAYERS ? MAX_PLAYERS : rawPlayerData.length;\r\n        for (let i = 0; i < maxIndex; i++) {\r\n            chartData.labels.push(rawPlayerData[i].name);\r\n            chartData.datasets[0].data.push(rawPlayerData[i].score);\r\n            chartData.datasets[0].backgroundColor.push(colors[i % 4]);\r\n        }\r\n\r\n        return chartData;\r\n    }\r\n    getChartHeight() {\r\n        let chartData = this.getChartData();\r\n        let height = 70 + (chartData.labels.length * PLAYER_BAR_HEIGHT_INCREMENT);\r\n        if (height > MAX_HEIGHT_PODIUM) {\r\n            height = MAX_HEIGHT_PODIUM;\r\n        }\r\n        return height;\r\n    }\r\n\r\n    getChartOptions() {\r\n        let chartHeight = this.getChartHeight();\r\n        let padding = (MAX_HEIGHT_PODIUM - chartHeight) / 2;\r\n        let options = {\r\n            maintainAspectRatio: false,\r\n            showTooltips: false,\r\n            responsiveAnimationDuration: 1000,\r\n            animation: {\r\n                easing: 'easeInOutCubic',\r\n                duration: '2000',\r\n                onProgress: function (animation) {\r\n                    animation.animationObject.onAnimationProgress = function () {\r\n                        let ctx = this.chart.ctx;\r\n                        let chart = this.chart;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.textBaseline = \"bottom\";\r\n                        ctx.font = \"20px Roboto\";\r\n\r\n                        let stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n                        let meta = chart.getDatasetMeta(0);\r\n                        if (!meta.hidden) {\r\n                            meta.data.forEach(function (element, index) {\r\n                                // Draw the text in black, with the specified font\r\n\r\n                                // Just naively convert to string for now\r\n                                let dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio).toString();\r\n                                ctx.fillStyle = colors[index % 4];\r\n\r\n                                let position = element.tooltipPosition();\r\n                                ctx.fillText(dataString, position.x+2+(dataString.length*6), position.y + (element._model.height/2));\r\n                            });\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                },\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    },\r\n                    display: true,\r\n                    beginAtZero: true,\r\n                }],\r\n                xAxes: [{\r\n                    display: true,\r\n                    beginAtZero: true,\r\n                }]\r\n            },\r\n            legend: {\r\n                display: false,\r\n            },\r\n            tooltips: {\r\n                enabled: false\r\n            },\r\n            events: [],\r\n            layout: {\r\n                padding: {\r\n                    left: 0,\r\n                    right: 60,\r\n                    top: padding,\r\n                    bottom: padding,\r\n                }\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n    getWinnerString() {\r\n        return \"Congratulations [name of player]! \";\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div style={{maxHeight: MAX_HEIGHT_PODIUM}}>\r\n                <HorizontalBar data={this.getChartData} height={MAX_HEIGHT_PODIUM}\r\n                    options={this.getChartOptions()} />\r\n                <Typography variant=\"subtitle1\">{this.getWinnerString()}</Typography>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Podium;","import React, { Component } from 'react';\r\nimport Podium from '../Podium';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h2\">Final score</Typography>\r\n\r\n                    <Podium game={this.props.game} />\r\n                </div>\r\n                <div className=\"align-bottom \">\r\n                    <div>\r\n\r\n                        <Button onClick={this.props.gameFunc.restart}>Replay quiz</Button>\r\n                        <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                        <Button onClick={() => alert('show results')}>Show results</Button>\r\n                        <Button onClick={() => alert('start survey')}>Start survey</Button>\r\n                        <Button>\r\n                            <Link to={'/create'}>Host game</Link>\r\n                        </Button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\nconst PUBLIC_PATH = process.env.PUBLIC_URL;\r\n\r\nconst answerStyles = [{\r\n    icon: <CakeIcon />,\r\n    color: '#80DEEA',\r\n},\r\n{\r\n    icon: <ExtensionIcon />,\r\n    color: '#EF9A9A',\r\n},\r\n{\r\n    icon: <FavoriteIcon />,\r\n    color: '#CE93D8',\r\n},\r\n{\r\n    icon: <StarIcon />,\r\n    color: '#C5E1A5'\r\n}];\r\n\r\nclass AnswerChart extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.getChartData = this.getChartData.bind(this);\r\n        this.getChartOptions = this.getChartOptions.bind(this);\r\n        this.getChartHeight = this.getChartHeight.bind(this);\r\n        this.getAnswerData = this.getAnswerData.bind(this);\r\n\r\n    }\r\n    getAnswerData() {\r\n        let answerData = {\r\n            data: [],\r\n            topPlayer: {\r\n                score: 0,\r\n                playerKey: ''\r\n            },\r\n            correctAnswers: [],\r\n        };\r\n        let playerAnswers = [];\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            if (!player.answers) {\r\n                continue;\r\n            }\r\n            let answer = player.answers[currentQuestion.id];\r\n            if (answer) {\r\n\r\n                playerAnswers.push(answer.answer);\r\n                if (answer.score > answerData.topPlayer.score) {\r\n                    answerData.topPlayer.score = answer.score;\r\n                    answerData.topPlayer.playerKey = player.key;\r\n                }\r\n            }\r\n        }\r\n        for (let j = 0; j < currentQuestion.answers.length; j++) {\r\n            let nrOfAnswers = 0;\r\n            for (let i = 0; i < playerAnswers.length; i++) {\r\n                if (currentQuestion.answers.indexOf(playerAnswers[i]) === j) {\r\n                    nrOfAnswers++;\r\n                }\r\n            }\r\n            answerData.data.push(nrOfAnswers);\r\n\r\n            if (currentQuestion.correctAnswers.indexOf(currentQuestion.answers[j]) > -1) {\r\n                answerData.correctAnswers.push(j);\r\n            }\r\n        }\r\n\r\n        return answerData;\r\n    }\r\n\r\n    getChartData() {\r\n        let chartData = {\r\n            labels: [],\r\n            datasets: [{\r\n                data: [],\r\n                label: 'asdf',\r\n                backgroundColor: [],\r\n                borderWidth: 1,\r\n            }]\r\n        };\r\n        let data = this.getAnswerData();\r\n        chartData.datasets[0].borderColor = [];\r\n        chartData.datasets[0].data = data.data;\r\n        for (let i = 0; i < data.data.length; i++) {\r\n            chartData.labels.push(\"\");\r\n            chartData.datasets[0].backgroundColor.push(answerStyles[i].color);\r\n        }\r\n        return chartData;\r\n    }\r\n\r\n    getChartHeight() {\r\n        let answerData = this.getAnswerData();\r\n        let topvalue = Math.max(...answerData.data);\r\n        let incrementHeightPerAnswer = 25;\r\n        let minHeight = 65;\r\n        let maxHeight = 300;\r\n        let height = minHeight + (topvalue * incrementHeightPerAnswer);\r\n        if (height > maxHeight) {\r\n            return maxHeight;\r\n        }\r\n        return height;\r\n    }\r\n\r\n    getChartOptions() {\r\n        let that = this;\r\n        let options = {\r\n            maintainAspectRatio: false,\r\n            showTooltips: false,\r\n            responsiveAnimationDuration: 1000,\r\n            animation: {\r\n                easing: 'easeInOutCubic',\r\n                duration: '2000',\r\n                onProgress: function (animation) {\r\n                    let answerData = that.getAnswerData();\r\n                    animation.animationObject.onAnimationProgress = function () {\r\n                        let ctx = this.chart.ctx;\r\n                        let chart = this.chart;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.fillStyle = \"black\";\r\n                        ctx.textBaseline = \"bottom\";\r\n                        ctx.font = \"24px Roboto\";\r\n\r\n                        let stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n\r\n                        let meta = chart.getDatasetMeta(0);\r\n                        if (!meta.hidden) {\r\n                            meta.data.forEach(function (element, index) {\r\n\r\n                                let dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio);\r\n\r\n                                let position = element.tooltipPosition();\r\n                                ctx.fillStyle = answerStyles[index].color;\r\n                                ctx.fillText(dataString, position.x, position.y - 2);\r\n                                ctx.beginPath();\r\n                                ctx.rect(position.x - element._view.width / 2, chart.height - 32, element._view.width, 22);\r\n                                ctx.fill();\r\n                                if (answerData.correctAnswers.indexOf(index) > -1) {\r\n\r\n                                    let img = new Image();\r\n                                    img.src = PUBLIC_PATH + \"/baseline-done_outline-24px.svg\";\r\n                                    img.height = 100;\r\n                                    img.width = 100;\r\n                                    let ypos = chart.height - 34;\r\n                                    //ta bort onlead wrapper för att göra det instant\r\n                                    ctx.drawImage(img, position.x - 12, ypos);\r\n                                }\r\n                            });\r\n                        }\r\n                        /*\r\n                                                for (let i = 0; i < answerData.data.length; i++) {\r\n                                                    let value = Math.floor(answerData.data[i] * stepratio);\r\n                                                    //om det inte är någon som svarar så blir meta[0] undefined första gången. går jag in på nytt på gamet som host så fungerar det\r\n                                                    //ha någon specifik hantering för om ingen har svarat alls\r\n                                                    var meta = this.chart.getDatasetMeta(0);\r\n                                                    let metadata = meta.data[i];\r\n                        \r\n                                                    ctx.fillStyle = answerStyles[i].color;\r\n                                                    ctx.fillText(value, metadata._view.x, metadata._view.y - 2);\r\n                                                    ctx.beginPath();\r\n                                                    ctx.rect(metadata._view.x - metadata._view.width / 2, this.chart.height - 32, metadata._view.width, 22);\r\n                                                    ctx.fill();\r\n                                                    if (answerData.correctAnswers.indexOf(i) > -1) {\r\n                        \r\n                                                        let img = new Image();\r\n                                                        img.src = \"/baseline-done_outline-24px.svg\";\r\n                                                        img.height = 100;\r\n                                                        img.width = 100;\r\n                                                        let ypos = this.chart.height - 34;\r\n                                                        //ta bort onlead wrapper för att göra det instant\r\n                                                        ctx.drawImage(img, metadata._view.x - 12, ypos);\r\n                        \r\n                                                    }\r\n                                                }\r\n                        \r\n                                                */\r\n                    }\r\n\r\n\r\n                },\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true\r\n                    },\r\n                    display: false,\r\n                    beginAtZero: true,\r\n                }],\r\n                xAxes: [{\r\n                    display: false,\r\n                }]\r\n            },\r\n            legend: {\r\n                display: false,\r\n            },\r\n            tooltips: {\r\n                enabled: false\r\n            },\r\n            events: [],\r\n            layout: {\r\n                padding: {\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 25,\r\n                    bottom: 40,\r\n                }\r\n            }\r\n        }\r\n        return options;\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Bar data={this.getChartData} height={this.getChartHeight()}\r\n                options={this.getChartOptions()} />\r\n        );\r\n    }\r\n}\r\n\r\nexport default AnswerChart;","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    table: {\r\n        maxWidth: 700,\r\n        whiteSpace: 'nowrap',\r\n    },\r\n});\r\n\r\nclass Leaderboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            leaderboardData: this.getLeaderboardData(),\r\n            page: 0,\r\n            rowsPerPage: 10,\r\n        };\r\n        this.startScoreCounter = this.startScoreCounter.bind(this);\r\n        this.getScoreCellWidth = this.getScoreCellWidth.bind(this);\r\n\r\n    }\r\n    componentDidMount() {\r\n        setTimeout(this.startScoreCounter, 2000);\r\n\r\n\r\n    }\r\n    startScoreCounter() {\r\n        let that = this;\r\n        let i = setInterval(function () {\r\n            let newLeaderBoard = that.state.leaderboardData;\r\n            let done = true;\r\n            for (let i = 0; i < newLeaderBoard.players.length; i++) {\r\n                let player = newLeaderBoard.players[i];\r\n                if (player.currentQuestionScore > 0) {\r\n                    done = false;\r\n                    player.currentQuestionScore--;\r\n                    player.totalScore++;\r\n                }\r\n            }\r\n            newLeaderBoard.players.sort(function (a, b) {\r\n                return (b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0;\r\n            });\r\n            that.setState({ leaderboard: newLeaderBoard });\r\n            if (done) {\r\n                clearInterval(i);\r\n            }\r\n        }, 10);\r\n    }\r\n\r\n    getLeaderboardData() {\r\n        let leaderboard = {\r\n            players: [],\r\n        };\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        let playerList = [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let playerScoreData = {};\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let score = 0;\r\n            if (player.answers) {\r\n                for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                    let question = this.props.game.quiz.questions[j];\r\n                    let answer = player.answers[question.id];\r\n                    if (answer) {\r\n                        if (answer.questionId === currentQuestion.id) {\r\n                            playerScoreData.currentQuestionScore = answer.score;\r\n                            playerScoreData.lastScore = answer.score;\r\n\r\n                        } else {\r\n                            score += answer.score;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            playerScoreData.totalScore = score;\r\n            playerScoreData.name = player.name;\r\n            playerScoreData.key = player.key;\r\n            playerList.push(playerScoreData);\r\n        }\r\n\r\n        playerList.sort(function (a, b) {\r\n            return (b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0;\r\n        });\r\n        leaderboard.players = playerList;\r\n        return leaderboard;\r\n\r\n    }\r\n    getLeaderboardScore(player) {\r\n        if (player.currentQuestionScore === 0) {\r\n            return player.totalScore + \" (+\" + player.lastScore + \")\";\r\n        } else {\r\n            return player.totalScore + \"           \";\r\n            //return player.totalScore + \" (+\" + player.currentQuestionScore + \")\";\r\n        }\r\n    }\r\n\r\n    getScoreCellWidth(){\r\n        let length = 0;\r\n        let leaderboardData = this.getLeaderboardData();\r\n        for(let i = 0; i<leaderboardData.players.length; i++){\r\n            let player= leaderboardData.players[i];\r\n            let scoreWidth = player.totalScore + \" (+\" + player.lastScore + \")\";\r\n            if(scoreWidth.length>length){\r\n                length = scoreWidth.length;\r\n            }\r\n        }\r\n\r\n\r\n        return (length*6)+65;\r\n    }\r\n\r\n    handleChangePage = (event, page) => {\r\n        this.setState({ page });\r\n    };\r\n    handleChangeRowsPerPage = event => {\r\n        this.setState({ rowsPerPage: event.target.value });\r\n    };\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { leaderboardData, rowsPerPage, page } = this.state;\r\n        return (\r\n            <div className={classes.root}>\r\n                <Table className={classes.table}>\r\n                    <TableBody>\r\n                        {leaderboardData.players.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((player, index) =>\r\n                            <TableRow key={player.key}>\r\n                                <TableCell padding=\"dense\">{index + 1}</TableCell>\r\n                                <TableCell>{player.name}</TableCell>\r\n                                <TableCell style={{width: this.getScoreCellWidth()}}>{this.getLeaderboardScore(player)}</TableCell>\r\n                            </TableRow>\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n                {leaderboardData.players.length > 10 && <TablePagination\r\n                    component=\"div\"\r\n                    count={leaderboardData.players.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    backIconButtonProps={{\r\n                        'aria-label': 'Previous Page',\r\n                    }}\r\n                    nextIconButtonProps={{\r\n                        'aria-label': 'Next Page',\r\n                    }}\r\n                    onChangePage={this.handleChangePage}\r\n                    onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n\r\n                />}\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Leaderboard);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\nimport { Typography } from '@material-ui/core';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\n\r\nclass PhaseResultQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n        this.nextQuestion = this.nextQuestion.bind(this);\r\n        this.finalizeQuiz = this.finalizeQuiz.bind(this);\r\n    }\r\n    //om jag vill försvåra fusk så gömmer jag correctanswer/wronganswers från Play.js och gör rättningen i Host genom att play bara anger vilket svarsalternativ de valt\r\n    //i host när jag kommer hit så rättar jag alla svar och updaterar varje players score\r\n    //play for tillbaka updateringen och visar score och rätt/fel. \r\n    //\r\n\r\n    //alternativet som är mindre säkert men effektivare datamässigt är att play rättar och skriver score, då slipper jag också spara hur snabbt spelaren svarade utan kan göra scoreberäkningen \"offline\"\r\n    //kör på detta alternativ då det är snabbast att bygga.\r\n\r\n    /*\r\n                HostResultQuestion: nu är det dags att börja visa resultat. se över om min datastruktur är hållbar?\r\nmed answers, currenq, osv. jag vill ha staplar likt kahootöver hur många som röstade på varje och en top lista över scoresom fylls i lite coolt med animationer\r\nTypräkna upp poängen och ha en horizontel stapel som visualiserar hur mycket någon leder .\r\ni play.js så visas det personliga resultatetsamt sin placering totalt. även där cool animation med score som räknar upp\r\nsvg animationer? ettkilomjol stats.js?? skipa chart lib. gör en helt egen komponent som animeras. eller nej ta in chart.js och ha enkel bar chart för result.\r\ncorrect answer är en vissfärg eller nåt. rita ut siffran på dem. leaderboard rendreras i en componentdör score räknas upp ett i taget,\r\nkolla på javascript för det.kanske ha npgon bakgrund på en div som matchar width till storlek?\r\nleader=100% och alla andra är en bråkdel av leaders score iw idth\r\n\r\n\r\nstrukturera upp denna vy och hostanswer vyn till 3 segment. top middle bottom. top där frågan visas, middle där counter/resultatet visas, bottom där svarsalternativen visas.\r\nanvänd Grid och vh för att få till detta. kolla kahoot. top 20vh, middle 40vh, bottom 40vh?\r\nlägg till någon färg/symbol på varje svarsalternativ använd index för att styra vilken som får vilket, ha fyra olika designer.\r\nkolla om jag ska använda chart.js för svarsresultatet, finns det någon enkel chart med bara staplarna utan axlar och text? lägg till texten själv? någon annan lib? det ska se ut som kahhot\r\nmed siffra för hur många som valde ett alternaiv och markering för vilket som var det rätta.\r\nha en enkel tabell för leaderboard? men fixa så poängen strömas in. alt en horozontal bar\r\n\r\nhttps://stackoverflow.com/questions/31631354/how-to-display-data-values-on-chart-js\r\naxis.display=false;\r\ndetta + rätt färg + en extra symbol på det rätta svaret så är vi hemma!\r\n\r\n                                3. fixa finalResultHost: podium.js + leaderboard(?) (tänker mig att podium är en barchart med top 3 eller 10 players?)\r\n                                yaxeln är baserad på totalscore. ovanför eller i baren verticalt så skrivs namnet. score visas också och räknas upp likt answerChart.\r\n                                Det hela är väldigt likt answerChart. informationen som ska visas på varje bar är totalscore, position, playername,\r\n                                Vinnarens namn ska presenteras nedan i större text och med guldkrona? istället för att hålla på med baren.\r\n                                playerPodium visas på playerFinalResult: den innehåller bara en stapel för playern själv och namnet visas inte?\r\n                                finalresult kan även innehålla lite rolig fakta som vem som svarade snabbast, \r\n                                playerfinalresult kan innehålla en hel tabell där man kan se alla sina svar! \r\n                                frågenummer, score, time (grön eller röd rad), klickar man på en rad får man se hela frågan med alla alternativ, vilket som var rätt och vilket man själv svarade \r\n                                5. phaseEndHost: action för restart, create new game, save result(export), \r\n                                \r\n                                6.phaseEndPlay: thanks for playing, creat your own game here..\r\n                                7. testa ha en \"chat\" i finalresult/connecting. en ruta där varje Play kan skriva ett meddelande som sedan visas upp i host :)\r\n                                7. kolla på snake. test hur reaktionstiden är i quiz från när play klickar till host skriver ut answers collected:\r\n\r\n\r\n                                                 generalisera så att answerchart bara tar in ett gameobj. lägg getnaswerdata i answerchart.js då kan jag använda answerchart enkelt från Playsidan. \r\n                            samma sak med leaderboard. de är komponenter som tar in ett obj och spottar ut en visualisering.\r\n                            1. mobilanpassa hela host.\r\n                            2. skapa remote mode. där man ska kunna klara sig genom spelet utan att kolla på hosten.\r\n                            3. man ska se frågorna, se resultaten. i princip allt som hosten ser men inte några actionknappar.\r\n                            players invididuella information kan visas i bottom eller top i liten text.\r\n                            lyft även in countdown i start och waiting på play i remote mode.\r\n                            styr allt genom if stats i render()?\r\n                            4. ta fram bättre classer / variants på typohraphy som funkar i mobilen. lägg till någon rolig färg/annan variant på dynamisk information:\r\n                            t.ex. welcome player.name ska namnet sticka ut lite från welcome styls.\r\n                            display1/4 ser bra ut men räcker inte till. Behöver några mindre och varierade. leta upp färdiga headers online för h1/h6?\r\n                            eller skapa bara egna klasser. vanlig paragraph, header1, header2, header3, header4, med egen color, fontsize, font, typ som display fast mindre\r\n    */\r\n    nextQuestion() {\r\n        let game = {};\r\n        game.quiz = this.props.game.quiz;\r\n        game.quiz.currentQuestion = game.quiz.currentQuestion + 1;\r\n        game.phase = \"awaiting_question\";\r\n        this.props.gameFunc.update(game);\r\n\r\n    }\r\n    finalizeQuiz() {\r\n        this.props.gameFunc.update({ phase: \"final_result\" });\r\n\r\n    }\r\n\r\n    render() {\r\n        let answers = [];\r\n        let currentQuestion = \"\";\r\n        if (this.props.game) {\r\n            currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n            answers = currentQuestion.answers;\r\n        }\r\n        let nextQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion + 1];\r\n        let isLastQuestion = typeof nextQuestion === \"undefined\";\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h5\">{currentQuestion.question}</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Grid container>\r\n                        <Grid item md={6} xs={12}>\r\n                            <div className=\"quiz-answer-chart\">\r\n                                <AnswerChart game={this.props.game} />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item md={6} xs={12}>\r\n                            <div>\r\n                                <Leaderboard game={this.props.game} />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <div>\r\n                                {isLastQuestion && <Button onClick={this.finalizeQuiz}>Finalize result</Button>}\r\n                                {!isLastQuestion && <Button onClick={this.nextQuestion}>Next question</Button>}\r\n\r\n                                <Button onClick={this.props.gameFunc.restart}>Restart quiz</Button>\r\n                                <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                                <Button onClick={this.props.gameFunc.end}>End quiz</Button>\r\n\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                    <Grid className=\"align-bottom\" container>\r\n                        {answers.map((answer, index) =>\r\n                            <Grid key={index} item xs={6}>\r\n                                <AnswerOption answer={answer} index={index} />\r\n                            </Grid>)}\r\n                    </Grid>\r\n                </div>\r\n            </div >\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default PhaseResultQuestion;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                HostEnd\r\n                toggleHeader()\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport PhaseSetup from './PhaseSetup';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\n\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"host-container\">\r\n                {this.props.game.phase === \"setup\" && <PhaseSetup game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"awaiting_question\" && <PhaseAwaitingQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"show_question\" && <PhaseShowQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"answer\" && <PhaseAnswer game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"result_question\" && <PhaseResultQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"final_result\" && <PhaseFinalResult game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                {this.props.game.phase === \"end\" && <PhaseEnd game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quiz;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nclass PhaseSetup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            surveyPlayers: false,\r\n            nameGenerator: false,\r\n            gamemode: this.props.game.minigame.gamemode,\r\n            racetarget: this.props.game.minigame.racetarget,\r\n            opponentCollision: this.props.game.minigame.opponentCollision,\r\n            eatOpponents: this.props.game.minigame.eatOpponents,\r\n            wallCollision: this.props.game.minigame.wallCollision,\r\n            difficulty: this.props.game.minigame.difficulty,\r\n        };\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n    handleChangeSelect = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    startGame = multiplayerMode => {\r\n        let game = {};\r\n        let minigame = this.props.game.minigame;\r\n        minigame.surveyPlayers = this.state.surveyPlayers;\r\n        minigame.nameGenerator = this.state.nameGenerator;\r\n        minigame.multiplayerMode = multiplayerMode;\r\n        minigame.wallCollision = this.state.wallCollision;\r\n        minigame.opponentCollision = this.state.opponentCollision;\r\n        minigame.eatOpponents = this.state.opponentCollision && this.state.eatOpponents;\r\n        minigame.racetarget = this.state.racetarget;\r\n        minigame.difficulty = this.state.difficulty;\r\n        minigame.gamemode = this.state.gamemode;\r\n\r\n\r\n        game.minigame = minigame;\r\n        game.phase = \"connection\";\r\n        game.status = \"IN_PROGRESS\";\r\n        this.props.gameFunc.update(game);\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h4\">Game Settings</Typography>\r\n                <Button onClick={() => this.startGame('classic')} variant=\"contained\">Classic</Button>\r\n                <Button onClick={() => this.startGame('coop')} variant=\"contained\">Co-op multiplayer</Button>\r\n                <Button onClick={() => this.startGame('team')} variant=\"contained\">Team multiplayer</Button>\r\n                <FormControl component=\"fieldset\">\r\n                    <FormGroup>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.nameGenerator}\r\n                                    onChange={this.handleChangeBool('nameGenerator')}\r\n                                    value=\"nameGenerator\"\r\n                                />\r\n                            }\r\n                            label=\"Generate names for players\"\r\n                        />\r\n                        <FormControl required >\r\n                            <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                            <Select\r\n                                value={this.state.gamemode || \"\"}\r\n                                onChange={this.handleChangeSelect}\r\n                                name=\"gamemode\"\r\n                                inputProps={{\r\n                                    id: 'gamemode-required',\r\n                                }}\r\n                            >\r\n                                <MenuItem value={\"survival\"}>Survival</MenuItem>\r\n                                <MenuItem value={\"race\"}>Race</MenuItem>\r\n\r\n                            </Select>\r\n                        </FormControl>\r\n\r\n                        {this.props.gamemode === \"race\" &&\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Snake length\"\r\n                                    name=\"racetarget\"\r\n                                    type=\"number\"\r\n                                    value={this.state.racetarget}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('racetarget')}\r\n                                />\r\n                            </FormControl>\r\n                        }\r\n                        <FormControl required >\r\n                            <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n                            <Select\r\n                                value={this.state.difficulty || \"\"}\r\n                                onChange={this.handleChangeSelect}\r\n                                name=\"difficulty\"\r\n                                inputProps={{\r\n                                    id: 'difficulty-required',\r\n                                }}\r\n                            >\r\n                                <MenuItem value={\"500\"}>Easy</MenuItem>\r\n                                <MenuItem value={\"300\"}>Medium</MenuItem>\r\n                                <MenuItem value={\"100\"}>Hard</MenuItem>\r\n                                <MenuItem value={\"75\"}>Pro</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                        <FormControl component=\"fieldset\">\r\n                            <FormControlLabel\r\n                                control={\r\n                                    <Switch\r\n                                        checked={this.state.wallCollision}\r\n                                        onChange={this.handleChangeBool('wallCollision')}\r\n                                        value=\"wallCollision\"\r\n                                    />\r\n                                }\r\n                                label=\"Wall collisions\"\r\n                            />\r\n                        </FormControl>\r\n\r\n                        <FormControl component=\"fieldset\">\r\n                            <FormControlLabel\r\n                                control={\r\n                                    <Switch\r\n                                        checked={this.state.opponentCollision}\r\n                                        onChange={this.handleChangeBool('opponentCollision')}\r\n                                        value=\"opponentCollision\"\r\n                                    />\r\n                                }\r\n                                label=\"Opponent collisions\"\r\n                            />\r\n                        </FormControl>\r\n                        <FormControl component=\"fieldset\">\r\n                            <FormControlLabel\r\n                                control={\r\n                                    <Switch\r\n                                        checked={this.state.opponentCollision && this.state.eatOpponents}\r\n                                        disabled={!this.state.opponentCollision}\r\n                                        onChange={this.handleChangeBool('eatOpponents')}\r\n                                        value=\"eatOpponents\"\r\n                                    />\r\n                                }\r\n                                label=\"Eat opponent on collision\"\r\n                            />\r\n                        </FormControl>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.surveyPlayers}\r\n                                    onChange={this.handleChangeBool('surveyPlayers')}\r\n                                    value=\"surveyPlayers\"\r\n                                />\r\n                            }\r\n                            label=\"Survey players after game\"\r\n                        />\r\n                    </FormGroup>\r\n                </FormControl>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseSetup;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"starting\" });\r\n    }\r\n    //add function to kick player\r\n\r\n\r\n    render() {\r\n        let players = this.props.game.players;\r\n        if (!players) {\r\n            players = [];\r\n        } else {\r\n            players = Object.values(players);\r\n        }\r\n        return (\r\n            <div className=\"phase-container\">\r\n\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h2\">Join game with Game ID:  <span className=\"dynamic-text\">{this.props.game.gameId}</span></Typography>\r\n                    <Typography variant=\"subtitle1\">{this.props.game.title}</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Grid container>\r\n                        {players.map((player, index) =>\r\n                            <Grid key={index} item xs={3}>\r\n                                <Typography paragraph variant=\"body1\">{player.name}</Typography>\r\n                            </Grid>)}\r\n                    </Grid>\r\n                </div>\r\n                använd en annan klass, minigame-middle-section typ\r\n                https://codepen.io/niorad/pen/xmfza bara runt varje namn eller hela lobbyn.\r\n                jag skulle kunna bygga en random ai och visa den här men det är mycket jobb\r\nlägg till någon rolig animation? typ en snake som åker över skärmen? en för varje spelare kanske rent av? om det blir väldigt mycket kan jag skapa en specifik phase Connection för snake?\r\n                <div className=\"quiz-bottom-section\">\r\n                    <Button onClick={this.nextPhase} variant=\"contained\">Start</Button>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"gameplay\" });\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h2\">Starting game</Typography>\r\n                <CountdownAnimation speed=\"slow\" />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\n\r\nclass Tetris extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                tetris.js\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tetris;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h2\">Final score</Typography>\r\n                    podium\r\n                </div>\r\n                <div className=\"align-bottom \">\r\n                    <div>\r\n                        <Button onClick={this.props.gameFunc.restart}>Replay quiz</Button>\r\n                        <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                        <Button onClick={() => alert('show results')}>Show results</Button>\r\n                        <Button onClick={() => alert('start survey')}>Start survey</Button>\r\n                        <Button>\r\n                            <Link to={'/create'}>Host game</Link>\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                HostEnd\r\n                toggleHeader()\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\nlet SNAKE_COLORS = ['#F44336',\r\n    '#9C27B0',\r\n    '#2196F3',\r\n    '#4CAF50',\r\n    '#FFEB3B',\r\n    '#FF9800',\r\n    '#607D8B',\r\n    '#795548',\r\n    '#E91E63',\r\n    '#3F51B5',\r\n    '#673AB7',\r\n    '#00BCD4',\r\n    '#03A9F4',\r\n    '#8BC34A',\r\n    '#CDDC39',\r\n    '#009688',\r\n    '#FFC107',\r\n    '#FF5722',\r\n];\r\nlet SNAKE_NAMES = ['Stan',\r\n    'Jane',\r\n    'Sara',\r\n    'Dan',\r\n    'Lisa',\r\n    'Joe',\r\n    'Rose',\r\n    'Ray',\r\n    'Lyra',\r\n    'Sam',\r\n    'Lucy',\r\n    'Ben',\r\n    'Noa',\r\n    'Mark',\r\n    'Eve',\r\n    'Ned',\r\n    'Ann',\r\n    'Todd']\r\nclass SnakeStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n            snakesize: 10,\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n        this.createSnakes = this.createSnakes.bind(this);\r\n        this.createCoopSnakes = this.createCoopSnakes.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    createSnakes() {\r\n        let playerKeys = Object.keys(this.props.game.players);\r\n        let startingY = 90;\r\n        let startingX = 300;\r\n        let snakes = [];\r\n        //mocka flera spelare genom att loopa på x och sen byt player.key till playerKeys[0]\r\n        for (let i = 0; i < 17; i++) {\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let snake = {\r\n                playerKeys: [playerKeys[0]],\r\n                actions: ['up', 'down', 'right', 'left'],\r\n                score: 0,\r\n                color: SNAKE_COLORS[i % SNAKE_COLORS.length],\r\n                name: SNAKE_NAMES[i % SNAKE_NAMES.length],\r\n                //start positioner ska randomas helt, inklusive direction, varanan ska starta nereifrån upp, uppifrån ner, höger till vänster, vänster till göger..\r\n                //fyra olika random metoder och y måste vara unikt för de som kör horizontelt och x måste vara unikt för som kör vertikalt, kanske även ett mellanrum mellan varje snake\r\n                id: i,\r\n            }\r\n            snakes.push(snake);\r\n            //här ska jag lägga till såd et finns en food per player?\r\n            //foods.push(food);\r\n        }\r\n        return snakes;\r\n    }\r\n    createTeamSnakes() {\r\n        let playerKeys = Object.keys(this.props.game.players);\r\n        let startingY = 100;\r\n        let startingX = 300;\r\n        let snakes = [];\r\n        let nrOfSnakes = playerKeys\r\n        //coop snakes här vil jag kunna hitta ultimata updelningen. man ska kunna vara 2 eller 4 per orm. om det är ojämnt antal får man vara en 3a.\r\n        //chunkify tar in playerkeys och en siffra på hur många snakes det ska vara och delar upp dem men då behöver jag veta hur många snakes jag vill ha?\r\n        //kanske får göra en helt egen chunkify? behöver veta hur mågna snakes jag vill ha och sen kanske det löser sig självt i loopen\r\n\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let snake = {\r\n                playerKeys: [player.key],\r\n                direction: 'right',\r\n                id: i,\r\n                score: 0,\r\n                body: [{\r\n                    x: startingX,\r\n                    y: startingY,\r\n                }, {\r\n                    x: startingX - this.state.snakesize,\r\n                    y: startingY,\r\n                }, {\r\n                    x: startingX - (this.state.snakesize * 2),\r\n                    y: startingY,\r\n                }, {\r\n                    x: startingX - (this.state.snakesize * 3),\r\n                    y: startingY,\r\n                }]\r\n\r\n            }\r\n            snakes.push(snake);\r\n            //här ska jag lägga till såd et finns en food per player?\r\n            //foods.push(food);\r\n        }\r\n        return snakes;\r\n    }\r\n    createCoopSnakes() {\r\n        //alla players kontrollerar samma snake. antingen med en knapp var, eller så har alla alla knappar?\r\n        //kanske en spelare får bara 1 klick? samarbetesövning.\r\n        let playerKeys = Object.keys(this.props.game.players);\r\n        let startingY = 90;\r\n        let startingX = 300;\r\n        let snakes = [];\r\n        let snake = {\r\n            playerKeys: playerKeys,\r\n            direction: 'right',\r\n            actions: ['up', 'down', 'right', 'left'],\r\n            score: 0,\r\n            color: SNAKE_COLORS[Math.floor(Math.random() * SNAKE_COLORS.length)],\r\n            name: SNAKE_NAMES[Math.floor(Math.random() * SNAKE_NAMES.length)],\r\n            id: 0,\r\n            body: [{\r\n                x: startingX,\r\n                y: startingY,\r\n            }, {\r\n                x: startingX - this.state.snakesize,\r\n                y: startingY,\r\n            }, {\r\n                x: startingX - (this.state.snakesize * 2),\r\n                y: startingY,\r\n            }, {\r\n                x: startingX - (this.state.snakesize * 3),\r\n                y: startingY,\r\n            }]\r\n        }\r\n        snakes.push(snake);\r\n        return snakes;\r\n    }\r\n\r\n    chunkify(a, n) {\r\n        if (n < 2)\r\n            return [a];\r\n\r\n        let len = a.length,\r\n            out = [],\r\n            i = 0,\r\n            size;\r\n\r\n        if (len % n === 0) {\r\n            size = Math.floor(len / n);\r\n            while (i < len) {\r\n                out.push(a.slice(i, i += size));\r\n            }\r\n        }\r\n        else {\r\n            while (i < len) {\r\n                size = Math.ceil((len - i) / n--);\r\n                out.push(a.slice(i, i += size));\r\n            }\r\n        }\r\n\r\n        return out;\r\n    }\r\n\r\n    nextPhase() {\r\n        let snakes = [];\r\n\r\n        switch (this.props.game.minigame.multiplayerMode) {\r\n            case 'classic':\r\n                snakes = this.createSnakes();\r\n                break;\r\n            case 'coop':\r\n                snakes = this.createCoopSnakes();\r\n                break;\r\n            case 'team':\r\n                snakes = this.createTeamSnakes();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        let players = this.props.game.players;\r\n        for (let i = 0; i < snakes.length; i++) {\r\n            let actionChunks = this.chunkify(snakes[i].actions, snakes[i].playerKeys.length);\r\n            for (let j = 0; j < snakes[i].playerKeys.length; j++) {\r\n                let player = players[snakes[i].playerKeys[j]];\r\n                player.snakeId = snakes[i].id;\r\n                player.controlActions = actionChunks[j];\r\n                //players[snakes[i].playerKeys[j]] = player;\r\n            }\r\n        }\r\n\r\n\r\n        let game = this.props.game;\r\n        game.minigame.snakes = snakes;\r\n        game.phase = \"gameplay\";\r\n        game.players = players;\r\n\r\n        this.props.gameFunc.update(game);\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h2\">Starting game</Typography>\r\n                <CountdownAnimation speed=\"slow\" />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SnakeStarting;","import React, { Component } from 'react';\r\nimport PhaseSetup from './PhaseSetup';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport Snake from '../snake/Snake';\r\nimport Tetris from '../tetris/Tetris';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseEnd from './PhaseEnd';\r\nimport SnakeStarting from '../snake/SnakeStarting';\r\n\r\nclass Minigame extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        switch (this.props.game.gametype) {\r\n            case 'snake':\r\n                return (\r\n                    <div className=\"host-container\">\r\n                        {this.props.game.phase === \"setup\" && <PhaseSetup game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"starting\" && <SnakeStarting game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"gameplay\" && <Snake game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"final_result\" && <PhaseFinalResult game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"end\" && <PhaseEnd game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                    </div>\r\n                );\r\n            case 'tetris':\r\n                return (\r\n                    <div className=\"host-container\">\r\n                        {this.props.game.phase === \"setup\" && <PhaseSetup game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"gameplay\" && <Tetris game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"final_result\" && <PhaseFinalResult game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                        {this.props.game.phase === \"end\" && <PhaseEnd game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n                    </div>\r\n                );\r\n            default:\r\n                return (null);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Minigame;","import React, { Component } from 'react';\r\nimport { fire } from '../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Quiz from '../quiz/host/Quiz';\r\nimport Minigame from '../minigame/host/Minigame';\r\n\r\nclass Host extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            game: {},\r\n            gameId: localStorage.getItem('RecentGameId') || '',\r\n            password: '',\r\n\r\n        };\r\n        this.updateGame = this.updateGame.bind(this);\r\n        this.fetchGame = this.fetchGame.bind(this);\r\n        this.initGameListiner = this.initGameListiner.bind(this);\r\n        this.restartGame = this.restartGame.bind(this);\r\n        this.quitGame = this.quitGame.bind(this);\r\n        this.endGame = this.endGame.bind(this);\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n    updateGame(game) {\r\n        let that = this;\r\n        //se till att inte updatera game.players...\r\n        //game som kommer in här ska bara innehålla det som ska uppdateras.\r\n        //updateras med gamesettings, phasechanges, currenquestionId etc\r\n        fire.database().ref('games/' + that.state.game.key).update(game, function (error) {\r\n            if (error) {\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n            }\r\n        })\r\n    }\r\n    restartGame(){\r\n       let game = {};\r\n        game.players = [];\r\n       game.phase = \"setup\";\r\n       this.updateGame(game);\r\n    }\r\n\r\n    quitGame(){\r\n        this.updateGame({phase: null});\r\n        this.props.toggleHeader(true);\r\n\r\n\r\n    }\r\n    endGame(){\r\n        this.updateGame({phase: \"final_result\"});\r\n    }\r\n\r\n\r\n    fetchGame() {\r\n        let that = this;\r\n        fire.database().ref('games').orderByChild(\"gameId\").equalTo(that.state.gameId).once(\"value\", function (snapshot) {\r\n            if (snapshot.val()) {\r\n                let game;\r\n                snapshot.forEach(function (child) {\r\n                    game = child.val();\r\n                });\r\n                if (game.password === that.state.password) {\r\n                    that.initGameListiner(game.key);\r\n                    that.props.toggleHeader();\r\n                } else {\r\n                    let snack = {\r\n                        variant: \"error\",\r\n                        message: \"Could not find matching game\"\r\n                    }\r\n                    that.props.showSnackbar(snack);\r\n                }\r\n            } else {\r\n                let snack = {\r\n                    variant: \"info\",\r\n                    message: \"No game found\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n        });\r\n    }\r\n\r\n    initGameListiner(gameKey) {\r\n        var gameRef = fire.database().ref('games/' + gameKey);\r\n        let that = this;\r\n        gameRef.on('value', function (snapshot) {\r\n            let game = snapshot.val();\r\n            if (game) {\r\n                //kan blir problem med asynch setstate?\r\n                that.setState({\r\n                    game: game,\r\n                });\r\n            } else {\r\n                that.setState({\r\n                    game: '',\r\n                });\r\n            }\r\n        });\r\n        //koppla this.state.game till gameKey\r\n        //lägg till en likadan listener i Play.\r\n        //hosts gamelistiner ska lyssna på alla ändringar. Play ska inte lyssna på andra players ändringar om det går. något att optimera i framtiden.\r\n        //ett alt är att lyfta ut Players till en egen root? kan lägga phase och currentq i en game.state och sen är det allt som Player lyssnar på?\r\n        //men play behöver också behöva synca sin egna player.\r\n    }\r\n    render() {\r\n        //behöver bara updatera phase till firebase när det är phases som play bryr sig om. t.ex. inte setup då play bara kan connecta till games som är i phase==connection\r\n        //lägg till två rutor här för att söka fram ett game med hjälp av gameid och pass.\r\n\r\n        //strukturera filerna för host och play. kommentera i varje fil vad syftet med den är. vad den ska updatera i game etc. \r\n        //HostSetup updates settings and sets phase to connection on action\r\n        //connection shows players and sets phase to starting on action\r\n        //starting shows a countdown sets phase to awating_question and currentQuestion to 0(or some id) after countdown\r\n        //awaiting_question shows countdown and sets phase to show question after countdown\r\n        //show_question shows question and sets phase to answer after countdown\r\n        //answer shows q&a, countdown, nrPlayersAnswered, sets phase to result_question after countdown\r\n        //result_question shows stats about the answers, correct answer, hightscorelist etc, sets phase to awaiting_question and currentQuestion++ on action.\r\n        //result_question sets phase to final_result if questions are all done.\r\n        //final_result shows result of all players. top 3 and/or all. sets phase to end on action\r\n        //end shows options for replay, export result, etc.\r\n        let gameFunctions = {\r\n            update: this.updateGame,\r\n            restart: this.restartGame,\r\n            end: this.endGame,\r\n            quit: this.quitGame,\r\n        }\r\n        if (!this.state.game.phase) {\r\n            return (\r\n                <div className=\"page-container host-page\">\r\n                    <Grid container spacing={24}>\r\n                        <form autoComplete=\"off\">\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Game ID\"\r\n                                    name=\"Game ID\"\r\n                                    value={this.state.gameId}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('gameId')}\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Password\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    margin=\"normal\"\r\n                                    value={this.state.password}\r\n                                    onChange={this.handleChange('password')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.fetchGame} variant=\"contained\">Fetch</Button>\r\n                        </form>\r\n                    </Grid>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"page-container host-page\">\r\n                    {this.state.game.gametype === \"quiz\" && <Quiz game={this.state.game} gameFunc={gameFunctions} />}\r\n                    {this.state.game.gametype === \"snake\" && <Minigame game={this.state.game} gameFunc={gameFunctions} />}\r\n                    {this.state.game.gametype === \"tetris\" && <Minigame game={this.state.game} gameFunc={gameFunctions} />}\r\n\r\n\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Host;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            authId: '',\r\n            playerCreated: false,\r\n        };\r\n        this.createPlayer = this.createPlayer.bind(this);\r\n        this.generateName = this.generateName.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //problem vid restart så skapas en ny användare. test spara playerkey till localhost och testa använda den keyn om den passar\r\n        if (!this.props.playerKey && this.props.game.quiz.nameGenerator) {\r\n            this.props.addPlayer(this.generatePlayer());\r\n        }\r\n    }\r\n    createPlayer() {\r\n        //validera så att namnet inte är taget.\r\n        let player = {\r\n            name: this.state.name,\r\n            score: 0,\r\n\r\n        }\r\n        this.props.addPlayer(player);\r\n        this.setState({ playerCreated: true });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    generatePlayer() {\r\n        //skriv upp en lista med namn. kanske använda två arrayer en med adjekktiv och en med substantiv \"crazy tomato\" etc. \r\n        //använd generateName(this.game.players) den randomar ett namn, kollar om namnet redan finns och randomar igen isåfall.\r\n        //randomar xx antal gånger sen lägger den till ett extra adjektiv\r\n        let name = this.generateName();\r\n        let player = {\r\n            name: name,\r\n            score: 0,\r\n        }\r\n        return player;\r\n    }\r\n    generateName() {\r\n        let adjectives = [\"adamant\", \"adroit\", \"amatory\", \"animistic\", \"antic\", \"arcadian\", \"baleful\", \"bellicose\", \"bilious\", \"boorish\", \"calamitous\", \"caustic\", \"cerulean\", \"comely\", \"concomitant\", \"contumacious\", \"corpulent\", \"crapulous\", \"defamatory\", \"didactic\", \"dilatory\", \"dowdy\", \"efficacious\", \"effulgent\", \"egregious\", \"endemic\", \"equanimous\", \"execrable\", \"fastidious\", \"feckless\", \"fecund\", \"friable\", \"fulsome\", \"garrulous\", \"guileless\", \"gustatory\", \"heuristic\", \"histrionic\", \"hubristic\", \"incendiary\", \"insidious\", \"insolent\", \"intransigent\", \"inveterate\", \"invidious\", \"irksome\", \"jejune\", \"jocular\", \"judicious\", \"lachrymose\", \"limpid\", \"loquacious\", \"luminous\", \"mannered\", \"mendacious\", \"meretricious\", \"minatory\", \"mordant\", \"munificent\", \"nefarious\", \"noxious\", \"obtuse\", \"parsimonious\", \"pendulous\", \"pernicious\", \"pervasive\", \"petulant\", \"platitudinous\", \"precipitate\", \"propitious\", \"puckish\", \"querulous\", \"quiescent\", \"rebarbative\", \"recalcitant\", \"redolent\", \"rhadamanthine\", \"risible\", \"ruminative\", \"sagacious\", \"salubrious\", \"sartorial\", \"sclerotic\", \"serpentine\", \"spasmodic\", \"strident\", \"taciturn\", \"tenacious\", \"tremulous\", \"trenchant\", \"turbulent\", \"turgid\", \"ubiquitous\", \"uxorious\", \"verdant\", \"voluble\", \"voracious\", \"wheedling\", \"withering\", \"zealous\"];\r\n        let nouns = [\"ninja\", \"chair\", \"pancake\", \"statue\", \"unicorn\", \"rainbows\", \"laser\", \"senor\", \"bunny\", \"captain\", \"nibblets\", \"cupcake\", \"carrot\", \"gnomes\", \"glitter\", \"potato\", \"salad\", \"toejam\", \"curtains\", \"beets\", \"toilet\", \"exorcism\", \"stick figures\", \"mermaid eggs\", \"sea barnacles\", \"dragons\", \"jellybeans\", \"snakes\", \"dolls\", \"bushes\", \"cookies\", \"apples\", \"ice cream\", \"ukulele\", \"kazoo\", \"banjo\", \"opera singer\", \"circus\", \"trampoline\", \"carousel\", \"carnival\", \"locomotive\", \"hot air balloon\", \"praying mantis\", \"animator\", \"artisan\", \"artist\", \"colorist\", \"inker\", \"coppersmith\", \"director\", \"designer\", \"flatter\", \"stylist\", \"leadman\", \"limner\", \"make-up artist\", \"model\", \"musician\", \"penciller\", \"producer\", \"scenographer\", \"set decorator\", \"silversmith\", \"teacher\", \"auto mechanic\", \"beader\", \"bobbin boy\", \"clerk of the chapel\", \"filling station attendant\", \"foreman\", \"maintenance engineering\", \"mechanic\", \"miller\", \"moldmaker\", \"panel beater\", \"patternmaker\", \"plant operator\", \"plumber\", \"sawfiler\", \"shop foreman\", \"soaper\", \"stationary engineer\", \"wheelwright\", \"woodworkers\"];\r\n        let finalName = \"\";\r\n        let currentNames = [];\r\n        if (this.props.game.players) {\r\n            currentNames = Object.values(this.props.game.players).map(a => a.name);\r\n        }\r\n        for (let i = 0; i < 20; i++) {\r\n            let name = \"\";\r\n            if (i > 10) {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            } else {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            }\r\n            if (currentNames.indexOf(name) > -1) {\r\n                continue;\r\n            } else {\r\n                finalName = name;\r\n                break;\r\n            }\r\n        }\r\n        return finalName;\r\n\r\n    }\r\n\r\n    render() {\r\n        let players = this.props.game.players;\r\n        let playerName = '';\r\n        if (players && this.props.playerKey) {\r\n            playerName = players[this.props.playerKey].name;\r\n        }\r\n        let playersInLobby = [];\r\n        if (players) {\r\n            playersInLobby = Object.values(players);\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>! </Typography>\r\n\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography paragraph variant=\"subtitle1\">Players in lobby</Typography>\r\n                                <Grid container>\r\n                                    {playersInLobby.map((player, index) =>\r\n                                        <Grid key={player.key} item md={3} xs={6}>\r\n                                            <Typography paragraph variant=\"body1\">{player.name}</Typography>\r\n                                        </Grid>)}\r\n                                </Grid>\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                                <Typography paragraph variant=\"subtitle1\">Waiting for the host to start the game</Typography>\r\n\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>!</Typography>\r\n                                <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Starting quiz</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Starting quiz...</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Loading question</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">{this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the question on the screen!</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseShowQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\n\r\nclass PhaseAnswer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: 0,\r\n            question: {},\r\n            hasAnswered: false,\r\n            selectedAnswer: ''\r\n        };\r\n        this.answerQuestion = this.answerQuestion.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        let question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        this.setState({ question: question, startTime: Date.now() });\r\n\r\n    }\r\n    answerQuestion = answer => {\r\n        this.setState({ selectedAnswer: answer, hasAnswered: true });\r\n        let answerTime = Date.now() - this.state.startTime;\r\n        let correct = this.state.question.correctAnswers.indexOf(answer) > -1;\r\n        let score = 0;\r\n        if (correct) {\r\n            switch (this.state.question.difficulty) {\r\n                case \"easy\":\r\n                    score += 100;\r\n                    break;\r\n                case \"medium\":\r\n                    score += 200;\r\n                    break;\r\n                case \"hard\":\r\n                    score += 300;\r\n                    break;\r\n                case undefined:\r\n                    score += 200;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            if (this.props.game.quiz.timelimit && this.state.question.timelimit) {\r\n                //let timeRemaining = this.state.question.timelimit - answerTime;\r\n                let timeFactorUsed = answerTime / (this.state.question.timelimit * 1000);\r\n                score += Math.floor((score / timeFactorUsed) / 10);\r\n            }\r\n        }\r\n        let playerAnswer = {\r\n            answer: answer,\r\n            score: score,\r\n            answerTime: answerTime,\r\n            questionId: this.state.question.id,\r\n        }\r\n        this.props.saveAnswer(playerAnswer);\r\n    };\r\n\r\n    render() {\r\n        let answers = [];\r\n        if (this.props.game) {\r\n            answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography paragraph variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span> \r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } else {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-middle-and-bottom-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} remoteMode={true} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n        } else {\r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span>\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } else {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-complete-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default PhaseAnswer;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Podium from '../Podium';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: null\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    handleChange = panel => (event, expanded) => {\r\n        this.setState({\r\n            expanded: expanded ? panel : false,\r\n        });\r\n    };\r\n    getPlayerAnswerData() {\r\n        let answerDataList = [];\r\n\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n\r\n        for (let i = 0; i < this.props.game.quiz.questions.length; i++) {\r\n            let answerData = {\r\n                question: {},\r\n                score: 0,\r\n                time: 0,\r\n                answer: '',\r\n            };\r\n            let question = this.props.game.quiz.questions[i];\r\n\r\n            if (currentPlayer.answers[question.id]) {\r\n                answerData.score = currentPlayer.answers[question.id].score;\r\n                answerData.answer = currentPlayer.answers[question.id].answer;\r\n                answerData.time = currentPlayer.answers[question.id].answerTime;\r\n            } else {\r\n                answerData.score = 0;\r\n                answerData.answer = \"no answer\";\r\n                answerData.time = 0;\r\n            }\r\n            answerData.question = question;\r\n\r\n            answerDataList.push(answerData);\r\n        }\r\n        return answerDataList;\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let playerData = this.getPlayerAnswerData();\r\n            return (<div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h5\">Quiz finished</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"subtitle1\">You finished\r\n                        <span className=\"dynamic-text\">2nd</span> with a score of  <span className=\"dynamic-text\">560</span>\r\n                    </Typography>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography >Final scoretable</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div>\r\n                                <Podium game={this.props.game} />\r\n                            </div>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography>Your own data</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails style={{display:'block'}}>\r\n                            {playerData.map((data, index) =>\r\n                                <ExpansionPanel key={data.question.id} expanded={this.state.expanded === data.question.id} onChange={this.handleChange(data.question.id)}>\r\n                                    <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                        <Typography variant=\"subtitle1\">{data.question.question}</Typography>\r\n                                        <Typography variant=\"subtitle2\">{data.score}pt</Typography>\r\n                                    </ExpansionPanelSummary>\r\n                                    <ExpansionPanelDetails>\r\n                                        <Typography>Your answer: {data.answer}</Typography>\r\n                                        <Typography>Your time: {data.time/1000}sec</Typography>\r\n\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                                        <List>\r\n                                            {data.question.correctAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                                        <List>\r\n                                            {data.question.wrongAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                    </ExpansionPanelDetails>\r\n                                </ExpansionPanel>\r\n                            )}\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                </div>\r\n            </div>);\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\nimport { Typography } from '@material-ui/core';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\nclass PhaseResultQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    getPlayerAnswerData() {\r\n        let answerData = {\r\n            totalScore: 0,\r\n            currentQuestionScore: 0,\r\n            newLeaderboardPosition: 1,\r\n            oldLeaderboardPosition: 1,\r\n            answerTime: 0,\r\n            hasAnswered: false,\r\n        };\r\n        let currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n        for (let j = 0; j < Object.keys(currentPlayer.answers).length; j++) {\r\n            let question = this.props.game.quiz.questions[j];\r\n            let answer = currentPlayer.answers[question.id];\r\n            if (answer) {\r\n                if (answer.questionId === currentQuestion.id) {\r\n                    answerData.hasAnswered = true;\r\n                    answerData.currentQuestionScore = answer.score;\r\n                    answerData.answerTime = answer.answerTime;\r\n                }\r\n                answerData.totalScore += answer.score;\r\n            }\r\n        }\r\n\r\n        let playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n            if (playerKeys[i] === currentPlayer.key) {\r\n                continue;\r\n            }\r\n            let player = this.props.game.players[playerKeys[i]];\r\n            let totalScore = 0;\r\n            let currentQuestionScore = 0;\r\n            for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n                let question = this.props.game.quiz.questions[j];\r\n                let answer = player.answers[question.id];\r\n                if (answer) {\r\n                    if (answer.questionId === currentQuestion.id) {\r\n                        currentQuestionScore = answer.score;\r\n                    }\r\n                    totalScore += answer.score;\r\n                }\r\n            }\r\n            if (totalScore > answerData.totalScore) {\r\n                answerData.newLeaderboardPosition++;\r\n            }\r\n            if (totalScore - currentQuestionScore > answerData.totalScore - answerData.currentQuestionScore) {\r\n                answerData.oldLeaderboardPosition++;\r\n            }\r\n        }\r\n\r\n        return answerData;\r\n    }\r\n    render() {\r\n        let playerData = this.getPlayerAnswerData();\r\n        let wrongAnswer = playerData.hasAnswered && playerData.currentQuestionScore === 0;\r\n        let correctAnswer = playerData.currentQuestionScore > 0;\r\n        let noAnswer = !playerData.hasAnswered;\r\n\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let answers = [];\r\n            let currentQuestion = \"\";\r\n            if (this.props.game) {\r\n                currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n                answers = currentQuestion.answers;\r\n            }\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        {correctAnswer > 0 && <Typography variant=\"h5\">Correct answer!</Typography>}\r\n                        {wrongAnswer && <Typography variant=\"h5\">Wrong answer!</Typography>}\r\n                        {noAnswer && <Typography variant=\"h5\">You did not answer the question</Typography>}\r\n                        {!noAnswer &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Score:  <span className=\"dynamic-text\">{playerData.totalScore}</span> Time:  <span className=\"dynamic-text\">{playerData.answerTime / 1000}</span> seconds</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition !== playerData.newLeaderboardPosition &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Old position:{playerData.oldLeaderboardPosition} New position:{playerData.newLeaderboardPosition}</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition === playerData.newLeaderboardPosition &&\r\n                            <Typography variant=\"body1\">Position:{playerData.newLeaderboardPosition}</Typography>\r\n                        }\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Grid container>\r\n                            <Grid item md={6} xs={12}>\r\n                                <div className=\"quiz-answer-chart\">\r\n\r\n                                    <AnswerChart game={this.props.game} />\r\n                                </div>\r\n                            </Grid>\r\n                            <Grid item md={6} xs={12}>\r\n                                <div>\r\n                                    <Leaderboard game={this.props.game} />\r\n                                </div>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                        <Grid container>\r\n                            {answers.map((answer, index) =>\r\n                                <Grid key={index} item xs={6}>\r\n                                    <AnswerOption answer={answer} index={index} />\r\n                                </Grid>)}\r\n                        </Grid>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        {correctAnswer > 0 && <Typography paragraph variant=\"h5\">Correct answer!</Typography>}\r\n                        {wrongAnswer && <Typography paragraph variant=\"h5\">Wrong answer!</Typography>}\r\n                        {noAnswer && <Typography paragraph variant=\"h5\">You did not answer the question</Typography>}\r\n\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        {!noAnswer &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Score:{playerData.totalScore}</Typography>\r\n                                <Typography variant=\"body1\">Time:{playerData.answerTime / 1000} seconds</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition !== playerData.newLeaderboardPosition &&\r\n                            <div>\r\n                                <Typography variant=\"body1\">Old position:{playerData.oldLeaderboardPosition}</Typography>\r\n                                <Typography variant=\"body1\">New position:{playerData.newLeaderboardPosition}</Typography>\r\n                            </div>\r\n                        }\r\n                        {playerData.oldLeaderboardPosition === playerData.newLeaderboardPosition &&\r\n                            <Typography variant=\"body1\">Position:{playerData.newLeaderboardPosition}</Typography>\r\n                        }\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                        <Typography variant=\"subtitle1\">Look at the screen to se overall player results</Typography>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseResultQuestion;","import React, { Component } from 'react';\r\nimport { fire } from '../../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.saveAnswer = this.saveAnswer.bind(this);\r\n    }\r\n\r\n    saveAnswer(answer) {\r\n        let that = this;\r\n        let currentQuestionId = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;\r\n        fire.database().ref('/games/' + that.props.game.key + '/players/' + this.props.playerKey + '/answers/' + currentQuestionId).set(answer, function (error) {\r\n            if (error) {\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n                let snack = {\r\n                    variant: \"success\",\r\n                    message: \"Successfully updated player!\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let lastPhase = this.props.game.phase === \"final_result\" || this.props.game.phase === \"end\";\r\n        return (\r\n            <div className=\"play-container\">\r\n                {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} addPlayer={this.props.createPlayer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"awaiting_question\" && <PhaseAwaitingQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"show_question\" && <PhaseShowQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"answer\" && <PhaseAnswer game={this.props.game} saveAnswer={this.saveAnswer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"result_question\" && <PhaseResultQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                {lastPhase  && <PhaseFinalResult game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quiz;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                PlayEnd\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            authId: '',\r\n            playerCreated: false,\r\n        };\r\n        this.createPlayer = this.createPlayer.bind(this);\r\n        this.generateName = this.generateName.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //problem vid restart så skapas en ny användare. test spara playerkey till localhost och testa använda den keyn om den passar\r\n        if (!this.props.playerKey && this.props.game.minigame.nameGenerator) {\r\n            this.props.addPlayer(this.generatePlayer());\r\n        }\r\n    }\r\n    createPlayer() {\r\n        //validera så att namnet inte är taget.\r\n        let player = {\r\n            name: this.state.name,\r\n            score: 0,\r\n\r\n        }\r\n        this.props.addPlayer(player);\r\n        this.setState({ playerCreated: true });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    generatePlayer() {\r\n        //skriv upp en lista med namn. kanske använda två arrayer en med adjekktiv och en med substantiv \"crazy tomato\" etc. \r\n        //använd generateName(this.game.players) den randomar ett namn, kollar om namnet redan finns och randomar igen isåfall.\r\n        //randomar xx antal gånger sen lägger den till ett extra adjektiv\r\n        let name = this.generateName();\r\n        let player = {\r\n            name: name,\r\n            score: 0,\r\n        }\r\n        return player;\r\n    }\r\n    generateName() {\r\n        let adjectives = [\"adamant\", \"adroit\", \"amatory\", \"animistic\", \"antic\", \"arcadian\", \"baleful\", \"bellicose\", \"bilious\", \"boorish\", \"calamitous\", \"caustic\", \"cerulean\", \"comely\", \"concomitant\", \"contumacious\", \"corpulent\", \"crapulous\", \"defamatory\", \"didactic\", \"dilatory\", \"dowdy\", \"efficacious\", \"effulgent\", \"egregious\", \"endemic\", \"equanimous\", \"execrable\", \"fastidious\", \"feckless\", \"fecund\", \"friable\", \"fulsome\", \"garrulous\", \"guileless\", \"gustatory\", \"heuristic\", \"histrionic\", \"hubristic\", \"incendiary\", \"insidious\", \"insolent\", \"intransigent\", \"inveterate\", \"invidious\", \"irksome\", \"jejune\", \"jocular\", \"judicious\", \"lachrymose\", \"limpid\", \"loquacious\", \"luminous\", \"mannered\", \"mendacious\", \"meretricious\", \"minatory\", \"mordant\", \"munificent\", \"nefarious\", \"noxious\", \"obtuse\", \"parsimonious\", \"pendulous\", \"pernicious\", \"pervasive\", \"petulant\", \"platitudinous\", \"precipitate\", \"propitious\", \"puckish\", \"querulous\", \"quiescent\", \"rebarbative\", \"recalcitant\", \"redolent\", \"rhadamanthine\", \"risible\", \"ruminative\", \"sagacious\", \"salubrious\", \"sartorial\", \"sclerotic\", \"serpentine\", \"spasmodic\", \"strident\", \"taciturn\", \"tenacious\", \"tremulous\", \"trenchant\", \"turbulent\", \"turgid\", \"ubiquitous\", \"uxorious\", \"verdant\", \"voluble\", \"voracious\", \"wheedling\", \"withering\", \"zealous\"];\r\n        let nouns = [\"ninja\", \"chair\", \"pancake\", \"statue\", \"unicorn\", \"rainbows\", \"laser\", \"senor\", \"bunny\", \"captain\", \"nibblets\", \"cupcake\", \"carrot\", \"gnomes\", \"glitter\", \"potato\", \"salad\", \"toejam\", \"curtains\", \"beets\", \"toilet\", \"exorcism\", \"stick figures\", \"mermaid eggs\", \"sea barnacles\", \"dragons\", \"jellybeans\", \"snakes\", \"dolls\", \"bushes\", \"cookies\", \"apples\", \"ice cream\", \"ukulele\", \"kazoo\", \"banjo\", \"opera singer\", \"circus\", \"trampoline\", \"carousel\", \"carnival\", \"locomotive\", \"hot air balloon\", \"praying mantis\", \"animator\", \"artisan\", \"artist\", \"colorist\", \"inker\", \"coppersmith\", \"director\", \"designer\", \"flatter\", \"stylist\", \"leadman\", \"limner\", \"make-up artist\", \"model\", \"musician\", \"penciller\", \"producer\", \"scenographer\", \"set decorator\", \"silversmith\", \"teacher\", \"auto mechanic\", \"beader\", \"bobbin boy\", \"clerk of the chapel\", \"filling station attendant\", \"foreman\", \"maintenance engineering\", \"mechanic\", \"miller\", \"moldmaker\", \"panel beater\", \"patternmaker\", \"plant operator\", \"plumber\", \"sawfiler\", \"shop foreman\", \"soaper\", \"stationary engineer\", \"wheelwright\", \"woodworkers\"];\r\n        let finalName = \"\";\r\n        let currentNames = [];\r\n        if (this.props.game.players) {\r\n            currentNames = Object.values(this.props.game.players).map(a => a.name);\r\n        }\r\n        for (let i = 0; i < 20; i++) {\r\n            let name = \"\";\r\n            if (i > 10) {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            } else {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            }\r\n            if (currentNames.indexOf(name) > -1) {\r\n                continue;\r\n            } else {\r\n                finalName = name;\r\n                break;\r\n            }\r\n        }\r\n        return finalName;\r\n\r\n    }\r\n\r\n    render() {\r\n        let players = this.props.game.players;\r\n        let playerName = '';\r\n        if (players && this.props.playerKey) {\r\n            playerName = players[this.props.playerKey].name;\r\n        }\r\n        return (\r\n            <div className=\"phase-container\">\r\n                {playerName &&\r\n                    <div >\r\n                        <div className=\"quiz-top-section\">\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>!</Typography>\r\n                            <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                }\r\n                {!playerName &&\r\n                    <div>\r\n                        <FormControl>\r\n                            <TextField\r\n                                label=\"Name\"\r\n                                name=\"name\"\r\n                                value={this.state.name}\r\n                                margin=\"normal\"\r\n                                onChange={this.handleChange('name')}\r\n                            />\r\n                        </FormControl>\r\n                        <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                    </div>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h5\">Starting game...</Typography>\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: null\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    handleChange = panel => (event, expanded) => {\r\n        this.setState({\r\n            expanded: expanded ? panel : false,\r\n        });\r\n    };\r\n    getPlayerAnswerData() {\r\n        let answerDataList = [];\r\n\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n\r\n        for (let i = 0; i < this.props.game.quiz.questions.length; i++) {\r\n            let answerData = {\r\n                question: {},\r\n                score: 0,\r\n                time: 0,\r\n                answer: '',\r\n            };\r\n            let question = this.props.game.quiz.questions[i];\r\n\r\n            if (currentPlayer.answers[question.id]) {\r\n                answerData.score = currentPlayer.answers[question.id].score;\r\n                answerData.answer = currentPlayer.answers[question.id].answer;\r\n                answerData.time = currentPlayer.answers[question.id].answerTime;\r\n            } else {\r\n                answerData.score = 0;\r\n                answerData.answer = \"no answer\";\r\n                answerData.time = 0;\r\n            }\r\n            answerData.question = question;\r\n\r\n            answerDataList.push(answerData);\r\n        }\r\n        return answerDataList;\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let playerData = this.getPlayerAnswerData();\r\n            return (<div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h5\">Quiz finished</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"subtitle1\">You finished\r\n                        <span className=\"dynamic-text\">2nd</span> with a score of  <span className=\"dynamic-text\">560</span>\r\n                    </Typography>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography >Final scoretable</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div>\r\n                                podium\r\n                            </div>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography>Your own data</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails style={{display:'block'}}>\r\n                            {playerData.map((data, index) =>\r\n                                <ExpansionPanel key={data.question.id} expanded={this.state.expanded === data.question.id} onChange={this.handleChange(data.question.id)}>\r\n                                    <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                        <Typography variant=\"subtitle1\">{data.question.question}</Typography>\r\n                                        <Typography variant=\"subtitle2\">{data.score}pt</Typography>\r\n                                    </ExpansionPanelSummary>\r\n                                    <ExpansionPanelDetails>\r\n                                        <Typography>Your answer: {data.answer}</Typography>\r\n                                        <Typography>Your time: {data.time/1000}sec</Typography>\r\n\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                                        <List>\r\n                                            {data.question.correctAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                                        <List>\r\n                                            {data.question.wrongAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                    </ExpansionPanelDetails>\r\n                                </ExpansionPanel>\r\n                            )}\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                </div>\r\n            </div>);\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                PlayEnd\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component, Fragment } from 'react';\r\nimport LeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport RightIcon from '@material-ui/icons/ChevronRight';\r\nimport UpIcon from '@material-ui/icons/ExpandLess';\r\nimport DownIcon from '@material-ui/icons/ExpandMore';\r\nimport { Typography } from '@material-ui/core';\r\nimport { fire } from '../../../base';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nclass SnakeController extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.handleAction = this.handleAction.bind(this);\r\n    }\r\n\r\n    validateDirectionChange(keyPress, currentDirection) {\r\n        return (keyPress === 'left' && currentDirection !== 'right') ||\r\n            (keyPress === 'right' && currentDirection !== 'left') ||\r\n            (keyPress === 'up' && currentDirection !== 'down') ||\r\n            (keyPress === 'down' && currentDirection !== 'up');\r\n    }\r\n\r\n    handleAction(name) {\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n        let snakeId = currentPlayer.snakeId;\r\n        let currentSnake = this.props.game.minigame.snakes[snakeId];\r\n        //om det inte är ett giltigt move så spara det inte till firebase? alt kan jag göra denna sanering vid read i snake.js\r\n        if (currentSnake.move === name) {\r\n            console.log(\"move is same as current direction\");\r\n            return;\r\n        }\r\n        if (!this.validateDirectionChange(name, currentSnake.move)) {\r\n            console.log(\"move is unvalid\");\r\n            return;\r\n        }\r\n        fire.database().ref('/games/' + this.props.game.key + '/minigame/snakes/' + snakeId + '/move').set(name, function (error) {\r\n            if (error) {\r\n                console.log(\"error updated snake move\");\r\n            }\r\n            else {\r\n                console.log(\"successfully updated snake move\");\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n        let playerSnake = this.props.game.minigame.snakes[currentPlayer.snakeId];\r\n\r\n        let controlActions = currentPlayer.controlActions;\r\n        let allControlActions = playerSnake.actions;\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className='player-controlls-container'>\r\n                    {allControlActions.map((action, index) =>\r\n                        <Fragment key={action}>\r\n                            {controlActions.indexOf(action) > -1 &&\r\n                                <Button key={action} className={'player-controlls-action player-controlls-' + action} onClick={() => { this.handleAction(action) }} style={{ backgroundColor: playerSnake.color }}>\r\n                                    {action === 'up' && <UpIcon className='player-controlls-icon' />}\r\n                                    {action === 'down' && <DownIcon className='player-controlls-icon' />}\r\n                                    {action === 'right' && <RightIcon className='player-controlls-icon' />}\r\n                                    {action === 'left' && <LeftIcon className='player-controlls-icon' />}\r\n                                </Button>\r\n                            }\r\n                            {controlActions.indexOf(action) === -1 &&\r\n                                <Button key={action} className={'player-controlls-action player-controlls-' + action} style={{ backgroundColor: playerSnake.color, opacity: 0.3 }}>\r\n                                    {action === 'up' && <UpIcon className='player-controlls-icon' />}\r\n                                    {action === 'down' && <DownIcon className='player-controlls-icon' />}\r\n                                    {action === 'right' && <RightIcon className='player-controlls-icon' />}\r\n                                    {action === 'left' && <LeftIcon className='player-controlls-icon' />}\r\n                                </Button>\r\n                            }\r\n                        </Fragment>\r\n                    )}\r\n                    <div className='player-controlls-action player-controlls-middle'>\r\n                        <Typography variant=\"body1\">{playerSnake.name}</Typography>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SnakeController;","import React, { Component } from 'react';\r\n\r\nclass TetrisController extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                TetrisController.js\r\n\r\n                här  ska jag visa knappar för moves. och en metod här som tar knapptrycket och updaterar en specifik property i firebase baserat på gameid, playerkey etc.\r\n                måste ha med snakeId in i dnena kommmponent?\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TetrisController;","import React, { Component } from 'react';\r\nimport { fire } from '../../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseEnd from './PhaseEnd';\r\nimport SnakeController from '../snake/SnakeController';\r\nimport TetrisController from '../tetris/TetrisController';\r\n\r\nclass Minigame extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n    //Får ha en phase som är \"gameplay\" där den specifika komponenten för varje minigame rendreras. eller där en phaseGamePlay rednfreras som i sin tur kollar på gametype\r\n\r\n    render() {\r\n        let lastPhase = this.props.game.phase === \"final_result\" || this.props.game.phase === \"end\";\r\n        switch (this.props.game.gametype) {\r\n            case 'snake':\r\n                return (\r\n                    <div className=\"play-container\">\r\n                        {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} addPlayer={this.props.createPlayer} playerKey={this.props.playerKey} />}\r\n                        {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                        {this.props.game.phase === \"gameplay\" && <SnakeController game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                        {lastPhase && <PhaseFinalResult game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                    </div>\r\n                );\r\n            case 'tetris':\r\n                return (\r\n                    <div className=\"play-container\">\r\n                        {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} addPlayer={this.props.createPlayer} playerKey={this.props.playerKey} />}\r\n                        {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                        {this.props.game.phase === \"gameplay\" && <TetrisController game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                        {lastPhase && <PhaseFinalResult game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                    </div>\r\n                );\r\n            default:\r\n                return (null);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Minigame;","import React, { Component } from 'react';\r\nimport { fire } from '../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Quiz from '../quiz/play/Quiz';\r\nimport Minigame from '../minigame/play/Minigame';\r\n\r\nclass Play extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            game: {},\r\n            gameId: '',\r\n            playerKey: '',\r\n\r\n        };\r\n        this.createPlayer = this.createPlayer.bind(this);\r\n        this.fetchGame = this.fetchGame.bind(this);\r\n    }\r\n\r\n    fetchGame() {\r\n        let that = this;\r\n        fire.database().ref('games').orderByChild(\"gameId\").equalTo(that.state.gameId).once(\"value\", function (snapshot) {\r\n            if (snapshot.val()) {\r\n                let game;\r\n                snapshot.forEach(function (child) {\r\n                    game = child.val();\r\n                });\r\n                //får skapa en ny attribut, canPlayerJoin true/false om det begövs\r\n                if (game.phase === \"connection\") {\r\n                    let storedPlayerKey = localStorage.getItem('RecentPlayerKey');\r\n                    if (storedPlayerKey && game.players && game.players[storedPlayerKey]) {\r\n                        that.setState({ playerKey: storedPlayerKey });\r\n                    }\r\n\r\n                    that.initGameListiner(game.key);\r\n                    let snack = {\r\n                        variant: \"success\",\r\n                        message: \"Connected to game\"\r\n                    }\r\n                    that.props.showSnackbar(snack);\r\n                    that.props.toggleHeader(false);\r\n                } else if (game.phase === \"setup\") {\r\n                    let snack = {\r\n                        variant: \"error\",\r\n                        message: \"Game is not yet started\"\r\n                    }\r\n                    that.props.showSnackbar(snack);\r\n                } else {\r\n                    let storedPlayerKey = localStorage.getItem('RecentPlayerKey');\r\n                    if (storedPlayerKey && game.players && game.players[storedPlayerKey]) {\r\n                        that.setState({ playerKey: storedPlayerKey });\r\n                        that.initGameListiner(game.key);\r\n                        let snack = {\r\n                            variant: \"success\",\r\n                            message: \"Connected to game\"\r\n                        }\r\n                        that.props.showSnackbar(snack);\r\n                        that.props.toggleHeader(false);\r\n                    } else {\r\n                        let snack = {\r\n                            variant: \"error\",\r\n                            message: \"Game is in progress\"\r\n                        }\r\n                        that.props.showSnackbar(snack);\r\n                    }\r\n                }\r\n            } else {\r\n                let snack = {\r\n                    variant: \"info\",\r\n                    message: \"No game found\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n        });\r\n    }\r\n\r\n    initGameListiner(gameKey) {\r\n        var gameRef = fire.database().ref('games/' + gameKey);\r\n        let that = this;\r\n        gameRef.on('value', function (snapshot) {\r\n            let game = snapshot.val();\r\n            if (game) {\r\n                //kan blir problem med asynch setstate?\r\n                that.setState({\r\n                    game: game,\r\n                });\r\n            } else {\r\n                that.setState({\r\n                    game: '',\r\n                });\r\n            }\r\n        });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    createPlayer(player) {\r\n        let playerRef = fire.database().ref('/games/' + this.state.game.key + '/players').push();\r\n        player.key = playerRef.key;\r\n        let that = this;\r\n        playerRef.set(player, function (error) {\r\n            if (error) {\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n                that.setState({\r\n                    playerKey: player.key,\r\n                });\r\n                localStorage.setItem('RecentPlayerKey', player.key);\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.game.phase) {\r\n            return (\r\n                <div className=\"page-container play-page\">\r\n                    <Grid container spacing={24}>\r\n                        <form autoComplete=\"off\">\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Game ID\"\r\n                                    name=\"Game ID\"\r\n                                    value={this.state.gameId}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('gameId')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.fetchGame} variant=\"contained\">Join</Button>\r\n                        </form>\r\n                    </Grid>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"page-container play-page\">\r\n                    {this.state.game.gametype === \"quiz\" && <Quiz game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n                    {this.state.game.gametype === \"snake\" && <Minigame game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n                    {this.state.game.gametype === \"tetris\" && <Minigame game={this.state.game} createPlayer={this.createPlayer} playerKey={this.state.playerKey} showSnackbar={this.props.showSnackbar} />}\r\n\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Play;","import React, { Component } from 'react';\r\n\r\nclass Home extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"app-page home-page\">\r\n            HOME PAGE\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Button from '@material-ui/core/Button';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport green from '@material-ui/core/colors/green';\r\nimport amber from '@material-ui/core/colors/amber';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n    success: CheckCircleIcon,\r\n    warning: WarningIcon,\r\n    error: ErrorIcon,\r\n    info: InfoIcon,\r\n};\r\n\r\nconst styles1 = theme => ({\r\n    success: {\r\n        backgroundColor: green[600],\r\n    },\r\n    error: {\r\n        backgroundColor: theme.palette.error.dark,\r\n    },\r\n    info: {\r\n        backgroundColor: theme.palette.primary.dark,\r\n    },\r\n    warning: {\r\n        backgroundColor: amber[700],\r\n    },\r\n    icon: {\r\n        fontSize: 20,\r\n    },\r\n    iconVariant: {\r\n        opacity: 0.9,\r\n        marginRight: theme.spacing.unit,\r\n    },\r\n    message: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n});\r\n\r\nfunction MySnackbarContent(props) {\r\n    const { classes, className, message, onClose, variant, ...other } = props;\r\n    const Icon = variantIcon[variant];\r\n\r\n    return (\r\n        <SnackbarContent\r\n            className={classNames(classes[variant], className)}\r\n            aria-describedby=\"client-snackbar\"\r\n            message={\r\n                <span id=\"client-snackbar\" className={classes.message}>\r\n                    <Icon className={classNames(classes.icon, classes.iconVariant)} />\r\n                    {message}\r\n                </span>\r\n            }\r\n            action={[\r\n                <IconButton\r\n                    key=\"close\"\r\n                    aria-label=\"Close\"\r\n                    color=\"inherit\"\r\n                    className={classes.close}\r\n                    onClick={onClose}\r\n                >\r\n                    <CloseIcon className={classes.icon} />\r\n                </IconButton>,\r\n            ]}\r\n            {...other}\r\n        />\r\n    );\r\n}\r\n\r\nMySnackbarContent.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    className: PropTypes.string,\r\n    message: PropTypes.node,\r\n    onClose: PropTypes.func,\r\n    variant: PropTypes.oneOf(['success', 'warning', 'error', 'info']).isRequired,\r\n};\r\n\r\nconst MySnackbarContentWrapper = withStyles(styles1)(MySnackbarContent);\r\n\r\nclass CustomizedSnackbars extends React.Component {\r\n    handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        this.props.hideSnackbar();\r\n    };\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <Snackbar\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={this.props.snack.open}\r\n                    autoHideDuration={6000}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <MySnackbarContentWrapper\r\n                        onClose={this.handleClose}\r\n                        variant={this.props.snack.variant}\r\n                        message={this.props.snack.message}\r\n                    />\r\n                </Snackbar>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default CustomizedSnackbars;","import React, { Component } from 'react';\nimport './App.scss';\nimport { fire } from './base';\nimport Header from './components/common/Header';\nimport Create from './components/pages/Create';\nimport Host from './components/pages/Host';\nimport Play from './components/pages/Play';\nimport Home from './components/pages/Home';\nimport CustomizedSnackbars from './components/common/CustomizedSnackbars';\n\nimport {\n  HashRouter as Router,\n  Route,\n} from \"react-router-dom\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      snack: '',\n      showHeader: true,\n    };\n    this.showSnackbar = this.showSnackbar.bind(this);\n    this.hideSnackbar = this.hideSnackbar.bind(this);\n    this.toggleHeader = this.toggleHeader.bind(this);\n\n  }\n  hideSnackbar() {\n    let snack = this.state.snack;\n    snack.open = false;\n    this.setState({\n      snack: snack,\n    });\n  }\n  showSnackbar(snack) {\n    snack.open = true;\n    this.setState({\n      snack: snack,\n    });\n  }\n  toggleHeader(value) {\n    this.setState({ showHeader: value });\n  }\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          {this.state.showHeader && <Header />}\n          <div id=\"content\">\n            <Route exact path=\"/play\" render={() => <Play showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/host\" render={() => <Host showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/create\" render={() => <Create showSnackbar={this.showSnackbar} />} />\n            <Route exact path=\"/\" render={() => <Home />} />\n          </div>\n          {this.state.snack && <CustomizedSnackbars snack={this.state.snack} hideSnackbar={this.hideSnackbar} />}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}