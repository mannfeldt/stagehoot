{"version":3,"sources":["components/minigame/golf/audio/golfwood.wav","components/minigame/golf/audio/golfwood2.wav","components/minigame/golf/audio/golfwood3.wav","components/minigame/golf/audio/golfiron.wav","components/minigame/golf/audio/golfiron2.wav","components/minigame/golf/audio/golfiron3.wav","components/minigame/golf/audio/countdown.wav","components/minigame/golf/audio/golfclap.wav","components/minigame/golf/audio/golfputt.wav","components/minigame/golf/audio/golfscore.wav","components/common/CountdownAnimation.scss","base.js","components/common/Header.js","components/quiz/create/Question.js","components/common/utils/appUtil.js","components/minigame/snake/Snake.js","components/quiz/create/GenerateQuizForm.js","components/quiz/create/QuestionForm.js","components/quiz/create/CreateQuiz.js","components/minigame/create/CreateTetris.js","components/minigame/create/CreateGolf.js","components/minigame/create/CreateSnake.js","components/minigame/create/CreateSpotify.js","components/minigame/create/CreateGolfRace.js","components/minigame/create/CreateMinigame.js","components/pages/Create.js","components/quiz/host/PhaseSetup.js","components/quiz/host/PhaseConnection.js","components/common/CountdownAnimation.js","components/quiz/host/PhaseStarting.js","components/quiz/host/PhaseAwaitingQuestion.js","components/quiz/host/PhaseShowQuestion.js","components/quiz/AnswerOption.js","components/common/Timer.js","components/quiz/host/AnswerCounter.js","components/quiz/host/PhaseAnswer.js","components/quiz/Podium.js","components/quiz/host/PhaseFinalResult.js","components/quiz/AnswerChart.js","components/quiz/Leaderboard.js","components/quiz/host/PhaseResultQuestion.js","components/quiz/host/PhaseEnd.js","components/quiz/host/Quiz.js","components/minigame/host/PhaseSetup.js","components/minigame/host/PhaseConnection.js","components/minigame/host/PhaseStarting.js","components/common/utils/minigameUtil.js","components/minigame/host/PhaseFinalResult.js","components/minigame/tetris/Tetris.js","components/minigame/host/PhaseEnd.js","components/minigame/snake/SnakeStarting.js","components/minigame/golf/GolfConstants.js","components/minigame/golf/GolfUtil.js","components/minigame/golf/Golf.js","components/minigame/golf/GolfStarting.js","components/minigame/snake/SnakeSetup.js","components/minigame/golf/GolfSetup.js","components/minigame/spotify/SpotifyConstants.js","components/minigame/spotify/host/SpotifySetup.js","components/minigame/spotify/host/SpotifyConnection.js","components/minigame/spotify/host/SpotifyStarting.js","components/minigame/spotify/AnswerChart.js","components/minigame/spotify/Leaderboard.js","components/minigame/spotify/PlayerList.js","components/minigame/spotify/host/SpotifyResultQuestion.js","components/minigame/spotify/SpotifyProgressbar.js","components/minigame/spotify/SpotifyUtil.js","components/minigame/spotify/SpotifyTimer.js","components/minigame/spotify/TrackPlayer.js","components/minigame/spotify/SpotifyServiceInterface.js","components/minigame/golfrace/GolfRace.js","components/minigame/spotify/host/Spotify.js","components/minigame/golfrace/GolfRaceSetup.js","components/minigame/host/Minigame.js","components/pages/Host.js","components/quiz/play/PhaseConnection.js","components/quiz/play/PhaseStarting.js","components/quiz/play/PhaseAwaitingQuestion.js","components/quiz/play/PhaseShowQuestion.js","components/quiz/play/PhaseAnswer.js","components/quiz/play/PhaseFinalResult.js","components/quiz/play/PhaseResultQuestion.js","components/quiz/play/Quiz.js","components/quiz/play/PhaseEnd.js","components/minigame/play/PhaseConnection.js","components/minigame/play/PhaseStarting.js","components/minigame/play/PhaseFinalResult.js","components/minigame/snake/SnakeController.js","components/minigame/tetris/TetrisController.js","components/minigame/spotify/SpotifyPlaylistSelector.js","components/minigame/spotify/play/SpotifyConnection.js","components/minigame/spotify/play/SpotifyController.js","components/minigame/spotify/play/SpotifyResultQuestion.js","components/minigame/play/Minigame.js","components/pages/Play.js","components/pages/Home.js","components/common/CustomizedSnackbars.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","cyanColor","redColor","purpleColor","greenColor","fire","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","fireGolf","appId","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","titleText","options","react_default","a","createElement","id","AppBar_default","position","Toolbar_default","className","Link","to","Component","Question","expanded","deleteQuestion","bind","assertThisInitialized","question","classes","Card_default","card","CardHeader_default","action","IconButton_default","onClick","DeleteOutlined_default","title","subheader","timelimit","CardContent_default","Typography_default","variant","align","List_default","correctAnswers","map","answer","index","ListItem_default","key","ListItemText_default","primary","wrongAnswers","withStyles","theme","maxWidth","calculateDefaultTimeLimit","aType","Math","floor","join","length","parseDOM","s","DOMParser","parseFromString","concat","body","textContent","parseDOMArray","arr","result","i","push","ctx","canvas","GenerateQuizForm","handleChange","name","event","setState","defineProperty","target","value","handleChangeSelect","nrOfQuestions","category","difficulty","generateQuestions","_this$state","_this$props","addQuestions","showSnackbar","url","fetch","then","response","json","generated","response_code","questions","results","generatedQuestion","correct_answer","incorrect_answers","qType","type","snack","message","_this$state2","Grid_default","container","item","xs","md","FormControl_default","fullWidth","TextField_default","label","margin","onChange","InputLabel_default","htmlFor","Select_default","inputProps","MenuItem_default","Button_default","QuestionForm","handleTrueFalse","correctAnswer","wrongAnswerOne","wrongAnswerTwo","wrongAnswerThree","sendQuestion","toggleGenerateQuestion","addQuestion","q","isTimelimit","disabled","create_GenerateQuizForm","required","component","FormLabel_default","RadioGroup_default","aria-label","FormControlLabel_default","control","Radio_default","CreateQuiz","handleChangeBool","checked","gametype","gamemode","timescore","gamePass","createQuiz","max","apply","toConsumableArray","o","qs","e","indexOf","splice","_this$state3","password","tile","quiz","_this2","_this$state4","spacing","index_es","autoComplete","FormGroup_default","Switch_default","create_QuestionForm","create_Question","transitionDelay","CreateTetris","validateGame","createGame","minigame","CreateGolf","holes","scoremode","speedmode","collisionmode","CreateSnake","racetarget","opponentCollision","eatOpponents","absorbAll","wallCollision","CreateSpotify","autoplay","qFeatures","qSize","qTrackOwner","qArtist","qGenre","Checkbox_default","CreateGolfRace","CreateMinigame","setGameType","create_CreateSnake","create_CreateTetris","create_CreateGolf","create_CreateGolfRace","create_CreateSpotify","Create","gameId","done","game","g","possible","charAt","random","generateGameId","created","Date","now","status","phase","gameRef","that","database","ref","set","error","errorText","localStorage","setItem","create_CreateQuiz","create_CreateMinigame","style","marginTop","PhaseSetup","surveyPlayers","answerStreak","nameGenerator","remoteMode","useTeams","randomizeQuestionOrder","autoPlayQuestions","startGame","createTeamGame","createClassicGame","teamMode","currentQuestion","gameFunc","update","PhaseConnection","nextPhase","players","values","player","paragraph","CountdownAnimation","speed","viewBox","d","PureComponent","PhaseStarting","counter","startCounter","setInterval","clearInterval","components_common_CountdownAnimation","PhaseAwaitingQuestion","PhaseShowQuestion","phaseTime","setTimeout","answers","shuffle","array","temp","answerStyles","icon","Cake_default","color","ExtensionOutlined_default","FavoriteBorder_default","StarBorder_default","AnswerOption","design","answerQuestion","Paper_default","playAnswer","backgroundColor","paper","root","flexGrow","paddingTop","unit","paddingBottom","textAlign","palette","text","secondary","height","width","float","fontSize","marginLeft","fontWeight","Timer","startValue","currentCount","completed","CircularProgress_default","circle","colorSecondary","thickness","size","marginBottom","AnswerCounter","LinearProgress_default","bar","PhaseAnswer","started","isTimelimited","playerKeys","keys","answersCollected","answerCollectedPercentage","common_Timer","ceil","host_AnswerCounter","quiz_AnswerOption","colors","Podium","getChartData","getChartOptions","getChartHeight","chartData","labels","datasets","data","borderWidth","rawPlayerData","playerScoreData","score","j","sort","b","maxIndex","padding","maintainAspectRatio","showTooltips","responsiveAnimationDuration","animation","easing","duration","onProgress","animationObject","onAnimationProgress","chart","textBaseline","font","stepratio","currentStep","numSteps","meta","getDatasetMeta","hidden","forEach","element","dataString","toString","fillStyle","tooltipPosition","fillText","x","y","_model","scales","yAxes","ticks","beginAtZero","display","xAxes","legend","tooltips","enabled","events","layout","left","right","top","bottom","maxHeight","es","getWinnerString","PhaseFinalResult","quiz_Podium","restart","quit","alert","AnswerChart","getAnswerData","answerData","topPlayer","playerKey","playerAnswers","nrOfAnswers","borderColor","beginPath","rect","_view","fill","img","Image","src","PUBLIC_PATH","ypos","drawImage","Leaderboard","handleChangePage","page","handleChangeRowsPerPage","rowsPerPage","leaderboardData","getLeaderboardData","startScoreCounter","getScoreCellWidth","newLeaderBoard","currentQuestionScore","totalScore","leaderboard","playerList","questionId","lastScore","scoreWidth","Table_default","table","TableBody_default","slice","TableRow_default","TableCell_default","getLeaderboardScore","TablePagination_default","count","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","whiteSpace","PhaseResultQuestion","nextQuestion","finalizeQuiz","isLastQuestion","quiz_AnswerChart","quiz_Leaderboard","end","PhaseEnd","Quiz","host_PhaseSetup","host_PhaseConnection","host_PhaseStarting","host_PhaseAwaitingQuestion","host_PhaseShowQuestion","host_PhaseAnswer","host_PhaseResultQuestion","host_PhaseFinalResult","host_PhaseEnd","multiplayerMode","playUrl","lib_default","gridSize","getRandomStartingPosTop","snakes","canvasWidth","snakesDown","filter","direction","existingValues","Set","getRandomStartingPos","getRandomStartingPosBottom","canvasSettings","xMax","getRandomStartingPosRight","yMax","getRandomStartingPosLeft","canvasHeight","round","some","v","detectSelfCollision","snake","detectWallCollision","snakeHead","leftCollison","topCollison","rightCollison","bottomCollison","maxYCord","maxXCord","context","Snake","togglePausGame","isPaused","overlay","window","innerHeight","innerWidth","totalSquares","nrOfFoods","gameTicker","winners","len","actions","moves","pos","minigameUtil","foods","amount","initialFoods","active","settings","border","respawntime","food","background","drawSnakes","generateFood","generateSnakes","resetCanvas","drawFood","detectCollisions","initControllerListener","generateFoods","isEndGame","renderOverlay","app","document","querySelector","getContext","snakeRef","on","snapshot","nextSnake","val","move","console","log","dead","alive","winner","reduce","prev","current","fillRect","nextSnakes","teleportSnakes","_loop","respawning","startPos","keyPress","currentDirection","movement","up","down","nextMove","shift","coordinate","unshift","collidedFood","find","f","pop","globalCompositeOperation","strokestyle","len2","bodyPos","strokeRect","_this$state5","currentSnake","opponentSnake","k","growLen","m","_this$state6","globalAlpha","headX","headY","snakeName","namePosition","yPos","role","tabIndex","onKeyDown","Tetris","SCREEN_WIDTH","SCREEN_HEIGHT","first","mousePos","particles","rockets","MAX_PARTICLES","golfimg","Particle","vel","shrink","resistance","gravity","flick","alpha","fade","Rocket","explosionColor","launch","rocket","launchFrom","prototype","render","c","exists","save","r","gradient","createRadialGradient","addColorStop","arc","PI","closePath","restore","constructor","explode","particle","angle","cos","sin","replayGame","getElementById","existingRockets","distance","sqrt","pow","randomChance","existingParticles","loop","winnerScore","cheight","cWidth","chunkify","nr","n","out","SNAKE_COLORS","SNAKE_NAMES","SnakeStarting","snakeGenerator","classic","createSnakes","team","nrOfSnakes","remainingPlayers","snakeIndex","createTeamSnakes","coop","createCoopSnakes","actionChunks","snakeId","controlActions","HOLE_HEIGHT","HOLE_CURVE_DEPTH","HOLE_WIDTH","BALL_RADIUS","SCORE_TERMS","CLUBS","loft","powerFactor","GROUND_COLORS","randInt","min","ballMaterial","p2","fairwayMaterial","holeMaterial","ballFairwayContact","friction","restitution","ballRoughContact","ballGreenContact","ballHoleContact","relaxation","BALL_GROUP","GROUND_GROUP","createWorld","world","sleepMode","BODY_SLEEPING","addContactMaterial","newBall","collisionMode","ballShape","radius","collisionGroup","collisionMask","material","ballBody","mass","addShape","angularDamping","damping","sleepTimeLimit","sleepSpeedLimit","createBall","spawn","getDistanceYards","identifyClubType","velocity","createAudio","file","snd","Audio","appendChild","getSwingData","club","acceleration","xFactor","YFactor","power","addHolePoints","level","points","Error","idxAfterHole","findIndex","point","hole","x1","x2","holePoints","pointsWithHole","objectSpread","createGround","beforeHole","afterHole","vertsBeforeHole","vertsHole","vertsAfterHole","verts","fromPolygon","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","shapes","Symbol","iterator","next","shape","err","return","createHoleSensor","sensorShape","sensor","sensorBody","getSegmentWidths","totalWidth","minWidth","widths","remainingWidth","calculateStrokeScore","strokes","parScore","3","4","5","abs","par","calculateTimeScore","scoretime","time","getPlayerColors","h","tiny","tinycolor","fromRatio","toHexString","levelGen","test","segmentWidths","numSegments","spawnSegment","rnd","spawnX","spawnY","holeX","holeY","parSetting","flatRatio","holeSegment","pointMaterials","minY","maxY","idx","segmentWidth","prevY","boundLow","boundHigh","sample","lastTime","drawBall","stroke","playerColor","playerIndex","playerState","showNameTag","playerName","lineWidth","strokeStyle","ballIndexMod","poleMin","poleHeight","moveTo","lineTo","Golf","soundEffects","wood","audio","util","golfwood1Audio","minpower","golfwood2Audio","golfwood3Audio","golfclap","golfclapAudio","iron","golfiron1Audio","golfiron2Audio","golfiron3Audio","putt","golfputtAudio","ballInHole","golfscoreAudio","countdown","countdownAudio","levelData","startTime","expTime","holeSensor","leaderId","matchEndTime","testacceleration","testClubIndex","testBallIndex","balls","nextLevelTimer","scorers","totalScores","currentlevelScores","init","ensurePlayersInBounds","swing","drawGround","drawLevelCompleteHud","drawPlayHud","renderFrame","animate","testSwing","syncPlayersObjectToFirebase","isLevelCompleted","distributeScore","isLoadNextLevel","loadNextLevel","saveGame","setEventHandlers","evt","_this2$state","_game","bodyA","bodyB","scored","currentTime","play","newExpTime","HURRY_UP_MS","scoreTime","scorer","newPlayerState","collisionResponse","syncPlayersToFirebase","_this2$state2","stillBalls","playersToUpdateState","ballIndex","interpolatedPosition","ensuredBalls","ball","lastPos","firstPoint","timeRemaining","term","_this$state7","clubtype","soundEffect","ballToHit","ballX","velocityWithDirection","_this$state8","_this3","_this$state9","groundBodies","addBody","createdPlayers","playerColors","assign","syncToFirebase","requestAnimationFrame","_result","playersObj","_this$props2","_this$props3","levelColor","currentPar","_this$props4","_this$state10","currentRoundScore","deltaTime","step","_this$props5","_this$state11","createdHoleSensor","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","playerUpdates","board","_this$state12","_scorers","completteScorers","currentScorers","currentScore","swingRef","_that$state","currentPlayer","swingData","bigScreenFactor","_this$state13","_this$state14","clearRect","drawBalls","_this$state15","GolfStarting","SnakeSetup","GolfSetup","AUTH_EXPIRE_MS","CLIENT_ID","MISSING_ALBUM_COVER","MIN_SONGS_PLAYLIST","SPOTIFY_AUTH_SCOPES","SpotifySetup","currentq","invalidSpotifyToken","getItem","token","redirectUri","location","origin","pathname","Headers","append","SpotifyConnection","header","pin","fgColor","bgColor","justify","alignItems","avatar","alt","Person_default","secondaryText","justifyContent","flexFlow","borderRadius","webkitBboxShadow","boxShadow","primaryText","opacity","answerPopulation","currentAnswers","curr","includes","getRawData","lineColor","fontColor","maxBarThickness","userCallback","currentqScore","oldPlayerIndex","newIndex","posChange","slength","interval","addedScore","_loop2","TableHead_default","faded","Remove_default","ArrowDropUp_default","ArrowDropDown_default","Avatar_default","playerText","itemtext","useDense","dense","Fade_default","in","listitem","ListItemAvatar_default","SpotifyResultQuestion","view","getCorrectAnswer","getPlayers","toggleView","tracks","playlists","qtype","t","track","tr","subtype","maxSize","minSize","maxArtist","artists","artist","maxGenre","genres","genre","currentPlayerCurrentAnswer","acc","cur","gameupdate","randomWinner","celebrationTrack","volume","onended","canplay","ontimeupdate","correctPlayers","winnerKeys","topScorer","topScore","getWinners","playWinningSong","headcontainer","Divider_default","spotify_PlayerList","spotify_Leaderboard","spotify_AnswerChart","overflow","itemtextDense","paddingLeft","paddingRight","progress","linearColorPrimary","linearBarColorPrimary","nosize","Fragment","colorPrimary","barColorPrimary","react_sweet_progress_lib","percent","symbolClassName","getQuestionTracks","validTracks","getAvaragePopularity","popularity","getGenresFrequencyMap","totalTracks","sortQuestions","questionsFirst","questionsSecond","filterQuestionTracks","questionTracks","maxQuestionsPerList","filteredQuestionTracks","questionTracksIds","playerQuestionTracks","uniqAlbumTracks","getIdFrequencyMap","ids","getArtistFrequencyMap","artistList","atype","artistQs","playlist","topArtist","artistId","genreQs","mostCommonGenre","secondQuestion","isValidPlaylist","total","formatTime","sec","minutes","seconds","timeContainer","timeTextLeft","marginRight","timeTextRight","timeString","durationString","spotify_SpotifyProgressbar","onError","onerror","footer","spotify_SpotifyTimer","getSpotifyHeader","method","headers","getPlaylistTracks","_x","_x2","_getPlaylistTracks","arguments","_callee","playlistId","hasNext","offset","playlistTracks","playlistResponse","playlistResult","regenerator_default","wrap","_context","sent","items","abrupt","stop","getArtists","_x3","_x4","_getArtists","_callee2","artistIds","chunks","_i","inputids","artistsResponse","_context2","getArtistTopTracks","_x5","_x6","_getArtistTopTracks","_callee3","topTracksResponse","topTracksResult","_context3","getTrackFeatures","_x7","_x8","_getTrackFeatures","_callee4","trackIds","trackFeatures","_i2","_context4","audio_features","getGenreTopTracks","_x9","_x10","_getGenreTopTracks","_callee5","uriGenre","_context5","encodeURI","Spotify","nrOfPlayers","spotifytoken","tokentimestamp","usedQuestions","topArtists","questionPlaying","progressText","songCurrentTime","songDuration","playQuestion","getArtistTopTrack","initQuiz","setProgress","t0","performance","playerArray","playerProgressRatio","SpotifyWS","self","minifiedTracks","preview_url","album","images","artistsIds","split","artistIdsFrequencyMap","uniqArtistIds","playlistArtists","playlistGenres","frequency","topArtistName","topArtistRaw","tracksIds","danceability","energy","tempo","valence","generatedQuestions","sortedQuestions","t1","topTracks","trackIndex","usableTracks","selectedTrack","incremental","finalQuestions","sampleTrack","getGenreTopTrack","_this4","pause","progressTime","host_SpotifyResultQuestion","spotify_TrackPlayer","GolfRace","every","GolfRaceSetup","createMuiTheme","main","overrides","MuiButton","letterSpacing","WebkitTransition","transition","WebkitTransitionProperty","transitionProperty","touchAction","willChange","lineHeight","&:hover","WebkitTransform","transform","textPrimary","textSecondary","webkitBoxShadow","Minigame","snake_SnakeSetup","minigame_host_PhaseConnection","snake_SnakeStarting","snake_Snake","minigame_host_PhaseFinalResult","minigame_host_PhaseEnd","minigame_host_PhaseSetup","minigame_host_PhaseStarting","tetris_Tetris","golf_GolfSetup","golf_GolfStarting","golf_Golf","golfrace_GolfRaceSetup","golfrace_GolfRace","classList","add","core_styles","host_SpotifySetup","host_SpotifyConnection","host_Spotify","Host","isRedirected","updateGame","initGameListiner","restartGame","quitGame","endGame","href","hasParams","urlParams","pinParam","substring","lastIndexOf","gametypeParam","joinGame","toggleHeader","callback","orderByChild","equalTo","once","fetchGame","child","gameFunctions","host_Quiz","host_Minigame","authId","playerCreated","createPlayer","generateName","addPlayer","generatePlayer","adjectives","nouns","finalName","currentNames","playersInLobby","selectedAnswer","hasAnswered","answerTime","timeFactorUsed","playerAnswer","saveAnswer","panel","getPlayerAnswerData","answerDataList","playerData","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","PlayerQuestionResult","wrongAnswer","oldLeaderboardPosition","newLeaderboardPosition","opponent","currentQuestionId","lastPhase","play_PhaseConnection","play_PhaseStarting","updatePlayer","play_PhaseAwaitingQuestion","play_PhaseShowQuestion","play_PhaseAnswer","play_PhaseResultQuestion","play_PhaseFinalResult","SnakeController","handleAction","playerSnake","displayName","zIndex","ExpandLess_default","ChevronLeft_default","ChevronRight_default","TetrisController","dot","setSelection","slimPlaylists","pl","totalSongs","owner","display_name","button","selectedPlaylist","spotifyUser","setPlaylist","myHeaders","getHeader","profileResponse","profileResult","limit","userPlaylists","playlistsResponse","playlistsResult","existingPlaylists","selectablePlaylists","SpotifyPlaylistSelector","SpotifyController","toggleSearch","showSearch","searchInput","toggleOption","answerObj","filteredPlayers","toLowerCase","placeholder","close","Search_default","ListItemSecondaryAction_default","minigame_play_PhaseConnection","minigame_play_PhaseStarting","snake_SnakeController","minigame_play_PhaseFinalResult","tetris_TetrisController","play_SpotifyConnection","play_SpotifyController","play_SpotifyResultQuestion","Play","recentGameId","recentGame","gamePinParam","storedPlayerKey","playerRef","newPlayer","gameAvatars","golf","GolfCourse_default","spotify","MusicNote_default","VideogameAsset_default","play_Quiz","play_Minigame","Home","timestamp","spotifyType","history","sm","withRouter","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","MySnackbarContentWrapper","green","dark","amber","iconVariant","onClose","other","objectWithoutProperties","Icon","SnackbarContent_default","aria-describedby","classNames","Close_default","CustomizedSnackbars","handleClose","reason","hideSnackbar","Snackbar_default","anchorOrigin","vertical","horizontal","open","autoHideDuration","React","App","showHeader","hash","initial","parts","decodeURIComponent","access_token","HashRouter","common_Header","Route","exact","path","pages_Play","pages_Host","pages_Create","pages_Home","common_CustomizedSnackbars","ReactDOM","src_App_0"],"mappings":"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","file":"static/js/main.d899a172.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/golfwood.f1bbe86f.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfwood2.ca14b160.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfwood3.38090044.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfiron.6846921d.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfiron2.535d13e9.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfiron3.f554f315.wav\";","module.exports = __webpack_public_path__ + \"static/media/countdown.5c685d8c.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfclap.389fcba5.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfputt.464ec7d0.wav\";","module.exports = __webpack_public_path__ + \"static/media/golfscore.f6affd73.wav\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cyanColor\":\"#66b1bb\",\"redColor\":\"#EF9A9A\",\"purpleColor\":\"#CE93D8\",\"greenColor\":\"#9db484\"};","import firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\n// PROD\r\nconst prodConfig = {\r\n  apiKey: 'AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU',\r\n  authDomain: 'stagehoot.firebaseapp.com',\r\n  databaseURL: 'https://stagehoot.firebaseio.com',\r\n  projectId: 'stagehoot',\r\n  storageBucket: 'stagehoot.appspot.com',\r\n  messagingSenderId: '589747985768',\r\n};\r\n\r\nconst golfConfig = {\r\n  apiKey: 'AIzaSyA1LCnNtukZ_zxfJwCeaEgKTU-BNrprX24',\r\n  authDomain: 'stagehoot-golf.firebaseapp.com',\r\n  databaseURL: 'https://stagehoot-golf.firebaseio.com',\r\n  projectId: 'stagehoot-golf',\r\n  storageBucket: 'stagehoot-golf.appspot.com',\r\n  messagingSenderId: '688320597897',\r\n  appId: '1:688320597897:web:8279c87d63b8e6fa',\r\n};\r\n\r\n// DEV\r\n\r\nconst fire = firebase.initializeApp(prodConfig, 'default');\r\nconst fireGolf = firebase.initializeApp(golfConfig, 'golf');\r\n\r\nexport { fire, fireGolf };\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { fire } from '../../base';\r\n\r\nclass Header extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    let titleText = 'Stagehoot';\r\n    if (fire.options.projectId === 'ettkilomjol-dev') {\r\n      titleText = 'Ett Kilo Mjöl DEV';\r\n    }\r\n\r\n    return (\r\n      <div id=\"header\">\r\n        <AppBar position=\"static\">\r\n          <Toolbar className=\"toolbar\">\r\n            <div className=\"appbar-container--left\">\r\n              <Link className=\"appbar-title text-big\" to=\"/\">\r\n                {titleText}\r\n              </Link>\r\n            </div>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Header;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\n\r\nconst styles = theme => ({\r\n    card: {\r\n        maxWidth: 400,\r\n    },\r\n});\r\nclass Question extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: false\r\n        };\r\n        this.deleteQuestion = this.deleteQuestion.bind(this);\r\n    }\r\n\r\n    deleteQuestion() {\r\n        this.props.deleteQuestion(this.props.question);\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <Card className={classes.card}>\r\n                <CardHeader\r\n                    action={\r\n                        <IconButton onClick={this.deleteQuestion}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    }\r\n                    title={this.props.question.question}\r\n                    subheader={this.props.question.timelimit ? this.props.question.timelimit + ' seconds' : 'default timelimit'}\r\n                />\r\n                <CardContent>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                    <List>\r\n                        {this.props.question.correctAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                    <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                    <List>\r\n                        {this.props.question.wrongAnswers.map((answer, index) =>\r\n                            <ListItem key={index}>\r\n                                <ListItemText\r\n                                    primary={answer}\r\n                                />\r\n                            </ListItem>\r\n                        )}\r\n                    </List>\r\n                </CardContent>\r\n\r\n\r\n            </Card>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Question);","function generateGameId() {\r\n  let id = '';\r\n  const possible = 'ABCDEFGHJKLMNOPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz0123456789';\r\n\r\n  for (let i = 0; i < 6; i++) {\r\n    id += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return id;\r\n}\r\nfunction calculateDefaultTimeLimit(question) {\r\n  if (question.aType === 'multiple' || question.aType === 'boolean') {\r\n    return 10 + Math.floor((question.correctAnswers.join().length + question.wrongAnswers.join().length) / 30);\r\n  } if (question.aType === 'free') {\r\n    return 20;\r\n  } if (question.aType === 'player') {\r\n    // answer blir 4-8 random utvalda till varje fråga\r\n    return 20;\r\n  }\r\n  return 20;\r\n}\r\nfunction parseDOM(s) {\r\n  const parser = new DOMParser();\r\n  const dom = parser.parseFromString(\r\n    `<!doctype html><body>${s}`,\r\n    'text/html',\r\n  );\r\n  const decodedString = dom.body.textContent;\r\n  return decodedString;\r\n}\r\n\r\nfunction parseDOMArray(arr) {\r\n  const result = [];\r\n  for (let i = 0; i < arr.length; i++) {\r\n    result.push(parseDOM(arr[i]));\r\n  }\r\n  return result;\r\n}\r\nexport {\r\n  generateGameId,\r\n  calculateDefaultTimeLimit,\r\n  parseDOMArray,\r\n  parseDOM,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { fire } from \"../../../base\";\r\nimport * as minigameUtil from \"../../common/utils/minigameUtil\";\r\n\r\nlet ctx;\r\nlet canvas;\r\nconst gridSize = 20;\r\nlet maxYCord;\r\nlet maxXCord;\r\n\r\nclass Snake extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // för att göra det mer smooth. så behöver jag typ dela upp ätandet så att det sker i flera tick? för just nu är ett tick storleken på food och allt annat\r\n    // lite delay när jag ökar speeden. är det olika delay för olika snakes? optimera senare.\r\n    const canvasHeight = Math.floor(window.innerHeight / gridSize) * gridSize;\r\n    const canvasWidth = Math.floor(window.innerWidth / gridSize) * gridSize;\r\n\r\n    maxYCord = Math.floor(canvasHeight / 20);\r\n    maxXCord = Math.floor(canvasWidth / 20);\r\n\r\n    let totalSquares = maxYCord * maxXCord;\r\n    let emptySquares = totalSquares - props.game.minigame.snakes.length * 4;\r\n    let areaFoods = Math.floor(totalSquares / 60);\r\n    const nrOfFoods = 2 + areaFoods;\r\n\r\n    this.state = {\r\n      gameTicker: null,\r\n      ticks: 0,\r\n      winners: [],\r\n      snakes: minigameUtil.getSnakesInStartingPosition(\r\n        props.game.minigame.snakes,\r\n        { height: canvasHeight, width: canvasWidth }\r\n      ),\r\n      foods: minigameUtil.getInitialFoods(nrOfFoods),\r\n      settings: {\r\n        snake: {\r\n          size: gridSize,\r\n          speed: props.game.minigame.difficulty,\r\n          border: \"#000\",\r\n          respawntime: 3,\r\n        },\r\n        food: {\r\n          background: \"#EC5E0B\",\r\n          border: \"#73AA24\",\r\n        },\r\n        canvas: {\r\n          height: canvasHeight,\r\n          width: canvasWidth,\r\n          background: \"#F5F5F5\",\r\n          border: \"#000\",\r\n        },\r\n      },\r\n    };\r\n\r\n    this.drawSnakes = this.drawSnakes.bind(this);\r\n    this.generateFood = this.generateFood.bind(this);\r\n    this.generateSnakes = this.generateSnakes.bind(this);\r\n    this.resetCanvas = this.resetCanvas.bind(this);\r\n    this.drawFood = this.drawFood.bind(this);\r\n    this.detectCollisions = this.detectCollisions.bind(this);\r\n    this.initControllerListener = this.initControllerListener.bind(this);\r\n    this.generateFoods = this.generateFoods.bind(this);\r\n    this.isEndGame = this.isEndGame.bind(this);\r\n    this.togglePausGame = this.togglePausGame.bind(this);\r\n    this.renderOverlay = this.renderOverlay.bind(this);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { snakes, settings } = this.state;\r\n    const app = document.querySelector(\"#snakeboard\");\r\n\r\n    canvas = app.querySelector(\"canvas\");\r\n    ctx = canvas.getContext(\"2d\");\r\n    this.resetCanvas();\r\n    this.generateSnakes();\r\n    this.generateFoods();\r\n    const that = this;\r\n    const gameTicker = setInterval(() => {\r\n      if (that.state.isPaused) {\r\n        if (that.state.overlay) {\r\n          return;\r\n        }\r\n        that.renderOverlay();\r\n        return;\r\n      }\r\n      if (that.state.winners.length === 0) {\r\n        that.resetCanvas();\r\n        that.generateSnakes();\r\n        that.generateFoods();\r\n        that.detectCollisions();\r\n        that.isEndGame();\r\n      } else {\r\n        that.nextPhase();\r\n      }\r\n    }, settings.snake.speed);\r\n\r\n    this.setState({ gameTicker });\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      const snake = snakes[i];\r\n      this.initControllerListener(snake);\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // kan jag ha det här?\r\n\r\n    return false;\r\n  }\r\n\r\n  togglePausGame = () => {\r\n    // async!!\r\n    this.setState((state) => ({\r\n      isPaused: !state.isPaused,\r\n      overlay: false,\r\n    }));\r\n  };\r\n\r\n  nextPhase() {\r\n    const { gameTicker, snakes, winners, ticks } = this.state;\r\n    const { game, gameFunc } = this.props;\r\n    clearInterval(gameTicker);\r\n    game.minigame.snakes = snakes;\r\n    game.minigame.winners = winners;\r\n    game.minigame.ticks = ticks;\r\n    game.phase = \"final_result\";\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  initControllerListener(snake) {\r\n    const { game } = this.props;\r\n    const snakeRef = fire\r\n      .database()\r\n      .ref(`/games/${game.key}/minigame/snakes/${snake.id}`);\r\n    const that = this;\r\n    snakeRef.on(\"value\", (snapshot) => {\r\n      const nextSnake = snapshot.val();\r\n      if (nextSnake && !that.state.isPaused) {\r\n        that.setState((state) => {\r\n          const snakes = [...state.snakes];\r\n          // kolla så att detta är okej sätt, blir snakes index alltid rätt kopplat till snake.id? ska jag fixa ett riktigt ID för att vara säker? alltså ett pushid\r\n          if (nextSnake.move) {\r\n            snakes[snake.id].moves.push(nextSnake.move);\r\n          }\r\n          return {\r\n            snakes,\r\n          };\r\n        });\r\n      } else {\r\n        console.log(\"move error\");\r\n      }\r\n    });\r\n  }\r\n\r\n  isEndGame() {\r\n    const { snakes } = this.state;\r\n    const { game } = this.props;\r\n\r\n    // if survavalmode continue game if more than 1 snake is alive\r\n    // kolla performance på denna filter funktion jämfört med loopen under\r\n    if (\r\n      game.minigame.gamemode === \"survival\" &&\r\n      snakes.filter((s) => !s.dead).length > 1\r\n    ) {\r\n      return;\r\n      /*\r\n      const l = snakes.length;\r\n      let alive = 0;\r\n      for (let i = 0; i < l; i++) {\r\n        if (!snakes[i].dead) {\r\n          alive += 1;\r\n        }\r\n        if (alive > 1) {\r\n          return;\r\n        }\r\n      }\r\n      */\r\n    }\r\n    // if race continue game if no one has reached racetarget\r\n    if (\r\n      game.minigame.gamemode === \"race\" &&\r\n      !snakes.some((s) => s.body.length >= game.minigame.racetarget)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    // its gameover, lets find the winner/winners\r\n    let winners = [];\r\n    if (game.minigame.gamemode === \"survival\") {\r\n      const alive = snakes.filter((s) => !s.dead);\r\n      if (alive.length === 1) {\r\n        winners = alive;\r\n      } else {\r\n        const winner = snakes.reduce((prev, current) =>\r\n          prev.score > current.score ? prev : current\r\n        );\r\n        winners.push(winner);\r\n      }\r\n    } else if (game.minigame.gamemode === \"race\") {\r\n      winners = snakes.filter((s) => s.body.length >= game.minigame.racetarget);\r\n    }\r\n    this.setState(() => ({\r\n      winners,\r\n      isPaused: true,\r\n      overlay: false,\r\n    }));\r\n\r\n    /*\r\n\r\n    if (gamemode === 'survival') {\r\n      if (snakes.length === 1 && snakes[0].dead) {\r\n        winners.push(snakes[0]);\r\n      } else {\r\n        for (let i = 0; i < l; i++) {\r\n          if (!snakes[i].dead) {\r\n            winners.push(snakes[i]);\r\n          }\r\n          // should not be possible as she check for this first thing in this function\r\n          // if (winners.length > 1) {\r\n          //  return;\r\n          // }\r\n        }\r\n        // om det inte finns någon levande alla så betyder det att de sista tog samtidigt. då vinner den som är längst av alla\r\n        if (winners.length === 0) {\r\n          let winnerIndex = 0;\r\n          let highestScore = 0;\r\n          for (let i = 0; i < l; i++) {\r\n            if (snakes[i].score > highestScore) {\r\n              winnerIndex = i;\r\n              highestScore = snakes[i].score;\r\n            }\r\n          }\r\n          winners.push(snakes[winnerIndex]);\r\n        }\r\n      }\r\n    } else if (gamemode === 'race') {\r\n      for (let i = 0; i < l; i++) {\r\n        if (snakes[i].body.length >= racetarget) {\r\n          winners.push(snakes[i]);\r\n        }\r\n      }\r\n    }\r\n    if (winners.length > 0) {\r\n      this.setState(() => ({\r\n        winners,\r\n        isPaused: true,\r\n        overlay: false,\r\n      }));\r\n    }\r\n    */\r\n  }\r\n\r\n  resetCanvas() {\r\n    const { settings } = this.state;\r\n    canvas.width = settings.canvas.width;\r\n    canvas.height = settings.canvas.height;\r\n\r\n    ctx.fillStyle = settings.canvas.background;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  }\r\n\r\n  generateSnakes() {\r\n    // i alla såna här dpelarspecifika metoder måste jag ta in vilken snake/player det gäller\r\n    const { snakes, foods, settings } = this.state;\r\n    const { game } = this.props;\r\n    const nextSnakes = [];\r\n    const teleportSnakes = !game.minigame.wallCollision;\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      // behöver jag göra en copy? spelar det någon roll?\r\n      const snake = snakes[i];\r\n      if (snake.respawning) {\r\n        if (Date.now() > snake.respawntime) {\r\n          snake.dead = false;\r\n          snake.respawning = false;\r\n        }\r\n        nextSnakes.push(snake);\r\n        continue;\r\n      } else if (snake.dead) {\r\n        if (game.minigame.gamemode === \"survival\") {\r\n          snake.body = [];\r\n          nextSnakes.push(snake);\r\n          continue;\r\n        } else if (game.minigame.gamemode === \"race\") {\r\n          const xMax = settings.canvas.width - gridSize;\r\n          const yMax = settings.canvas.height - gridSize;\r\n          const startPos = minigameUtil.getRandomCanvasPositionMargin(\r\n            yMax,\r\n            xMax\r\n          );\r\n          snake.body = [\r\n            {\r\n              x: startPos.x,\r\n              y: startPos.y,\r\n            },\r\n            {\r\n              x: startPos.x - gridSize,\r\n              y: startPos.y,\r\n            },\r\n            {\r\n              x: startPos.x - gridSize * 2,\r\n              y: startPos.y,\r\n            },\r\n            {\r\n              x: startPos.x - gridSize * 3,\r\n              y: startPos.y,\r\n            },\r\n          ];\r\n          snake.direction = \"right\";\r\n          snake.respawning = true;\r\n          snake.respawntime = Date.now() + settings.snake.respawntime * 1000;\r\n          nextSnakes.push(snake);\r\n          continue;\r\n        }\r\n      }\r\n      // testa denna perfomance mot tidigare switch. ngåon skillnad? kan tänka mig att denna är lite långsammare då jag måste definera alla 4directions varje gång\r\n      const movement = {\r\n        up: {\r\n          x: snake.body[0].x,\r\n          y:\r\n            teleportSnakes && snake.body[0].y === 0\r\n              ? canvas.height - gridSize\r\n              : snake.body[0].y - gridSize,\r\n        },\r\n        down: {\r\n          x: snake.body[0].x,\r\n          y:\r\n            teleportSnakes && snake.body[0].y >= canvas.height - gridSize\r\n              ? 0\r\n              : snake.body[0].y + gridSize,\r\n        },\r\n        right: {\r\n          x:\r\n            teleportSnakes && snake.body[0].x >= canvas.width - gridSize\r\n              ? 0\r\n              : snake.body[0].x + gridSize,\r\n          y: snake.body[0].y,\r\n        },\r\n        left: {\r\n          x:\r\n            teleportSnakes && snake.body[0].x === 0\r\n              ? canvas.width - gridSize\r\n              : snake.body[0].x - gridSize,\r\n          y: snake.body[0].y,\r\n        },\r\n      };\r\n      const nextMove = snake.moves.shift();\r\n      if (!minigameUtil.isInvalidMove(nextMove, snake.direction)) {\r\n        snake.direction = nextMove;\r\n      }\r\n\r\n      // The snake moves by adding a piece to the beginning \"this.snake.unshift(coordinate)\" and removing the last piece \"this.snake.pop()\"\r\n      // Except when it eats the food in which case there is no need to remove a piece and the added piece will make it grow\r\n      const coordinate = movement[snake.direction];\r\n      snake.body.unshift(coordinate);\r\n\r\n      const collidedFood = foods.find(\r\n        (f) => f.active && snake.body[0].x === f.x && snake.body[0].y === f.y\r\n      );\r\n\r\n      if (collidedFood) {\r\n        snake.score += 10;\r\n        collidedFood.active = false;\r\n      } else {\r\n        snake.body.pop();\r\n      }\r\n      nextSnakes.push(snake);\r\n    }\r\n    this.setState((state) => ({\r\n      snakes: nextSnakes,\r\n      foods,\r\n      ticks: state.ticks + 1,\r\n    }));\r\n    // kan det inte blir problem här? litar jag på att state.snakes hunnit updateras innan de ritas ut? ska jag inte skicka in det? drawSnakes(nextSNakes)\r\n    // och sen updaterar jag state efteråt?\r\n    this.drawSnakes(nextSnakes);\r\n  }\r\n\r\n  drawSnakes(nextSnakes) {\r\n    const { settings, ticks } = this.state;\r\n    ctx.globalCompositeOperation = \"multiply\";\r\n    ctx.strokestyle = settings.snake.border;\r\n    for (let i = 0, len = nextSnakes.length; i < len; i++) {\r\n      const snake = nextSnakes[i];\r\n      if (snake.respawning && ticks % 2 === 0) {\r\n        ctx.fillStyle = settings.canvas.background;\r\n      } else {\r\n        ctx.fillStyle = snake.color;\r\n      }\r\n      // Draw each piece\r\n\r\n      // om två snakes är över varandra så finns en schysst style för det som han gick igenom på öredev. där färgerna från båda kan blandas till en ljusare eller mörkar.\r\n      for (let j = 0, len2 = snake.body.length; j < len2; j++) {\r\n        const bodyPos = snake.body[j];\r\n        ctx.fillRect(bodyPos.x, bodyPos.y, gridSize, gridSize);\r\n        ctx.strokeRect(bodyPos.x, bodyPos.y, gridSize, gridSize);\r\n      }\r\n\r\n      // this.game.direction = this.game.nextDirection;\r\n    }\r\n    /*\r\n        jag kör rakt av på direction, verkar fungera och snabbare response då? om jag vill ha tillbaka nextdirection så ta fram denna metod och sätt i snakeListenern att den ska sätta nextDirection\r\n        this.setState(function (state, props) {\r\n            let snakes = state.snakes;\r\n            for (let i = 0; i < snakes.length; i++) {\r\n                snakes[i].direction = snakes[i].nextDirection;\r\n            }\r\n            return {\r\n                snakes: snakes,\r\n            };\r\n        });\r\n        */\r\n  }\r\n\r\n  generateFoods() {\r\n    const { foods } = this.state;\r\n    // fungerar detta? const och ingen kopia? blir det updaterat? risk att allt blir object istället för arrays? cost [foods] = this.state?\r\n    // const nextFoods = [...foods ];\r\n    for (let i = 0, len = foods.length; i < len; i++) {\r\n      let food = foods[i];\r\n      if (!food.active) {\r\n        food = this.generateFood();\r\n      }\r\n      this.drawFood(food);\r\n      foods[i] = food;\r\n    }\r\n    this.setState(() => ({\r\n      foods,\r\n    }));\r\n  }\r\n\r\n  generateFood() {\r\n    const { snakes, settings } = this.state;\r\n\r\n    const xMax = settings.canvas.width - gridSize;\r\n    const yMax = settings.canvas.height - gridSize;\r\n\r\n    const x = Math.round((Math.random() * xMax) / gridSize) * gridSize;\r\n    const y = Math.round((Math.random() * yMax) / gridSize) * gridSize;\r\n    /*\r\n    for (let i = 0, len = snakes.length; i < len; i++) {\r\n      const snake = snakes[i];\r\n      const collision = snake.body.some(b => b.x === x && b.y === y);\r\n      if (collision) {\r\n        return this.generateFood();\r\n      }\r\n    }\r\n    */\r\n    // fungerar denna tro?\r\n    const collision = snakes.some((s) =>\r\n      s.body.some((b) => b.x === x && b.y === y)\r\n    );\r\n    if (collision) {\r\n      return this.generateFood();\r\n    }\r\n    return {\r\n      active: true,\r\n      x,\r\n      y,\r\n    };\r\n  }\r\n\r\n  drawFood(food) {\r\n    const { settings } = this.state;\r\n    // denna metod kallas lite väl många gånger?? ioptimera?\r\n    ctx.fillStyle = settings.food.background;\r\n    ctx.strokestyle = settings.food.border;\r\n\r\n    ctx.fillRect(food.x, food.y, gridSize, gridSize);\r\n    ctx.strokeRect(food.x, food.y, gridSize, gridSize);\r\n  }\r\n\r\n  detectCollisions() {\r\n    // bryt ut de olika detectcollision till purecfunctions? optiering viktigt\r\n    // ha olika modes för krock med motståndare\r\n    // 2. krock med motståndare så händer inget\r\n    // 3. krock med motståndare så äts motståndaren upp (head-on-head så dör båda)\r\n    // 4. korck med motståndare så dör man\r\n    // modes krock med vägg:\r\n    // 1. man dör\r\n    // 2. man kommer ut på andra sidan\r\n    // vad händer om man får en selfcollision sammtidigt som någon får en opponentcollision i den?\r\n    // mode dö:\r\n    // när man dör så får man återställs man till liten mask\r\n    // när man dör så är man död för alltid\r\n\r\n    // Self collison\r\n    // It's impossible for the first 3 pieces of the snake to self collide so the loop starts at 4\r\n\r\n    // fixa en bättre metod för alla snakes senare\r\n\r\n    // fundra och test som det här är den mest effektiva lösningen? eller om jag gör några checks i onödan?\r\n    // jag vill nog bara göra en gemensam setState call efter den här loopen. så alla ändringar för t.ex. handleDeath\r\n    let { snakes } = this.state;\r\n    const {\r\n      game: { minigame },\r\n    } = this.props;\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      if (snakes[i].dead) {\r\n        continue;\r\n      }\r\n      if (minigameUtil.detectSelfCollision(snakes[i])) {\r\n        // vilken av dessa fungerar?\r\n        snakes[i].dead = true;\r\n        // snakes[i].dead = true;\r\n\r\n        // this.handleDeath(snake);\r\n      }\r\n      if (\r\n        minigame.wallCollision &&\r\n        minigameUtil.detectWallCollision(\r\n          snakes[i].body[0],\r\n          canvas.height,\r\n          canvas.width\r\n        )\r\n      ) {\r\n        snakes[i].dead = true;\r\n      }\r\n    }\r\n\r\n    if (minigame.opponentCollision) {\r\n      // här inne så ändrar jag om i snakes genom att döda dem som ska dödas och klyver om det ska klyvas osv. det som returneras ska vara korrekta snakes\r\n      snakes = minigameUtil.detectOpponentCollision(\r\n        snakes,\r\n        minigame.eatOpponents,\r\n        minigame.absorbAll\r\n      );\r\n    }\r\n    this.setState(() => ({\r\n      snakes,\r\n    }));\r\n  }\r\n\r\n  renderOverlay() {\r\n    const { ticks, snakes, winners } = this.state;\r\n    const { game } = this.props;\r\n    this.setState(() => ({\r\n      overlay: true,\r\n    }));\r\n    ctx.globalAlpha = 0.4;\r\n    ctx.textAlign = \"center\";\r\n    ctx.font = \"100px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    if (ticks === 1) {\r\n      ctx.fillText(\"Click to start\", canvas.width / 2, canvas.height / 2);\r\n    } else if (winners.length > 0) {\r\n      ctx.fillText(\"Game over\", canvas.width / 2, canvas.height / 2);\r\n    } else {\r\n      ctx.fillText(\"Paused\", canvas.width / 2, canvas.height / 2);\r\n    }\r\n    ctx.globalAlpha = 1;\r\n    ctx.font = \"20px roboto\";\r\n\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      const snake = snakes[i];\r\n      if (!snake.body[0]) {\r\n        continue;\r\n      }\r\n      let headX = Math.max(gridSize, snake.body[0].x);\r\n      let headY = Math.max(gridSize, snake.body[0].y);\r\n      if (headX >= canvas.width) {\r\n        headX = canvas.width - gridSize * 2;\r\n      }\r\n      if (headY >= canvas.height) {\r\n        headY = canvas.height - gridSize * 2;\r\n      }\r\n      const snakeName =\r\n        snake.playerKeys.length === 1\r\n          ? game.players[snake.playerKeys[0]].name\r\n          : snake.name;\r\n      ctx.fillStyle = snake.color;\r\n\r\n      const namePosition = {\r\n        right: { textAlign: \"center\", yPos: headY - gridSize / 5 },\r\n        left: { textAlign: \"start\", yPos: headY - gridSize / 5 },\r\n        up: { textAlign: \"start\", yPos: headY - gridSize / 5 },\r\n        down: { textAlign: \"start\", yPos: headY + gridSize * 2 },\r\n      };\r\n      ctx.textAlign = namePosition[snake.direction].textAlign;\r\n      ctx.fillText(snakeName, headX, namePosition[snake.direction].yPos);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"phase-container\"\r\n        id=\"snakeboard\"\r\n        role=\"button\"\r\n        tabIndex={0}\r\n        onClick={this.togglePausGame}\r\n        onKeyDown={this.togglePausGame}\r\n      >\r\n        <canvas />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnake.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default Snake;\r\n","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport PropTypes from 'prop-types';\r\nimport { parseDOM, parseDOMArray } from '../../common/utils/appUtil';\r\n\r\n\r\nclass GenerateQuizForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nrOfQuestions: '10',\r\n      category: '0',\r\n      difficulty: '0',\r\n      aType: '0',\r\n\r\n    };\r\n    this.generateQuestions = this.generateQuestions.bind(this);\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  generateQuestions() {\r\n    const {\r\n      nrOfQuestions, category, difficulty, aType,\r\n    } = this.state;\r\n    const { addQuestions, showSnackbar } = this.props;\r\n    let url = 'https://opentdb.com/api.php?';\r\n    if (nrOfQuestions !== '0') {\r\n      url += `amount=${nrOfQuestions}`;\r\n    }\r\n    if (category !== '0') {\r\n      url += `&category=${category}`;\r\n    }\r\n    if (difficulty !== '0') {\r\n      url += `&difficulty=${difficulty}`;\r\n    }\r\n    if (aType !== '0') {\r\n      url += `&type=${aType}`;\r\n    }\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then((generated) => {\r\n        if (generated.response_code === 0) {\r\n          const questions = [];\r\n          for (let i = 0; i < generated.results.length; i++) {\r\n            const generatedQuestion = generated.results[i];\r\n            const question = {\r\n              question: parseDOM(generatedQuestion.question),\r\n              correctAnswers: [parseDOM(generatedQuestion.correct_answer)],\r\n              wrongAnswers: parseDOMArray(generatedQuestion.incorrect_answers),\r\n              qType: 'text',\r\n              aType: generatedQuestion.type,\r\n              category: generatedQuestion.category,\r\n              difficulty: generatedQuestion.difficulty,\r\n            };\r\n            questions.push(question);\r\n          }\r\n          addQuestions(questions);\r\n        } else {\r\n          const snack = {\r\n            variant: 'error',\r\n            message: `Could not generate questions( code: ${generated.response_code})`,\r\n          };\r\n          showSnackbar(snack);\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    const {\r\n      nrOfQuestions, category, difficulty, aType,\r\n    } = this.state;\r\n    return (\r\n      <div>\r\n        <Grid container>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <TextField\r\n                label=\"Number of questions\"\r\n                name=\"nrOfQuestions\"\r\n                value={nrOfQuestions}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('nrOfQuestions')}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"category\">Category</InputLabel>\r\n              <Select\r\n                value={category || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"category\"\r\n                inputProps={{\r\n                  id: 'category',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any category</MenuItem>\r\n                <MenuItem value=\"9\">General Knowledge</MenuItem>\r\n                <MenuItem value=\"10\">Entertainment: Books</MenuItem>\r\n                <MenuItem value=\"11\">Entertainment: Film</MenuItem>\r\n                <MenuItem value=\"12\">Entertainment: Music</MenuItem>\r\n                <MenuItem value=\"13\">Entertainment: Musicals and Theatres</MenuItem>\r\n                <MenuItem value=\"14\">Entertainment: Television</MenuItem>\r\n                <MenuItem value=\"15\">Entertainment: Video Games</MenuItem>\r\n                <MenuItem value=\"16\">Entertainment: Board Games</MenuItem>\r\n                <MenuItem value=\"17\">Science and Nature</MenuItem>\r\n                <MenuItem value=\"18\">Science: Computers</MenuItem>\r\n                <MenuItem value=\"19\">Science: Mathematics</MenuItem>\r\n                <MenuItem value=\"20\">Mythology</MenuItem>\r\n                <MenuItem value=\"21\">Sports</MenuItem>\r\n                <MenuItem value=\"22\">Geography</MenuItem>\r\n                <MenuItem value=\"23\">History</MenuItem>\r\n                <MenuItem value=\"24\">Politics</MenuItem>\r\n                <MenuItem value=\"25\">Art</MenuItem>\r\n                <MenuItem value=\"26\">Celebrities</MenuItem>\r\n                <MenuItem value=\"27\">Animals</MenuItem>\r\n                <MenuItem value=\"28\">Vehicles</MenuItem>\r\n                <MenuItem value=\"29\">Entertainment: Comics</MenuItem>\r\n                <MenuItem value=\"30\">Science: Gadgets</MenuItem>\r\n                <MenuItem value=\"31\">Entertainment: Japanese Anime and Manga</MenuItem>\r\n                <MenuItem value=\"32\">Entertainment: Cartoon and Animations</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"difficulty\">Difficulty</InputLabel>\r\n              <Select\r\n                value={difficulty || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"difficulty\"\r\n                inputProps={{\r\n                  id: 'difficulty',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any difficulty</MenuItem>\r\n                <MenuItem value=\"easy\">Easy</MenuItem>\r\n                <MenuItem value=\"medium\">Medium</MenuItem>\r\n                <MenuItem value=\"hard\">Hard</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel htmlFor=\"aType\">Answer type</InputLabel>\r\n              <Select\r\n                value={aType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"aType\"\r\n                inputProps={{\r\n                  id: 'aType',\r\n                }}\r\n              >\r\n                <MenuItem value=\"0\">Any type</MenuItem>\r\n                <MenuItem value=\"multiple\">Multiple choice</MenuItem>\r\n                <MenuItem value=\"boolean\">True/False</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n\r\n            <Button onClick={this.generateQuestions} variant=\"contained\">Generate</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGenerateQuizForm.propTypes = {\r\n  addQuestions: PropTypes.func.isRequired,\r\n  showSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default GenerateQuizForm;\r\n","import React, { Component } from 'react';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport PropTypes from 'prop-types';\r\nimport GenerateQuizForm from './GenerateQuizForm';\r\n\r\nclass QuestionForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      question: '',\r\n      correctAnswer: '',\r\n      wrongAnswerOne: '',\r\n      wrongAnswerTwo: '',\r\n      wrongAnswerThree: '',\r\n      timelimit: '10',\r\n      qType: 'text',\r\n      aType: 'multiple',\r\n      generateQuestions: true,\r\n\r\n    };\r\n    this.sendQuestion = this.sendQuestion.bind(this);\r\n    this.toggleGenerateQuestion = this.toggleGenerateQuestion.bind(this);\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleTrueFalse = (event) => {\r\n    const answer = event.target.value;\r\n    this.setState({\r\n      correctAnswer: answer,\r\n      wrongAnswerOne: answer === 'true' ? 'false' : 'true',\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  sendQuestion() {\r\n    const {\r\n      question, correctAnswer, wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree, timelimit, qType, aType,\r\n    } = this.state;\r\n    const { addQuestion } = this.props;\r\n    const q = {\r\n      question,\r\n      correctAnswers: [correctAnswer],\r\n      wrongAnswers: [wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree],\r\n      timelimit,\r\n      qType,\r\n      aType,\r\n    };\r\n    this.setState({\r\n      question: '',\r\n      correctAnswer: '',\r\n      wrongAnswerOne: '',\r\n      wrongAnswerTwo: '',\r\n      wrongAnswerThree: '',\r\n    });\r\n    addQuestion(q);\r\n  }\r\n\r\n  toggleGenerateQuestion() {\r\n    const { generateQuestions } = this.state;\r\n    this.setState({\r\n      generateQuestions: !generateQuestions,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      question, correctAnswer, wrongAnswerOne, wrongAnswerTwo, wrongAnswerThree, timelimit, qType, aType, generateQuestions,\r\n    } = this.state;\r\n    const { addQuestions, showSnackbar, isTimelimit } = this.props;\r\n    if (generateQuestions) {\r\n      return (\r\n        <div>\r\n          <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Custom questions</Button>\r\n          <Button onClick={this.toggleGenerateQuestion} disabled variant=\"contained\">Auto generate questions</Button>\r\n          <GenerateQuizForm addQuestions={addQuestions} showSnackbar={showSnackbar} />\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <Grid container>\r\n          <Grid item xs={12}>\r\n            <Button onClick={this.toggleGenerateQuestion} disabled variant=\"contained\">Custom questions</Button>\r\n            <Button onClick={this.toggleGenerateQuestion} variant=\"contained\">Auto generate questions</Button>\r\n          </Grid>\r\n          <Grid item xs={12} md={12}>\r\n            <FormControl required fullWidth>\r\n              <InputLabel htmlFor=\"qtype-required\">Question type</InputLabel>\r\n              <Select\r\n                value={qType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"qType\"\r\n                inputProps={{\r\n                  id: 'qtype-required',\r\n                }}\r\n              >\r\n                <MenuItem value=\"text\">Text</MenuItem>\r\n                <MenuItem value=\"image\">Image</MenuItem>\r\n                <MenuItem value=\"video\">Video</MenuItem>\r\n\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={12}>\r\n            <FormControl required fullWidth>\r\n              <InputLabel htmlFor=\"aType-required\">Answer type</InputLabel>\r\n              <Select\r\n                value={aType || ''}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"aType\"\r\n                inputProps={{\r\n                  id: 'aType-required',\r\n                }}\r\n              >\r\n                <MenuItem value=\"boolean\">True/false</MenuItem>\r\n                <MenuItem value=\"player\">Player</MenuItem>\r\n                <MenuItem value=\"multiple\">Mulitichoice</MenuItem>\r\n                <MenuItem value=\"free\">Free text</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <FormControl fullWidth>\r\n              <TextField\r\n                label=\"Question\"\r\n                name=\"question\"\r\n                value={question}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange('question')}\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          {aType === 'multiple'\r\n                        && (\r\n                        <Grid container>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Correct answer\"\r\n                                name=\"correctAnswer\"\r\n                                margin=\"normal\"\r\n                                value={correctAnswer}\r\n                                onChange={this.handleChange('correctAnswer')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerOne\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerOne}\r\n                                onChange={this.handleChange('wrongAnswerOne')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerTwo\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerTwo}\r\n                                onChange={this.handleChange('wrongAnswerTwo')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                          <Grid item xs={12} md={6}>\r\n\r\n                            <FormControl>\r\n                              <TextField\r\n                                label=\"Wrong answer\"\r\n                                name=\"wrongAnswerThree\"\r\n                                margin=\"normal\"\r\n                                value={wrongAnswerThree}\r\n                                onChange={this.handleChange('wrongAnswerThree')}\r\n                              />\r\n                            </FormControl>\r\n                          </Grid>\r\n                        </Grid>\r\n                        )\r\n                    }\r\n          {aType === 'boolean'\r\n                        && (\r\n                        <div>\r\n                          <Grid item xs={12}>\r\n\r\n                            <FormControl component=\"fieldset\">\r\n                              <FormLabel component=\"legend\">Answer</FormLabel>\r\n                              <RadioGroup\r\n                                aria-label=\"answer\"\r\n                                name=\"correctAnswer\"\r\n                                value={correctAnswer}\r\n                                onChange={this.handleTrueFalse}\r\n                              >\r\n                                <FormControlLabel value=\"true\" control={<Radio />} label=\"True\" />\r\n                                <FormControlLabel value=\"false\" control={<Radio />} label=\"False\" />\r\n                              </RadioGroup>\r\n                            </FormControl>\r\n                          </Grid>\r\n                        </div>\r\n                        )\r\n                    }\r\n          {isTimelimit\r\n                        && (\r\n                        <Grid item xs={12}>\r\n\r\n                          <FormControl>\r\n                            <TextField\r\n                              label=\"Time limit\"\r\n                              name=\"timelimit\"\r\n                              type=\"number\"\r\n                              value={timelimit}\r\n                              margin=\"normal\"\r\n                              onChange={this.handleChange('timelimit')}\r\n                            />\r\n                          </FormControl>\r\n                        </Grid>\r\n                        )\r\n                    }\r\n          <Grid item xs={12}>\r\n            <Button onClick={this.sendQuestion} variant=\"contained\">Add question</Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nQuestionForm.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  addQuestion: PropTypes.func.isRequired,\r\n  addQuestions: PropTypes.func.isRequired,\r\n  isTimelimit: PropTypes.bool.isRequired,\r\n};\r\nexport default QuestionForm;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport { Typography } from '@material-ui/core';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport PropTypes from 'prop-types';\r\nimport Question from './Question';\r\nimport QuestionForm from './QuestionForm';\r\nimport { calculateDefaultTimeLimit } from '../../common/utils/appUtil';\r\n\r\n\r\nclass CreateQuiz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'quiz',\r\n      gamemode: 'normal',\r\n      timelimit: true,\r\n      timescore: false,\r\n      questions: [],\r\n      gamePass: '',\r\n    };\r\n    this.addQuestion = this.addQuestion.bind(this);\r\n    this.addQuestions = this.addQuestions.bind(this);\r\n    this.deleteQuestion = this.deleteQuestion.bind(this);\r\n    this.createQuiz = this.createQuiz.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    addQuestion(q) {\r\n      const { questions, timelimit } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      const question = q;\r\n      if (questions.length === 0) {\r\n        question.id = 1;\r\n      } else {\r\n        // räknar ut ett id som det nuvarande högsta id+1. Kan då använda id både som unik identifierare och som index\r\n        question.id = Math.max(...questions.map(o => o.id)) + 1;\r\n      }\r\n      if (timelimit && !question.timelimit) {\r\n        question.timelimit = calculateDefaultTimeLimit(question);\r\n      }\r\n      questions.push(question);\r\n      this.setState({\r\n        questions,\r\n      });\r\n      const snack = {\r\n        variant: 'success',\r\n        message: 'Added question',\r\n      };\r\n      showSnackbar(snack);\r\n    }\r\n\r\n    addQuestions(qs) {\r\n      const { questions, timelimit } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      for (let i = 0; i < qs.length; i++) {\r\n        const question = qs[i];\r\n        if (questions.length === 0) {\r\n          question.id = 1;\r\n        } else {\r\n          question.id = Math.max(...questions.map(o => o.id)) + 1;\r\n        }\r\n        if (timelimit && !question.timelimit) {\r\n          question.timelimit = calculateDefaultTimeLimit(question);\r\n        }\r\n        questions.push(question);\r\n      }\r\n      this.setState({\r\n        questions,\r\n      });\r\n      const snack = {\r\n        variant: 'success',\r\n        message: 'Added questions',\r\n      };\r\n      showSnackbar(snack);\r\n    }\r\n\r\n    deleteQuestion(question) {\r\n      const { questions } = this.state;\r\n      const index = questions.map(e => e.id).indexOf(question.id);\r\n      questions.splice(index, 1);\r\n      this.setState({\r\n        questions,\r\n      });\r\n    }\r\n\r\n    createQuiz() {\r\n      const { createQuiz } = this.props;\r\n      const {\r\n        timelimit, gamePass, gametype, title, timescore, questions,\r\n      } = this.state;\r\n      const game = {\r\n        password: gamePass,\r\n        gametype,\r\n        tile: title,\r\n        quiz: {\r\n          gamemode: 'normal',\r\n          timelimit,\r\n          timescore,\r\n          questions,\r\n        },\r\n      };\r\n      createQuiz(game);\r\n    }\r\n\r\n    render() {\r\n      const {\r\n        timelimit, gamePass, title, timescore, gamemode, questions,\r\n      } = this.state;\r\n      const { showSnackbar } = this.props;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          <Grid container spacing={8}>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New quiz</Typography>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <form autoComplete=\"off\">\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl required fullWidth>\r\n                    <InputLabel htmlFor=\"gametype-required\">Gamemode</InputLabel>\r\n                    <Select\r\n                      value={gamemode || ''}\r\n                      onChange={this.handleChangeSelect}\r\n                      name=\"gamemode\"\r\n                      inputProps={{\r\n                        id: 'gamemode-required',\r\n                      }}\r\n                    >\r\n                      <MenuItem value=\"normal\">Normal</MenuItem>\r\n                      <MenuItem value=\"wild\">Wild</MenuItem>\r\n\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl component=\"fieldset\">\r\n                    <FormLabel component=\"legend\">Game options</FormLabel>\r\n                    <FormGroup>\r\n                      <FormControlLabel\r\n                        control={(\r\n                          <Switch\r\n                            checked={timelimit}\r\n                            onChange={this.handleChangeBool('timelimit')}\r\n                            value=\"timelimit\"\r\n                          />\r\n)}\r\n                        label=\"Time limited questions\"\r\n                      />\r\n                      <FormControlLabel\r\n                        control={(\r\n                          <Switch\r\n                            checked={timescore}\r\n                            onChange={this.handleChangeBool('timescore')}\r\n                            value=\"timescore\"\r\n                          />\r\n)}\r\n                        label=\"Time based score\"\r\n                      />\r\n                    </FormGroup>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n\r\n                  <FormControl>\r\n                    <TextField\r\n                      label=\"Title\"\r\n                      name=\"title\"\r\n                      value={title}\r\n                      margin=\"normal\"\r\n                      onChange={this.handleChange('title')}\r\n                    />\r\n                  </FormControl>\r\n                  <FormControl>\r\n                    <TextField\r\n                      label=\"Password\"\r\n                      type=\"password\"\r\n                      name=\"gamePass\"\r\n                      margin=\"normal\"\r\n                      value={gamePass}\r\n                      onChange={this.handleChange('gamePass')}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                  <Button onClick={this.createQuiz} variant=\"contained\">Create quiz</Button>\r\n                </Grid>\r\n              </form>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <QuestionForm addQuestions={this.addQuestions} addQuestion={this.addQuestion} isTimelimit={!!timelimit} showSnackbar={showSnackbar} />\r\n            </Grid>\r\n            <Grid container>\r\n              {questions.map((question, index) => (\r\n                <Grid item xs={12} md={6} key={question.id}>\r\n                  <Question question={question} transitionDelay={index} deleteQuestion={this.deleteQuestion} />\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateQuiz.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  createQuiz: PropTypes.func.isRequired,\r\n};\r\nexport default CreateQuiz;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nclass CreateTetris extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'tetris',\r\n      gamemode: 'survival',\r\n      password: '',\r\n    };\r\n\r\n    this.validateGame = this.validateGame.bind(this);\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    createGame() {\r\n      const { createGame } = this.props;\r\n      const {\r\n        password, gametype, title, gamemode,\r\n      } = this.state;\r\n      const minigame = {\r\n        gamemode,\r\n      };\r\n      const game = {\r\n        password,\r\n        gametype,\r\n        title,\r\n        minigame,\r\n      };\r\n      createGame(game);\r\n    }\r\n\r\n    render() {\r\n      const {\r\n        password, title, gamemode,\r\n      } = this.state;\r\n      return (\r\n        <div className=\"app-page create-page\">\r\n          <Grid container spacing={8}>\r\n            <form autoComplete=\"off\">\r\n              <Grid item xs={4}>\r\n                <FormControl required>\r\n                  <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                  <Select\r\n                    value={gamemode || ''}\r\n                    onChange={this.handleChangeSelect}\r\n                    name=\"gamemode\"\r\n                    inputProps={{\r\n                      id: 'gamemode-required',\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"survival\">Survival</MenuItem>\r\n                    <MenuItem value=\"race\">Race</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Title\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    margin=\"normal\"\r\n                    onChange={this.handleChange('title')}\r\n                  />\r\n                </FormControl>\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Password\"\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    margin=\"normal\"\r\n                    value={password}\r\n                    onChange={this.handleChange('password')}\r\n                  />\r\n                </FormControl>\r\n\r\n                <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n              </Grid>\r\n            </form>\r\n\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCreateTetris.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateTetris;\r\n","import React, { Component } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nclass CreateGolf extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: \"\",\r\n      gametype: \"golf\",\r\n      holes: 18,\r\n      scoremode: \"strokes\",\r\n      speedmode: true,\r\n      collisionmode: false,\r\n      password: \"\",\r\n    };\r\n\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  createGame() {\r\n    const { createGame } = this.props;\r\n    const {\r\n      password,\r\n      gametype,\r\n      title,\r\n      holes,\r\n      scoremode,\r\n      speedmode,\r\n      collisionmode,\r\n    } = this.state;\r\n    const minigame = {\r\n      scoremode,\r\n      speedmode,\r\n      collisionmode,\r\n      holes,\r\n    };\r\n    const game = {\r\n      password,\r\n      gametype,\r\n      title,\r\n      minigame,\r\n    };\r\n    createGame(game);\r\n  }\r\n\r\n  /*\r\n    validateGame(game) {\r\n      // validera lösenord är tillräckligt starkt här\r\n      //eller direkt efter input om det finns någon smart lösning.\r\n      // kolla på gametype hur ha en secifik validering för varje type\r\n      return true;\r\n    }\r\n\r\n    clearForm() {\r\n\r\n    }\r\n*/\r\n  render() {\r\n    const {\r\n      password,\r\n      title,\r\n      holes,\r\n      scoremode,\r\n      speedmode,\r\n      collisionmode,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        <Grid container spacing={24}>\r\n          <form autoComplete=\"off\">\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New Golf game</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl required fullWidth>\r\n                <InputLabel htmlFor=\"scoremode-required\">Score mode</InputLabel>\r\n                <Select\r\n                  value={scoremode || \"\"}\r\n                  fullWidth\r\n                  onChange={this.handleChangeSelect}\r\n                  name=\"scoremode\"\r\n                  inputProps={{\r\n                    id: \"scoremode-required\",\r\n                  }}\r\n                >\r\n                  <MenuItem value=\"strokes\">Strokes</MenuItem>\r\n                  <MenuItem value=\"time\">Time</MenuItem>\r\n                  <MenuItem value=\"compedetive\">Compedetive</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Holes to play\"\r\n                  name=\"holes\"\r\n                  type=\"number\"\r\n                  value={holes}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"holes\")}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={speedmode}\r\n                      onChange={this.handleChangeBool(\"speedmode\")}\r\n                      value=\"speedmode\"\r\n                    />\r\n                  }\r\n                  label=\"Speed mode\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={collisionmode}\r\n                      onChange={this.handleChangeBool(\"collisionmode\")}\r\n                      value=\"collisionmode\"\r\n                    />\r\n                  }\r\n                  label=\"Collision mode\"\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Title\"\r\n                  name=\"title\"\r\n                  value={title}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"title\")}\r\n                />\r\n              </FormControl>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  margin=\"normal\"\r\n                  value={password}\r\n                  onChange={this.handleChange(\"password\")}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button onClick={this.createGame} variant=\"contained\">\r\n                Create\r\n              </Button>\r\n            </Grid>\r\n          </form>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreateGolf.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateGolf;\r\n","import React, { Component } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nclass CreateSnake extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: \"\",\r\n      gametype: \"snake\",\r\n      gamemode: \"survival\",\r\n      racetarget: 20,\r\n      opponentCollision: false,\r\n      eatOpponents: false,\r\n      absorbAll: false,\r\n      wallCollision: true,\r\n      password: \"\",\r\n      difficulty: \"300\",\r\n    };\r\n\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  createGame() {\r\n    const { createGame } = this.props;\r\n    const {\r\n      password,\r\n      gametype,\r\n      title,\r\n      gamemode,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n    } = this.state;\r\n    const minigame = {\r\n      gamemode,\r\n      wallCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      opponentCollision,\r\n      racetarget,\r\n      difficulty,\r\n    };\r\n    const game = {\r\n      password,\r\n      gametype,\r\n      title,\r\n      minigame,\r\n    };\r\n    createGame(game);\r\n  }\r\n\r\n  /*\r\n    validateGame(game) {\r\n      // validera lösenord är tillräckligt starkt här\r\n      //eller direkt efter input om det finns någon smart lösning.\r\n      // kolla på gametype hur ha en secifik validering för varje type\r\n      return true;\r\n    }\r\n\r\n    clearForm() {\r\n\r\n    }\r\n*/\r\n  render() {\r\n    const {\r\n      password,\r\n      title,\r\n      gamemode,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        <Grid container spacing={24}>\r\n          <form autoComplete=\"off\">\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New Snake game</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl required fullWidth>\r\n                <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n                <Select\r\n                  value={gamemode || \"\"}\r\n                  fullWidth\r\n                  onChange={this.handleChangeSelect}\r\n                  name=\"gamemode\"\r\n                  inputProps={{\r\n                    id: \"gamemode-required\",\r\n                  }}\r\n                >\r\n                  <MenuItem value=\"survival\">Survival</MenuItem>\r\n                  <MenuItem value=\"race\">Race</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl required fullWidth>\r\n                <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n                <Select\r\n                  value={difficulty || \"\"}\r\n                  fullWidth\r\n                  onChange={this.handleChangeSelect}\r\n                  name=\"difficulty\"\r\n                  inputProps={{\r\n                    id: \"difficulty-required\",\r\n                  }}\r\n                >\r\n                  <MenuItem value=\"500\">Easy</MenuItem>\r\n                  <MenuItem value=\"300\">Medium</MenuItem>\r\n                  <MenuItem value=\"100\">Hard</MenuItem>\r\n                  <MenuItem value=\"75\">Pro</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              {gamemode === \"race\" && (\r\n                <FormControl>\r\n                  <TextField\r\n                    label=\"Snake length\"\r\n                    name=\"racetarget\"\r\n                    type=\"number\"\r\n                    value={racetarget}\r\n                    margin=\"normal\"\r\n                    onChange={this.handleChange(\"racetarget\")}\r\n                  />\r\n                </FormControl>\r\n              )}\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={wallCollision}\r\n                      onChange={this.handleChangeBool(\"wallCollision\")}\r\n                      value=\"wallCollision\"\r\n                    />\r\n                  }\r\n                  label=\"Wall collisions\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={opponentCollision}\r\n                      onChange={this.handleChangeBool(\"opponentCollision\")}\r\n                      value=\"opponentCollision\"\r\n                    />\r\n                  }\r\n                  label=\"Opponent collisions\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={opponentCollision && eatOpponents}\r\n                      disabled={!opponentCollision}\r\n                      onChange={this.handleChangeBool(\"eatOpponents\")}\r\n                      value=\"eatOpponents\"\r\n                    />\r\n                  }\r\n                  label=\"Eat opponent on collision\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={eatOpponents && absorbAll}\r\n                      disabled={!eatOpponents}\r\n                      onChange={this.handleChangeBool(\"absorbAll\")}\r\n                      value=\"absorbAll\"\r\n                    />\r\n                  }\r\n                  label=\"Absorb all pieces eaten\"\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Title\"\r\n                  name=\"title\"\r\n                  value={title}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"title\")}\r\n                />\r\n              </FormControl>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  margin=\"normal\"\r\n                  value={password}\r\n                  onChange={this.handleChange(\"password\")}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button onClick={this.createGame} variant=\"contained\">\r\n                Create\r\n              </Button>\r\n            </Grid>\r\n          </form>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreateSnake.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateSnake;\r\n","// https://glitch.com/edit/#!/spotify-implicit-grant?path=script.js:21:61\r\n// spotify API:\r\n// 1. varje spelar loggarin på spotify auth\r\n// 2. jag presenterar alla spellistor (börja med bara namnet på listan?)\r\n// 3. spelaren väljer ut en av spellistorna\r\n// 4. spellistans playlist_id sparas till firebase\r\n// 5. host.js läser upp varje spelres playlist_id och anrppar getPLaylist spotifyAPI (ska fungera även för privata spellistor?)\r\n// 6. host.js genererar automatiskt ett antal frågor och svar utfårn spellistorna\r\n// 7. ska kunna anropa spotify api för att spela upp en låt kopplad till en fråga\r\n\r\n// bonus: spara mer information om varje spelare. så som mest spelade låt, genre etc. vad som nu må finnas i spotify api som kan synkas till firebase utan att vara för mycket\r\n\r\n// att spela upp en sång kräver player SDK https://developer.spotify.com/documentation/web-playback-sdk/quick-start/\r\n// https://developer.spotify.com/documentation/web-playback-sdk/reference/#playing-a-spotify-uri\r\n// https://www.npmjs.com/package/react-spotify-player\r\n// kräver att hosten har spotify premium?\r\n// jag skulle kunna köra en egen \"player\" genom att köra pewview som är 30sekunder och sen har jag ju albumart\r\n\r\nimport React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Input from '@material-ui/core/Input';\r\nimport Select from '@material-ui/core/Select';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n// const play = ({\r\n//   spotify_uri,\r\n//   playerInstance: {\r\n//     _options: {\r\n//       getOAuthToken,\r\n//       id,\r\n//     },\r\n//   },\r\n// }) => {\r\n//   getOAuthToken((access_token) => {\r\n//     fetch(`https://api.spotify.com/v1/me/player/play?device_id=${id}`, {\r\n//       method: 'PUT',\r\n//       body: JSON.stringify({ uris: [spotify_uri] }),\r\n//       headers: {\r\n//         'Content-Type': 'application/json',\r\n//         Authorization: `Bearer ${access_token}`,\r\n//       },\r\n//     });\r\n//   });\r\n// };\r\n\r\n// TESTA ATT SPELA UPP EN LÅT FRÅN EN AV SPELLISTORNA. kolla på  https://developer.spotify.com/documentation/web-playback-sdk/reference/#playing-a-spotify-uri\r\n\r\n// $.ajax({\r\n//   url: 'https://api.spotify.com/v1/me/top/artists',\r\n//   type: 'GET',\r\n//   beforeSend(xhr) { xhr.setRequestHeader('Authorization', `Bearer ${_token}`); },\r\n//   success(data) {\r\n//     // Do something with the returned data\r\n//     data.items.map((artist) => {\r\n//       const item = $(`<li>${artist.name}</li>`);\r\n//       item.appendTo($('#top-artists'));\r\n//     });\r\n//   },\r\n// });\r\n\r\nclass CreateSpotify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: '',\r\n      gametype: 'spotify',\r\n      questions: 18,\r\n      password: '',\r\n      autoplay: true,\r\n      qFeatures: true,\r\n      qSize: true,\r\n      qTrackOwner: true,\r\n      qArtist: true,\r\n      qGenre: true,\r\n    };\r\n    // const hash = window.location.hash\r\n    //   .substring(1)\r\n    //   .split('&')\r\n    //   .reduce((initial, item) => {\r\n    //     if (item) {\r\n    //       const parts = item.split('=');\r\n    //       initial[parts[0]] = decodeURIComponent(parts[1]);\r\n    //     }\r\n    //     return initial;\r\n    //   }, {});\r\n    // window.location.hash = '';\r\n\r\n    // Set token\r\n    // spara token i localstorage.\r\n    // det är problem med hastag i redirect url. kommer tillbaka till startsidan när jag ber om ett token helt enkelt.\r\n    // kan leva med det och då spara det i localstorage. Men när dne löper ut och jag behöver ny så kommer jag skickas tillbaka till startisdan igen.\r\n    // Problematiskt om hosten också får samma problem? ett game kan bara vara 60min då?\r\n    // https://example.com/callback#access_token=NwAExz...BV3O2Tk&token_type=Bearer&expires_in=3600&state=123 därför används hashen.\r\n    // jag kan väl ha det tills vidare att man skcikas tillbaka efter inloggning...\r\n    // const _token2 = hash.access_token;\r\n    // i need to get new token if it has expired. i could use it for multiple games tho\r\n\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = name => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  createGame() {\r\n    const { createGame } = this.props;\r\n    const {\r\n      password,\r\n      gametype,\r\n      title,\r\n      questions,\r\n      qArtist,\r\n      qFeatures,\r\n      qSize,\r\n      qTrackOwner,\r\n      qGenre,\r\n      autoplay,\r\n    } = this.state;\r\n    const minigame = {\r\n      autoplay,\r\n      questions,\r\n      qGenre,\r\n      qArtist,\r\n      qFeatures,\r\n      qSize,\r\n      qTrackOwner,\r\n    };\r\n    const game = {\r\n      password,\r\n      gametype,\r\n      title,\r\n      minigame,\r\n    };\r\n    createGame(game);\r\n  }\r\n\r\n  /*\r\n    validateGame(game) {\r\n      // validera lösenord är tillräckligt starkt här\r\n      //eller direkt efter input om det finns någon smart lösning.\r\n      // kolla på gametype hur ha en secifik validering för varje type\r\n      return true;\r\n    }\r\n\r\n    clearForm() {\r\n\r\n    }\r\n*/\r\n  render() {\r\n    const {\r\n      password,\r\n      title,\r\n      questions,\r\n      qTrackOwner,\r\n      qArtist,\r\n      qFeatures,\r\n      qSize,\r\n      qGenre,\r\n      autoplay,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        <Grid container spacing={24}>\r\n          <form autoComplete=\"off\">\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New Spotify game</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"questions to play\"\r\n                  name=\"questions\"\r\n                  type=\"number\"\r\n                  value={questions}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange('questions')}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Typography variant=\"h5\">Question types</Typography>\r\n            <Grid item xs={12}>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={qTrackOwner}\r\n                      onChange={this.handleChangeBool('qTrackOwner')}\r\n                      value=\"qTrackOwner\"\r\n                    />\r\n)}\r\n                  label=\"Tracks\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={qFeatures}\r\n                      onChange={this.handleChangeBool('qFeatures')}\r\n                      value=\"qFeatures\"\r\n                    />\r\n)}\r\n                  label=\"Features\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={qArtist}\r\n                      onChange={this.handleChangeBool('qArtist')}\r\n                      value=\"qArtist\"\r\n                    />\r\n)}\r\n                  label=\"Artist\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={qGenre}\r\n                      onChange={this.handleChangeBool('qGenre')}\r\n                      value=\"qGenre\"\r\n                    />\r\n)}\r\n                  label=\"Genres\"\r\n                />\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      checked={qSize}\r\n                      onChange={this.handleChangeBool('qSize')}\r\n                      value=\"qSize\"\r\n                    />\r\n)}\r\n                  label=\"Playlist size\"\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControlLabel\r\n                control={(\r\n                  <Switch\r\n                    checked={autoplay}\r\n                    onChange={this.handleChangeBool('autoplay')}\r\n                    value=\"autoplay\"\r\n                  />\r\n)}\r\n                label=\"Autoplay questions\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Title\"\r\n                  name=\"title\"\r\n                  value={title}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange('title')}\r\n                />\r\n              </FormControl>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  margin=\"normal\"\r\n                  value={password}\r\n                  onChange={this.handleChange('password')}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button onClick={this.createGame} variant=\"contained\">Create</Button>\r\n            </Grid>\r\n          </form>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreateSpotify.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateSpotify;\r\n","import React, { Component } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nclass CreateGolfRace extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      title: \"\",\r\n      gametype: \"golfrace\",\r\n      password: \"\",\r\n    };\r\n\r\n    this.createGame = this.createGame.bind(this);\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  createGame() {\r\n    const { createGame } = this.props;\r\n    const { password, gametype, title } = this.state;\r\n    const minigame = {};\r\n    const game = {\r\n      password,\r\n      gametype,\r\n      title,\r\n      minigame,\r\n    };\r\n    createGame(game);\r\n  }\r\n\r\n  render() {\r\n    const { password, title } = this.state;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        <Grid container spacing={24}>\r\n          <form autoComplete=\"off\">\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\">New Golf Race</Typography>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Title\"\r\n                  name=\"title\"\r\n                  value={title}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"title\")}\r\n                />\r\n              </FormControl>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  margin=\"normal\"\r\n                  value={password}\r\n                  onChange={this.handleChange(\"password\")}\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Button onClick={this.createGame} variant=\"contained\">\r\n                Create\r\n              </Button>\r\n            </Grid>\r\n          </form>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreateGolfRace.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateGolfRace;\r\n","import React, { Component } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Typography, Card } from \"@material-ui/core\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport CreateTetris from \"./CreateTetris\";\r\nimport CreateGolf from \"./CreateGolf\";\r\nimport CreateSnake from \"./CreateSnake\";\r\nimport CreateSpotify from \"./CreateSpotify\";\r\nimport CreateGolfRace from \"./CreateGolfRace\";\r\n\r\nclass CreateMinigame extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      gametype: \"\",\r\n    };\r\n  }\r\n\r\n  setGameType = (name) => (event) => {\r\n    this.setState({ gametype: name });\r\n  };\r\n\r\n  render() {\r\n    const { createGame } = this.props;\r\n    const { gametype } = this.state;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        {!gametype && (\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType(\"snake\")}>\r\n                <CardHeader title=\"Snake\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create a classic game of snake or change the modes to fit\r\n                    your audience\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"tetris\")}\r\n              >\r\n                <CardHeader title=\"Tetris\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Game is not available yet\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"golfrace\")}\r\n              >\r\n                <CardHeader title=\"Golf Race\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create a multiplayer golf race game\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType(\"golf\")}>\r\n                <CardHeader title=\"Golf\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create a multiplayer golf simulation game\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"spotify\")}\r\n              >\r\n                <CardHeader title=\"Spotify\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Get to know your friends Music taste\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n        {gametype === \"snake\" && <CreateSnake createGame={createGame} />}\r\n        {gametype === \"tetris\" && <CreateTetris createGame={createGame} />}\r\n        {gametype === \"golf\" && <CreateGolf createGame={createGame} />}\r\n        {gametype === \"golfrace\" && <CreateGolfRace createGame={createGame} />}\r\n        {gametype === \"spotify\" && <CreateSpotify createGame={createGame} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreateMinigame.propTypes = {\r\n  createGame: PropTypes.func.isRequired,\r\n};\r\nexport default CreateMinigame;\r\n","import React, { Component } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { Typography, Card } from \"@material-ui/core\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport CreateQuiz from \"../quiz/create/CreateQuiz\";\r\nimport { fire, fireGolf } from \"../../base\";\r\nimport CreateMinigame from \"../minigame/create/CreateMinigame\";\r\nimport { generateGameId } from \"../common/utils/appUtil\";\r\n\r\nclass Create extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      gametype: \"\",\r\n      gameId: \"\",\r\n      done: false,\r\n      game: null,\r\n    };\r\n    this.createGame = this.createGame.bind(this);\r\n    // this.validateGame = this.validateGame.bind(this);\r\n  }\r\n\r\n  setGameType = (name) => () => {\r\n    this.setState({ gametype: name });\r\n  };\r\n\r\n  createGame(g) {\r\n    const { gametype, done } = this.state;\r\n    const game = g;\r\n    game.gameId = generateGameId();\r\n    game.created = Date.now();\r\n    game.status = \"CREATED\";\r\n    game.phase = \"setup\";\r\n    this.setState({\r\n      game: game,\r\n    });\r\n    const that = this;\r\n    // game push få ett id.\r\n    let gameRef;\r\n    if (game.gametype === \"golf\" || game.gametype === \"golfrace\") {\r\n      gameRef = fireGolf\r\n        .database()\r\n        .ref(\"/games\")\r\n        .push();\r\n    } else {\r\n      gameRef = fire\r\n        .database()\r\n        .ref(\"/games\")\r\n        .push();\r\n    }\r\n    game.key = gameRef.key;\r\n    gameRef.set(game, (error) => {\r\n      if (error) {\r\n        that.setState({\r\n          errorText: `Error: ${error}`,\r\n        });\r\n        const snack = {\r\n          variant: \"error\",\r\n          message: \"Unexpected internal error\",\r\n        };\r\n        that.props.showSnackbar(snack);\r\n      } else {\r\n        const snack = {\r\n          variant: \"success\",\r\n          message: \"Successfully created!\",\r\n        };\r\n        that.props.showSnackbar(snack);\r\n        that.setState({\r\n          gameId: game.gameId,\r\n          done: true,\r\n        });\r\n        localStorage.setItem(\"RecentGameId\", game.gameId);\r\n\r\n        // show gameid and password\r\n        // show button to start game / navigate to host\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { gametype, gameId, done, game } = this.state;\r\n    const { showSnackbar } = this.props;\r\n    return (\r\n      <div className=\"app-page create-page\">\r\n        {!gametype && (\r\n          <Grid container spacing={24}>\r\n            <Grid item xs={6}>\r\n              <Card className=\"card-button\" onClick={this.setGameType(\"quiz\")}>\r\n                <CardHeader title=\"Quiz\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create your own quiz or generate one fast and easy\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"minigame\")}\r\n              >\r\n                <CardHeader title=\"Mini Game\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create a game to play just for fun or team building purposes\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"survey\")}\r\n              >\r\n                <CardHeader title=\"Survey\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Survey your audience\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Card\r\n                className=\"card-button\"\r\n                onClick={this.setGameType(\"discussion\")}\r\n              >\r\n                <CardHeader title=\"Discussion\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">\r\n                    Create a discussion on a sppecified topic\r\n                  </Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n        {gametype === \"quiz\" && (\r\n          <CreateQuiz\r\n            createQuiz={this.createGame}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n        {gametype === \"minigame\" && (\r\n          <CreateMinigame\r\n            createGame={this.createGame}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n        {done && (\r\n          <div style={{ marginTop: 30 }}>\r\n            <Typography variant=\"h2\">\r\n              <span>Created game PIN: </span>{\" \"}\r\n              <span className=\"dynamic-text\">{gameId}</span>\r\n            </Typography>\r\n            <Link to={\"/host?pin=\" + gameId + \"&gametype=\" + game.gametype}>\r\n              Host game\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCreate.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default Create;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Switch from '@material-ui/core/Switch';\r\nclass PhaseSetup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            surveyPlayers: false,\r\n            answerStreak: true,\r\n            nameGenerator: false,\r\n            remoteMode: false,\r\n            useTeams: false,\r\n            randomizeQuestionOrder: false,\r\n            autoPlayQuestions: false,\r\n\r\n        };\r\n        this.startGame = this.startGame.bind(this);\r\n        this.createTeamGame = this.createTeamGame.bind(this);\r\n        this.createClassicGame = this.createClassicGame.bind(this);\r\n\r\n\r\n    }\r\n    handleChangeBool = name => event => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    createTeamGame() {\r\n        this.startGame(true);\r\n    }\r\n    createClassicGame() {\r\n        this.startGame(false);\r\n    }\r\n    startGame(teamMode) {\r\n        let game = {};\r\n        let quiz = this.props.game.quiz;\r\n        quiz.surveyPlayers = this.state.surveyPlayers;\r\n        quiz.answerStreak = this.state.answerStreak;\r\n        quiz.nameGenerator = this.state.nameGenerator;\r\n        quiz.remoteMode = this.state.remoteMode;\r\n        quiz.useTeams = teamMode;\r\n        quiz.autoPlayQuestions = this.state.autoPlayQuestions;\r\n        quiz.randomizeQuestionOrder = this.state.randomizeQuestionOrder;\r\n        quiz.currentQuestion = 0;\r\n\r\n        game.quiz = quiz;\r\n        game.phase = \"connection\";\r\n        game.status = \"IN_PROGRESS\";\r\n        this.props.gameFunc.update(game);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h4\">Game Settings</Typography>\r\n                <Button onClick={this.createClassicGame} variant=\"contained\">Classic</Button>\r\n                <Button onClick={this.createTeamGame} variant=\"contained\">Team mode</Button>\r\n\r\n                <FormControl component=\"fieldset\">\r\n                    <FormGroup>\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.nameGenerator}\r\n                                    onChange={this.handleChangeBool('nameGenerator')}\r\n                                    value=\"nameGenerator\"\r\n                                />\r\n                            }\r\n                            label=\"Generate names for players\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.remoteMode}\r\n                                    onChange={this.handleChangeBool('remoteMode')}\r\n                                    value=\"remoteMode\"\r\n                                />\r\n                            }\r\n                            label=\"Remote playmode\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.answerStreak}\r\n                                    onChange={this.handleChangeBool('answerStreak')}\r\n                                    value=\"answerStreak\"\r\n                                />\r\n                            }\r\n                            label=\"Use answer scorestreak\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.surveyPlayers}\r\n                                    onChange={this.handleChangeBool('surveyPlayers')}\r\n                                    value=\"surveyPlayers\"\r\n                                />\r\n                            }\r\n                            label=\"Survey players after game\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.randomizeQuestionOrder}\r\n                                    onChange={this.handleChangeBool('randomizeQuestionOrder')}\r\n                                    value=\"randomizeQuestionOrder\"\r\n                                />\r\n                            }\r\n                            label=\"Randomize question order\"\r\n                        />\r\n                        <FormControlLabel\r\n                            control={\r\n                                <Switch\r\n                                    checked={this.state.autoPlayQuestions}\r\n                                    onChange={this.handleChangeBool('autoPlayQuestions')}\r\n                                    value=\"autoPlayQuestions\"\r\n                                />\r\n                            }\r\n                            label=\"Auto play questions\"\r\n                        />\r\n\r\n                    </FormGroup>\r\n                </FormControl>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseSetup;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  nextPhase() {\r\n    this.props.gameFunc.update({ phase: 'starting' });\r\n  }\r\n\r\n  // add function to kick player\r\n  render() {\r\n    let players = this.props.game.players;\r\n    if (!players) {\r\n      players = [];\r\n    } else {\r\n      players = Object.values(players);\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">\r\n            <span>Join game at: </span>\r\n            <span className=\"dynamic-text\">mannfeldt.github.io/stagehoot</span>\r\n\r\n          </Typography>\r\n          <Typography variant=\"h2\">\r\n            <span>Enter game PIN: </span>\r\n            <span className=\"dynamic-text\">{this.props.game.gameId}</span>\r\n\r\n          </Typography>\r\n          <Typography variant=\"subtitle1\">{this.props.game.title}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid container>\r\n            {players.map((player, index) => (\r\n              <Grid key={index} item xs={3}>\r\n                <Typography paragraph variant=\"body1\" className=\"dynamic-text\">{player.name}</Typography>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Button onClick={this.nextPhase} variant=\"contained\">Start</Button>\r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default PhaseConnection;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './CountdownAnimation.scss';\r\n\r\nclass CountdownAnimation extends PureComponent {\r\n  // jag skulle kunna lägga en counter här som rendrerar null efter några sekunder\r\n  // så att är säkert att den inte hinner loopa\r\n  render() {\r\n    const { speed } = this.props;\r\n    if (speed === 'slow') {\r\n      return (\r\n        <div className=\"demo_slow\">\r\n          <div className=\"demo_slow__colored-blocks\">\r\n            <div className=\"demo_slow__colored-blocks-rotater\">\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n              <div className=\"demo_slow__colored-block\" />\r\n            </div>\r\n            <div className=\"demo_slow__colored-blocks-inner\" />\r\n            <div className=\"demo_slow__text\">Ready</div>\r\n          </div>\r\n          <div className=\"demo_slow__inner\">\r\n            <svg className=\"demo_slow__numbers\" viewBox=\"0 0 100 100\">\r\n              <defs>\r\n                <path className=\"demo_slow__num-path-1\" d=\"M40,28 55,22 55,78\" />\r\n                <path className=\"demo_slow__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\" />\r\n                <path className=\"demo_slow__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\" />\r\n                <path className=\"demo_slow__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\" />\r\n                <path className=\"demo_slow__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\" />\r\n              </defs>\r\n              <path\r\n                className=\"demo_slow__numbers-path\"\r\n                d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r\n          l0,-61 L40,28\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"demo\">\r\n        <div className=\"demo__colored-blocks\">\r\n          <div className=\"demo__colored-blocks-rotater\">\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n            <div className=\"demo__colored-block\" />\r\n          </div>\r\n          <div className=\"demo__colored-blocks-inner\" />\r\n          <div className=\"demo__text\">Ready</div>\r\n        </div>\r\n        <div className=\"demo__inner\">\r\n          <svg className=\"demo__numbers\" viewBox=\"0 0 100 100\">\r\n            <defs>\r\n              <path className=\"demo__num-path-1\" d=\"M40,28 55,22 55,78\" />\r\n              <path className=\"demo__num-join-1-2\" d=\"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10\" />\r\n              <path className=\"demo__num-path-2\" d=\"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7\" />\r\n              <path className=\"demo__num-join-2-3\" d=\"M28,69 Q25,44 34.4,27.4\" />\r\n              <path className=\"demo__num-path-3\" d=\"M30,20 60,20 40,50 a18,15 0 1,1 -12,19\" />\r\n            </defs>\r\n            <path\r\n              className=\"demo__numbers-path\"\r\n              d=\"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r\n          Q25,44 34.4,27.4\r\n          l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r\n          a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r\n          l0,-61 L40,28\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nCountdownAnimation.propTypes = {\r\n  speed: PropTypes.string.isRequired,\r\n};\r\nexport default CountdownAnimation;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"awaiting_question\" });\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <Typography variant=\"h2\">Starting quiz</Typography>\r\n                <CountdownAnimation speed=\"slow\" />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            counter: this.startCounter(),\r\n        }\r\n        this.nextPhase = this.nextPhase.bind(this);\r\n    }\r\n    startCounter() {\r\n        let that = this;\r\n        let counter = 5;\r\n\r\n        let i = setInterval(function () {\r\n            counter--;\r\n            that.setState({ counter: counter });\r\n            if (counter === 0) {\r\n                that.nextPhase();\r\n                clearInterval(i);\r\n            }\r\n        }, 1000);\r\n        return 5;\r\n    }\r\n\r\n    nextPhase() {\r\n        this.props.gameFunc.update({ phase: \"show_question\" });\r\n    }\r\n    //på componentDidMount så starta en timer eller liknande. koppla timern till något visuellt. typ en materialUI progressbar. 0-100 som visas.\r\n    //när timern är klar så updateras phase till nästa\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n            <Typography variant=\"h2\">Loading next question</Typography>\r\n                <CountdownAnimation speed=\"slow\"/>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      question: '',\r\n    };\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question });\r\n    const phaseTime = 3000 + (question.question.length * 20);\r\n    setTimeout(this.nextPhase, phaseTime);\r\n  }\r\n\r\n  nextPhase() {\r\n    let answers = [];\r\n    if (this.state.question.aType === 'multiple') {\r\n      answers = this.state.question.wrongAnswers.concat(this.state.question.correctAnswers);\r\n      answers = this.shuffle(answers);\r\n    } else if (this.state.question.aType === 'boolean') {\r\n      answers = ['True', 'False'];\r\n    }\r\n    if (answers.length) {\r\n      const game = {};\r\n      game.phase = 'answer';\r\n      game.quiz = this.props.game.quiz;\r\n      game.quiz.questions[game.quiz.currentQuestion].answers = answers;\r\n      this.props.gameFunc.update(game);\r\n    } else {\r\n      this.props.gameFunc.update({ phase: 'answer' });\r\n    }\r\n  }\r\n\r\n  shuffle(array) {\r\n    let counter = array.length;\r\n    while (counter > 0) {\r\n      const index = Math.floor(Math.random() * counter);\r\n      counter--;\r\n      const temp = array[counter];\r\n      array[counter] = array[index];\r\n      array[index] = temp;\r\n    }\r\n    return array;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n          <div className=\"phase-container\">\r\n              <div className=\"quiz-top-section\">\r\n                  <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n\r\n                </div>\r\n              <div className=\"quiz-middle-section\" />\r\n              <div className=\"quiz-bottom-section\" />\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseShowQuestion;\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    paddingTop: theme.spacing.unit * 2,\r\n    paddingBottom: theme.spacing.unit * 2,\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n    height: '100%',\r\n  },\r\n  playAnswer: {\r\n    width: '50vw',\r\n    height: '100%',\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  icon: {\r\n    float: 'left',\r\n    fontSize: '28',\r\n    color: 'white',\r\n    marginLeft: '10px',\r\n  },\r\n  answer: {\r\n    fontSize: 18,\r\n    fontWeight: 500,\r\n    color: 'white',\r\n  },\r\n});\r\n\r\nconst answerStyles = [{\r\n  icon: <CakeIcon />,\r\n  color: '#73c7d2',\r\n},\r\n{\r\n  icon: <ExtensionIcon />,\r\n  color: '#d78a8a',\r\n},\r\n{\r\n  icon: <FavoriteIcon />,\r\n  color: '#b984c2',\r\n},\r\n{\r\n  icon: <StarIcon />,\r\n  color: '#b1ca94',\r\n}];\r\n\r\nclass AnswerOption extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n    /*\r\n                        på play answer vill jag inte skriva texten utan bara ha rätt färg + symbol. play answer ska vara större. men det kanske jag kan fixa via cssklass i playanswer.\r\n                        på host answer har jag rätt färg symbol + text\r\n\r\n                        symboler icons: hjärta,stjärna,blomma (filter_vintage), berg, pusselbit(extension), cloud\r\n                        trekant, fyrkant, cirkel,\r\n                        1,2,3,4 (finns som icon)\r\n                        a,b,c,d (finns inte om icon)\r\n                        välj 4 coola färger, grön röd blå gul?\r\n                        tänk på att det kan vara två alternativ\r\n        */\r\n  }\r\n\r\n  render() {\r\n    const design = answerStyles[this.props.index];\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className=\"full-height\">\r\n        {this.props.answerQuestion && (\r\n        <Paper onClick={() => { this.props.answerQuestion(this.props.answer); }} className={classes.playAnswer} style={{ backgroundColor: design.color }}>\r\n          <div className=\"button-answer-icon\">{design.icon}</div>\r\n          {this.props.remoteMode && <div className={classes.answer}>{this.props.answer}</div>}\r\n        </Paper>\r\n        )\r\n                }\r\n        {!this.props.answerQuestion && (\r\n        <Paper className={classes.paper} style={{ backgroundColor: design.color }}>\r\n          <div className={classes.icon}>{design.icon}</div>\r\n          <div className={classes.answer}>{this.props.answer}</div>\r\n        </Paper>\r\n        )\r\n                }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerOption);\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n  text: {\r\n    marginBottom: '-200px',\r\n    fontSize: '86px',\r\n    paddingTop: '160px',\r\n  },\r\n  circle: {\r\n    color: '#6JpDK4',\r\n\r\n  },\r\n});\r\nclass Timer extends PureComponent {\r\n  render() {\r\n    const {\r\n      classes, text, value, startValue,\r\n    } = this.props;\r\n    let currentCount = value === null ? startValue : value;\r\n    const start = startValue < 1 ? 0 : startValue;\r\n\r\n    if (currentCount < 0) {\r\n      currentCount = 0;\r\n    }\r\n    const completed = currentCount / start;\r\n\r\n    return (\r\n      <div className={classes.container}>\r\n        <Typography variant=\"caption\" className={classes.text}>{text}</Typography>\r\n        <CircularProgress\r\n          className={classes.circle}\r\n          classes={{\r\n            colorSecondary: classes.circle,\r\n          }}\r\n          variant=\"static\"\r\n          value={completed * 100}\r\n          thickness={4}\r\n          size={300}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTimer.propTypes = {\r\n  text: PropTypes.string,\r\n  value: PropTypes.number,\r\n  startValue: PropTypes.number,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(Timer);\r\n","import React, { Component } from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst styles = theme => ({\r\n    bar: {\r\n        color: '#32386D'\r\n    }\r\n});\r\nclass AnswerCounter extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Typography variant=\"h5\">Answers collected</Typography>\r\n                <LinearProgress className={classes.bar} variant=\"determinate\" value={this.props.value} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(AnswerCounter);","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\nimport Timer from '../../common/Timer';\r\nimport AnswerCounter from './AnswerCounter';\r\n\r\nclass PhaseAnswer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      counter: null,\r\n      timelimit: 0,\r\n      started: false,\r\n      isTimelimited: true,\r\n      question: {\r\n        question: '',\r\n        answers: [],\r\n      },\r\n    };\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const that = this;\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question, isTimelimited: this.props.game.quiz.timelimit, timelimit: question.timelimit * 10 });\r\n    if (this.props.game.quiz.timelimit) {\r\n      const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n      let counter = question.timelimit * 10;\r\n      const i = setInterval(() => {\r\n        let answersCollected = 0;\r\n        for (let i = 0; i < playerKeys.length; i++) {\r\n          if (that.props.game.players[playerKeys[i]].answers && that.props.game.players[playerKeys[i]].answers[question.id]) {\r\n            answersCollected++;\r\n          }\r\n        }\r\n        counter--;\r\n        that.setState({ counter, started: true });\r\n        if (counter <= -5 || answersCollected === playerKeys.length) {\r\n          that.nextPhase();\r\n          clearInterval(i);\r\n        }\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  nextPhase() {\r\n    this.props.gameFunc.update({ phase: 'result_question' });\r\n  }\r\n\r\n  render() {\r\n    let answers = [];\r\n    if (this.props.game) {\r\n      answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n    }\r\n    let answersCollected = 0;\r\n    const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      if (this.props.game.players[playerKeys[i]].answers && this.props.game.players[playerKeys[i]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]) {\r\n        answersCollected++;\r\n      }\r\n    }\r\n    const answerCollectedPercentage = (answersCollected / playerKeys.length) * 100;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">{this.state.question.question}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          {!this.state.isTimelimited && <Button onClick={this.nextPhase}>Next</Button>}\r\n          {this.state.isTimelimited && <Timer startValue={this.state.timelimit} value={this.state.counter} text={Math.ceil(this.state.counter / 10)} />\r\n                    }\r\n          <div className=\"quiz-answercounter-container\">\r\n            <AnswerCounter value={answerCollectedPercentage} />\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n\r\n          <Grid container className=\"align-bottom\">\r\n            {answers.map((answer, index) => (\r\n              <Grid key={index} item xs={6}>\r\n                <AnswerOption answer={answer} index={index} />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseAnswer;\r\n","import React, { Component } from 'react';\r\nimport { HorizontalBar } from 'react-chartjs-2';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst colors = ['#80DEEA', '#EF9A9A', '#CE93D8', '#C5E1A5'];\r\nconst MAX_PLAYERS = 20;\r\nconst PLAYER_BAR_HEIGHT_INCREMENT = 30;\r\nconst MAX_HEIGHT_PODIUM = 740;\r\nclass Podium extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getChartData = this.getChartData.bind(this);\r\n    this.getChartOptions = this.getChartOptions.bind(this);\r\n    this.getChartHeight = this.getChartHeight.bind(this);\r\n  }\r\n\r\n  getChartData() {\r\n    const chartData = {\r\n      labels: [],\r\n      datasets: [{\r\n        data: [],\r\n        label: 'podium',\r\n        backgroundColor: [],\r\n        borderWidth: 1,\r\n      }],\r\n    };\r\n\r\n    const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n    const rawPlayerData = [];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      const playerScoreData = {};\r\n      const player = this.props.game.players[playerKeys[i]];\r\n      let score = 0;\r\n      if (player.answers) {\r\n        for (let j = 0; j < Object.keys(player.answers).length; j++) {\r\n          const question = this.props.game.quiz.questions[j];\r\n          const answer = player.answers[question.id];\r\n          if (answer) {\r\n            score += answer.score;\r\n          }\r\n        }\r\n        playerScoreData.score = score;\r\n        playerScoreData.name = player.name;\r\n        rawPlayerData.push(playerScoreData);\r\n      }\r\n    }\r\n    rawPlayerData.sort((a, b) => b.score - a.score); // For ascending sort\r\n    const maxIndex = rawPlayerData.length > MAX_PLAYERS ? MAX_PLAYERS : rawPlayerData.length;\r\n    for (let i = 0; i < maxIndex; i++) {\r\n      chartData.labels.push(rawPlayerData[i].name);\r\n      chartData.datasets[0].data.push(rawPlayerData[i].score);\r\n      chartData.datasets[0].backgroundColor.push(colors[i % 4]);\r\n    }\r\n\r\n    return chartData;\r\n  }\r\n\r\n  getChartHeight() {\r\n    const chartData = this.getChartData();\r\n    let height = 70 + (chartData.labels.length * PLAYER_BAR_HEIGHT_INCREMENT);\r\n    if (height > MAX_HEIGHT_PODIUM) {\r\n      height = MAX_HEIGHT_PODIUM;\r\n    }\r\n    return height;\r\n  }\r\n\r\n  getChartOptions() {\r\n    const chartHeight = this.getChartHeight();\r\n    const padding = (MAX_HEIGHT_PODIUM - chartHeight) / 2;\r\n    const options = {\r\n      maintainAspectRatio: false,\r\n      showTooltips: false,\r\n      responsiveAnimationDuration: 1000,\r\n      animation: {\r\n        easing: 'easeInOutCubic',\r\n        duration: '2000',\r\n        onProgress(animation) {\r\n          animation.animationObject.onAnimationProgress = function () {\r\n            const ctx = this.chart.ctx;\r\n            const chart = this.chart;\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'bottom';\r\n            ctx.font = '20px Roboto';\r\n\r\n            const stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n            const meta = chart.getDatasetMeta(0);\r\n            if (!meta.hidden) {\r\n              meta.data.forEach((element, index) => {\r\n                // Draw the text in black, with the specified font\r\n\r\n                // Just naively convert to string for now\r\n                const dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio).toString();\r\n                ctx.fillStyle = colors[index % 4];\r\n\r\n                const position = element.tooltipPosition();\r\n                ctx.fillText(dataString, position.x + 2 + (dataString.length * 6), position.y + (element._model.height / 2));\r\n              });\r\n            }\r\n          };\r\n        },\r\n      },\r\n      scales: {\r\n        yAxes: [{\r\n          ticks: {\r\n            beginAtZero: true,\r\n          },\r\n          display: true,\r\n          beginAtZero: true,\r\n        }],\r\n        xAxes: [{\r\n          display: true,\r\n          beginAtZero: true,\r\n        }],\r\n      },\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltips: {\r\n        enabled: false,\r\n      },\r\n      events: [],\r\n      layout: {\r\n        padding: {\r\n          left: 0,\r\n          right: 60,\r\n          top: padding,\r\n          bottom: padding,\r\n        },\r\n      },\r\n    };\r\n    return options;\r\n  }\r\n\r\n  getWinnerString() {\r\n    return 'Congratulations [name of player]! ';\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{ maxHeight: MAX_HEIGHT_PODIUM }}>\r\n        <HorizontalBar\r\n          data={this.getChartData}\r\n          height={MAX_HEIGHT_PODIUM}\r\n          options={this.getChartOptions()}\r\n        />\r\n        <Typography variant=\"subtitle1\">{this.getWinnerString()}</Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Podium;\r\n","import React, { Component } from 'react';\r\nimport Podium from '../Podium';\r\nimport { Typography } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"h2\">Final score</Typography>\r\n\r\n                    <Podium game={this.props.game} />\r\n                </div>\r\n                <div className=\"align-bottom \">\r\n                    <div>\r\n\r\n                        <Button onClick={this.props.gameFunc.restart}>Replay quiz</Button>\r\n                        <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n                        <Button onClick={() => alert('show results')}>Show results</Button>\r\n                        <Button onClick={() => alert('start survey')}>Start survey</Button>\r\n                        <Button>\r\n                            <Link to={'/create'}>Host game</Link>\r\n                        </Button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport CakeIcon from '@material-ui/icons/Cake';\r\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\r\nimport ExtensionIcon from '@material-ui/icons/ExtensionOutlined';\r\nimport StarIcon from '@material-ui/icons/StarBorder';\r\n\r\nconst PUBLIC_PATH = process.env.PUBLIC_URL;\r\n\r\nconst answerStyles = [{\r\n  icon: <CakeIcon />,\r\n  color: '#80DEEA',\r\n},\r\n{\r\n  icon: <ExtensionIcon />,\r\n  color: '#EF9A9A',\r\n},\r\n{\r\n  icon: <FavoriteIcon />,\r\n  color: '#CE93D8',\r\n},\r\n{\r\n  icon: <StarIcon />,\r\n  color: '#C5E1A5',\r\n}];\r\n\r\nclass AnswerChart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getChartData = this.getChartData.bind(this);\r\n    this.getChartOptions = this.getChartOptions.bind(this);\r\n    this.getChartHeight = this.getChartHeight.bind(this);\r\n    this.getAnswerData = this.getAnswerData.bind(this);\r\n  }\r\n\r\n  getAnswerData() {\r\n    const answerData = {\r\n      data: [],\r\n      topPlayer: {\r\n        score: 0,\r\n        playerKey: '',\r\n      },\r\n      correctAnswers: [],\r\n    };\r\n    const playerAnswers = [];\r\n    const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n    const currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      const player = this.props.game.players[playerKeys[i]];\r\n      if (!player.answers) {\r\n        continue;\r\n      }\r\n      const answer = player.answers[currentQuestion.id];\r\n      if (answer) {\r\n        playerAnswers.push(answer.answer);\r\n        if (answer.score > answerData.topPlayer.score) {\r\n          answerData.topPlayer.score = answer.score;\r\n          answerData.topPlayer.playerKey = player.key;\r\n        }\r\n      }\r\n    }\r\n    for (let j = 0; j < currentQuestion.answers.length; j++) {\r\n      let nrOfAnswers = 0;\r\n      for (let i = 0; i < playerAnswers.length; i++) {\r\n        if (currentQuestion.answers.indexOf(playerAnswers[i]) === j) {\r\n          nrOfAnswers++;\r\n        }\r\n      }\r\n      answerData.data.push(nrOfAnswers);\r\n\r\n      if (currentQuestion.correctAnswers.indexOf(currentQuestion.answers[j]) > -1) {\r\n        answerData.correctAnswers.push(j);\r\n      }\r\n    }\r\n\r\n    return answerData;\r\n  }\r\n\r\n  getChartData() {\r\n    const chartData = {\r\n      labels: [],\r\n      datasets: [{\r\n        data: [],\r\n        label: 'asdf',\r\n        backgroundColor: [],\r\n        borderWidth: 1,\r\n      }],\r\n    };\r\n    const data = this.getAnswerData();\r\n    chartData.datasets[0].borderColor = [];\r\n    chartData.datasets[0].data = data.data;\r\n    for (let i = 0; i < data.data.length; i++) {\r\n      chartData.labels.push('');\r\n      chartData.datasets[0].backgroundColor.push(answerStyles[i].color);\r\n    }\r\n    return chartData;\r\n  }\r\n\r\n  getChartHeight() {\r\n    const answerData = this.getAnswerData();\r\n    const topvalue = Math.max(...answerData.data);\r\n    const incrementHeightPerAnswer = 25;\r\n    const minHeight = 65;\r\n    const maxHeight = 300;\r\n    const height = minHeight + (topvalue * incrementHeightPerAnswer);\r\n    if (height > maxHeight) {\r\n      return maxHeight;\r\n    }\r\n    return height;\r\n  }\r\n\r\n  getChartOptions() {\r\n    const that = this;\r\n    const options = {\r\n      maintainAspectRatio: false,\r\n      showTooltips: false,\r\n      responsiveAnimationDuration: 1000,\r\n      animation: {\r\n        easing: 'easeInOutCubic',\r\n        duration: '2000',\r\n        onProgress (animation) {\r\n                    let answerData = that.getAnswerData();\r\n                    animation.animationObject.onAnimationProgress = function () {\r\n                        let ctx = this.chart.ctx;\r\n                        let chart = this.chart;\r\n                        ctx.textAlign = \"center\";\r\n                        ctx.fillStyle = \"black\";\r\n                        ctx.textBaseline = \"bottom\";\r\n                        ctx.font = \"24px Roboto\";\r\n\r\n                        let stepratio = animation.animationObject.currentStep / animation.animationObject.numSteps;\r\n\r\n                        let meta = chart.getDatasetMeta(0);\r\n                        if (!meta.hidden) {\r\n                            meta.data.forEach(function (element, index) {\r\n\r\n                                let dataString = Math.floor(chart.data.datasets[0].data[index] * stepratio);\r\n\r\n                                let position = element.tooltipPosition();\r\n                                ctx.fillStyle = answerStyles[index].color;\r\n                                ctx.fillText(dataString, position.x, position.y - 2);\r\n                                ctx.beginPath();\r\n                                ctx.rect(position.x - element._view.width / 2, chart.height - 32, element._view.width, 22);\r\n                                ctx.fill();\r\n                                if (answerData.correctAnswers.indexOf(index) > -1) {\r\n\r\n                                    let img = new Image();\r\n                                    img.src = PUBLIC_PATH + \"/baseline-done_outline-24px.svg\";\r\n                                    img.height = 100;\r\n                                    img.width = 100;\r\n                                    let ypos = chart.height - 34;\r\n                                    //ta bort onlead wrapper för att göra det instant\r\n                                    ctx.drawImage(img, position.x - 12, ypos);\r\n                                }\r\n                            });\r\n                        }\r\n                        /*\r\n                                                for (let i = 0; i < answerData.data.length; i++) {\r\n                                                    let value = Math.floor(answerData.data[i] * stepratio);\r\n                                                    //om det inte är någon som svarar så blir meta[0] undefined första gången. går jag in på nytt på gamet som host så fungerar det\r\n                                                    //ha någon specifik hantering för om ingen har svarat alls\r\n                                                    var meta = this.chart.getDatasetMeta(0);\r\n                                                    let metadata = meta.data[i];\r\n                        \r\n                                                    ctx.fillStyle = answerStyles[i].color;\r\n                                                    ctx.fillText(value, metadata._view.x, metadata._view.y - 2);\r\n                                                    ctx.beginPath();\r\n                                                    ctx.rect(metadata._view.x - metadata._view.width / 2, this.chart.height - 32, metadata._view.width, 22);\r\n                                                    ctx.fill();\r\n                                                    if (answerData.correctAnswers.indexOf(i) > -1) {\r\n                        \r\n                                                        let img = new Image();\r\n                                                        img.src = \"/baseline-done_outline-24px.svg\";\r\n                                                        img.height = 100;\r\n                                                        img.width = 100;\r\n                                                        let ypos = this.chart.height - 34;\r\n                                                        //ta bort onlead wrapper för att göra det instant\r\n                                                        ctx.drawImage(img, metadata._view.x - 12, ypos);\r\n                        \r\n                                                    }\r\n                                                }\r\n                        \r\n                                                */\r\n                    }\r\n\r\n\r\n                },\r\n      },\r\n      scales: {\r\n        yAxes: [{\r\n          ticks: {\r\n            beginAtZero: true,\r\n          },\r\n          display: false,\r\n          beginAtZero: true,\r\n        }],\r\n        xAxes: [{\r\n          display: false,\r\n        }],\r\n      },\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltips: {\r\n        enabled: false,\r\n      },\r\n      events: [],\r\n      layout: {\r\n        padding: {\r\n          left: 0,\r\n          right: 0,\r\n          top: 25,\r\n          bottom: 40,\r\n        },\r\n      },\r\n    };\r\n    return options;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n          <Bar\r\ndata={this.getChartData}\r\nheight={this.getChartHeight()}\r\n              options={this.getChartOptions()}\r\n            />\r\n    );\r\n  }\r\n}\r\n\r\nexport default AnswerChart;\r\n","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  table: {\r\n    maxWidth: 700,\r\n    whiteSpace: 'nowrap',\r\n  },\r\n});\r\n\r\nclass Leaderboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      leaderboardData: this.getLeaderboardData(),\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n    };\r\n    this.startScoreCounter = this.startScoreCounter.bind(this);\r\n    this.getScoreCellWidth = this.getScoreCellWidth.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(this.startScoreCounter, 2000);\r\n  }\r\n\r\n  startScoreCounter() {\r\n    const that = this;\r\n    const i = setInterval(() => {\r\n      const newLeaderBoard = that.state.leaderboardData;\r\n      let done = true;\r\n      for (let i = 0; i < newLeaderBoard.players.length; i++) {\r\n        const player = newLeaderBoard.players[i];\r\n        if (player.currentQuestionScore > 0) {\r\n          done = false;\r\n          player.currentQuestionScore--;\r\n          player.totalScore++;\r\n        }\r\n      }\r\n      newLeaderBoard.players.sort((a, b) => ((b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0));\r\n      that.setState({ leaderboard: newLeaderBoard });\r\n      if (done) {\r\n        clearInterval(i);\r\n      }\r\n    }, 10);\r\n  }\r\n\r\n  getLeaderboardData() {\r\n    const leaderboard = {\r\n      players: [],\r\n    };\r\n    const playerKeys = this.props.game.players ? Object.keys(this.props.game.players) : [];\r\n\r\n    const currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    const playerList = [];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      const playerScoreData = {};\r\n      const player = this.props.game.players[playerKeys[i]];\r\n      let score = 0;\r\n      if (player.answers) {\r\n        for (let j = 0; j < this.props.game.quiz.questions.length; j++) {\r\n          const question = this.props.game.quiz.questions[j];\r\n          const answer = player.answers[question.id];\r\n          if (answer) {\r\n            if (answer.questionId === currentQuestion.id) {\r\n              playerScoreData.currentQuestionScore = answer.score;\r\n              playerScoreData.lastScore = answer.score;\r\n            } else {\r\n              score += answer.score;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      playerScoreData.totalScore = score;\r\n      playerScoreData.name = player.name;\r\n      playerScoreData.key = player.key;\r\n      playerList.push(playerScoreData);\r\n    }\r\n\r\n    playerList.sort((a, b) => ((b.totalScore < a.totalScore) ? -1 : (b.totalScore > a.totalScore) ? 1 : 0));\r\n    leaderboard.players = playerList;\r\n    return leaderboard;\r\n  }\r\n\r\n  getLeaderboardScore(player) {\r\n    if (player.currentQuestionScore === 0) {\r\n      return `${player.totalScore} (+${player.lastScore})`;\r\n    }\r\n    return `${player.totalScore}           `;\r\n    // return player.totalScore + \" (+\" + player.currentQuestionScore + \")\";\r\n  }\r\n\r\n  getScoreCellWidth() {\r\n    let length = 0;\r\n    const leaderboardData = this.getLeaderboardData();\r\n    for (let i = 0; i < leaderboardData.players.length; i++) {\r\n      const player = leaderboardData.players[i];\r\n      const scoreWidth = `${player.totalScore} (+${player.lastScore})`;\r\n      if (scoreWidth.length > length) {\r\n        length = scoreWidth.length;\r\n      }\r\n    }\r\n\r\n\r\n    return (length * 6) + 65;\r\n  }\r\n\r\n    handleChangePage = (event, page) => {\r\n      this.setState({ page });\r\n    };\r\n\r\n    handleChangeRowsPerPage = (event) => {\r\n      this.setState({ rowsPerPage: event.target.value });\r\n    };\r\n\r\n    render() {\r\n      const { classes } = this.props;\r\n      const { leaderboardData, rowsPerPage, page } = this.state;\r\n      return (\r\n        <div className={classes.root}>\r\n          <Table className={classes.table}>\r\n            <TableBody>\r\n              {leaderboardData.players.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((player, index) => (\r\n                <TableRow key={player.key}>\r\n                  <TableCell padding=\"dense\">{index + 1}</TableCell>\r\n                  <TableCell>{player.name}</TableCell>\r\n                  <TableCell style={{ width: this.getScoreCellWidth() }}>{this.getLeaderboardScore(player)}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n          {leaderboardData.players.length > 10 && (\r\n          <TablePagination\r\n            component=\"div\"\r\n            count={leaderboardData.players.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            backIconButtonProps={{\r\n              'aria-label': 'Previous Page',\r\n            }}\r\n            nextIconButtonProps={{\r\n              'aria-label': 'Next Page',\r\n            }}\r\n            onChangePage={this.handleChangePage}\r\n            onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n          />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(Leaderboard);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport AnswerOption from '../AnswerOption';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\n\r\nclass PhaseResultQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    this.nextQuestion = this.nextQuestion.bind(this);\r\n    this.finalizeQuiz = this.finalizeQuiz.bind(this);\r\n  }\r\n\r\n  nextQuestion() {\r\n    const game = {};\r\n    game.quiz = this.props.game.quiz;\r\n    game.quiz.currentQuestion = game.quiz.currentQuestion + 1;\r\n    game.phase = 'awaiting_question';\r\n    this.props.gameFunc.update(game);\r\n  }\r\n\r\n  finalizeQuiz() {\r\n    this.props.gameFunc.update({ phase: 'final_result' });\r\n  }\r\n\r\n  render() {\r\n    let answers = [];\r\n    let currentQuestion = '';\r\n    if (this.props.game) {\r\n      currentQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n      answers = currentQuestion.answers;\r\n    }\r\n    const nextQuestion = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion + 1];\r\n    const isLastQuestion = typeof nextQuestion === 'undefined';\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h6\" style={{ float: 'right' }}>{`Game PIN:${this.props.game.gameId} `}</Typography>\r\n          <Typography variant=\"h5\">{currentQuestion.question}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid container>\r\n            <Grid item md={6} xs={12}>\r\n              <div className=\"quiz-answer-chart\">\r\n                <AnswerChart game={this.props.game} />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <div>\r\n                <Leaderboard game={this.props.game} />\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n          <div>\r\n            {isLastQuestion && <Button onClick={this.finalizeQuiz}>Finalize result</Button>}\r\n            {!isLastQuestion && <Button onClick={this.nextQuestion}>Next question</Button>}\r\n            <Button onClick={this.props.gameFunc.restart}>Restart quiz</Button>\r\n            <Button onClick={this.props.gameFunc.quit}>Quit quiz</Button>\r\n            <Button onClick={this.props.gameFunc.end}>End quiz</Button>\r\n          </div>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Grid className=\"align-bottom\" container>\r\n            {answers.map((answer, index) => (\r\n              <Grid key={index} item xs={6}>\r\n                <AnswerOption answer={answer} index={index} />\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseResultQuestion;\r\n","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                HostEnd\r\n                toggleHeader()\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport PhaseSetup from './PhaseSetup';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\n\r\nclass Quiz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"host-container\">\r\n        {this.props.game.phase === 'setup' && <PhaseSetup game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'connection' && <PhaseConnection game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'starting' && <PhaseStarting game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'awaiting_question' && <PhaseAwaitingQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'show_question' && <PhaseShowQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'answer' && <PhaseAnswer game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'result_question' && <PhaseResultQuestion game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'final_result' && <PhaseFinalResult game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n        {this.props.game.phase === 'end' && <PhaseEnd game={this.props.game} gameFunc={this.props.gameFunc} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Quiz;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nclass PhaseSetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      surveyPlayers: false,\r\n      nameGenerator: false,\r\n      gamemode: props.game.minigame.gamemode,\r\n      racetarget: props.game.minigame.racetarget,\r\n      opponentCollision: props.game.minigame.opponentCollision,\r\n      eatOpponents: props.game.minigame.eatOpponents,\r\n      absorbAll: props.game.minigame.absorbAll,\r\n      wallCollision: props.game.minigame.wallCollision,\r\n      difficulty: props.game.minigame.difficulty,\r\n    };\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  startGame = (multiplayerMode) => {\r\n    const { game, gameFunc } = this.props;\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    } = this.state;\r\n    const minigame = {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      multiplayerMode,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    };\r\n    game.minigame = minigame;\r\n    game.phase = \"connection\";\r\n    game.status = \"IN_PROGRESS\";\r\n    gameFunc.update(game);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h4\">Game Settings</Typography>\r\n        <Button onClick={() => this.startGame(\"classic\")} variant=\"contained\">\r\n          Classic\r\n        </Button>\r\n        <Button onClick={() => this.startGame(\"coop\")} variant=\"contained\">\r\n          Co-op multiplayer\r\n        </Button>\r\n        <Button onClick={() => this.startGame(\"team\")} variant=\"contained\">\r\n          Team multiplayer\r\n        </Button>\r\n        <FormControl component=\"fieldset\">\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={nameGenerator}\r\n                  onChange={this.handleChangeBool(\"nameGenerator\")}\r\n                  value=\"nameGenerator\"\r\n                />\r\n              }\r\n              label=\"Generate names for players\"\r\n            />\r\n            <FormControl required>\r\n              <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n              <Select\r\n                value={gamemode || \"\"}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"gamemode\"\r\n                inputProps={{\r\n                  id: \"gamemode-required\",\r\n                }}\r\n              >\r\n                <MenuItem value=\"survival\">Survival</MenuItem>\r\n                <MenuItem value=\"race\">Race</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n\r\n            {gamemode === \"race\" && (\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Snake length\"\r\n                  name=\"racetarget\"\r\n                  type=\"number\"\r\n                  value={racetarget}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"racetarget\")}\r\n                />\r\n              </FormControl>\r\n            )}\r\n            <FormControl required>\r\n              <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n              <Select\r\n                value={difficulty || \"\"}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"difficulty\"\r\n                inputProps={{\r\n                  id: \"difficulty-required\",\r\n                }}\r\n              >\r\n                <MenuItem value=\"500\">Easy</MenuItem>\r\n                <MenuItem value=\"300\">Medium</MenuItem>\r\n                <MenuItem value=\"100\">Hard</MenuItem>\r\n                <MenuItem value=\"75\">Pro</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={wallCollision}\r\n                    onChange={this.handleChangeBool(\"wallCollision\")}\r\n                    value=\"wallCollision\"\r\n                  />\r\n                }\r\n                label=\"Wall collisions\"\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={opponentCollision}\r\n                    onChange={this.handleChangeBool(\"opponentCollision\")}\r\n                    value=\"opponentCollision\"\r\n                  />\r\n                }\r\n                label=\"Opponent collisions\"\r\n              />\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={opponentCollision && eatOpponents}\r\n                    disabled={!opponentCollision}\r\n                    onChange={this.handleChangeBool(\"eatOpponents\")}\r\n                    value=\"eatOpponents\"\r\n                  />\r\n                }\r\n                label=\"Eat opponent on collision\"\r\n              />\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={eatOpponents && absorbAll}\r\n                    disabled={!eatOpponents}\r\n                    onChange={this.handleChangeBool(\"absorbAll\")}\r\n                    value=\"absorbAll\"\r\n                  />\r\n                }\r\n                label=\"Absorb all pieces eaten\"\r\n              />\r\n            </FormControl>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={surveyPlayers}\r\n                  onChange={this.handleChangeBool(\"surveyPlayers\")}\r\n                  value=\"surveyPlayers\"\r\n                />\r\n              }\r\n              label=\"Survey players after game\"\r\n            />\r\n          </FormGroup>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseSetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseSetup;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport QRCode from \"qrcode.react\";\r\n\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: \"starting\" });\r\n  }\r\n\r\n  render() {\r\n    const { game } = this.props;\r\n    let { players } = game;\r\n    if (!players) {\r\n      players = [];\r\n    } else {\r\n      players = Object.values(players);\r\n    }\r\n    let playUrl =\r\n      game.gametype === \"golf\" || game.gametype === \"golfrace\"\r\n        ? \"https://mannfeldt.github.io/golf/?pin=\" + game.gameId\r\n        : \"https://mannfeldt.github.io/stagehoot/#/play?pin=\" + game.gameId;\r\n    // här ska jag skapa qr kod också över länken. med ?pin=xxxx\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography variant=\"h2\">\r\n            <span>Join game with Game PIN: </span>\r\n            <span className=\"dynamic-text\">{game.gameId}</span>\r\n          </Typography>\r\n          {game.gametype === \"golf\" || game.gametype === \"golfrace\" ? (\r\n            <div style={{ marginTop: 30 }}>\r\n              <QRCode value={playUrl} size={200} />\r\n              <Typography variant=\"h4\" style={{ marginTop: 30 }}>\r\n                mannfeldt.github.io/golf\r\n              </Typography>\r\n            </div>\r\n          ) : (\r\n            <div style={{ marginTop: 40 }}>\r\n              <QRCode value={playUrl} size={200} />\r\n              <Typography variant=\"h4\" style={{ marginTop: 40 }}>\r\n                mannfeldt.github.io/stagehoot\r\n              </Typography>\r\n            </div>\r\n          )}\r\n          <Typography variant=\"subtitle1\" style={{ marginTop: 20 }}>\r\n            {game.title}\r\n          </Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Button onClick={this.nextPhase} variant=\"contained\">\r\n            Start\r\n          </Button>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Grid container>\r\n            <Grid container>\r\n              {players.map((player) => (\r\n                <Grid key={player.key} item xs={3}>\r\n                  <Typography\r\n                    paragraph\r\n                    variant=\"body1\"\r\n                    className=\"dynamic-text\"\r\n                  >\r\n                    {player.name}\r\n                  </Typography>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseConnection;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n    this.startCounter();\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    const counter = 5;\r\n    const i = setInterval(() => {\r\n      that.setState(state => ({\r\n        counter: state.counter + 1,\r\n      }));\r\n\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: 'gameplay' });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseStarting;\r\n","const gridSize = 20;\r\nfunction isInvalidMove(keyPress, currentDirection) {\r\n  if (!keyPress) {\r\n    return true;\r\n  }\r\n  const invalidMovment = {\r\n    left: \"right\",\r\n    right: \"left\",\r\n    up: \"down\",\r\n    down: \"up\",\r\n  };\r\n  return invalidMovment[keyPress] === currentDirection;\r\n}\r\nfunction getInitialFoods(amount) {\r\n  const initialFoods = [];\r\n  for (let i = 0; i < amount; i++) {\r\n    const food = {\r\n      active: false,\r\n    };\r\n    initialFoods.push(food);\r\n  }\r\n  return initialFoods;\r\n}\r\n// vissa snakes lyckas inte äta foods? är det en bugg med konstiga synkningar mot state när det är så många?\r\n// det verkar inte heller fungera med positioneringen indexof. Ormarna hamnar ibland precis brevid varandra.\r\nfunction getSnakesInStartingPosition(snakes, canvasSettings) {\r\n  for (let i = 0, len = snakes.length; i < len; i++) {\r\n    const snake = snakes[i];\r\n    snake.direction = snake.actions[i % 4];\r\n    snake.moves = [];\r\n    let pos;\r\n    switch (snake.direction) {\r\n      case \"right\":\r\n        pos = getRandomStartingPosLeft(snakes, canvasSettings.height);\r\n        snake.body = [\r\n          {\r\n            x: pos.x,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x - gridSize,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x - gridSize * 2,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x - gridSize * 3,\r\n            y: pos.y,\r\n          },\r\n        ];\r\n        break;\r\n      case \"left\":\r\n        pos = getRandomStartingPosRight(snakes, canvasSettings);\r\n        snake.body = [\r\n          {\r\n            x: pos.x,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x + gridSize,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x + gridSize * 2,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x + gridSize * 3,\r\n            y: pos.y,\r\n          },\r\n        ];\r\n        break;\r\n      case \"up\":\r\n        pos = getRandomStartingPosBottom(snakes, canvasSettings);\r\n        snake.body = [\r\n          {\r\n            x: pos.x,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y + gridSize,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y + gridSize * 2,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y + gridSize * 3,\r\n          },\r\n        ];\r\n        break;\r\n      case \"down\":\r\n        pos = getRandomStartingPosTop(snakes, canvasSettings.width);\r\n        snake.body = [\r\n          {\r\n            x: pos.x,\r\n            y: pos.y,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y - gridSize,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y - gridSize * 2,\r\n          },\r\n          {\r\n            x: pos.x,\r\n            y: pos.y - gridSize * 3,\r\n          },\r\n        ];\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return snakes;\r\n}\r\n\r\nfunction getRandomStartingPosTop(snakes, canvasWidth) {\r\n  const snakesDown = snakes.filter((s) => s.direction === \"down\" && s.body);\r\n  const existingValues = [...new Set(snakesDown.map((s) => s.body[0].x))];\r\n\r\n  const margin = gridSize * 8;\r\n  const xMax = canvasWidth - margin * 2;\r\n  const y = gridSize * 2;\r\n  const x = getRandomStartingPos(xMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosBottom(snakes, canvasSettings) {\r\n  const snakesDown = snakes.filter((s) => s.direction === \"up\" && s.body);\r\n  const existingValues = [...new Set(snakesDown.map((s) => s.body[0].x))];\r\n\r\n  const margin = gridSize * 8;\r\n  const xMax = canvasSettings.width - margin * 2;\r\n  const y = canvasSettings.height - gridSize * 3;\r\n  const x = getRandomStartingPos(xMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosRight(snakes, canvasSettings) {\r\n  const snakesDown = snakes.filter((s) => s.direction === \"left\" && s.body);\r\n  const existingValues = [...new Set(snakesDown.map((s) => s.body[0].y))];\r\n\r\n  const margin = gridSize * 8;\r\n  const yMax = canvasSettings.height - margin * 2;\r\n  const x = canvasSettings.width - gridSize * 3;\r\n  const y = getRandomStartingPos(yMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPosLeft(snakes, canvasHeight) {\r\n  const snakesDown = snakes.filter((s) => s.direction === \"right\" && s.body);\r\n  const existingValues = [...new Set(snakesDown.map((s) => s.body[0].y))];\r\n\r\n  const margin = gridSize * 8;\r\n  const yMax = canvasHeight - margin * 2;\r\n  const x = gridSize * 2;\r\n  const y = getRandomStartingPos(yMax, margin, existingValues);\r\n  return { x, y };\r\n}\r\n\r\nfunction getRandomStartingPos(max, margin, existingValues) {\r\n  const value =\r\n    Math.round((Math.random() * max) / gridSize) * gridSize + margin;\r\n  const posTaken = existingValues.some(\r\n    (v) => v === value || v === value - gridSize || v === value + gridSize\r\n  );\r\n\r\n  if (posTaken) {\r\n    return getRandomStartingPos(max, margin, existingValues, gridSize);\r\n  }\r\n  return value;\r\n}\r\nfunction getRandomCanvasPositionMargin(yMax, xMax) {\r\n  const x =\r\n    Math.round((Math.random() * (xMax - gridSize * 14)) / gridSize) * gridSize +\r\n    gridSize * 4;\r\n  const y =\r\n    Math.round((Math.random() * (yMax - gridSize * 2)) / gridSize) * gridSize +\r\n    gridSize * 2;\r\n  return { x, y };\r\n}\r\n// denna function är inte så lätt, kan troligen förenklas\r\nfunction detectOpponentCollision(snakes, eatOpponents, absorbAll) {\r\n  for (let i = 0, len = snakes.length; i < len; i++) {\r\n    const currentSnake = snakes[i];\r\n    if (currentSnake.dead) {\r\n      // om den redan är död så fortsätt. t.ex. en headon så kör jag båda två till dead direkt.\r\n      continue;\r\n    }\r\n    for (let j = 0; j < len; j++) {\r\n      // om opponents är död så ska man inte kunna krocka med den. döda snakes har ju fortfarande coordinater. alt är att ta bort coordinaterna\r\n      if (j === i || snakes[j].dead) {\r\n        continue;\r\n      }\r\n      const opponentSnake = snakes[j];\r\n      // lägga till en function där om man äter body[1] så där opponent?\r\n      for (let k = 0, len2 = opponentSnake.body.length; k < len2; k++) {\r\n        const collision =\r\n          opponentSnake.body[k].x === currentSnake.body[0].x &&\r\n          opponentSnake.body[k].y === currentSnake.body[0].y;\r\n        if (collision) {\r\n          if (k === 0) {\r\n            currentSnake.dead = true;\r\n            opponentSnake.dead = true;\r\n            // collision head>head\r\n          } else if (eatOpponents) {\r\n            // snakes\r\n            if (k === 1) {\r\n              opponentSnake.dead = true;\r\n            } else {\r\n              let growLen = absorbAll ? opponentSnake.body.length - k : 1;\r\n              opponentSnake.body.length = k;\r\n              len2 = k;\r\n\r\n              //TODO här borde jag kunna göra något likt.\r\n              // currentSnake.body.add.. men blir nog fult\r\n              //eller testa det blir dubbla body på den sista samma coordinat, när densen popas i snake.js så finns det redan en där som tar över så ser ut som den växer då??\r\n\r\n              for (let m = 0; m < growLen; m++) {\r\n                currentSnake.body.push({\r\n                  x: currentSnake.body[0].x,\r\n                  y: currentSnake.body[0].y,\r\n                });\r\n              }\r\n\r\n              //TODO^ den får alltså ett till huvud som följder med. och stannar kvar när tidigare huvudet popas?\r\n\r\n              // snakes[j].body.length = k;\r\n            }\r\n            // kan jag använda opponentSnakeBody istället för snakes[j].body\r\n            // opponentSnakeBody.length = k;?\r\n          } else {\r\n            currentSnake.dead = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return snakes;\r\n}\r\n\r\nfunction detectSelfCollision(snake) {\r\n  const { body } = snake;\r\n  if (body.length < 5) {\r\n    return false;\r\n  }\r\n  // denna är nog inte lika snabb som for loopen?\r\n  const collision = body\r\n    .slice(4)\r\n    .some((b) => b.x === body[0].x && b.y === body[0].y);\r\n  return collision;\r\n  /*\r\n    for (let i = 4, len = body.length; i < len; i++) {\r\n      const selfCollison = body[i].x === body[0].x && body[i].y === body[0].y;\r\n      if (selfCollison) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n    */\r\n}\r\n\r\nfunction detectWallCollision(snakeHead, maxHeight, maxWidth) {\r\n  const leftCollison = snakeHead.x < 0;\r\n  const topCollison = snakeHead.y < 0;\r\n  const rightCollison = snakeHead.x > maxWidth - gridSize;\r\n  const bottomCollison = snakeHead.y > maxHeight - gridSize;\r\n  return leftCollison || topCollison || rightCollison || bottomCollison;\r\n}\r\n/*\r\n  util functions that i can move to snakeUtil.js\r\n  */\r\nexport {\r\n  detectOpponentCollision,\r\n  getRandomCanvasPositionMargin,\r\n  getSnakesInStartingPosition,\r\n  getInitialFoods,\r\n  detectWallCollision,\r\n  detectSelfCollision,\r\n  getRandomStartingPosLeft,\r\n  getRandomStartingPosRight,\r\n  getRandomStartingPosBottom,\r\n  getRandomStartingPosTop,\r\n  isInvalidMove,\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nlet canvas;\r\nlet context;\r\nlet SCREEN_WIDTH = window.innerWidth;\r\nlet SCREEN_HEIGHT = window.innerHeight;\r\nlet first = true;\r\nconst mousePos = {\r\n  x: 400,\r\n  y: 300,\r\n};\r\nlet particles = [];\r\nlet rockets = [];\r\nconst MAX_PARTICLES = 400;\r\nconst colorCode = 0;\r\nconst golfimg = new Image();\r\ngolfimg.src =\r\n  \"https://www.golfworldtravel.se/wp-content/uploads/2013/12/Arabella-Sheraton-Golf-4.jpg\";\r\n\r\nfunction loop(gametype) {\r\n  // update screen size\r\n  if (SCREEN_WIDTH != window.innerWidth) {\r\n    canvas.width = SCREEN_WIDTH = window.innerWidth;\r\n  }\r\n  if (SCREEN_HEIGHT != window.innerHeight) {\r\n    canvas.height = SCREEN_HEIGHT = window.innerHeight;\r\n  }\r\n\r\n  context.save();\r\n  if (first) {\r\n    first = false;\r\n    context.globalAlpha = 1;\r\n  } else {\r\n    context.globalAlpha = 0.2;\r\n  }\r\n  if (gametype === \"golf\" || gametype === \"golfrace\") {\r\n    context.drawImage(golfimg, 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\r\n  } else {\r\n    context.fillStyle = \"#26262e\";\r\n    context.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\r\n  }\r\n  context.restore();\r\n\r\n  // clear canvas\r\n  // context.fillStyle = \"rgba(0, 0, 0, 0.05)\";\r\n  // context.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\r\n  const existingRockets = [];\r\n\r\n  for (let i = 0; i < rockets.length; i++) {\r\n    // update and render\r\n    rockets[i].update();\r\n    rockets[i].render(context);\r\n\r\n    // calculate distance with Pythagoras\r\n    const distance = Math.sqrt(\r\n      Math.pow(mousePos.x - rockets[i].pos.x, 2) +\r\n        Math.pow(mousePos.y - rockets[i].pos.y, 2)\r\n    );\r\n\r\n    // random chance of 1% if rockets is above the middle\r\n    const randomChance =\r\n      rockets[i].pos.y < (SCREEN_HEIGHT * 2) / 3\r\n        ? Math.random() * 100 <= 1\r\n        : false;\r\n\r\n    /* Explosion rules\r\n           - 80% of screen\r\n          - going down\r\n          - close to the mouse\r\n          - 1% chance of random explosion\r\n      */\r\n    if (\r\n      rockets[i].pos.y < SCREEN_HEIGHT / 5 ||\r\n      rockets[i].vel.y >= 0 ||\r\n      distance < 50 ||\r\n      randomChance\r\n    ) {\r\n      rockets[i].explode();\r\n    } else {\r\n      existingRockets.push(rockets[i]);\r\n    }\r\n  }\r\n\r\n  rockets = existingRockets;\r\n\r\n  const existingParticles = [];\r\n\r\n  for (let i = 0; i < particles.length; i++) {\r\n    particles[i].update();\r\n\r\n    // render and save particles that can be rendered\r\n    if (particles[i].exists()) {\r\n      particles[i].render(context);\r\n      existingParticles.push(particles[i]);\r\n    }\r\n  }\r\n\r\n  // update array with existing particles - old particles should be garbage collected\r\n  particles = existingParticles;\r\n\r\n  while (particles.length > MAX_PARTICLES) {\r\n    particles.shift();\r\n  }\r\n}\r\n\r\nfunction Particle(pos) {\r\n  this.pos = {\r\n    x: pos ? pos.x : 0,\r\n    y: pos ? pos.y : 0,\r\n  };\r\n  this.vel = {\r\n    x: 0,\r\n    y: 0,\r\n  };\r\n  this.shrink = 0.97;\r\n  this.size = 2;\r\n\r\n  this.resistance = 1;\r\n  this.gravity = 0;\r\n\r\n  this.flick = false;\r\n\r\n  this.alpha = 1;\r\n  this.fade = 0;\r\n  this.color = 0;\r\n}\r\n\r\nParticle.prototype.update = function() {\r\n  // apply resistance\r\n  this.vel.x *= this.resistance;\r\n  this.vel.y *= this.resistance;\r\n\r\n  // gravity down\r\n  this.vel.y += this.gravity;\r\n\r\n  // update position based on speed\r\n  this.pos.x += this.vel.x;\r\n  this.pos.y += this.vel.y;\r\n\r\n  // shrink\r\n  this.size *= this.shrink;\r\n\r\n  // fade out\r\n  this.alpha -= this.fade;\r\n};\r\n\r\nParticle.prototype.render = function(c) {\r\n  if (!this.exists()) {\r\n    return;\r\n  }\r\n\r\n  c.save();\r\n\r\n  c.globalCompositeOperation = \"lighter\";\r\n\r\n  const x = this.pos.x;\r\n\r\n  const y = this.pos.y;\r\n\r\n  const r = this.size / 2;\r\n\r\n  const gradient = c.createRadialGradient(x, y, 0.1, x, y, r);\r\n  gradient.addColorStop(0.1, `rgba(255,255,255,${this.alpha})`);\r\n  gradient.addColorStop(0.8, `hsla(${this.color}, 100%, 50%, ${this.alpha})`);\r\n  gradient.addColorStop(1, `hsla(${this.color}, 100%, 50%, 0.1)`);\r\n\r\n  c.fillStyle = gradient;\r\n\r\n  c.beginPath();\r\n  c.arc(\r\n    this.pos.x,\r\n    this.pos.y,\r\n    this.flick ? Math.random() * this.size : this.size,\r\n    0,\r\n    Math.PI * 2,\r\n    true\r\n  );\r\n  c.closePath();\r\n  c.fill();\r\n\r\n  c.restore();\r\n};\r\n\r\nParticle.prototype.exists = function() {\r\n  return this.alpha >= 0.1 && this.size >= 1;\r\n};\r\n\r\nfunction Rocket(x) {\r\n  Particle.apply(this, [\r\n    {\r\n      x,\r\n      y: SCREEN_HEIGHT,\r\n    },\r\n  ]);\r\n\r\n  this.explosionColor = 0;\r\n}\r\n\r\nRocket.prototype = new Particle();\r\nRocket.prototype.constructor = Rocket;\r\n\r\nRocket.prototype.explode = function() {\r\n  const count = Math.random() * 10 + 80;\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const particle = new Particle(this.pos);\r\n    const angle = Math.random() * Math.PI * 2;\r\n\r\n    // emulate 3D effect by using cosine and put more particles in the middle\r\n    const speed = Math.cos((Math.random() * Math.PI) / 2) * 15;\r\n\r\n    particle.vel.x = Math.cos(angle) * speed;\r\n    particle.vel.y = Math.sin(angle) * speed;\r\n\r\n    particle.size = 10;\r\n\r\n    particle.gravity = 0.2;\r\n    particle.resistance = 0.92;\r\n    particle.shrink = Math.random() * 0.05 + 0.93;\r\n\r\n    particle.flick = true;\r\n    particle.color = this.explosionColor;\r\n\r\n    particles.push(particle);\r\n  }\r\n};\r\n\r\nRocket.prototype.render = function(c) {\r\n  if (!this.exists()) {\r\n    return;\r\n  }\r\n\r\n  c.save();\r\n\r\n  c.globalCompositeOperation = \"lighter\";\r\n\r\n  const x = this.pos.x;\r\n\r\n  const y = this.pos.y;\r\n\r\n  const r = this.size / 2;\r\n\r\n  const gradient = c.createRadialGradient(x, y, 0.1, x, y, r);\r\n  gradient.addColorStop(0.1, `rgba(255, 255, 255 ,${this.alpha})`);\r\n  gradient.addColorStop(1, `rgba(0, 0, 0, ${this.alpha})`);\r\n\r\n  c.fillStyle = gradient;\r\n\r\n  c.beginPath();\r\n  c.arc(\r\n    this.pos.x,\r\n    this.pos.y,\r\n    this.flick ? (Math.random() * this.size) / 2 + this.size / 2 : this.size,\r\n    0,\r\n    Math.PI * 2,\r\n    true\r\n  );\r\n  c.closePath();\r\n  c.fill();\r\n\r\n  c.restore();\r\n};\r\nfunction launch() {\r\n  launchFrom(mousePos.x);\r\n}\r\nfunction launchFrom(x) {\r\n  if (rockets.length < 10) {\r\n    const rocket = new Rocket(x);\r\n    rocket.explosionColor = Math.floor((Math.random() * 360) / 10) * 10;\r\n    rocket.vel.y = Math.random() * -3 - 4;\r\n    rocket.vel.x = Math.random() * 6 - 3;\r\n    rocket.size = 8;\r\n    rocket.shrink = 0.999;\r\n    rocket.gravity = 0.01;\r\n    rockets.push(rocket);\r\n  }\r\n}\r\nclass PhaseFinalResult extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.replayGame = this.replayGame.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { game } = this.props;\r\n\r\n    canvas = document.getElementById(\"fireworkscanvas\");\r\n    context = canvas.getContext(\"2d\");\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    setInterval(launch, 800);\r\n    setInterval(() => loop(game.gametype), 1000 / 50);\r\n  }\r\n\r\n  replayGame() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: \"starting\" });\r\n  }\r\n\r\n  /*\r\nskriv ut vinnaren och hur lång tid gamet tog\r\n(använd minigame.ticks och minigame.difficulty för att räkna ut sekunder)\r\nminigame.winners inner håller vinnare/vinnarna.\r\nkan vara så att winners inte finns om det snakes.length === 1\r\n men då är ju den \"vinnaren\". typ i coop singelplayer\r\npodium\r\n  */\r\n  render() {\r\n    const { gameFunc, game } = this.props;\r\n    const cheight = canvas ? canvas.height : window.innerHeight;\r\n    const cWidth = canvas ? canvas.width : window.innerWidth;\r\n    let winners;\r\n    let winnerScore;\r\n    if (game.minigame.winners && game.minigame.winners.length > 0) {\r\n      let winnerKeys = game.minigame.winners[0].playerKeys;\r\n      winners = winnerKeys.map((key) => game.players[key]);\r\n      winnerScore = game.minigame.winners[0].score;\r\n    } else {\r\n      winners = [game.players[game.minigame.leaderboard[0].playerKey]];\r\n      winnerScore = game.minigame.leaderboard[0].totalScore;\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <canvas id=\"fireworkscanvas\" />\r\n        <div\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            marginTop: cheight / 2,\r\n            marginLeft: cWidth / 2,\r\n          }}\r\n        >\r\n          <Typography variant=\"h2\" style={{ color: \"white\" }}>{`${winners.map(\r\n            (winner) => winner.name\r\n          )} vinner med ${winnerScore} poäng`}</Typography>\r\n        </div>\r\n        <div style={{ position: \"absolute\", top: 0, marginTop: cheight }}>\r\n          <div>\r\n            <Button onClick={this.replayGame}>Replay game</Button>\r\n            <Button onClick={gameFunc.restart}>Re-host game</Button>\r\n            <Button onClick={gameFunc.quit}>Quit game</Button>\r\n            <Button onClick={() => alert(\"show results\")}>Show results</Button>\r\n            <Button onClick={() => alert(\"start survey\")}>Start survey</Button>\r\n            <Button>\r\n              <Link to=\"/create\">Create new game</Link>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseFinalResult.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseFinalResult;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tetris extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                tetris.js\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tetris;","import React, { PureComponent } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseEnd extends PureComponent {\r\n  render() {\r\n    const { game } = this.props;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography>{`hur seer detta ut konstigt med dollarsign?HostEnd toggleheader()${game.title}`}</Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseEnd.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default PhaseEnd;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport CountdownAnimation from \"../../common/CountdownAnimation\";\r\n\r\nfunction chunkify(a, nr) {\r\n  let n = nr;\r\n  if (n < 2) {\r\n    return [a];\r\n  }\r\n  const len = a.length;\r\n  const out = [];\r\n  let i = 0;\r\n  let size;\r\n  if (len % n === 0) {\r\n    size = Math.floor(len / n);\r\n    while (i < len) {\r\n      out.push(a.slice(i, (i += size)));\r\n    }\r\n  } else {\r\n    while (i < len) {\r\n      size = Math.ceil((len - i) / n);\r\n      n -= 1;\r\n      out.push(a.slice(i, (i += size)));\r\n    }\r\n  }\r\n  return out;\r\n}\r\nfunction createSnakes(players) {\r\n  const playerKeys = Object.keys(players);\r\n  const snakes = [];\r\n  // mocka flera spelare genom att loopa på x och sen byt player.key till playerKeys[0]\r\n  for (let i = 0; i < playerKeys.length; i++) {\r\n    const player = players[playerKeys[i]];\r\n    const snake = {\r\n      playerKeys: [player.key],\r\n      actions: [\"up\", \"down\", \"right\", \"left\"],\r\n      score: 0,\r\n      color: SNAKE_COLORS[i % SNAKE_COLORS.length],\r\n      name: SNAKE_NAMES[i % SNAKE_NAMES.length],\r\n      // start positioner ska randomas helt, inklusive direction, varanan ska starta nereifrån upp, uppifrån ner, höger till vänster, vänster till göger..\r\n      // fyra olika random metoder och y måste vara unikt för de som kör horizontelt och x måste vara unikt för som kör vertikalt, kanske även ett mellanrum mellan varje snake\r\n      id: i,\r\n    };\r\n    snakes.push(snake);\r\n    // här ska jag lägga till såd et finns en food per player?\r\n    // foods.push(food);\r\n  }\r\n  return snakes;\r\n}\r\n\r\nfunction createTeamSnakes(players) {\r\n  const playerKeys = Object.keys(players);\r\n  const startingY = 100;\r\n  const startingX = 300;\r\n  const snakes = [];\r\n  const nrOfSnakes = Math.max(2, Math.ceil(playerKeys.length / 4));\r\n  // coop snakes här vil jag kunna hitta ultimata updelningen. man ska kunna vara 2 eller 4 per orm. om det är ojämnt antal får man vara en 3a.\r\n  // chunkify tar in playerkeys och en siffra på hur många snakes det ska vara och delar upp dem men då behöver jag veta hur många snakes jag vill ha?\r\n  // kanske får göra en helt egen chunkify? behöver veta hur mågna snakes jag vill ha och sen kanske det löser sig självt i loopen\r\n\r\n  for (let i = 0; i < nrOfSnakes; i++) {\r\n    const snake = {\r\n      playerKeys: [],\r\n      direction: \"right\",\r\n      actions: [\"up\", \"down\", \"right\", \"left\"],\r\n      id: i,\r\n      color: SNAKE_COLORS[i % SNAKE_COLORS.length],\r\n      name: SNAKE_NAMES[i % SNAKE_NAMES.length],\r\n      score: 0,\r\n      body: [\r\n        {\r\n          x: startingX,\r\n          y: startingY,\r\n        },\r\n        {\r\n          x: startingX - gridSize,\r\n          y: startingY,\r\n        },\r\n        {\r\n          x: startingX - gridSize * 2,\r\n          y: startingY,\r\n        },\r\n        {\r\n          x: startingX - gridSize * 3,\r\n          y: startingY,\r\n        },\r\n      ],\r\n    };\r\n    snakes.push(snake);\r\n  }\r\n\r\n  let remainingPlayers = playerKeys;\r\n  let snakeIndex = 0;\r\n  while (remainingPlayers.length > 0) {\r\n    let snake = snakes[snakeIndex];\r\n    snake.playerKeys.push(remainingPlayers.pop());\r\n\r\n    snakeIndex++;\r\n    if (snakeIndex > nrOfSnakes - 1) {\r\n      snakeIndex = 0;\r\n    }\r\n  }\r\n\r\n  return snakes;\r\n}\r\nfunction createCoopSnakes(players) {\r\n  // alla players kontrollerar samma snake. antingen med en knapp var, eller så har alla alla knappar?\r\n  // kanske en spelare får bara 1 klick? samarbetesövning.\r\n  const playerKeys = Object.keys(players);\r\n  const startingY = 90;\r\n  const startingX = 300;\r\n  const snakes = [];\r\n  const snake = {\r\n    playerKeys,\r\n    direction: \"right\",\r\n    actions: [\"up\", \"down\", \"right\", \"left\"],\r\n    score: 0,\r\n    color: SNAKE_COLORS[Math.floor(Math.random() * SNAKE_COLORS.length)],\r\n    name: SNAKE_NAMES[Math.floor(Math.random() * SNAKE_NAMES.length)],\r\n    id: 0,\r\n    body: [\r\n      {\r\n        x: startingX,\r\n        y: startingY,\r\n      },\r\n      {\r\n        x: startingX - gridSize,\r\n        y: startingY,\r\n      },\r\n      {\r\n        x: startingX - gridSize * 2,\r\n        y: startingY,\r\n      },\r\n      {\r\n        x: startingX - gridSize * 3,\r\n        y: startingY,\r\n      },\r\n    ],\r\n  };\r\n  snakes.push(snake);\r\n  return snakes;\r\n}\r\nconst SNAKE_COLORS = [\r\n  \"#F44336\",\r\n  \"#9C27B0\",\r\n  \"#2196F3\",\r\n  \"#4CAF50\",\r\n  \"#FFEB3B\",\r\n  \"#FF9800\",\r\n  \"#607D8B\",\r\n  \"#795548\",\r\n  \"#E91E63\",\r\n  \"#3F51B5\",\r\n  \"#673AB7\",\r\n  \"#00BCD4\",\r\n  \"#03A9F4\",\r\n  \"#8BC34A\",\r\n  \"#CDDC39\",\r\n  \"#009688\",\r\n  \"#FFC107\",\r\n  \"#FF5722\",\r\n];\r\nconst SNAKE_NAMES = [\r\n  \"Stan\",\r\n  \"Jane\",\r\n  \"Sara\",\r\n  \"Dan\",\r\n  \"Lisa\",\r\n  \"Joe\",\r\n  \"Rose\",\r\n  \"Ray\",\r\n  \"Lyra\",\r\n  \"Sam\",\r\n  \"Lucy\",\r\n  \"Ben\",\r\n  \"Noa\",\r\n  \"Mark\",\r\n  \"Eve\",\r\n  \"Ned\",\r\n  \"Ann\",\r\n  \"Todd\",\r\n];\r\nconst gridSize = 20;\r\nclass SnakeStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.startCounter();\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    let counter = 5;\r\n    const i = setInterval(() => {\r\n      counter -= 1;\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game, gameFunc } = this.props;\r\n    let snakes = [];\r\n    const snakeGenerator = {\r\n      classic: createSnakes(game.players),\r\n      team: createTeamSnakes(game.players),\r\n      coop: createCoopSnakes(game.players),\r\n    };\r\n    snakes = snakeGenerator[game.minigame.multiplayerMode];\r\n\r\n    for (let i = 0; i < snakes.length; i++) {\r\n      let snake = snakes[i];\r\n      const actionChunks = chunkify(snake.actions, snake.playerKeys.length);\r\n      for (let j = 0; j < snake.playerKeys.length; j++) {\r\n        const player = game.players[snake.playerKeys[j]];\r\n        player.snakeId = snake.id;\r\n        player.controlActions = actionChunks[j];\r\n      }\r\n    }\r\n\r\n    game.minigame.snakes = snakes;\r\n    game.phase = \"gameplay\";\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnakeStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default SnakeStarting;\r\n","export const WIDTH = 500;\r\nexport const HEIGHT = 250;\r\n\r\nexport const HOLE_HEIGHT = 10;\r\nexport const HOLE_CURVE_DEPTH = 7;\r\nexport const HOLE_WIDTH = 10;\r\nexport const BALL_RADIUS = 3;\r\nexport const BALL_RADIUS_CONTROLLER = 12;\r\n\r\nexport const MIN_POWER = 10;\r\nexport const MAX_POWER = 150;\r\nexport const SWING_STEP = 75;\r\n\r\nexport const TIMER_MS = 45 * 1000;\r\nexport const OVER_TIMER_MS = 7 * 1000;\r\nexport const HURRY_UP_MS = 15 * 1000;\r\nexport const IDLE_KICK_MS = 60 * 1000;\r\nexport const MATCH_LENGTH_MS = 5 * 60 * 1000;\r\nexport const MATCH_OVER_MS = 10 * 1000;\r\n\r\nexport const AIR_COLOR = \"#2f2f2f\";\r\nexport const GRASS_COLOR = \"green\";\r\nexport const ROUGH_COLOR = \"green\";\r\nexport const FAIRWAY_COLOR = \"green\";\r\nexport const GREEN_COLOR = \"green\";\r\nexport const BUNKER_COLOR = \"green\";\r\nexport const WATER_COLOR = \"blue\";\r\n\r\nexport const PENALTY_STROKES = 12;\r\n\r\nexport const PHYSICS_SPEED_FACTOR = 3;\r\n\r\nexport const SCORE_TERMS = [\r\n  {\r\n    name: \"Albatross\",\r\n    score: -3,\r\n  },\r\n  {\r\n    name: \"Eagle\",\r\n    score: -2,\r\n  },\r\n  {\r\n    name: \"Birdie\",\r\n    score: -1,\r\n  },\r\n  {\r\n    name: \"Par\",\r\n    score: 0,\r\n  },\r\n  {\r\n    name: \"Bogey\",\r\n    score: 1,\r\n  },\r\n  {\r\n    name: \"Double bogey\",\r\n    score: 2,\r\n  },\r\n  {\r\n    name: \"Triple bogey\",\r\n    score: 3,\r\n  },\r\n  {\r\n    name: \"Quadruple bogey\",\r\n    score: 4,\r\n  },\r\n];\r\n\r\nexport const CLUBS = [\r\n  {\r\n    name: \"Wood\",\r\n    type: \"wood\",\r\n    id: 0,\r\n    loft: 22,\r\n    powerFactor: 3.8,\r\n    max: 800,\r\n  },\r\n  {\r\n    name: \"Hybrid\",\r\n    type: \"iron\",\r\n    id: 1,\r\n    loft: 26,\r\n    powerFactor: 3.6,\r\n    max: 800,\r\n  },\r\n  {\r\n    name: \"3 Iron\",\r\n    type: \"iron\",\r\n    id: 2,\r\n    loft: 31,\r\n    powerFactor: 3.2,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"4 Iron\",\r\n    type: \"iron\",\r\n    id: 3,\r\n    loft: 34,\r\n    powerFactor: 3.15,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"5 Iron\",\r\n    type: \"iron\",\r\n    id: 4,\r\n    loft: 37,\r\n    powerFactor: 3.1,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"6 Iron\",\r\n    type: \"iron\",\r\n    id: 5,\r\n    loft: 40,\r\n    powerFactor: 3.05,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"7 Iron\",\r\n    type: \"iron\",\r\n    id: 6,\r\n    loft: 43,\r\n    powerFactor: 3,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"8 Iron\",\r\n    type: \"iron\",\r\n    id: 7,\r\n    loft: 46,\r\n    powerFactor: 2.95,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"9 Iron\",\r\n    type: \"iron\",\r\n    id: 8,\r\n    loft: 49,\r\n    powerFactor: 2.9,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"Wedge\",\r\n    type: \"iron\",\r\n    id: 9,\r\n    loft: 62,\r\n    powerFactor: 2.75,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"Chipper\",\r\n    type: \"iron\",\r\n    id: 10,\r\n    loft: 78,\r\n    powerFactor: 2.6,\r\n    max: 700,\r\n  },\r\n  {\r\n    name: \"Putter\",\r\n    type: \"putt\",\r\n    id: 11,\r\n    loft: 1,\r\n    powerFactor: 1.6,\r\n    max: 400,\r\n  },\r\n];\r\n\r\nexport const GROUND_COLORS = [\"orange\", \"brown\", \"gray\"];\r\n","import { sample } from \"lodash\";\r\nimport tinycolor from \"tinycolor2\";\r\nimport * as p2 from \"p2\";\r\nimport {\r\n  HOLE_HEIGHT,\r\n  HOLE_CURVE_DEPTH,\r\n  HOLE_WIDTH,\r\n  GROUND_COLORS,\r\n  BALL_RADIUS,\r\n  CLUBS,\r\n  SCORE_TERMS,\r\n} from \"./GolfConstants\";\r\n\r\n/* get an int between min and max inclusive */\r\nfunction randInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n\r\nfunction shuffle(a) {\r\n  for (let i = a.length; i; i -= 1) {\r\n    const j = Math.floor(Math.random() * i);\r\n    const x = a[i - 1];\r\n    a[i - 1] = a[j];\r\n    a[j] = x;\r\n  }\r\n}\r\n\r\nconst ballMaterial = new p2.Material();\r\n\r\nconst fairwayMaterial = new p2.Material();\r\nconst roughMaterial = new p2.Material();\r\nconst greenMaterial = new p2.Material();\r\n\r\nconst holeMaterial = new p2.Material();\r\n\r\n//https://schteppe.github.io/p2.js/docs/classes/ContactMaterial.html\r\n//kolla upp vad relaxation etc är. finns fler andra också..\r\nconst ballFairwayContact = new p2.ContactMaterial(\r\n  ballMaterial,\r\n  fairwayMaterial,\r\n  {\r\n    friction: 1.2,\r\n    restitution: 0.4,\r\n  }\r\n);\r\n\r\nconst ballRoughContact = new p2.ContactMaterial(ballMaterial, fairwayMaterial, {\r\n  friction: 2,\r\n  restitution: 0.2,\r\n});\r\n\r\nconst ballGreenContact = new p2.ContactMaterial(ballMaterial, fairwayMaterial, {\r\n  friction: 0.8,\r\n  restitution: 0.6,\r\n});\r\n\r\nconst ballHoleContact = new p2.ContactMaterial(ballMaterial, holeMaterial, {\r\n  friction: 0.1,\r\n  restitution: 0,\r\n  relaxation: 8,\r\n});\r\n\r\nconst BALL_GROUP = Math.pow(2, 1);\r\nconst GROUND_GROUP = Math.pow(2, 2);\r\n\r\nexport function createWorld() {\r\n  const world = new p2.World({\r\n    gravity: [0, 60],\r\n  });\r\n\r\n  world.sleepMode = p2.World.BODY_SLEEPING;\r\n\r\n  world.addContactMaterial(ballFairwayContact);\r\n  world.addContactMaterial(ballRoughContact);\r\n  world.addContactMaterial(ballGreenContact);\r\n\r\n  world.addContactMaterial(ballHoleContact);\r\n\r\n  return world;\r\n}\r\n\r\nexport function isInvalidSwing(swingData) {\r\n  // validerar att swingen måste ha minst x antal datapunkter, vilket säkerställer att det inte var en kort snärt bara.\r\n  if (swingData.length < 10) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n/*\r\n * Resets the ball position to level spawn if ball fell off world.\r\n */\r\n\r\nfunction newBall(position, collisionMode) {\r\n  const ballShape = new p2.Circle({\r\n    radius: BALL_RADIUS,\r\n    collisionGroup: BALL_GROUP,\r\n    collisionMask: collisionMode ? GROUND_GROUP | BALL_GROUP : GROUND_GROUP,\r\n  });\r\n\r\n  ballShape.material = ballMaterial;\r\n\r\n  const ballBody = new p2.Body({\r\n    mass: 1,\r\n    position,\r\n  });\r\n  ballBody.addShape(ballShape);\r\n\r\n  ballBody.angularDamping = 0.8;\r\n  ballBody.damping = 0.18;\r\n  ballBody.sleepTimeLimit = 1;\r\n  ballBody.sleepSpeedLimit = 2;\r\n\r\n  return ballBody;\r\n}\r\n// spawn: I.List<number>\r\nexport function createBall(spawn, collisionMode) {\r\n  return newBall([spawn[0], spawn[1] - BALL_RADIUS], collisionMode);\r\n}\r\nexport function getDistanceYards(a, b) {\r\n  if (a > b) {\r\n    return Math.floor((a - b) / 4);\r\n  }\r\n  return Math.floor((b - a) / 4);\r\n}\r\nexport function identifyClubType(velocity) {\r\n  const yRatio = velocity.y / (velocity.x + velocity.y);\r\n  const loft = yRatio * 90;\r\n  if (loft < 5) return \"putt\";\r\n  const firstIron = CLUBS.find((x) => x.type === \"iron\");\r\n  if (loft < firstIron.loft - 1) {\r\n    return \"wood\";\r\n  }\r\n  return \"iron\";\r\n}\r\nexport function createBallFromInitial(position, velocity) {\r\n  const ball = newBall(position);\r\n  ball.velocity = velocity.slice(); // clone\r\n  return ball;\r\n}\r\nexport function createAudio(file) {\r\n  const snd = new Audio();\r\n  const src = document.createElement(\"source\");\r\n  src.type = \"audio/mpeg\";\r\n  src.src = file;\r\n  snd.appendChild(src);\r\n  return snd;\r\n}\r\nexport function getSwingData(club, acceleration) {\r\n  const xFactor = (90 - club.loft) / 90;\r\n  const YFactor = club.loft / 90;\r\n  const power = acceleration;\r\n  const swing = {\r\n    x: Math.min(Math.ceil(power * xFactor * club.powerFactor), club.max),\r\n    y: Math.min(Math.ceil(power * YFactor * club.powerFactor), club.max),\r\n  };\r\n  return swing;\r\n}\r\n\r\nexport function getScoreName(strokes, par) {\r\n  if (strokes === 1) return \"Hole in one!\";\r\n  const score = strokes - par;\r\n  const term = SCORE_TERMS.find((x) => x.score === score);\r\n  if (term) return term.name;\r\n  return `${score} over par`;\r\n}\r\nexport function validateSwingMovement(acceleration, clubIndex) {\r\n  // i teorin så finns det två olika godkända swingar. höger och vänster. sen även putt.\r\n  // z positiv = nedswing.\r\n  // x positiv = vänsterswing, negativ = högerswing\r\n\r\n  // använd golcbluban för att välja 3 olika valideringar. putter, iron, wood\r\n  // försök få till en ratio där värdena är giltiga: vid wood så är det precis när uppswingen börjar\r\n  // för putter så är det när z är väldigt liten +5 - -5 kanske. eller relativt till x\r\n  // för iron så är det när z är positiv, x och z är kanske lika i värden\r\n\r\n  // y får aldrig vara högre än någon av x eller z.\r\n\r\n  // regler: abs(x) måste vara större än z i alla swingar\r\n\r\n  // z får inte vara mycket negativ . max -2 eller så för\r\n  const xpower = Math.abs(acceleration.x);\r\n  const ypower = Math.abs(acceleration.y);\r\n  const zpower = Math.abs(acceleration.z);\r\n\r\n  if (ypower > xpower && ypower > zpower) return false;\r\n\r\n  const club = CLUBS[clubIndex];\r\n  switch (club.type) {\r\n    case \"wood\":\r\n      // z måste vara negativ och den får inte vara mer än 50% av xpower\r\n      return xpower > zpower;\r\n    case \"iron\":\r\n      if (acceleration.z < 0) return false;\r\n      const angleRatio = xpower / zpower;\r\n      return angleRatio > 0.5 && angleRatio < 5;\r\n    case \"putt\":\r\n      return xpower / 2 > zpower;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return true;\r\n}\r\nexport function addHolePoints(level) {\r\n  const { width } = level;\r\n\r\n  // points has to start with x=0 and end with x=WIDTH\r\n  if (level.points[0][0] !== 0) {\r\n    throw new Error(\"invalid points: first x !== 0\");\r\n  }\r\n  if (level.points[level.points.length - 1][0] !== width) {\r\n    throw new Error(`invalid points: last x !== WIDTH (${width})`);\r\n  }\r\n\r\n  // insert hole\r\n  // get the first point after the hole...\r\n  const idxAfterHole = level.points.findIndex(\r\n    (point) => point[0] > level.hole[0]\r\n  );\r\n  // const idxAfterHole = level.points.findIndex(point => point.get(0) > level.hole.get(0));\r\n\r\n  const x1 = level.hole[0] - HOLE_WIDTH / 2;\r\n  const x2 = level.hole[0] + HOLE_WIDTH / 2;\r\n\r\n  if (x1 <= level.points[idxAfterHole - 1][0]) {\r\n    throw new Error(\"invalid points: hole x1 cannot be <= the previous x\");\r\n  }\r\n\r\n  if (x2 >= level.points[idxAfterHole][0]) {\r\n    throw new Error(\"invalid points: hole x2 cannot be >= the previous x\");\r\n  }\r\n\r\n  // ...then insert hole between points\r\n  const holePoints = [\r\n    [level.hole[0] - HOLE_WIDTH / 2, level.hole[1]],\r\n    [level.hole[0] - HOLE_WIDTH / 2, level.hole[1] + HOLE_CURVE_DEPTH],\r\n    [level.hole[0], level.hole[1] + HOLE_HEIGHT],\r\n    [level.hole[0] + HOLE_WIDTH / 2, level.hole[1] + HOLE_CURVE_DEPTH],\r\n    [level.hole[0] + HOLE_WIDTH / 2, level.hole[1]],\r\n  ];\r\n\r\n  const pointsWithHole = level.points\r\n    .slice(0, idxAfterHole)\r\n    .concat(holePoints)\r\n    .concat(level.points.slice(idxAfterHole));\r\n  const levelWithHolePoints = { ...level, points: pointsWithHole };\r\n  return levelWithHolePoints;\r\n}\r\n\r\nexport function createGround(level) {\r\n  const { height, width } = level;\r\n  // This used to create a single ground shape.\r\n  // Now it creates 3 because this mysteriously fixes a bug where the ground after the hole wasn't\r\n  // working correctly? man I don't even know\r\n  const beforeHole = level.points.filter((point) => point[0] < level.hole[0]);\r\n  const afterHole = level.points.filter((point) => point[0] > level.hole[0]);\r\n\r\n  const vertsBeforeHole = beforeHole.concat([\r\n    [beforeHole[beforeHole.length - 1][0], height],\r\n    [0, height],\r\n  ]);\r\n\r\n  // Creates this shape:\r\n  // |\\/|\r\n  // |  |\r\n  // |  |\r\n  // |__|\r\n  const vertsHole = [\r\n    [level.hole[0] - HOLE_WIDTH / 2, level.hole[1] + HOLE_CURVE_DEPTH],\r\n    [level.hole[0], level.hole[1] + HOLE_HEIGHT],\r\n    [level.hole[0] + HOLE_WIDTH / 2, level.hole[1] + HOLE_CURVE_DEPTH],\r\n    [level.hole[0] + HOLE_WIDTH / 2, height],\r\n    [level.hole[0] - HOLE_WIDTH / 2, height],\r\n  ];\r\n\r\n  const vertsAfterHole = afterHole.concat([\r\n    [width, height],\r\n    [afterHole[0][0], height],\r\n  ]);\r\n\r\n  const grounds = [vertsBeforeHole, vertsHole, vertsAfterHole].map((verts) => {\r\n    //TODO den sista i vertsBeforeHole och första i vertsAfterHole ska vara greenMaterial\r\n    //TODO hur får jag in kopplingen mellan shape och level.pointMaterials?\r\n    const body = new p2.Body({\r\n      mass: 0,\r\n    });\r\n\r\n    body.fromPolygon(verts);\r\n\r\n    for (const shape of body.shapes) {\r\n      if (verts === vertsHole) {\r\n        shape.material = holeMaterial;\r\n      } else {\r\n        shape.material = fairwayMaterial;\r\n      }\r\n\r\n      shape.collisionGroup = GROUND_GROUP;\r\n      shape.collisionMask = BALL_GROUP;\r\n    }\r\n\r\n    return body;\r\n  });\r\n\r\n  return grounds;\r\n}\r\n// pos: I.List<number>\r\nexport function createHoleSensor(pos) {\r\n  const sensorShape = new p2.Box({\r\n    width: HOLE_WIDTH,\r\n    height: HOLE_HEIGHT,\r\n  });\r\n\r\n  sensorShape.sensor = true;\r\n  sensorShape.collisionGroup = GROUND_GROUP;\r\n  sensorShape.collisionMask = BALL_GROUP;\r\n\r\n  // Sensor is purposely built halfway into the ground so top edge collisions are avoided\r\n  const sensorBody = new p2.Body({\r\n    position: [pos[0], pos[1] + Math.ceil(HOLE_HEIGHT * 1.4)],\r\n  });\r\n  sensorBody.damping = 0;\r\n  sensorBody.addShape(sensorShape);\r\n\r\n  return sensorBody;\r\n}\r\n\r\nexport function getSegmentWidths(totalWidth, minWidth) {\r\n  const widths = [];\r\n  let remainingWidth = totalWidth;\r\n\r\n  while (remainingWidth > 0) {\r\n    let maxWidth = 50;\r\n\r\n    if (remainingWidth < maxWidth) {\r\n      maxWidth = remainingWidth;\r\n    }\r\n\r\n    let width = randInt(minWidth, maxWidth);\r\n\r\n    // if this segment would leave us with < minWidth remaining width, just make this segment the\r\n    // entire remaining width\r\n    if (remainingWidth - width < minWidth) {\r\n      width = remainingWidth;\r\n    }\r\n\r\n    widths.push(width);\r\n    remainingWidth -= width;\r\n  }\r\n\r\n  // shuffle widths so it's not biased towards having smaller segments at the end\r\n  shuffle(widths);\r\n\r\n  return widths;\r\n}\r\nexport function calculateStrokeScore(strokes, level) {\r\n  const parScore = {\r\n    3: strokes === 1 ? 25 : 25 - strokes * 2,\r\n    4: strokes === 1 ? 25 : 25 - strokes * 2,\r\n    5: strokes === 1 ? 25 : 25 - strokes * 2,\r\n  };\r\n  return Math.abs(Math.round(parScore[level.par]));\r\n}\r\nexport function calculateTimeScore(scoretime, level) {\r\n  return Math.round(((level.time / 1000) * 1.5 - scoretime) / 10);\r\n}\r\nexport function getPlayerColors(len) {\r\n  const goldenRatio = 0.618033988749895;\r\n  const colors = [];\r\n  const s = 0.5;\r\n  const v = 0.95;\r\n  let h = Math.random();\r\n  for (let i = 0; i < len; i++) {\r\n    h += goldenRatio;\r\n    h %= 1;\r\n    const tiny = tinycolor.fromRatio({ h, s, v });\r\n    colors.push(tiny.toHexString());\r\n  }\r\n\r\n  return colors;\r\n}\r\n// lägg till olika material de två segementerna närmast hålet ska vara green, där färgen är anoorlunda och friktionen mindre\r\n// vattenhinder? blått och räknas likt outOfBounds? fast sätt tillbaka till senaste pos, spara alltid senaste pos använd även för outofbounds?\r\n// bunker: hög friktion, ingen studs = damping?\r\n// bunker och vatten kan bara finnas på plant eller i en viaduct, ta nåra av de spetsiga hålen/viaducterna och gör till vatten eller bunker\r\n// bunker och vatten kan påverka par? kan öka paret ett snäpp om det är mycket bunker/vatten\r\n// rough och fairway är samma? tillsvidare\r\nexport function levelGen(width, height, test) {\r\n  if (test) {\r\n    const testLevel = {\r\n      points: [[0, 400], [width, 400]],\r\n      hole: [width / 1.5, 400],\r\n      spawn: [100, 400],\r\n      color: \"brown\",\r\n      par: 4,\r\n      height,\r\n      time: 20 * 1000,\r\n      width,\r\n    };\r\n    return testLevel;\r\n  }\r\n\r\n  const segmentWidths = getSegmentWidths(width, 12);\r\n  const numSegments = segmentWidths.length;\r\n\r\n  const spawnSegment = randInt(2, 4);\r\n  let par;\r\n  if (width > 1000) {\r\n    const rnd = randInt(1, 18);\r\n    if (rnd > 8) {\r\n      par = 4;\r\n    } else if (rnd > 4) {\r\n      par = 5;\r\n    } else {\r\n      par = 3;\r\n    }\r\n  } else {\r\n    par = 5;\r\n  }\r\n\r\n  const parSetting = {\r\n    hole: {\r\n      5: numSegments - randInt(2, Math.floor(numSegments / 4)),\r\n      4:\r\n        numSegments -\r\n        randInt(Math.floor(numSegments / 4), Math.floor(numSegments / 2.5)),\r\n      3:\r\n        numSegments -\r\n        randInt(Math.floor(numSegments / 2.5), Math.floor(numSegments / 2)),\r\n    },\r\n    time: {\r\n      5: 100 * 1000,\r\n      4: 90 * 1000,\r\n      3: 80 * 1000,\r\n    },\r\n    flatRatio: {\r\n      5: 40,\r\n      4: 30,\r\n      3: 20,\r\n    },\r\n  };\r\n\r\n  const holeSegment = parSetting.hole[par];\r\n\r\n  const time = parSetting.time[par];\r\n\r\n  const points = [];\r\n  const pointMaterials = [];\r\n\r\n  let spawnX;\r\n  let spawnY;\r\n  let holeX;\r\n  let holeY;\r\n\r\n  const minY = Math.floor(height * 0.4);\r\n  const maxY = minY + Math.min(400, height * 0.5);\r\n\r\n  for (let idx = 0; idx <= numSegments; idx++) {\r\n    const segmentWidth = segmentWidths[idx - 1];\r\n\r\n    let x;\r\n    let y;\r\n\r\n    if (idx === 0) {\r\n      x = 0;\r\n    } else {\r\n      x = points[idx - 1][0] + segmentWidth;\r\n    }\r\n\r\n    if (x > width) {\r\n      x = width;\r\n    }\r\n\r\n    if (idx === 0) {\r\n      y = randInt(Math.max(height - 190, 50), height - 60);\r\n    } else {\r\n      const prevY = points[idx - 1][1];\r\n\r\n      // special-case flat section\r\n      if (randInt(1, parSetting.flatRatio[par]) > 10) {\r\n        y = prevY;\r\n      } else {\r\n        let boundLow = prevY - 40;\r\n        let boundHigh = prevY + 40;\r\n\r\n        // clamp high/low bounds so that if they go out of screen bounds, the bounds shift to\r\n        // contain the same range but clamped\r\n        if (boundLow < minY) {\r\n          boundHigh -= boundLow - minY;\r\n          boundLow = minY;\r\n        }\r\n\r\n        if (boundHigh > maxY) {\r\n          boundLow -= boundHigh - maxY;\r\n          boundHigh = maxY;\r\n        }\r\n\r\n        y = randInt(boundLow, boundHigh);\r\n        if (y < boundLow + 30) {\r\n          y = randInt(boundLow, boundHigh);\r\n        }\r\n        if (y < boundLow + 30) {\r\n          y = randInt(boundLow, boundHigh);\r\n        }\r\n      }\r\n    }\r\n    if (idx === spawnSegment) {\r\n      pointMaterials.push(\"fairway\");\r\n    } else if (idx === holeSegment) {\r\n      pointMaterials.push(\"green\");\r\n    } else if (idx > holeSegment) {\r\n      pointMaterials.push(\"rough\");\r\n    } else {\r\n      pointMaterials.push(randInt(1, 2) === 1 ? \"rough\" : \"fairway\");\r\n    }\r\n\r\n    if (idx === spawnSegment) {\r\n      spawnX = x - Math.round(segmentWidth / 2);\r\n      y = points[idx - 1][1];\r\n      spawnY = y;\r\n    }\r\n\r\n    if (idx === holeSegment) {\r\n      holeX = x - Math.round(segmentWidth / 2);\r\n      y = points[idx - 1][1];\r\n      holeY = y;\r\n    }\r\n\r\n    points.push([x, y]);\r\n  }\r\n\r\n  const color = sample(GROUND_COLORS);\r\n\r\n  const hole = [holeX, holeY];\r\n  const spawn = [spawnX, spawnY];\r\n\r\n  const level = {\r\n    points,\r\n    pointMaterials,\r\n    hole,\r\n    spawn,\r\n    color,\r\n    par,\r\n    time,\r\n    height,\r\n    width,\r\n  };\r\n\r\n  return level;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as p2 from \"p2\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { fireGolf } from \"../../../base\";\r\nimport golfwood1Audio from \"./audio/golfwood.wav\";\r\nimport golfwood2Audio from \"./audio/golfwood2.wav\";\r\nimport golfwood3Audio from \"./audio/golfwood3.wav\";\r\nimport golfiron1Audio from \"./audio/golfiron.wav\";\r\nimport golfiron2Audio from \"./audio/golfiron2.wav\";\r\nimport golfiron3Audio from \"./audio/golfiron3.wav\";\r\n\r\nimport countdownAudio from \"./audio/countdown.wav\";\r\nimport golfclapAudio from \"./audio/golfclap.wav\";\r\nimport golfputtAudio from \"./audio/golfputt.wav\";\r\nimport golfscoreAudio from \"./audio/golfscore.wav\";\r\n\r\n// http://jsfiddle.net/AceJJ/1748/ fireworks\r\nimport * as util from \"./GolfUtil\";\r\nimport {\r\n  HURRY_UP_MS,\r\n  GRASS_COLOR,\r\n  MATCH_OVER_MS,\r\n  BALL_RADIUS,\r\n  PENALTY_STROKES,\r\n  CLUBS,\r\n} from \"./GolfConstants\";\r\n\r\nlet ctx;\r\nlet canvas;\r\nconst fixedTimeStep = 1 / 60; // seconds\r\nconst maxSubSteps = 10; // Max sub steps to catch up with the wall clock\r\nlet lastTime;\r\n// jag behöver lyssna på nya slag från firebase: [power, angle, ballstatus: moving]\r\n// jag behöver updatera firebase varje gång en boll är redo för att slås(distans kvar, ballstatus: [awaitingSwing, moving, inhole, outOfPlay )\r\n\r\n// kolla på exempelspelen på p2. https://github.com/schteppe/p2.js/blob/master/examples/canvas/character.html\r\n// använda samma koncept av en init funktion och en animation. precis som med snake, inte massa olika komponenter osv.\r\n// ha en drawBall/drawballs drawGround/drawlevel som gör ctx.rectfill osv likt p2 exempel.\r\n// använd p2s eventhandlers? för att se om en boll är i hålet.\r\n// och sen då synkningarna mot firebase med bara den väsentliga infomrationen som både host och play behöver. SwingData, bollstatus, distans, osv.\r\n// Försök att inte använda utilMetoderna utan börja med att utveckla egna metoder med inspiration från manygolf bara.\r\n\r\n// 1. init() skapar ett game, world, balls, osv. kopplar bollar till playerkeys. updaterar players med ballsId (precis som snakes).\r\n// initierar lyssnare för varje boll kopplat till player/swing etc i firebase, likt snake\r\n// skapa eventhandlers i p2. Som kollar om någon boll är i hålet, om någon boll är out of bounds?\r\n// 2. skapa en animation-loop och metoder för att rita ut alla komponenter: boll, ground, hole, level, world ....\r\n// skapa winConditions. alltså när alla bollar har status: inhole så är det klart.\r\n// 3. lägg till golfController där man lyssnar på balls[playerkey] likt snake. och när bollen har status WAITING_SWING så kan man svinga med mobilen och data synkas till firebase\r\n// och läses in i host som sätter en veolocify på ball.body\r\nfunction drawBall(\r\n  x,\r\n  y,\r\n  stroke,\r\n  playerColor,\r\n  playerIndex,\r\n  playerState,\r\n  showNameTag,\r\n  playerName,\r\n  canvasHeight\r\n) {\r\n  // ball border width\r\n  ctx.lineWidth = 1;\r\n\r\n  // if (playerState && playerState === PlayerState.leftRound) {\r\n  //   // make fill translucent\r\n  //   ctx.fillStyle = tinycolor(fill).setAlpha(0.5).toRgbString();\r\n  //   ctx.strokeStyle = tinycolor(stroke).setAlpha(0.5).toRgbString();\r\n  // } else {\r\n  //   ctx.fillStyle = fill;\r\n  //   ctx.strokeStyle = stroke;\r\n  // }\r\n  ctx.fillStyle = playerColor;\r\n  ctx.strokeStyle = stroke;\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, BALL_RADIUS, 0, 2 * Math.PI);\r\n  ctx.fill();\r\n  ctx.closePath();\r\n\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, BALL_RADIUS - ctx.lineWidth / 2, 0, 2 * Math.PI);\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n\r\n  if (\r\n    showNameTag &&\r\n    playerState &&\r\n    (playerState === \"STILL\" || playerState === \"MOVING\")\r\n  ) {\r\n    let ballIndexMod = playerIndex % 10;\r\n    let poleMin = Math.max(100, canvasHeight * 0.2);\r\n    let poleMax = Math.max(150, canvasHeight * 0.4);\r\n    let indexFactor = (poleMax - poleMin) / 10;\r\n    let poleHeight = poleMin + ballIndexMod * indexFactor;\r\n\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeStyle = playerColor;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x, y - poleHeight);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n\r\n    ctx.font = \"20px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillText(playerName, x, y - poleHeight - 5);\r\n  }\r\n}\r\n\r\nclass Golf extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // för att göra det mer smooth. så behöver jag typ dela upp ätandet så att det sker i flera tick? för just nu är ett tick storleken på food och allt annat\r\n    // lite delay när jag ökar speeden. är det olika delay för olika snakes? optimera senare.\r\n    const canvasHeight = Math.floor(window.innerHeight - 160);\r\n    const canvasWidth = Math.floor(window.innerWidth);\r\n\r\n    // ta in olika ljud för olika styrkor på alla här. då kan de också bli så att detspelar över varandra.\r\n    // https://freesound.org/search/?q=golf&g=1&f=type%3A%22wav%22+tag%3A%22golf%22&page=3#sound\r\n    const soundEffects = {\r\n      wood: [\r\n        {\r\n          audio: util.createAudio(golfwood1Audio),\r\n          minpower: 400,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfwood2Audio),\r\n          minpower: 300,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfwood3Audio),\r\n          minpower: 200,\r\n        },\r\n      ],\r\n      golfclap: {\r\n        audio: util.createAudio(golfclapAudio),\r\n      },\r\n      iron: [\r\n        {\r\n          audio: util.createAudio(golfiron1Audio),\r\n          minpower: 350,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfiron2Audio),\r\n          minpower: 250,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfiron3Audio),\r\n          minpower: 150,\r\n        },\r\n      ],\r\n      putt: [\r\n        {\r\n          audio: util.createAudio(golfputtAudio),\r\n          minpower: 8,\r\n        },\r\n      ],\r\n      ballInHole: {\r\n        audio: util.createAudio(golfscoreAudio),\r\n      },\r\n      countdown: {\r\n        audio: util.createAudio(countdownAudio),\r\n      },\r\n    };\r\n    this.state = {\r\n      levelData: null,\r\n      world: null,\r\n      level: null,\r\n      startTime: null,\r\n      expTime: null,\r\n      holeSensor: null,\r\n      time: 0,\r\n      canvasHeight,\r\n      canvasWidth,\r\n      leaderId: null,\r\n      matchEndTime: null,\r\n      testacceleration: 195,\r\n      testClubIndex: 2,\r\n      testBallIndex: 0,\r\n      balls: null,\r\n      nextLevelTimer: null,\r\n      scorers: [],\r\n      totalScores: [],\r\n      currentlevelScores: [],\r\n      leaderboard: [],\r\n      soundEffects,\r\n    };\r\n    // golf\r\n    this.init = this.init.bind(this);\r\n    this.ensurePlayersInBounds = this.ensurePlayersInBounds.bind(this);\r\n    this.swing = this.swing.bind(this);\r\n    this.drawGround = this.drawGround.bind(this);\r\n    this.drawLevelCompleteHud = this.drawLevelCompleteHud.bind(this);\r\n    this.drawPlayHud = this.drawPlayHud.bind(this);\r\n    this.renderFrame = this.renderFrame.bind(this);\r\n    this.animate = this.animate.bind(this);\r\n    this.testSwing = this.testSwing.bind(this);\r\n    this.syncPlayersObjectToFirebase = this.syncPlayersObjectToFirebase.bind(\r\n      this\r\n    );\r\n    this.initControllerListener = this.initControllerListener.bind(this);\r\n    this.isLevelCompleted = this.isLevelCompleted.bind(this);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n    this.distributeScore = this.distributeScore.bind(this);\r\n    this.isLoadNextLevel = this.isLoadNextLevel.bind(this);\r\n    this.loadNextLevel = this.loadNextLevel.bind(this);\r\n    this.saveGame = this.saveGame.bind(this);\r\n    this.setEventHandlers = this.setEventHandlers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.init();\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // kan jag ha det här?\r\n\r\n    return true;\r\n  }\r\n\r\n  setEventHandlers(world) {\r\n    world.on(\"beginContact\", (evt) => {\r\n      const {\r\n        balls,\r\n        holeSensor,\r\n        startTime,\r\n        expTime,\r\n        scorers,\r\n        soundEffects,\r\n        level,\r\n      } = this.state;\r\n      const { game: _game } = this.props;\r\n      const players = Object.values(_game.players);\r\n      if (evt.bodyA !== holeSensor && evt.bodyB !== holeSensor) return;\r\n      const ballBody = evt.bodyA === holeSensor ? evt.bodyB : evt.bodyA;\r\n      if (ballBody.scored) return;\r\n      const { playerKey } = ballBody;\r\n      soundEffects.ballInHole.audio.currentTime = 0;\r\n      soundEffects.ballInHole.audio.play();\r\n\r\n      // alert(`${this.props.game.players[playerKey].name} scored!`);\r\n      // update players state with whatever. and uppdate firebase\r\n      ballBody.scored = true;\r\n      let newExpTime = expTime;\r\n\r\n      if (_game.minigame.speedmode && expTime > Date.now() + HURRY_UP_MS * 2) {\r\n        newExpTime = expTime - HURRY_UP_MS;\r\n      }\r\n\r\n      const scoreTime = Math.floor((Date.now() - startTime) / 1000);\r\n      const scorer = {\r\n        playerKey,\r\n        time: scoreTime,\r\n        strokes: Math.min(ballBody.strokes, PENALTY_STROKES),\r\n        hole: _game.minigame.round,\r\n        par: level.par,\r\n      };\r\n      scorers.push(scorer);\r\n      this.setState(() => ({\r\n        balls,\r\n        expTime: newExpTime,\r\n        scorers,\r\n      }));\r\n\r\n      const newPlayerState = players.map((p) =>\r\n        p.key === playerKey ? { ...p, state: \"SCORED\", scoreTime } : p\r\n      );\r\n\r\n      if (_game.minigame.collisionmode) {\r\n        setTimeout(\r\n          function(body) {\r\n            body.collisionResponse = false;\r\n          },\r\n          500,\r\n          ballBody\r\n        );\r\n      }\r\n\r\n      this.syncPlayersToFirebase(newPlayerState);\r\n    });\r\n\r\n    world.on(\"postStep\", (evt) => {\r\n      // createHoleSensor body\r\n      const { balls, level } = this.state;\r\n      const { game: _game } = this.props;\r\n      const players = Object.values(_game.players);\r\n      const stillBalls = balls.filter(\r\n        (x) => x.velocity[0] === 0 && x.velocity[1] === 0\r\n      );\r\n      if (stillBalls.length === 0) {\r\n        return;\r\n      }\r\n      const playersToUpdateState = players.filter(\r\n        (x) =>\r\n          x.state === \"MOVING\" && stillBalls.some((b) => x.key === b.playerKey)\r\n      );\r\n      if (playersToUpdateState.length === 0) {\r\n        return;\r\n      }\r\n      const newPlayerState = players.map((player, index) => {\r\n        if (playersToUpdateState.some((x) => x.key === player.key)) {\r\n          return {\r\n            ...player,\r\n            state: \"STILL\",\r\n            distance: util.getDistanceYards(\r\n              level.hole[0],\r\n              balls[player.ballIndex].interpolatedPosition[0]\r\n            ),\r\n          };\r\n        }\r\n        return player;\r\n      });\r\n      this.syncPlayersToFirebase(newPlayerState);\r\n\r\n      //      this.setState(state => newPlayerState);\r\n      // update players state with whatever. and uppdate firebase\r\n    });\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  ensurePlayersInBounds() {\r\n    const { balls, canvasWidth, level } = this.state;\r\n    const ensuredBalls = balls.map((ball) => {\r\n      const result = ball;\r\n      if (\r\n        ball.interpolatedPosition[0] < 0 ||\r\n        ball.interpolatedPosition[0] > canvasWidth\r\n      ) {\r\n        result.position = [ball.lastPos[0], ball.lastPos[1] - 20];\r\n        result.velocity = [0, 0];\r\n      }\r\n      return result;\r\n    });\r\n\r\n    this.setState(() => ({\r\n      balls: ensuredBalls,\r\n    }));\r\n    // goooo\r\n    // 7. någon snygg clubpicker.\r\n\r\n    // 10. lägg till options om att kunna studs i väggar och tak?\r\n\r\n    // par kan baseras på hur hålet ligger till \"hur stora höjdskillnaderna är runt om hålet\r\n\r\n    // ersätt bakgrundsbilden med målnen med en bild som innehåller lite instruktioner\r\n    // kan vara olika bilder beroende på state. bilden skrivs om vid touchstart, touchend, och vid rerender. kanske kan ta bort den från touchstart och end då de ändå updaterar satate och därmed rerender\r\n    // något med fingerprint på som ändras till en golfswing-icon när isSwinging är true.\r\n    // är ingenting medan bollen är moving?\r\n\r\n    // 8. backspinn?\r\n\r\n    // fixa public games...lista under /play där man kan se games som är i connectphase?in_progress? man ska också kunna se vilka games man själv är med i?\r\n    // jag hämtar alltså ut alla games som är status in_progress eller \"setup\". alla visas i en lista.\r\n    // och en extra lista om det finns games som man säljv är med i av alla ovan. baserat på ens playerkey.\r\n\r\n    // kalibereringsfunktion? för att lösa problemet med olika känsliga mobiler?\r\n    // man håller ner tummen och svingar flera gånger, det högsta värdet man kommer upp i används för att kaliberera extra power.\r\n    // standard värdet på en bra mobil är att man max kan slå 150 (75m/s). om man kalibrerar och får till t.ex. 100 som högsta värde så\r\n    // sätter jag 100 + 10% = 110 som nya hösta värdet. det är ett hårt maxvärde så man inte kan fuska med kalibreringen och kalbirera lågt för att sen slå\r\n    // mycket hårdare. så om jag kalibrerar till 100 så blir maxpower 110. powerfaktorn blir 160/110=1.36 så resultatet av kalibreringen blir:\r\n    // en extra powerfactor på 1.36. en maxgräns på vi set hightestacceleration på 150 används alltid\r\n\r\n    // power faktorns uträkning blir: MAXPOWER/(heighestcalibration*1.1)\r\n\r\n    // 11. ny game modes???\r\n\r\n    // 9. rita ut en hålflaga?\r\n  }\r\n\r\n  drawBalls() {\r\n    const { balls, canvasHeight } = this.state;\r\n    const { game } = this.props;\r\n    const players = Object.values(game.players);\r\n\r\n    const len = players.length;\r\n    for (let i = 0; i < len; i++) {\r\n      const player = players[i];\r\n      const pos = balls[player.ballIndex].interpolatedPosition;\r\n      drawBall(\r\n        pos[0],\r\n        pos[1],\r\n        \"gray\",\r\n        player.color,\r\n        player.ballIndex,\r\n        player.state,\r\n        player.showNameTag,\r\n        player.name,\r\n        canvasHeight\r\n      );\r\n    }\r\n\r\n    // players.forEach((player) => {\r\n    //   // Don't render ghost for the current player\r\n    //   // if (player.id === state.id && !debugRender) {\r\n    //   //   return;\r\n    //   // }\r\n\r\n    //   const pos = player.ball.interpolatedPosition;\r\n    //   drawBall(pos[0], pos[1], player.color, 'black', player.state);\r\n\r\n    //   // if (state.match.leaderId === player.id) {\r\n    //   //   drawCrown(ctx, pos[0], pos[1]);\r\n    //   // }\r\n    // });\r\n  }\r\n\r\n  // långting är off med drawground. antingen i den eller i levelgen eller någon annan util metod.\r\n  // blev så när jag bytte constans.height och width till state här som är baserat på window\r\n  drawGround() {\r\n    const { level, canvasHeight, canvasWidth } = this.state;\r\n    const { points } = level;\r\n\r\n    ctx.fillStyle = level.color;\r\n    const groundLineWidth = 3;\r\n    ctx.lineWidth = groundLineWidth;\r\n\r\n    ctx.beginPath();\r\n    const firstPoint = points[0];\r\n    ctx.moveTo(firstPoint[0], firstPoint[1]);\r\n\r\n    points.slice(1).forEach((point) => {\r\n      ctx.lineTo(point[0], point[1]);\r\n    });\r\n\r\n    // draw a complete shape so fill works\r\n    // add padding so the outline stroke doesn't show up\r\n\r\n    ctx.lineTo(canvasWidth + groundLineWidth, points[points.length - 1][1]);\r\n    ctx.lineTo(canvasWidth + groundLineWidth, canvasHeight + groundLineWidth);\r\n    ctx.lineTo(-groundLineWidth, canvasHeight + groundLineWidth);\r\n    ctx.lineTo(-groundLineWidth, points[0][1]);\r\n\r\n    ctx.strokeStyle = GRASS_COLOR;\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    ctx.closePath();\r\n  }\r\n\r\n  drawLevelCompleteHud() {\r\n    const {\r\n      nextLevelTimer,\r\n      level,\r\n      canvasHeight,\r\n      canvasWidth,\r\n      leaderboard,\r\n    } = this.state;\r\n    const { game } = this.props;\r\n    ctx.font = \"24px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.fillText(\"Level completed!\", 15, 24);\r\n    ctx.font = \"20px roboto\";\r\n    ctx.textAlign = \"right\";\r\n    ctx.fillText(`pin: ${game.gameId}`, canvasWidth - 20, 24);\r\n    ctx.textAlign = \"left\";\r\n    const timeRemaining = Math.floor((nextLevelTimer - Date.now()) / 1000);\r\n    ctx.fillText(timeRemaining, canvasWidth / 2, 24);\r\n\r\n    for (let i = 0; i < leaderboard.length; i++) {\r\n      const data = leaderboard[i];\r\n      ctx.fillText(\r\n        `${game.players[data.playerKey].name}: ${data.totalScore} poäng`,\r\n        canvasWidth / 2,\r\n        60 + 30 * i\r\n      );\r\n    }\r\n  }\r\n\r\n  drawPlayHud() {\r\n    const {\r\n      expTime,\r\n      level,\r\n      canvasHeight,\r\n      canvasWidth,\r\n      soundEffects,\r\n      scorers,\r\n    } = this.state;\r\n    const { game } = this.props;\r\n    ctx.font = \"24px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.fillText(`Hole ${game.minigame.round} Par ${level.par}`, 15, 24);\r\n    ctx.font = \"20px roboto\";\r\n    ctx.textAlign = \"right\";\r\n    ctx.fillText(`pin: ${game.gameId}`, canvasWidth - 30, 24);\r\n    ctx.textAlign = \"left\";\r\n\r\n    const timeRemaining = Math.floor((expTime - Date.now()) / 1000);\r\n    if (timeRemaining === 10) {\r\n      soundEffects.countdown.audio.play();\r\n    }\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillText(timeRemaining, canvasWidth / 2, 24);\r\n    ctx.textAlign = \"left\";\r\n    const scoredTextHeight = 40;\r\n    scorers\r\n      .filter((x) => x.hole === game.minigame.round)\r\n      .slice(0, 3)\r\n      .forEach((s, index) =>\r\n        ctx.fillText(\r\n          `${game.players[s.playerKey].name} gjorde ${util.getScoreName(\r\n            s.strokes,\r\n            s.par\r\n          )} efter ${s.time} sekunder`,\r\n          canvasWidth / 2,\r\n          scoredTextHeight * (1 + index)\r\n        )\r\n      );\r\n\r\n    // Object.values(game.players).filter(x => x.state === 'SCORED')\r\n    //   .sort((a, b) => a.scoreTime > b.scoreTime)\r\n    //   .slice(0, 3)\r\n    //   .forEach((p, index) => ctx.fillText(`${p.name} gick i hål med XXX slag på ${p.scoreTime} sekunder`, canvasWidth / 2, scoredTextHeight * (1 + index)));\r\n    // // funkar typ men försvinner snabbt... ska stanna kvar tills ny kommer och petar ner den. upp till 3 samtida som visas. en per rad.\r\n\r\n    // lägg till info om vilken hål det här är. hål x? kolla på game.round? vilket par är det?\r\n    // tid kvar?\r\n  }\r\n\r\n  testSwing() {\r\n    const { testacceleration, testClubIndex, testBallIndex } = this.state;\r\n    const club = CLUBS[testClubIndex];\r\n    const swing = util.getSwingData(club, testacceleration);\r\n    this.swing(swing, testBallIndex, true);\r\n  }\r\n\r\n  swing(velocity, ballIndex, test) {\r\n    const { balls, holeSensor, soundEffects } = this.state;\r\n    const {\r\n      game: { players },\r\n    } = this.props;\r\n    const clubtype = util.identifyClubType(velocity);\r\n    const power = velocity.x + velocity.y;\r\n    const soundEffect = soundEffects[clubtype].find((x) => power > x.minpower);\r\n    // ljudet borde styras mer av var på banan jag slår. spawn så är det en ren smäll. utanför spawn så är det lite mer \"gräsljud\"?\r\n    // iron och wood blir samma. wood ska jag inte kunna välja utanför spawn?\r\n    if (soundEffect) {\r\n      soundEffect.audio.currentTime = 0;\r\n      soundEffect.audio.play();\r\n    }\r\n\r\n    const ballToHit = balls.find((b) => b.ballIndex === ballIndex);\r\n    players[ballToHit.playerKey].state = \"MOVING\";\r\n    players[ballToHit.playerKey].showNameTag = false;\r\n\r\n    const holeX = holeSensor.interpolatedPosition[0];\r\n    const ballX = ballToHit.interpolatedPosition[0];\r\n    const velocityWithDirection = { ...velocity, y: -velocity.y };\r\n    // bollen är förbi hålet\r\n    if (ballX > holeX) {\r\n      velocityWithDirection.x = -velocityWithDirection.x;\r\n    }\r\n    this.syncPlayersObjectToFirebase(players);\r\n    ballToHit.velocity[0] = velocityWithDirection.x;\r\n    ballToHit.velocity[1] = velocityWithDirection.y;\r\n    ballToHit.strokes += 1;\r\n    ballToHit.lastPos = [...ballToHit.position];\r\n    this.setState(() => ({ balls }));\r\n  }\r\n\r\n  createLevel() {\r\n    const { canvasHeight, canvasWidth } = this.state;\r\n    const { game } = this.props;\r\n  }\r\n\r\n  init() {\r\n    const { game } = this.props;\r\n    const { canvasHeight, canvasWidth } = this.state;\r\n    canvas = document.getElementById(\"golfcanvas\");\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.lineWidth = 5;\r\n\r\n    const level = util.addHolePoints(\r\n      util.levelGen(canvasWidth, canvasHeight, false)\r\n    );\r\n    const world = util.createWorld();\r\n\r\n    //\r\n    const groundBodies = util.createGround(level);\r\n    const holeSensor = util.createHoleSensor(level.hole);\r\n\r\n    for (const body of groundBodies) {\r\n      world.addBody(body);\r\n    }\r\n\r\n    world.addBody(holeSensor);\r\n\r\n    const playerKeys = Object.keys(game.players);\r\n    const len = playerKeys.length;\r\n    const createdPlayers = [];\r\n    const balls = [];\r\n    const playerColors = util.getPlayerColors(len);\r\n    for (let i = 0; i < len; i++) {\r\n      const ball = util.createBall(level.spawn, game.minigame.collisionmode);\r\n      // hur håller jag koll på vilken boll som är vilken spelare?\r\n      ball.playerKey = playerKeys[i];\r\n      ball.ballIndex = i;\r\n      ball.scored = false;\r\n      ball.strokes = 0;\r\n      ball.lastPos = [...ball.position];\r\n      world.addBody(ball);\r\n      const player = Object.assign(\r\n        {\r\n          ballIndex: i,\r\n          key: playerKeys[i],\r\n          color: playerColors[i],\r\n          state: \"STILL\",\r\n          distance: util.getDistanceYards(level.hole[0], level.spawn[0]),\r\n          score: 0,\r\n          showNameTag: false,\r\n        },\r\n        game.players[playerKeys[i]]\r\n      );\r\n      balls.push(ball);\r\n      createdPlayers.push(player);\r\n    }\r\n    //\r\n\r\n    this.setState(() => ({\r\n      world,\r\n      level,\r\n      balls,\r\n      holeSensor,\r\n      startTime: Date.now(),\r\n      expTime: Date.now() + level.time,\r\n    }));\r\n\r\n    createdPlayers.forEach((player) => this.initControllerListener(player));\r\n    // event ball in hole\r\n    this.setEventHandlers(world);\r\n\r\n    this.syncToFirebase(createdPlayers, level);\r\n    requestAnimationFrame(this.animate);\r\n  }\r\n\r\n  syncPlayersToFirebase(players) {\r\n    const { game, gameFunc } = this.props;\r\n    game.players = players.reduce((_result, player) => {\r\n      const result = _result;\r\n      result[player.key] = player;\r\n      return result;\r\n    }, game.players);\r\n    this.saveGame(game);\r\n  }\r\n\r\n  syncPlayersObjectToFirebase(playersObj) {\r\n    const { game, gameFunc } = this.props;\r\n    game.players = playersObj;\r\n\r\n    this.saveGame(game);\r\n  }\r\n\r\n  syncToFirebase(players, level) {\r\n    const { game, gameFunc } = this.props;\r\n\r\n    game.players = players.reduce((_result, player) => {\r\n      const result = _result;\r\n      result[player.key] = player;\r\n      return result;\r\n    }, game.players);\r\n    game.status = \"IN_PROGRESS\";\r\n    game.minigame.levelColor = level.color;\r\n    game.currentPar = level.par;\r\n    game.minigame.round = 1;\r\n    this.saveGame(game);\r\n  }\r\n\r\n  saveGame(game) {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game, gameFunc } = this.props;\r\n    const { soundEffects, leaderboard } = this.state;\r\n    if (`${game.minigame.round}` === game.minigame.holes) {\r\n      game.minigame.leaderboard = leaderboard.map((x) => ({\r\n        ...x,\r\n        currentRoundScore: null,\r\n      }));\r\n      game.phase = \"final_result\";\r\n    } else {\r\n      soundEffects.golfclap.audio.play();\r\n      game.phase = \"level_completed\";\r\n      this.setState(() => ({\r\n        nextLevelTimer: Date.now() + MATCH_OVER_MS,\r\n      }));\r\n    }\r\n    this.saveGame(game);\r\n  }\r\n\r\n  animate(time) {\r\n    const { world } = this.state;\r\n    const {\r\n      game: { phase },\r\n    } = this.props;\r\n    requestAnimationFrame(this.animate);\r\n\r\n    const deltaTime = lastTime ? (time - lastTime) / 400 : 0;\r\n\r\n    // Move bodies forward in time\r\n\r\n    world.step(fixedTimeStep, deltaTime, maxSubSteps);\r\n    lastTime = time;\r\n\r\n    if (phase === \"gameplay\") {\r\n      this.ensurePlayersInBounds();\r\n      this.renderFrame();\r\n      this.drawPlayHud();\r\n      if (this.isLevelCompleted()) {\r\n        this.distributeScore();\r\n        this.nextPhase();\r\n      }\r\n    } else if (phase === \"level_completed\") {\r\n      this.renderFrame();\r\n      this.drawLevelCompleteHud();\r\n      if (this.isLoadNextLevel()) {\r\n        this.loadNextLevel();\r\n      }\r\n    }\r\n\r\n    // ska poäng bara ges för placering inbördes? eller poäng för slagen? båda? tröstpoäng om man inte klarar banan\r\n\r\n    // struktuerar om. ha phase switchcondition runt mera saker. för är vi i pausscreen kanske det är onödigt att köra esnureplayersisinbounds etc\r\n    // sätt phase till leaderboard,\r\n    // giveoutpoints\r\n    // showleaderboard (automaticly goes to next level after 10 sec, setState(nextLevelTimer = date.now() + 10sekunder))\r\n    //\r\n    // gör en else eller annan if efter här som kollar om phase==='leaderboard' && nextLevelTimer har gått ut.\r\n    // om det är sant så ska nästa level laddas. använd npgon variant av init. loadNextLevel();\r\n  }\r\n\r\n  loadNextLevel() {\r\n    const { game, gameFunc } = this.props;\r\n    const { balls, canvasHeight, canvasWidth } = this.state;\r\n    // börja med att testa att bara updatera states bodies med nya värden. annars kanske jag måste köra remove body på world. eller world.clear();\r\n    // frågan är om events.on är kvar?\r\n\r\n    const level = util.addHolePoints(\r\n      util.levelGen(canvasWidth, canvasHeight, false)\r\n    );\r\n    const world = util.createWorld();\r\n    //\r\n    const groundBodies = util.createGround(level);\r\n    const createdHoleSensor = util.createHoleSensor(level.hole);\r\n\r\n    for (const body of groundBodies) {\r\n      world.addBody(body);\r\n    }\r\n\r\n    world.addBody(createdHoleSensor);\r\n\r\n    balls.forEach((ball) => {\r\n      ball.position = [level.spawn[0], level.spawn[1] - BALL_RADIUS];\r\n      ball.velocity = [0, 0];\r\n      ball.scored = false;\r\n      ball.strokes = 0;\r\n      ball.lastPos = [...ball.position];\r\n      ball.collisionResponse = true;\r\n\r\n      world.addBody(ball);\r\n    });\r\n    this.setEventHandlers(world);\r\n\r\n    // skapa ny level, och world?\r\n\r\n    // sätt alla players state till STILL, nollställ swing och distance\r\n\r\n    // sätt alla bollars pos till level.spawn.\r\n    const playerUpdates = Object.values(game.players)\r\n      .map((p) => ({\r\n        ...p,\r\n        state: \"STILL\",\r\n        distance: util.getDistanceYards(level.hole[0], level.spawn[0]),\r\n      }))\r\n      .reduce((_result, player) => {\r\n        const result = _result;\r\n        result[player.key] = player;\r\n        return result;\r\n      }, game.players);\r\n    // säkertställ att ingen swing råkas göras när jag återställer play.swing obj.\r\n    // updatera state\r\n    this.setState(() => ({\r\n      world,\r\n      level,\r\n      balls,\r\n      holeSensor: createdHoleSensor,\r\n      startTime: Date.now(),\r\n      expTime: Date.now() + level.time,\r\n    }));\r\n\r\n    game.phase = \"gameplay\";\r\n    game.players = playerUpdates;\r\n    game.minigame.round += 1;\r\n    this.saveGame(game);\r\n  }\r\n\r\n  distributeScore() {\r\n    // finns alltid risk att firebase tar tid på sig att skriva och läsa och då hinner jag inte få upp score?\r\n    // kanske behöver ha viss information i state här ändå.\r\n    const { game } = this.props;\r\n    const { scorers: _scorers, leaderboard, level } = this.state;\r\n    // lägg till poängräkning för olika scoremodes: strokes, time, placement\r\n    // allt ska översättas till score, inte rakt av strokes. hole in one === 100, andra slag är 80 - (strokes*5)\r\n    // time: level.time - scoretime (hole in one still bonus 10p?)\r\n    // position: position är något annat än scoremode? för måste fortfarande avgöra om det är time eller strokes som gäller\r\n    // eller så är det ntal slag och vid lika så är det tiden\r\n    // kolla hur manygolf gör det. 50,40,35,30,25,20,15,10,5,1....1\r\n    //\r\n    const completteScorers = [..._scorers];\r\n\r\n    const players = Object.values(game.players);\r\n    // give default penalty scores to players who didnt score on this round\r\n    const currentScorers = _scorers.filter(\r\n      (x) => x.hole === game.minigame.round\r\n    );\r\n    if (!currentScorers || currentScorers.length < players.length) {\r\n      players.forEach((player) => {\r\n        if (\r\n          !currentScorers ||\r\n          !currentScorers.some((x) => x.playerKey === player.key)\r\n        ) {\r\n          const scorer = {\r\n            playerKey: player.key,\r\n            par: level.par,\r\n            strokes: PENALTY_STROKES,\r\n            time: (level.time * 1.5) / 1000,\r\n            hole: game.minigame.round,\r\n          };\r\n          completteScorers.push(scorer);\r\n        }\r\n      });\r\n    }\r\n\r\n    let board;\r\n    switch (game.minigame.scoremode) {\r\n      case \"strokes\":\r\n        board = players\r\n          .map((player) => {\r\n            const totalScore = completteScorers.filter(\r\n              (x) => x.playerKey === player.key\r\n            );\r\n            const currentScore = totalScore.find(\r\n              (x) => x.hole === game.minigame.round\r\n            );\r\n            const playerScore = {\r\n              currentRoundScore: util.calculateStrokeScore(\r\n                currentScore.strokes,\r\n                level\r\n              ),\r\n              totalScore: totalScore.reduce(\r\n                (r, s) => r + util.calculateStrokeScore(s.strokes, level),\r\n                0\r\n              ),\r\n              playerKey: player.key,\r\n            };\r\n            return playerScore;\r\n          })\r\n          .sort((a, b) => b.totalScore - a.totalScore);\r\n        break;\r\n      case \"time\":\r\n        board = players\r\n          .map((player) => {\r\n            const totalScore = completteScorers.filter(\r\n              (x) => x.playerKey === player.key\r\n            );\r\n            const currentScore = totalScore.find(\r\n              (x) => x.hole === game.minigame.round\r\n            );\r\n            const playerScore = {\r\n              currentRoundScore: util.calculateTimeScore(\r\n                currentScore.time,\r\n                level\r\n              ),\r\n              totalScore: totalScore.reduce(\r\n                (r, s) => r + util.calculateTimeScore(s.time, level),\r\n                0\r\n              ),\r\n              playerKey: player.key,\r\n            };\r\n            return playerScore;\r\n          })\r\n          .sort((a, b) => b.totalScore - a.totalScore);\r\n        break;\r\n      case \"compedetive\":\r\n        // fixa till. rälkna ut poäng genom strokes och level.par\r\n        // sätt ett max antal slag till 10, hämta från constants\r\n        // fixa namn på alla scored i constans? -2 = eagle +2 = double boogie etc +5 vad heter det?\r\n        // använd namnen vid drawPlayHud\r\n        board = players\r\n          .map((player) => {\r\n            const totalScore = completteScorers.filter(\r\n              (x) => x.playerKey === player.key\r\n            );\r\n            const currentScore = totalScore.find(\r\n              (x) => x.hole === game.minigame.round\r\n            );\r\n            // 1.\r\n            // måste lägga till en koll på om man hann i hålet. om man inte hann ner i hålet får man PENALTY_STROKES. det är maxstroke + 1?\r\n            // kom man i hålet på över maxstroke så får man maxstroke också.\r\n\r\n            // 2. testa deploya detta till githubpages...\r\n            //    antar att det var typ githubpages deploy bara? kanske något bygg steg. googla lite.\r\n\r\n            //kan kolla på player.state för att se om man är i hålt eller? \"scored\"?\r\n            const playerScore = {\r\n              currentRoundScore: currentScore.strokes - currentScore.par,\r\n              totalScore: totalScore.reduce(\r\n                (r, s) => r + (s.strokes - currentScore.par),\r\n                0\r\n              ),\r\n              playerKey: player.key,\r\n            };\r\n            return playerScore;\r\n          })\r\n          .sort((a, b) => a.totalScore - b.totalScore);\r\n        break;\r\n      case \"position\":\r\n        //TODO läg till för positon likt manygolf. strokes och sen time avgör vilken position som ges\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState(() => ({\r\n      leaderboard: board,\r\n      scorers: completteScorers,\r\n    }));\r\n  }\r\n\r\n  initControllerListener(player) {\r\n    const { game } = this.props;\r\n\r\n    const swingRef = fireGolf\r\n      .database()\r\n      .ref(`/games/${game.key}/players/${player.key}/swing`);\r\n    //har kan jag lägga till en ref för att se var man är på kartan. man togglar den på av flaggan?\r\n    //Knapp \"find my ball\" som då visar flagga med namn ovanför bollen. den döljs från och med nästa slag. tills man trycker find my ball igen..\r\n    //så får nog vara en int eller något som räknas upp här i lyssnare?\r\n\r\n    //JA en lokal bool här som sätts till true vid en ändring här i lyssnaren (int som räknas upp eller vad som)\r\n    //sen lokalt har vi en bool också som sätts till false efter en swing.\r\n    //så en ball/player behöver ha en bool \"showPlayerName\" den är default false. men kan bli true här i lyssnaren.\r\n    //och sen sätts den tillbaka till false efter varje swing.\r\n\r\n    const that = this;\r\n    swingRef.on(\"value\", (snapshot) => {\r\n      const { game: _game } = that.props;\r\n      const { canvasWidth, canvasHeight } = that.state;\r\n      const currentPlayer = _game.players[player.key];\r\n      const swingData = snapshot.val();\r\n      if (swingData) {\r\n        //TODO testa detta på bigscreen..\r\n        let bigScreenFactor = Math.max(\r\n          0,\r\n          canvasWidth / 20000 + canvasHeight / 20000 - 0.1\r\n        );\r\n        swingData.x = Math.round(swingData.x * (1 + bigScreenFactor));\r\n        swingData.y = Math.round(swingData.y * (1 + bigScreenFactor));\r\n\r\n        that.swing(swingData, currentPlayer.ballIndex);\r\n      } else {\r\n        console.log(\"move error\");\r\n      }\r\n    });\r\n\r\n    const findMyBallRef = fireGolf\r\n      .database()\r\n      .ref(`/games/${game.key}/players/${player.key}/showNameTag`);\r\n\r\n    findMyBallRef.on(\"value\", (snapshot) => {\r\n      const { game: _game } = that.props;\r\n      const currentPlayer = _game.players[player.key];\r\n      const findData = snapshot.val();\r\n\r\n      if (findData) {\r\n        currentPlayer.showNameTag = true;\r\n        // this.setState(() => ({ balls })); kanske behöver trigga denna?\r\n      } else {\r\n        currentPlayer.showNameTag = false;\r\n\r\n        console.log(\"findmyball error\");\r\n      }\r\n    });\r\n  }\r\n\r\n  isLoadNextLevel() {\r\n    const { nextLevelTimer } = this.state;\r\n    const now = Date.now();\r\n    if (now > nextLevelTimer) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isLevelCompleted() {\r\n    const { expTime, balls } = this.state;\r\n    const now = Date.now();\r\n    if (now > expTime) {\r\n      return true;\r\n    }\r\n    if (!balls.some((x) => !x.scored)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  renderFrame() {\r\n    const { canvasHeight, canvasWidth } = this.state;\r\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n\r\n    // Transform the canvas\r\n    // Note that we need to flip the y axis since Canvas pixel coordinates\r\n    // goes from top to bottom, while physics does the opposite.\r\n    ctx.save();\r\n\r\n    this.drawGround();\r\n    this.drawBalls();\r\n  }\r\n\r\n  // informationen mellan varje bana är i en annan phase? en annan komponent?\r\n  render() {\r\n    const {\r\n      canvasHeight,\r\n      canvasWidth,\r\n      testClubIndex,\r\n      testacceleration,\r\n      testBallIndex,\r\n      balls,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"phase-container\" id=\"golfboard\">\r\n        <canvas id=\"golfcanvas\" height={canvasHeight} width={canvasWidth} />\r\n        <button type=\"button\" onClick={this.testSwing}>\r\n          swing\r\n        </button>\r\n        <FormControl>\r\n          <InputLabel htmlFor=\"clubc-required\">Club</InputLabel>\r\n          <Select\r\n            value={testClubIndex || 0}\r\n            onChange={this.handleChangeSelect}\r\n            name=\"testClubIndex\"\r\n            inputProps={{\r\n              id: \"club-required\",\r\n            }}\r\n          >\r\n            {CLUBS.map((c, index) => (\r\n              <MenuItem key={c.id} value={c.id}>\r\n                {c.name}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <TextField\r\n          label=\"Acceleration\"\r\n          name=\"testacceleration\"\r\n          type=\"number\"\r\n          value={testacceleration}\r\n          margin=\"normal\"\r\n          onChange={this.handleChange(\"testacceleration\")}\r\n        />\r\n        {balls && (\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"ball-required\">Ball</InputLabel>\r\n            <Select\r\n              value={testBallIndex || 0}\r\n              onChange={this.handleChangeSelect}\r\n              name=\"testBallIndex\"\r\n              inputProps={{\r\n                id: \"ball-required\",\r\n              }}\r\n            >\r\n              {balls.map((b, index) => (\r\n                <MenuItem key={b.ballIndex} value={b.ballIndex}>\r\n                  {b.ballIndex}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGolf.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default Golf;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass GolfStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.startCounter();\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    let counter = 5;\r\n    const i = setInterval(() => {\r\n      counter -= 1;\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game, gameFunc } = this.props;\r\n\r\n    game.phase = 'gameplay';\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  // skapa bara en klassic mode med en \"boll\" per spelare\r\n\r\n  // i golf.js så sno kod för att kunna skapa en golfbana med fysik osv.\r\n  // skapa firebase lyssnare till varje boll? likt snake kanske. men granska den lösningen dåden inte var så jättebra\r\n  // skapa en enkel golfcontroller som kan göra en swing, få ett powervärde och skicka värdet till firebaase och in i snake.js som slår till bollen utifrån värdet\r\n  // börja med en standard klubba/vinkel, i golfController ska man sen kunna ändra klubba innan varje slag.\r\n  // putter, wedge, iron 8, iron 6, driver är standard?\r\n  // övriga klubbtyper kan man köpa för ingame currency som man vinner efter varje hål?\r\n  // eller som kan kan köpa till sin \"profil\" kräver att jag börjar med inloggning till stagehoot. krävs också för att få till handikapp.\r\n  // kanske bara för golf man behöver logga in? eller har valet att kunna logga in med fördelen att spara progress etc?\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGolfStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default GolfStarting;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nclass SnakeSetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      surveyPlayers: false,\r\n      nameGenerator: false,\r\n      gamemode: props.game.minigame.gamemode,\r\n      racetarget: props.game.minigame.racetarget,\r\n      opponentCollision: props.game.minigame.opponentCollision,\r\n      eatOpponents: props.game.minigame.eatOpponents,\r\n      absorbAll: props.game.minigame.absorbAll,\r\n      wallCollision: props.game.minigame.wallCollision,\r\n      difficulty: props.game.minigame.difficulty,\r\n    };\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  startGame = (multiplayerMode) => {\r\n    const { game, gameFunc } = this.props;\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    } = this.state;\r\n    const minigame = {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      multiplayerMode,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    };\r\n    game.minigame = minigame;\r\n    game.phase = \"connection\";\r\n    game.status = \"IN_PROGRESS\";\r\n    gameFunc.update(game);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      wallCollision,\r\n      opponentCollision,\r\n      eatOpponents,\r\n      absorbAll,\r\n      racetarget,\r\n      difficulty,\r\n      gamemode,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h4\">Game Settings</Typography>\r\n        <Button onClick={() => this.startGame(\"classic\")} variant=\"contained\">\r\n          Classic\r\n        </Button>\r\n        <Button onClick={() => this.startGame(\"coop\")} variant=\"contained\">\r\n          Co-op multiplayer\r\n        </Button>\r\n        <Button onClick={() => this.startGame(\"team\")} variant=\"contained\">\r\n          Team multiplayer\r\n        </Button>\r\n        <FormControl component=\"fieldset\">\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={nameGenerator}\r\n                  onChange={this.handleChangeBool(\"nameGenerator\")}\r\n                  value=\"nameGenerator\"\r\n                />\r\n              }\r\n              label=\"Generate names for players\"\r\n            />\r\n            <FormControl required>\r\n              <InputLabel htmlFor=\"gametype-required\">Game mode</InputLabel>\r\n              <Select\r\n                value={gamemode || \"\"}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"gamemode\"\r\n                inputProps={{\r\n                  id: \"gamemode-required\",\r\n                }}\r\n              >\r\n                <MenuItem value=\"survival\">Survival</MenuItem>\r\n                <MenuItem value=\"race\">Race</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n\r\n            {gamemode === \"race\" && (\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Snake length\"\r\n                  name=\"racetarget\"\r\n                  type=\"number\"\r\n                  value={racetarget}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange(\"racetarget\")}\r\n                />\r\n              </FormControl>\r\n            )}\r\n            <FormControl required>\r\n              <InputLabel htmlFor=\"gametype-required\">difficulty</InputLabel>\r\n              <Select\r\n                value={difficulty || \"\"}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"difficulty\"\r\n                inputProps={{\r\n                  id: \"difficulty-required\",\r\n                }}\r\n              >\r\n                <MenuItem value=\"500\">Easy</MenuItem>\r\n                <MenuItem value=\"300\">Medium</MenuItem>\r\n                <MenuItem value=\"100\">Hard</MenuItem>\r\n                <MenuItem value=\"75\">Pro</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={wallCollision}\r\n                    onChange={this.handleChangeBool(\"wallCollision\")}\r\n                    value=\"wallCollision\"\r\n                  />\r\n                }\r\n                label=\"Wall collisions\"\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={opponentCollision}\r\n                    onChange={this.handleChangeBool(\"opponentCollision\")}\r\n                    value=\"opponentCollision\"\r\n                  />\r\n                }\r\n                label=\"Opponent collisions\"\r\n              />\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={opponentCollision && eatOpponents}\r\n                    disabled={!opponentCollision}\r\n                    onChange={this.handleChangeBool(\"eatOpponents\")}\r\n                    value=\"eatOpponents\"\r\n                  />\r\n                }\r\n                label=\"Eat opponent on collision\"\r\n              />\r\n            </FormControl>\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={eatOpponents && absorbAll}\r\n                    disabled={!eatOpponents}\r\n                    onChange={this.handleChangeBool(\"absorbAll\")}\r\n                    value=\"absorbAll\"\r\n                  />\r\n                }\r\n                label=\"Absorb all pieces eaten\"\r\n              />\r\n            </FormControl>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={surveyPlayers}\r\n                  onChange={this.handleChangeBool(\"surveyPlayers\")}\r\n                  value=\"surveyPlayers\"\r\n                />\r\n              }\r\n              label=\"Survey players after game\"\r\n            />\r\n          </FormGroup>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnakeSetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default SnakeSetup;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nclass GolfSetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      surveyPlayers: false,\r\n      nameGenerator: false,\r\n      holes: props.game.minigame.holes,\r\n      scoremode: props.game.minigame.scoremode,\r\n      speedmode: props.game.minigame.speedmode,\r\n      collisionmode: props.game.minigame.collisionmode,\r\n    };\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  startGame = (multiplayerMode) => {\r\n    const { game, gameFunc } = this.props;\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      holes,\r\n      scoremode,\r\n      speedmode,\r\n      collisionmode,\r\n    } = this.state;\r\n    const minigame = {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      speedmode,\r\n      collisionmode,\r\n      multiplayerMode,\r\n      holes,\r\n      scoremode,\r\n    };\r\n    game.minigame = minigame;\r\n    game.phase = \"connection\";\r\n    game.status = \"IN_PROGRESS\";\r\n    gameFunc.update(game);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      surveyPlayers,\r\n      nameGenerator,\r\n      holes,\r\n      scoremode,\r\n      speedmode,\r\n      collisionmode,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h4\">Game Settings</Typography>\r\n        <Button onClick={() => this.startGame(\"classic\")} variant=\"contained\">\r\n          Start\r\n        </Button>\r\n        <FormControl component=\"fieldset\">\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={nameGenerator}\r\n                  onChange={this.handleChangeBool(\"nameGenerator\")}\r\n                  value=\"nameGenerator\"\r\n                />\r\n              }\r\n              label=\"Generate names for players\"\r\n            />\r\n\r\n            <FormControl>\r\n              <TextField\r\n                label=\"holes to play\"\r\n                name=\"holes\"\r\n                type=\"number\"\r\n                value={holes}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange(\"holes\")}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl required>\r\n              <InputLabel htmlFor=\"scoremode-required\">Score mode</InputLabel>\r\n              <Select\r\n                value={scoremode || \"\"}\r\n                onChange={this.handleChangeSelect}\r\n                name=\"scoremode\"\r\n                inputProps={{\r\n                  id: \"scoremode-required\",\r\n                }}\r\n              >\r\n                <MenuItem value=\"strokes\">Strokes</MenuItem>\r\n                <MenuItem value=\"time\">Time</MenuItem>\r\n                <MenuItem value=\"compedetive\">Compedetive</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={speedmode}\r\n                    onChange={this.handleChangeBool(\"speedmode\")}\r\n                    value=\"speedmode\"\r\n                  />\r\n                }\r\n                label=\"Speed mode\"\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl component=\"fieldset\">\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={collisionmode}\r\n                    onChange={this.handleChangeBool(\"collisionmode\")}\r\n                    value=\"collisionmode\"\r\n                  />\r\n                }\r\n                label=\"Collision mode\"\r\n              />\r\n            </FormControl>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={surveyPlayers}\r\n                  onChange={this.handleChangeBool(\"surveyPlayers\")}\r\n                  value=\"surveyPlayers\"\r\n                />\r\n              }\r\n              label=\"Survey players after game\"\r\n            />\r\n          </FormGroup>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGolfSetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default GolfSetup;\r\n","// export const AUTH_EXPIRE_MS = 40 * 60 * 1000;\r\nexport const AUTH_EXPIRE_MS = 10000;\r\n\r\nexport const CLIENT_ID = \"cac8bf9ba7b34b3a8f727eecdef1a2a8\";\r\nexport const MISSING_ALBUM_COVER =\r\n  \"https://spotify.i.lithium.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/\";\r\nexport const MIN_SONGS_PLAYLIST = 10;\r\nexport const SONG_VOLUME_FADE_TIME = 3;\r\nexport const SPOTIFY_GREEN = \"#1DB954\";\r\nexport const SPOTIFY_BLACK = \"#191414\";\r\nexport const SPOTIFY_GRAY = \"#b3b3b3\";\r\nexport const SPOTIFY_WHITE = \"#fff\";\r\nexport const SPOTIFY_AUTH_SCOPES = [\r\n  \"user-top-read\",\r\n  \"user-read-private\",\r\n  \"user-read-email\",\r\n  \"playlist-read-private\",\r\n  \"playlist-read-collaborative\",\r\n];\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport PropTypes from 'prop-types';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport {\r\n  AUTH_EXPIRE_MS,\r\n  CLIENT_ID,\r\n  SPOTIFY_AUTH_SCOPES,\r\n} from '../SpotifyConstants';\r\n\r\nclass SpotifySetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      surveyPlayers: false,\r\n      questions: props.game.minigame.questions,\r\n      nameGenerator: false,\r\n      autoplay: props.game.minigame.autoplay,\r\n      invalidSpotifyToken: !localStorage.getItem('spotifytoken') || Date.now() - localStorage.getItem('spotifytoken_timestamp') > AUTH_EXPIRE_MS,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { invalidSpotifyToken } = this.state;\r\n    const token = localStorage.getItem('spotifytoken');\r\n\r\n    // If there is no token, redirect to Spotify authorization. kolla om token gått ut också\r\n    // jag kan sätta redirect till någon anna route och lösa det så att när man kommer dit så går den direkt och kollar i firebase och connectar än till rätt game?\r\n\r\n    if (invalidSpotifyToken) {\r\n      const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n      // Replace with your app's client ID, redirect URI and desired scopes\r\n      const redirectUri = window.location.origin + window.location.pathname;\r\n      localStorage.setItem('spotify_type', 'host');\r\n      window.location = `${authEndpoint}?client_id=${CLIENT_ID}&redirect_uri=${redirectUri}&scope=${SPOTIFY_AUTH_SCOPES.join('%20')}&response_type=token&show_dialog=true`;\r\n    }\r\n    const myHeaders = new Headers();\r\n    myHeaders.append('Authorization', `Bearer ${token}`);\r\n  }\r\n\r\n    handleChange = name => (event) => {\r\n      this.setState({\r\n        [name]: event.target.value,\r\n      });\r\n    };\r\n\r\n    handleChangeBool = name => (event) => {\r\n      this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    handleChangeSelect = (event) => {\r\n      this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    startGame = (multiplayerMode) => {\r\n      const { game, gameFunc } = this.props;\r\n      const {\r\n        surveyPlayers, nameGenerator,\r\n        questions, autoplay,\r\n      } = this.state;\r\n      game.minigame.surveyPlayers = surveyPlayers;\r\n      game.minigame.nameGenerator = nameGenerator;\r\n      game.minigame.multiplayerMode = multiplayerMode;\r\n      game.minigame.autoplay = autoplay;\r\n      game.minigame.questions = questions;\r\n      game.minigame.currentq = 0;\r\n      game.phase = 'connection';\r\n      game.status = 'IN_PROGRESS';\r\n      gameFunc.update(game);\r\n    };\r\n\r\n    render() {\r\n      const {\r\n        nameGenerator,\r\n        questions,\r\n        invalidSpotifyToken,\r\n        autoplay,\r\n      } = this.state;\r\n      if (invalidSpotifyToken) {\r\n        return (\r\n          <span>Loading...</span>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"phase-container\">\r\n          <Typography variant=\"h4\">Game Settings</Typography>\r\n          <Button onClick={() => this.startGame('classic')} color=\"primary\">Start</Button>\r\n          <FormControl component=\"fieldset\">\r\n            <FormGroup>\r\n              <FormControlLabel\r\n                control={(\r\n                  <Switch\r\n                    checked={nameGenerator}\r\n                    onChange={this.handleChangeBool('nameGenerator')}\r\n                    value=\"nameGenerator\"\r\n                  />\r\n                )}\r\n                label=\"Generate names for players\"\r\n              />\r\n              <FormControlLabel\r\n                control={(\r\n                  <Switch\r\n                    checked={autoplay}\r\n                    onChange={this.handleChangeBool('autoplay')}\r\n                    value=\"autoplay\"\r\n                  />\r\n                )}\r\n                label=\"Autoplay questions\"\r\n              />\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Questions to play\"\r\n                  name=\"questions\"\r\n                  type=\"number\"\r\n                  value={questions}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange('questions')}\r\n                />\r\n              </FormControl>\r\n            </FormGroup>\r\n          </FormControl>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nSpotifySetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default SpotifySetup;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport QRCode from \"qrcode.react\";\r\n\r\nconst styles = (theme) => ({\r\n  container: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    flexFlow: \"column\",\r\n  },\r\n  avatar: {\r\n    marginBottom: 5,\r\n    height: 120,\r\n    borderRadius: \"50%\",\r\n    webkitBboxShadow: \"0 0 10px rgba(0,0,0,.3)\",\r\n    boxShadow: \"0 0 10px rgba(0,0,0,.3)\",\r\n  },\r\n  icon: {\r\n    height: 120,\r\n    width: 120,\r\n    marginTop: 5,\r\n  },\r\n  primaryText: {\r\n    fontSize: 18,\r\n    color: \"#fff\",\r\n    fontWeight: 500,\r\n  },\r\n  secondaryText: {\r\n    fontSize: 16,\r\n    color: \"#fff\",\r\n    fontWeight: 400,\r\n    opacity: 0.6,\r\n  },\r\n  pin: {\r\n    fontSize: 32,\r\n  },\r\n  header: {\r\n    fontSize: 28,\r\n    padding: 45,\r\n    fontWeight: 400,\r\n    color: \"#fff\",\r\n  },\r\n  subheader: {\r\n    fontSize: 24,\r\n    padding: 45,\r\n    fontWeight: 400,\r\n    color: \"#fff\",\r\n    opacity: 0.7,\r\n  },\r\n});\r\nclass SpotifyConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update({ phase: \"gameplay\" });\r\n  }\r\n\r\n  render() {\r\n    const { game, classes } = this.props;\r\n    let { players } = game;\r\n    if (!players) {\r\n      players = [];\r\n    } else {\r\n      players = Object.values(players);\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Typography className={classes.header}>\r\n            <span>Join game with Game PIN: </span>\r\n            <span className={classes.pin}>{game.gameId}</span>\r\n          </Typography>\r\n          <QRCode\r\n            value={\r\n              \"https://mannfeldt.github.io/stagehoot/#/play/?pin=\" + game.gameId\r\n            }\r\n            fgColor=\"#FFFFFF\"\r\n            bgColor=\"#1DB954\"\r\n            size={200}\r\n          />\r\n          <Typography className={classes.subheader}>\r\n            mannfeldt.github.io/stagehoot\r\n          </Typography>\r\n          <Typography className={classes.title}>{game.title}</Typography>\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"center\"\r\n            alignItems=\"flex-start\"\r\n          >\r\n            {players.map((player) => (\r\n              <Grid\r\n                key={player.key}\r\n                item\r\n                style={{ padding: \"15px 30px 30px 30px\" }}\r\n              >\r\n                {player.avatar ? (\r\n                  <img\r\n                    className={classes.avatar}\r\n                    src={player.avatar}\r\n                    alt={player.name}\r\n                  />\r\n                ) : (\r\n                  <PersonIcon classes={{ root: classes.icon }} />\r\n                )}\r\n                <Typography className={classes.secondaryText}>\r\n                  {player.name}\r\n                </Typography>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Button onClick={this.nextPhase} color=\"primary\">\r\n            Start\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(SpotifyConnection);\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport CountdownAnimation from '../../../common/CountdownAnimation';\r\n\r\nclass SpotifyStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.startCounter();\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n  }\r\n\r\n  startCounter() {\r\n    const that = this;\r\n    let counter = 5;\r\n    const i = setInterval(() => {\r\n      counter -= 1;\r\n      if (counter === 0) {\r\n        that.nextPhase();\r\n        clearInterval(i);\r\n      }\r\n    }, 1000);\r\n    return 5;\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game, gameFunc } = this.props;\r\n    // Generera frågor och svar. viktigt att göra detta i ett svep. vill inte behöva använda spotify api under spelets gång för att riskera att token har expirat\r\n    // ALT 1\r\n    // alla frågor och svar genereras här och sparas till firebase\r\n    // då kan jag läsa upp frågorna en i taget likt speltypen quiz och gå till resultQuestion componenten\r\n    // ALT 2\r\n    // Alla frågor genereras i spotify.js utan att sparas till firebase\r\n    // då måste resultquiz componenten vara en child-component till spotify.js.\r\n    // spotify.js visas både i phase gameplay och level_complete då och om det är level_complete så renderars childcomponent resultquiz\r\n\r\n    game.phase = 'gameplay';\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h2\">Starting game</Typography>\r\n        <CountdownAnimation speed=\"slow\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyStarting.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default SpotifyStarting;\r\n","import React, { Component } from 'react';\r\nimport { HorizontalBar } from 'react-chartjs-2';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  SPOTIFY_GREEN, SPOTIFY_GRAY,\r\n} from './SpotifyConstants';\r\n\r\nconst MAX_PLAYERS = 30;\r\nconst PLAYER_BAR_HEIGHT_INCREMENT = 22;\r\nconst MAX_HEIGHT_CHART = 620;\r\n\r\nfunction getRawData(game) {\r\n  const currentAnswers = Object.values(game.answers).filter(a => a.question === game.minigame.currentq);\r\n  const players = Object.values(game.players);\r\n  const answerPopulation = players.map((p) => {\r\n    const popularity = {\r\n      name: p.name,\r\n      playerKey: p.key,\r\n      nr: currentAnswers.reduce((init, curr) => init + (curr.answer && curr.answer.includes(p.key) ? 1 : 0), 0),\r\n    };\r\n    return popularity;\r\n  });\r\n\r\n  answerPopulation.sort((a, b) => b.nr - a.nr);\r\n  return answerPopulation;\r\n}\r\n\r\nclass AnswerChart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getChartData = this.getChartData.bind(this);\r\n    this.getChartOptions = this.getChartOptions.bind(this);\r\n    this.getChartHeight = this.getChartHeight.bind(this);\r\n  }\r\n\r\n  getChartData() {\r\n    const { game, correctAnswer } = this.props;\r\n\r\n    const chartData = {\r\n      labels: [],\r\n      datasets: [{\r\n        data: [],\r\n        label: 'podium',\r\n        backgroundColor: [],\r\n        borderWidth: 1,\r\n      }],\r\n    };\r\n    if (!game.answers) return chartData;\r\n    const answerPopulation = getRawData(game);\r\n    const maxIndex = answerPopulation.length > MAX_PLAYERS ? MAX_PLAYERS : answerPopulation.length;\r\n    for (let i = 0; i < maxIndex; i++) {\r\n      chartData.labels.push(answerPopulation[i].name);\r\n      chartData.datasets[0].data.push(answerPopulation[i].nr);\r\n      const lineColor = correctAnswer.includes(answerPopulation[i].playerKey) ? SPOTIFY_GREEN : SPOTIFY_GRAY;\r\n      chartData.datasets[0].backgroundColor.push(lineColor);\r\n    }\r\n\r\n    return chartData;\r\n  }\r\n\r\n  getChartHeight() {\r\n    const chartData = this.getChartData();\r\n    let height = 50 + (chartData.labels.length * PLAYER_BAR_HEIGHT_INCREMENT);\r\n    if (height > MAX_HEIGHT_CHART) {\r\n      height = MAX_HEIGHT_CHART;\r\n    }\r\n    return height;\r\n  }\r\n\r\n  getChartOptions() {\r\n    const chartHeight = this.getChartHeight();\r\n    const padding = (MAX_HEIGHT_CHART - chartHeight);\r\n    const options = {\r\n      maintainAspectRatio: false,\r\n      showTooltips: false,\r\n      responsiveAnimationDuration: 1000,\r\n      scales: {\r\n        yAxes: [{\r\n          ticks: {\r\n            beginAtZero: true,\r\n            min: 0,\r\n            fontSize: 13,\r\n            fontColor: 'rgba(255, 255, 255, 0.7)',\r\n          },\r\n          display: true,\r\n          beginAtZero: true,\r\n          maxBarThickness: 3,\r\n        }],\r\n        xAxes: [{\r\n          display: true,\r\n          beginAtZero: true,\r\n          ticks: {\r\n            beginAtZero: true,\r\n            min: 0,\r\n            fontSize: 16,\r\n            fontColor: 'rgba(255, 255, 255, 0.7)',\r\n            userCallback(label, index, labels) {\r\n              if (Math.floor(label) === label) {\r\n                return label;\r\n              }\r\n              return null;\r\n            },\r\n          },\r\n        }],\r\n      },\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltips: {\r\n        enabled: false,\r\n      },\r\n      events: [],\r\n      layout: {\r\n        padding: {\r\n          left: 60,\r\n          right: 60,\r\n          bottom: padding,\r\n        },\r\n      },\r\n    };\r\n    return options;\r\n  }\r\n\r\n  render() {\r\n    const options = this.getChartOptions();\r\n    return (\r\n      <div style={{ maxHeight: MAX_HEIGHT_CHART }}>\r\n        <HorizontalBar\r\n          data={this.getChartData}\r\n          height={MAX_HEIGHT_CHART}\r\n          options={options}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nAnswerChart.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  correctAnswer: PropTypes.array.isRequired,\r\n};\r\nexport default AnswerChart;\r\n","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport PropTypes from 'prop-types';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ArrowUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport ArrowDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport { Typography } from '@material-ui/core';\r\nimport {\r\n  SPOTIFY_GREEN,\r\n} from './SpotifyConstants';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  table: {\r\n    maxWidth: 700,\r\n    whiteSpace: 'nowrap',\r\n    margin: '0 auto',\r\n  },\r\n  player: {\r\n    display: 'inline-flex',\r\n    alignItems: 'center',\r\n  },\r\n  playerText: {\r\n    marginLeft: 15,\r\n  },\r\n  faded: {\r\n    opacity: 0.7,\r\n  },\r\n});\r\n\r\nfunction getLeaderboardScore(data) {\r\n  if (data.currentqScore === 0) {\r\n    return `${data.totalScore}`;\r\n  }\r\n  return `${data.totalScore} (+${data.currentqScore})`;\r\n}\r\n\r\nclass Leaderboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      leaderboard: props.leaderboardData,\r\n      page: 0,\r\n      rowsPerPage: 10,\r\n    };\r\n    this.startScoreCounter = this.startScoreCounter.bind(this);\r\n    this.getScoreCellWidth = this.getScoreCellWidth.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { leaderboard } = this.state;\r\n    for (let i = 0; i < leaderboard.length; i++) {\r\n      const player = leaderboard[i];\r\n      player.totalScore += player.currentqScore;\r\n    }\r\n    leaderboard.sort((a, b) => b.totalScore - a.totalScore);\r\n    for (let i = 0; i < leaderboard.length; i++) {\r\n      const player = leaderboard[i];\r\n      const oldPlayerIndex = [...leaderboard].sort((a, b) => (b.totalScore - b.currentqScore) - (a.totalScore - a.currentqScore)).findIndex(x => x.key === player.key);\r\n      const newIndex = leaderboard.findIndex(x => x.key === player.key);\r\n      player.posChange = oldPlayerIndex - newIndex;\r\n    }\r\n    this.setState({ leaderboard });\r\n    // setTimeout(this.startScoreCounter, 2000);\r\n  }\r\n\r\n  getScoreCellWidth() {\r\n    const { leaderboard } = this.state;\r\n    let slength = 0;\r\n    for (let i = 0; i < leaderboard.length; i++) {\r\n      const data = leaderboard[i];\r\n      const scoreWidth = getLeaderboardScore(data);\r\n      if (scoreWidth.length > slength) {\r\n        slength = scoreWidth.length;\r\n      }\r\n    }\r\n    return (slength * 6) + 65;\r\n  }\r\n\r\n    handleChangePage = (event, page) => {\r\n      this.setState({ page });\r\n    };\r\n\r\n    handleChangeRowsPerPage = (event) => {\r\n      this.setState({ rowsPerPage: event.target.value });\r\n    };\r\n\r\n    startScoreCounter() {\r\n      const that = this;\r\n      const interval = setInterval(() => {\r\n        let done = true;\r\n        const newLeaderBoard = that.state.leaderboard;\r\n        for (let i = 0; i < newLeaderBoard.length; i++) {\r\n          const player = newLeaderBoard[i];\r\n          if (!player.addedScore) player.addedScore = 0;\r\n          if (player.currentqScore > 0) {\r\n            done = false;\r\n            player.currentqScore -= 1;\r\n            player.addedScore += 1;\r\n            player.totalScore += 1;\r\n          }\r\n        }\r\n        newLeaderBoard.sort((a, b) => b.totalScore - a.totalScore);\r\n        for (let i = 0; i < newLeaderBoard.length; i++) {\r\n          const player = newLeaderBoard[i];\r\n          const oldPlayerIndex = [...newLeaderBoard].sort((a, b) => (b.totalScore - b.addedScore) - (a.totalScore - a.addedScore)).findIndex(x => x.key === player.key);\r\n          const newIndex = newLeaderBoard.findIndex(x => x.key === player.key);\r\n          player.posChange = oldPlayerIndex - newIndex;\r\n        }\r\n        that.setState({ leaderboard: newLeaderBoard });\r\n        if (done) {\r\n          clearInterval(interval);\r\n        }\r\n      }, 10);\r\n    }\r\n\r\n    render() {\r\n      const { classes } = this.props;\r\n      const { leaderboard, rowsPerPage, page } = this.state;\r\n      return (\r\n        <div className={classes.root}>\r\n          <Table className={classes.table}>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"dense\">#</TableCell>\r\n                <TableCell padding=\"dense\" />\r\n                <TableCell align=\"right\">Namn</TableCell>\r\n                <TableCell align=\"right\">Poäng</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {leaderboard.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map((data, index) => (\r\n                <TableRow key={data.key}>\r\n                  <TableCell padding=\"dense\" className={classes.faded} style={{ width: 40 }}>{index + 1}</TableCell>\r\n                  <TableCell padding=\"dense\" style={{ width: 80 }}>\r\n                    {!data.posChange && <RemoveIcon style={{ opacity: 0.7 }} />}\r\n                    {data.posChange > 0 && <ArrowUpIcon style={{ color: SPOTIFY_GREEN }} />}\r\n                    {data.posChange < 0 && <ArrowDownIcon style={{ color: 'red' }} />}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <div className={classes.player}>\r\n                      {data.avatar ? (\r\n                        <Avatar\r\n                          alt={data.name}\r\n                          src={data.avatar}\r\n                        />\r\n                      ) : <Avatar><PersonIcon /></Avatar>}\r\n                      <div className={classes.playerText}>\r\n                        <Typography>{data.name}</Typography>\r\n                      </div>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell align=\"right\" className={classes.faded} style={{ width: 100 }}>{data.totalScore}</TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n          {leaderboard.length > 10 && (\r\n          <TablePagination\r\n            component=\"div\"\r\n            count={leaderboard.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            backIconButtonProps={{\r\n              'aria-label': 'Previous Page',\r\n            }}\r\n            nextIconButtonProps={{\r\n              'aria-label': 'Next Page',\r\n            }}\r\n            onChangePage={this.handleChangePage}\r\n            onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n          />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n}\r\nLeaderboard.propTypes = {\r\n  leaderboardData: PropTypes.array,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(Leaderboard);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport Fade from '@material-ui/core/Fade';\r\n\r\nconst styles = theme => ({\r\n  primary: {\r\n    fontSize: 16,\r\n  },\r\n  root: {\r\n    backgroundColor: 'inherit',\r\n  },\r\n  avatar: {\r\n    height: 120,\r\n    width: 120,\r\n  },\r\n  itemtext: {\r\n    fontSize: 30,\r\n  },\r\n});\r\nfunction PlayerList(props) {\r\n  const { classes, players } = props;\r\n  if (!players || players.length === 0) {\r\n    return null;\r\n  }\r\n  const useDense = players.length > 3;\r\n\r\n  return (\r\n    <div>\r\n      <List dense={useDense} className={classes.root}>\r\n        <Grid\r\n          container\r\n          direction=\"row\"\r\n          justify=\"center\"\r\n          alignItems=\"flex-start\"\r\n        >\r\n          {players.map(player => (\r\n            <Grid key={player.key} item>\r\n              <Fade in>\r\n                <ListItem className={classes.listitem}>\r\n                  <ListItemAvatar>\r\n                    {player.avatar ? (\r\n                      <Avatar\r\n                        className={classes.avatar}\r\n                        alt={player.name}\r\n                        src={player.avatar}\r\n                      />\r\n                    ) : <Avatar><PersonIcon /></Avatar>}\r\n                  </ListItemAvatar>\r\n                  <ListItemText className={classes.itemtext} primary={player.name} />\r\n                </ListItem>\r\n              </Fade>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\nPlayerList.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  players: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(PlayerList);\r\n","/* eslint no-case-declarations: 0 */\r\nimport React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\nimport PlayerList from '../PlayerList';\r\nimport { SPOTIFY_GREEN, SONG_VOLUME_FADE_TIME } from '../SpotifyConstants';\r\n\r\nfunction getWinners(leaderboardData) {\r\n  const topScorer = leaderboardData.reduce((a, b) => (a.totalScore + a.currentqScore > b.totalScore + b.currentqScore ? a : b));\r\n  const topScore = topScorer.totalScore + topScorer.currentqScore;\r\n  return leaderboardData\r\n    .filter(d => d.totalScore + d.currentqScore === topScore)\r\n    .map(x => x.key);\r\n}\r\n\r\nconst styles = theme => ({\r\n  actions: {\r\n    position: 'absolute',\r\n    bottom: 15,\r\n    left: '50%',\r\n    marginLeft: '-426px',\r\n  },\r\n  itemtext: {\r\n    overflow: 'hidden',\r\n  },\r\n  header: {\r\n    fontSize: 28,\r\n    padding: 15,\r\n    fontWeight: 400,\r\n  },\r\n  subheader: {\r\n    fontSize: 24,\r\n    padding: 15,\r\n    opacity: 0.7,\r\n    fontWeight: 400,\r\n  },\r\n  itemtextDense: {\r\n    paddingLeft: 2,\r\n    paddingRight: 2,\r\n    overflow: 'hidden',\r\n  },\r\n  listitem: {\r\n    paddingLeft: 12,\r\n    paddingRight: 38,\r\n  },\r\n  container: {\r\n    height: '100vh',\r\n    width: '100vw',\r\n  },\r\n  headcontainer: {\r\n    padding: 15,\r\n  },\r\n});\r\nclass SpotifyResultQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      view: 'correct',\r\n    };\r\n    this.nextQuestion = this.nextQuestion.bind(this);\r\n    this.finalizeQuiz = this.finalizeQuiz.bind(this);\r\n    this.getCorrectAnswer = this.getCorrectAnswer.bind(this);\r\n    this.getLeaderboardData = this.getLeaderboardData.bind(this);\r\n    this.answersCollected = this.answersCollected.bind(this);\r\n    this.getPlayers = this.getPlayers.bind(this);\r\n    this.toggleView = this.toggleView.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { game } = this.props;\r\n    if (game.minigame.autoplay) {\r\n      const answer = this.getCorrectAnswer() || [];\r\n      setTimeout(this.toggleView, Math.min(6000, 2000 + answer.length * 500));\r\n    }\r\n  }\r\n\r\n  // returnera en array med playerkeys för de som är rätt\r\n  getCorrectAnswer() {\r\n    const {\r\n      game, tracks, question, playlists,\r\n    } = this.props;\r\n    if (!question) {\r\n      return null;\r\n    }\r\n    switch (question.qtype) {\r\n      case 'track_owner':\r\n        return tracks\r\n          .filter(t => t.id === question.track.id)\r\n          .map(tr => tr.playerKey);\r\n      case 'popularity':\r\n      case 'danceability':\r\n      case 'energy':\r\n      case 'valence':\r\n      case 'tempo':\r\n      case 'totalTracks':\r\n        if (question.subtype === 'max') {\r\n          const maxSize = playlists.reduce((a, b) => (a[question.qtype] > b[question.qtype] ? a : b))[question.qtype];\r\n          const answer = playlists\r\n            .filter(p => p[question.qtype] === maxSize)\r\n            .map(p => p.playerKey);\r\n          return answer;\r\n        }\r\n        if (question.subtype === 'min') {\r\n          const minSize = playlists.reduce((a, b) => (a[question.qtype] < b[question.qtype] ? a : b))[question.qtype];\r\n          const answer = playlists\r\n            .filter(p => p[question.qtype] === minSize)\r\n            .map(p => p.playerKey);\r\n          return answer;\r\n        }\r\n        return null;\r\n      case 'artist':\r\n        const maxArtist = playlists.reduce(\r\n          (a, b) => (b.artists[question.artist] > a ? b.artists[question.artist] : a),\r\n          0,\r\n        );\r\n        const answer = playlists\r\n          .filter(p => p.artists[question.artist] === maxArtist)\r\n          .map(p => p.playerKey);\r\n        return answer;\r\n      case 'genre':\r\n        const maxGenre = playlists.reduce(\r\n          (a, b) => (b.genres[question.genre] > a ? b.genres[question.genre] : a),\r\n          0,\r\n        );\r\n        const answerg = playlists\r\n          .filter(p => p.genres[question.genre] === maxGenre)\r\n          .map(p => p.playerKey);\r\n        return answerg;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  getLeaderboardData(correctAnswer) {\r\n    const { game } = this.props;\r\n    const players = Object.values(game.players);\r\n    if (!game.answers) return [];\r\n    const answers = Object.values(game.answers);\r\n    const leaderboardData = players.map((p) => {\r\n      // behövs den första listan?\r\n      // const currentPlayerAnswers = answers.filter(a => a.playerKey === p.key);\r\n      let currentScore = 0;\r\n      const currentPlayerCurrentAnswer = answers.find(\r\n        a => a.playerKey === p.key && a.question === game.minigame.currentq,\r\n      );\r\n      if (currentPlayerCurrentAnswer && currentPlayerCurrentAnswer.answer) {\r\n        currentPlayerCurrentAnswer.answer = currentPlayerCurrentAnswer.answer.filter(\r\n          x => x !== 'default',\r\n        );\r\n        currentScore = currentPlayerCurrentAnswer.answer.reduce((acc, cur) => {\r\n          if (correctAnswer && correctAnswer.includes(cur)) {\r\n            return acc + 1;\r\n          }\r\n          return acc - 1;\r\n        }, 0);\r\n      }\r\n      const data = {\r\n        name: p.name,\r\n        key: p.key,\r\n        avatar: p.avatar,\r\n        currentqScore: Math.max(0, currentScore),\r\n        totalScore: p.score,\r\n      };\r\n      return data;\r\n    });\r\n    return leaderboardData;\r\n  }\r\n\r\n  getPlayers(keys) {\r\n    const { game } = this.props;\r\n    const players = [];\r\n    if (!keys) return players;\r\n    keys.forEach((key) => {\r\n      const player = game.players[key];\r\n      players.push({\r\n        name: player.name,\r\n        avatar: player.avatar,\r\n        key: player.key,\r\n      });\r\n    });\r\n    return players;\r\n  }\r\n\r\n  toggleView() {\r\n    const { view } = this.state;\r\n    const { game } = this.props;\r\n    const isLastQuestion = game.minigame.currentq + 1 >= game.minigame.questions;\r\n\r\n    if (view === 'correct') {\r\n      if (game.minigame.autoplay) {\r\n        setTimeout(\r\n          this.toggleView,\r\n          Math.min(10000, 3000 + Object.values(game.players).length * 500),\r\n        );\r\n      }\r\n      this.setState(() => ({\r\n        view: 'answer',\r\n      }));\r\n    } else if (view === 'answer') {\r\n      if (game.minigame.autoplay) {\r\n        if (!isLastQuestion) {\r\n          setTimeout(\r\n            this.nextQuestion,\r\n            Math.min(10000, 2000 + Object.values(game.players).length * 500),\r\n          );\r\n        } else {\r\n          setTimeout(\r\n            this.finalizeQuiz,\r\n            Math.min(10000, 3000 + Object.values(game.players).length * 500),\r\n          );\r\n        }\r\n      }\r\n      this.setState(() => ({\r\n        view: 'leaderboard',\r\n      }));\r\n    }\r\n  }\r\n\r\n  finalizeQuiz() {\r\n    const { gameFunc, game } = this.props;\r\n    // gameFunc.update({ phase: 'final_result' });\r\n  }\r\n\r\n  // jag måste hantera att alla svar inte finns på plats direkt när spotifyResultQuestion kör componentdidmount? lägg in en hård sleep eller så läser jag updates som kommer in där\r\n  // jag gör alla beräkningar på score i render() och jag sparar först score till firebase på nextphase\r\n  nextQuestion() {\r\n    const { game, gameFunc, nextQuestion } = this.props;\r\n    const leaderboardData = this.getLeaderboardData(this.getCorrectAnswer());\r\n    const gameupdate = { ...game };\r\n    gameupdate.phase = 'gameplay';\r\n    gameupdate.minigame.currentq += 1;\r\n    leaderboardData.forEach((data) => {\r\n      gameupdate.players[data.key].score += data.currentqScore;\r\n    });\r\n    gameFunc.update(gameupdate);\r\n    nextQuestion();\r\n  }\r\n\r\n  playWinningSong(winners) {\r\n    const { tracks } = this.props;\r\n    const randomWinner = winners[Math.floor(Math.random() * winners.length)];\r\n    const celebrationTrack = tracks\r\n      .filter(x => x.playerKey === randomWinner.key && x.audio)\r\n      .sort(() => Math.random() - 0.5)[0];\r\n    const audio = new Audio(celebrationTrack.audio);\r\n    audio.volume = 0.1;\r\n    audio.play();\r\n    audio.onended = () => {\r\n      // this.nextPhase();\r\n    };\r\n    audio.canplay = () => {\r\n      // this.setState(() => ({\r\n      //   songDuration: audio.duration,\r\n      // }));\r\n    };\r\n    // fade in and out\r\n    audio.ontimeupdate = () => {\r\n      const left = audio.duration - audio.currentTime;\r\n      const fadeout = left <= SONG_VOLUME_FADE_TIME;\r\n      if (fadeout) {\r\n        audio.volume = left / SONG_VOLUME_FADE_TIME;\r\n      } else if (audio.volume < 1) {\r\n        audio.volume = Math.min(1, audio.volume + 0.2);\r\n      }\r\n    };\r\n  }\r\n\r\n  answersCollected() {\r\n    const { game } = this.props;\r\n    if (!game.answers) return false;\r\n    const answers = Object.values(game.answers);\r\n    const answersCollected = answers.filter(\r\n      a => a.question === game.minigame.currentq,\r\n    );\r\n    return answersCollected.length === Object.keys(game.players).length;\r\n  }\r\n\r\n  render() {\r\n    const { game, gameFunc, classes } = this.props;\r\n    const { view } = this.state;\r\n    const isLastQuestion = game.minigame.currentq + 1 >= game.minigame.questions;\r\n    const correctAnswer = this.getCorrectAnswer();\r\n    const leaderboardData = this.getLeaderboardData(correctAnswer);\r\n    const correctPlayers = this.getPlayers(correctAnswer);\r\n\r\n    if (view === 'leaderboard') {\r\n      let winners;\r\n      if (isLastQuestion) {\r\n        const winnerKeys = getWinners(leaderboardData);\r\n        winners = this.getPlayers(winnerKeys);\r\n        this.playWinningSong(winners);\r\n      }\r\n      return (\r\n        <div className=\"phase-container\">\r\n          <div className=\"quiz-top-section\">\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"space-between\"\r\n              alignItems=\"center\"\r\n              className={classes.headcontainer}\r\n            >\r\n              <Grid item>\r\n                <Typography className={classes.subheader}>{`Fråga ${game.minigame.currentq + 1} av ${game.minigame.questions}  `}</Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                {isLastQuestion ? (\r\n                  <Typography className={classes.header}>Winner</Typography>\r\n                ) : (\r\n                  <Typography className={classes.header}>Leaderboard</Typography>\r\n                )\r\n              }\r\n              </Grid>\r\n              <Grid item>\r\n                <Typography className={classes.subheader}>{`${game.gameId}`}</Typography>\r\n              </Grid>\r\n            </Grid>\r\n            <Divider />\r\n            {isLastQuestion && <PlayerList players={winners} />}\r\n          </div>\r\n          <div className=\"quiz-middle-section\">\r\n            <div>\r\n              <Leaderboard leaderboardData={leaderboardData} />\r\n            </div>\r\n          </div>\r\n          <div className=\"quiz-bottom-section\">\r\n            {!game.minigame.autoplay\r\n              && (\r\n              <div className={classes.actions}>\r\n                {isLastQuestion && <Button onClick={this.finalizeQuiz} color=\"primary\">Finalize result</Button>}\r\n                {!isLastQuestion && <Button onClick={this.nextQuestion} color=\"primary\">Next question</Button>}\r\n                <Button onClick={gameFunc.restart} color=\"secondary\">Restart quiz</Button>\r\n                <Button onClick={gameFunc.quit} color=\"secondary\">Quit quiz</Button>\r\n                <Button onClick={gameFunc.end} color=\"secondary\">End quiz</Button>\r\n              </div>\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    if (view === 'answer') {\r\n      return (\r\n        <div className=\"phase-container\">\r\n          <div className=\"quiz-top-section\">\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              justify=\"space-between\"\r\n              alignItems=\"center\"\r\n              className={classes.headcontainer}\r\n            >\r\n              <Grid item>\r\n                <Typography className={classes.subheader}>{`Fråga ${game.minigame.currentq + 1} av ${game.minigame.questions}  `}</Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                <Typography className={classes.header}>Svarsfördelning</Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                <Typography className={classes.subheader}>{`${game.gameId}`}</Typography>\r\n              </Grid>\r\n            </Grid>\r\n            <Divider />\r\n          </div>\r\n          <div className=\"quiz-middle-section\">\r\n            <div>\r\n              <AnswerChart game={game} correctAnswer={correctAnswer || []} />\r\n            </div>\r\n          </div>\r\n          <div className=\"quiz-bottom-section\">\r\n            {!game.minigame.autoplay\r\n              && (\r\n                <div className={classes.actions}>\r\n                  <Button onClick={this.toggleView} color=\"primary\">Next</Button>\r\n                </div>\r\n              )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\">\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            className={classes.headcontainer}\r\n          >\r\n            <Grid item>\r\n              <Typography className={classes.subheader}>{`Fråga ${game.minigame.currentq + 1} av ${game.minigame.questions}  `}</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography className={classes.header}>Rätt svar</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography className={classes.subheader}>{`${game.gameId}`}</Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Divider />\r\n        </div>\r\n        <div className=\"quiz-middle-section\">\r\n          <div>\r\n            <PlayerList players={correctPlayers} />\r\n          </div>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          {!game.minigame.autoplay\r\n            && (\r\n              <div className={classes.actions}>\r\n                <Button onClick={this.toggleView} color=\"primary\">Next</Button>\r\n              </div>\r\n            )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyResultQuestion.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n  playlists: PropTypes.array.isRequired,\r\n  nextQuestion: PropTypes.func.isRequired,\r\n  question: PropTypes.object,\r\n  tracks: PropTypes.array.isRequired,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(SpotifyResultQuestion);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { Progress } from 'react-sweet-progress';\r\nimport 'react-sweet-progress/lib/style.css';\r\nimport {\r\n  SPOTIFY_GREEN,\r\n} from './SpotifyConstants';\r\n\r\nconst styles = theme => ({\r\n  progress: {\r\n    width: '100%',\r\n    height: 3,\r\n    marginTop: 10,\r\n  },\r\n  linearColorPrimary: {\r\n    backgroundColor: '#404040',\r\n  },\r\n  linearBarColorPrimary: {\r\n    backgroundColor: SPOTIFY_GREEN,\r\n  },\r\n  hidden: {\r\n    display: 'none',\r\n  },\r\n  nosize: {\r\n    width: 0,\r\n    height: 0,\r\n  },\r\n});\r\n\r\nfunction SpotifyProgressbar(props) {\r\n  const { progress, classes } = props;\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgress\r\n        className={classes.progress}\r\n        variant=\"determinate\"\r\n        value={progress}\r\n        classes={{\r\n          colorPrimary: classes.linearColorPrimary,\r\n          barColorPrimary: classes.linearBarColorPrimary,\r\n        }}\r\n      />\r\n      {/* detta är bara fulhack. componenten behövs för att linearProgress ska köras smooth.. */}\r\n      <Progress\r\n        percent={progress}\r\n        status=\"success\"\r\n        className={classes.nosize}\r\n        symbolClassName={classes.hidden}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nSpotifyProgressbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  progress: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(SpotifyProgressbar);\r\n","import {\r\n  MIN_SONGS_PLAYLIST, MISSING_ALBUM_COVER,\r\n} from './SpotifyConstants';\r\n\r\n\r\nexport function getValidTracks(tracks) {\r\n  const validTracks = tracks.filter(x => x && x.track && x.track.id);\r\n\r\n  const uniqTracks = validTracks.filter((x, index, self) => self.findIndex(t => t.track.id === x.track.id) === index);\r\n  // const uniqTracks = validTracks.filter((x, index) => index === validTracks.findIndex(y => y.id === x.id));\r\n  return uniqTracks;\r\n}\r\n\r\nexport function getQuestionTracks(tracks) {\r\n  const validTracks = tracks.filter(x => x.audio && x.artists);\r\n\r\n  const uniqTracks = validTracks.filter((x, index) => index === validTracks.findIndex(y => y.id === x.id));\r\n  return uniqTracks;\r\n}\r\n\r\nexport function getAvaragePopularity(tracks) {\r\n  const popularity = tracks.reduce((acc, cur) => acc + cur.popularity, 0) / tracks.length;\r\n  return popularity;\r\n}\r\n\r\nexport function getGenresFrequencyMap(genres, totalTracks) {\r\n  const result = [];\r\n  genres.forEach((genre) => {\r\n    result[`${genre}`] = result[`${genre}`] + 1 || 1;\r\n  });\r\n  result.forEach((genre) => {\r\n    result[`${genre}`] = result[`${genre}`] / totalTracks;\r\n  });\r\n  return result;\r\n}\r\nexport function sortQuestions(questions) {\r\n  // track_owner tenderar att läggas först. kanske kan byta taktik till att lägga ett visst antal track-owner qs först\r\n  questions.sort((a, b) => (b.qtype === 'track_owner') - (a.qtype === 'track_owner'));\r\n\r\n  const questionsFirst = questions.splice(0, Math.min(3, questions.length - 1));\r\n  const questionsSecond = questions.splice(0, questions.length);\r\n  questionsSecond.sort((a, b) => {\r\n    if (a.qtype === 'track_owner' && b.qtype !== 'track_owner') {\r\n      return Math.random() - 0.6;\r\n    }\r\n    if (a.qtype !== 'track_owner' && b.qtype === 'track_owner') {\r\n      return Math.random() - 0.4;\r\n    }\r\n    return Math.random() - 0.5;\r\n  });\r\n\r\n  const finalQuestions = questionsFirst.concat(questionsSecond);\r\n  return finalQuestions;\r\n}\r\nexport function filterQuestionTracks(playlists, questionTracks, maxQuestionsPerList) {\r\n  const filteredQuestionTracks = [];\r\n  const questionTracksIds = [];\r\n  playlists.forEach((p) => {\r\n    const playerQuestionTracks = questionTracks.filter(x => x.playerKey === p.playerKey && !questionTracksIds.includes(x.id));\r\n    playerQuestionTracks.sort(() => Math.random() - 0.5);\r\n    let uniqAlbumTracks = playerQuestionTracks.filter((x, index) => index === playerQuestionTracks.findIndex(y => y.img === x.img && y.playerKey === x.playerKey));\r\n    if (uniqAlbumTracks.length > maxQuestionsPerList) {\r\n      uniqAlbumTracks.length = maxQuestionsPerList;\r\n    } else {\r\n      uniqAlbumTracks = playerQuestionTracks.filter((x, index) => index === playerQuestionTracks.findIndex(y => y.img === x.img && y.playerKey === x.playerKey && y.artists === x.artists));\r\n      if (uniqAlbumTracks.length > maxQuestionsPerList) {\r\n        uniqAlbumTracks.length = maxQuestionsPerList;\r\n      }\r\n    }\r\n    questionTracksIds.push(...uniqAlbumTracks.map(x => x.id));\r\n    filteredQuestionTracks.push(...uniqAlbumTracks);\r\n  });\r\n  return filteredQuestionTracks;\r\n}\r\n\r\nexport function getIdFrequencyMap(ids) {\r\n  const result = {};\r\n  ids.forEach((id) => {\r\n    if (id) {\r\n      result[`${id}`] = result[`${id}`] + 1 || 1;\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function getArtistFrequencyMap(tracks) {\r\n  // detta genererar en array som t.ex. [kanye:2,eminem:3]\r\n  // men jag kanske vill ha en simpel object array för att kunna göra enkelare filter funktioner på det senare? ex: [{artist:'kanye',uses:2},{artist:'eminem',uses:5}]\r\n  const result = {};\r\n  const artists = [];\r\n  tracks.forEach((track) => {\r\n    artists.push(...track.artistList);\r\n  });\r\n  artists.forEach((artist) => {\r\n    result[`${artist}`] = result[`${artist}`] + 1 || 1;\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function getAvarageReleasedate(tracks) {\r\n  // const avarageReleaseDate = tracks.reduce((acc,cur) => acc + cur.rele)\r\n  // realse_date är inte en del av tracks. finns på album  ...\r\n  return 2;\r\n}\r\n\r\n// TEST: testa att radion av alla olika quiztyper är rätt med lite olika size på tracks och playlists. och att qtype fungerar\r\nexport function generateQuestions(playlists, tracks, minigame) {\r\n  // jag vet inte riktigt rätt svar när jag genererar då tracks som kommer in bara är en players tracks\r\n  // så vilka som har en track i sin lista får jag kolla senare live.\r\n\r\n  // q types:\r\n  // VILKEN ÄR DEN SENAASTE LÅTEN SOM playerxx lagt till? vilken var den först?\r\n\r\n  const result = [];\r\n\r\n  if (minigame.qFeatures) {\r\n    const time = playlists.length < 10 ? 10 : 15;\r\n    result.push({\r\n      qtype: 'popularity',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vem har den trendigaste spellistan?',\r\n      time,\r\n    });\r\n    result.push({\r\n      qtype: 'popularity',\r\n      atype: 'single',\r\n      subtype: 'min',\r\n      text: 'Vem har den minst trendiga spellistan?',\r\n      time,\r\n    });\r\n\r\n    result.push({\r\n      qtype: 'danceability',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vem har den dansvänligaste spellistan?',\r\n      time,\r\n    });\r\n\r\n    result.push({\r\n      qtype: 'danceability',\r\n      atype: 'single',\r\n      subtype: 'min',\r\n      text: 'Vem har den minst dansvänliga spellistan?',\r\n      time,\r\n    });\r\n\r\n    result.push({\r\n      qtype: 'tempo',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vems spellista har högst tempo?',\r\n      time,\r\n    });\r\n    result.push({\r\n      qtype: 'tempo',\r\n      atype: 'single',\r\n      subtype: 'min',\r\n      text: 'Vems spellista har lägst tempo?',\r\n      time,\r\n    });\r\n\r\n    result.push({\r\n      qtype: 'energy',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vem har den mest energifyllda spellistan?',\r\n      time,\r\n    });\r\n\r\n    result.push({\r\n      qtype: 'valence',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vem har den gladaste spellistan?',\r\n      time,\r\n    });\r\n    result.push({\r\n      qtype: 'valence',\r\n      atype: 'single',\r\n      subtype: 'min',\r\n      text: 'Vem har den dystraste spellistan?',\r\n      time,\r\n    });\r\n\r\n    // skapa två frågor\r\n\r\n    // vem är den minst trendande och vem har den mest trendande listan?\r\n    // ska dessa frågor alltid vara med och track_owner är utfyllnaden för att nå questionsamount?\r\n    // jag tror vi kör på helt random, ta ut ett godtyckligt antal track_owner och sen random sort och retunera rätt antal\r\n\r\n    // qtype: popularity,\r\n    // atype: single,\r\n    // size: max/min\r\n  }\r\n  if (minigame.qSize) {\r\n    const time = playlists.length < 10 ? 10 : 15;\r\n\r\n    result.push({\r\n      qtype: 'totalTracks',\r\n      atype: 'single',\r\n      subtype: 'min',\r\n      text: 'Vem har kortast spellista?',\r\n      time,\r\n    });\r\n    result.push({\r\n      qtype: 'totalTracks',\r\n      atype: 'single',\r\n      subtype: 'max',\r\n      text: 'Vem har längst spellista?',\r\n      time,\r\n    });\r\n    // skapa två frågor vem har störst lista vem har minst lista\r\n\r\n    // qtype: size,\r\n    // atype: single,\r\n    // size: max/min\r\n  }\r\n  if (minigame.qArtist) {\r\n    // skapa flera olika typer av frågor, blanda och filtrera innan push till result\r\n    const artistQs = [];\r\n\r\n    playlists.forEach((playlist) => {\r\n      const question = {\r\n        qtype: 'artist',\r\n        subtype: 'max',\r\n        atype: 'single',\r\n        artist: playlist.topArtist.name,\r\n        text: `Vem har flest låtar med ${playlist.topArtist.name}?`,\r\n        img: playlist.topArtist.img,\r\n        artistId: playlist.topArtist.id,\r\n      };\r\n      if (!artistQs.some(a => a.artistId === question.artistId)) {\r\n        artistQs.push(question);\r\n      }\r\n    });\r\n    // ?\r\n    if (artistQs.length > tracks.length) {\r\n      artistQs.length = Math.floor(tracks.length);\r\n    }\r\n    result.push(...artistQs);\r\n\r\n    // kan använda playlist.artists för att få till flera frågor här:\r\n    // vem är den ända som inte har en låt med x?\r\n    // ...\r\n  }\r\n  if (minigame.qGenre) {\r\n    // skapa flera olika typer av frågor, blanda och filtrera innan push till result\r\n    const genreQs = [];\r\n\r\n    // gör om det till andelar %av tracks som är en viss genre. alltså ge varje genre i playlist.grenres ett värde så att det totalt blir 1000?\r\n    // ta de två vanligaste från varje player och lägg till fråga på dem om de inte redan finns med\r\n    playlists.forEach((playlist) => {\r\n      const mostCommonGenre = Object.keys(playlist.genres).reduce((a, b) => ((playlist.genres[a] > playlist.genres[b]) && a !== 'pop' ? a : b));\r\n      const question = {\r\n        qtype: 'genre',\r\n        subtype: 'max',\r\n        atype: 'single',\r\n        genre: mostCommonGenre,\r\n        text: `Vem har störst andel låtar i genren \"${mostCommonGenre}\"?`,\r\n        time: playlists.length < 10 ? 15 : 20,\r\n      };\r\n      if (!genreQs.some(a => a.text === question.text)) {\r\n        genreQs.push(question);\r\n      }\r\n      const secondMostCommonGenre = Object.keys(playlist.genres).reduce((a, b) => (playlist.genres[a] > playlist.genres[b] && a !== mostCommonGenre ? a : b));\r\n      const secondQuestion = {\r\n        qtype: 'genre',\r\n        subtype: 'max',\r\n        atype: 'single',\r\n        genre: secondMostCommonGenre,\r\n        text: `Vem har störst andel låtar i genren \"${mostCommonGenre}\"?`,\r\n        time: playlists.length < 10 ? 15 : 20,\r\n      };\r\n      if (!genreQs.some(a => a.text === secondQuestion.text)) {\r\n        genreQs.push(secondQuestion);\r\n      }\r\n    });\r\n    // ?\r\n    if (genreQs.length > tracks.length / 2) {\r\n      genreQs.length = Math.floor(tracks.length / 2);\r\n    }\r\n    result.push(...genreQs);\r\n\r\n    // kan använda playlist.artists för att få till flera frågor här:\r\n    // vem är den ända som inte har en låt med x?\r\n    // ...\r\n  }\r\n  if (minigame.qTrackOwner) {\r\n    // tracks är lika med antalet totala frågor när den kommer in. om vi redan skapat frågor ovan så mindksar vi antalet trackowner-frågor\r\n    tracks.sort(() => Math.random() - 0.5);\r\n    result.push(...tracks.map((t) => {\r\n      const q = {\r\n        qtype: 'track_owner',\r\n        atype: 'multi',\r\n        track: t,\r\n        text: 'Vem har denna låt i sin spellista?',\r\n      };\r\n      return q;\r\n    }));\r\n  }\r\n  // if (!minigame.qTrackOwner && result.length < minigame.questions) {\r\n  //   const trackowner = [];\r\n  //   tracks.sort(() => Math.random() - 0.5);\r\n  //   trackowner.push(...tracks.map((t) => {\r\n  //     const q = {\r\n  //       qtype: 'track_owner',\r\n  //       atype: 'multi',\r\n  //       track: t,\r\n  //       text: 'Vem har denna låt i sin spellista?',\r\n  //     };\r\n  //     return q;\r\n  //   }));\r\n  //   trackowner.length = Math.min(minigame.questions - result.length, trackowner.length);\r\n  //   result.push(...trackowner);\r\n  // }\r\n\r\n  console.table(result);\r\n  return result;\r\n}\r\n\r\nexport function isValidPlaylist(playlist) {\r\n  if (playlist.tracks.total < MIN_SONGS_PLAYLIST) {\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\nexport function formatTime(sec) {\r\n  let minutes = Math.floor(sec / 60);\r\n  minutes = (minutes >= 10) ? minutes : `0${minutes}`;\r\n  let seconds = Math.floor(sec % 60);\r\n  seconds = (seconds >= 10) ? seconds : `0${seconds}`;\r\n  return `${minutes}:${seconds}`;\r\n}\r\n\r\nexport default[generateQuestions, isValidPlaylist, formatTime];\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\nimport SpotifyProgressbar from './SpotifyProgressbar';\r\nimport * as util from './SpotifyUtil';\r\n\r\nconst styles = theme => ({\r\n  timeContainer: {\r\n    display: 'flex',\r\n    marginTop: 60,\r\n    width: 680,\r\n  },\r\n  timeTextLeft: {\r\n    marginRight: 20,\r\n    marginLeft: 40,\r\n    fontSize: 16,\r\n    color: '#fff',\r\n    opacity: 0.6,\r\n    fontWeight: 400,\r\n  },\r\n  timeTextRight: {\r\n    marginRight: 40,\r\n    marginLeft: 20,\r\n    fontSize: 16,\r\n    color: '#fff',\r\n    opacity: 0.6,\r\n    fontWeight: 400,\r\n  },\r\n});\r\n\r\nfunction SpotifyTimer(props) {\r\n  const { time, duration, classes } = props;\r\n  const timeString = util.formatTime(time);\r\n  const durationString = util.formatTime(duration);\r\n  const progress = (time / (duration - 0.5)) * 100;\r\n  return (\r\n    <div className={classes.timeContainer}>\r\n      <Typography className={classes.timeTextLeft}>{timeString}</Typography>\r\n      <SpotifyProgressbar progress={progress} />\r\n      <Typography className={classes.timeTextRight}>{durationString}</Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nSpotifyTimer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  time: PropTypes.number.isRequired,\r\n  duration: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(SpotifyTimer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport SpotifyTimer from './SpotifyTimer';\r\nimport {\r\n  SPOTIFY_GREEN,\r\n  MISSING_ALBUM_COVER,\r\n} from './SpotifyConstants';\r\n\r\n// kan användas för lite coolare shadows. tillsammans med en radio på 200px\r\n// const shadowColors = ['rgba(255,0,0,.4)', 'rgba(0,255,0,.4)', 'rgba(0,0,255,.4)'];\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    flexFlow: 'column',\r\n  },\r\n  img: {\r\n    marginBottom: 45,\r\n    maxHeight: 540,\r\n    webkitBboxShadow: '0 0 10px rgba(0,0,0,.3)',\r\n    boxShadow: '0 0 10px rgba(0,0,0,.3)',\r\n  },\r\n  timeContainer: {\r\n    display: 'flex',\r\n    marginTop: 60,\r\n    width: 680,\r\n  },\r\n  progress: {\r\n    width: '100%',\r\n    height: 3,\r\n    marginTop: 10,\r\n  },\r\n  linearColorPrimary: {\r\n    backgroundColor: '#404040',\r\n  },\r\n  linearBarColorPrimary: {\r\n    backgroundColor: SPOTIFY_GREEN,\r\n  },\r\n  timeTextLeft: {\r\n    marginRight: 20,\r\n    marginLeft: 40,\r\n    fontSize: 16,\r\n    color: '#fff',\r\n    opacity: 0.6,\r\n    fontWeight: 400,\r\n  },\r\n  timeTextRight: {\r\n    marginRight: 40,\r\n    marginLeft: 20,\r\n    fontSize: 16,\r\n    color: '#fff',\r\n    opacity: 0.6,\r\n    fontWeight: 400,\r\n  },\r\n  primaryText: {\r\n    fontSize: 18,\r\n    color: '#fff',\r\n    fontWeight: 500,\r\n  },\r\n  secondaryText: {\r\n    fontSize: 16,\r\n    color: '#fff',\r\n    fontWeight: 400,\r\n    opacity: 0.6,\r\n  },\r\n  header: {\r\n    fontSize: 28,\r\n    padding: 45,\r\n    fontWeight: 400,\r\n  },\r\n});\r\n\r\nfunction TrackPlayer(props) {\r\n  const { track, classes, text } = props;\r\n  return (\r\n    <div className={classes.container}>\r\n      <Typography className={classes.header}>{text}</Typography>\r\n      <img src={track.img} alt=\"cover art\" className={classes.img} onError={(e) => { e.target.onerror = null; e.target.src = MISSING_ALBUM_COVER; }} />\r\n      <div className={classes.footer}>\r\n        <Typography className={classes.primaryText}>{track.name}</Typography>\r\n        <Typography className={classes.secondaryText}>{track.artists}</Typography>\r\n        <SpotifyTimer time={track.currentTime} duration={track.duration} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nTrackPlayer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  track: PropTypes.object.isRequired,\r\n  text: PropTypes.string,\r\n};\r\n\r\nexport default withStyles(styles)(TrackPlayer);\r\n","\r\nfunction getSpotifyHeader(token, method) {\r\n  const headers = new Headers();\r\n  headers.append('Authorization', `Bearer ${token}`);\r\n  const header = {\r\n    method,\r\n    headers,\r\n  };\r\n  return header;\r\n}\r\nexport async function getPlaylistTracks(playlistId, token) {\r\n  const header = getSpotifyHeader(token, 'GET');\r\n\r\n  let hasNext = true;\r\n  let offset = 0;\r\n  const playlistTracks = [];\r\n  while (hasNext) {\r\n    // from_token ska kunna hämta flera previewUrls. kanske lösa problem med låtar som får 404?\r\n    // &market=from_token\r\n    const playlistResponse = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks?offset=${offset}&market=from_token`, header);\r\n    const playlistResult = await playlistResponse.json();\r\n    playlistTracks.push(...playlistResult.items);\r\n    if (playlistResult.items.length < 100) {\r\n      hasNext = false;\r\n    } else {\r\n      offset += 100;\r\n    }\r\n  }\r\n  return playlistTracks;\r\n}\r\n\r\nexport async function getArtists(artistIds, token) {\r\n  const header = getSpotifyHeader(token, 'GET');\r\n\r\n\r\n  const chunks = [];\r\n  const size = 50;\r\n\r\n  while (artistIds.length > 0) {\r\n    chunks.push(artistIds.splice(0, size));\r\n  }\r\n\r\n  const artists = [];\r\n  for (const ids of chunks) {\r\n    const inputids = ids.join(',');\r\n    const artistsResponse = await fetch(`https://api.spotify.com/v1/artists?ids=${inputids}`, header);\r\n    const result = await artistsResponse.json();\r\n    artists.push(...result.artists);\r\n  }\r\n  return artists;\r\n}\r\n\r\nexport async function getArtistTopTracks(artistId, token) {\r\n  const header = getSpotifyHeader(token, 'GET');\r\n\r\n  const topTracksResponse = await fetch(`https://api.spotify.com/v1/artists/${artistId}/top-tracks?market=from_token`, header);\r\n  const topTracksResult = await topTracksResponse.json();\r\n  return topTracksResult.tracks;\r\n}\r\n\r\nexport async function getTrackFeatures(trackIds, token) {\r\n  const header = getSpotifyHeader(token, 'GET');\r\n\r\n  const chunks = [];\r\n  const size = 100;\r\n\r\n  while (trackIds.length > 0) { chunks.push(trackIds.splice(0, size)); }\r\n\r\n  const trackFeatures = [];\r\n  for (const ids of chunks) {\r\n    const inputids = ids.join(',');\r\n    const artistsResponse = await fetch(`https://api.spotify.com/v1/audio-features?ids=${inputids}`, header);\r\n    const result = await artistsResponse.json();\r\n    trackFeatures.push(...result.audio_features);\r\n  }\r\n  return trackFeatures;\r\n}\r\n\r\nexport async function getGenreTopTracks(genre, token) {\r\n  const header = getSpotifyHeader(token, 'GET');\r\n  const uriGenre = encodeURI(genre);\r\n  const topTracksResponse = await fetch(`https://api.spotify.com/v1/search?q=genre%3A%22${uriGenre}%22&type=track&market=from_token&limit=50`, header);\r\n  const topTracksResult = await topTracksResponse.json();\r\n  return topTracksResult.tracks;\r\n}\r\n\r\nexport default[];\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport * as p2 from \"p2\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { fireGolf } from \"../../../base\";\r\nimport golfwood1Audio from \"../golf/audio/golfwood.wav\";\r\nimport golfwood2Audio from \"../golf/audio/golfwood2.wav\";\r\nimport golfwood3Audio from \"../golf/audio/golfwood3.wav\";\r\nimport golfiron1Audio from \"../golf/audio/golfiron.wav\";\r\nimport golfiron2Audio from \"../golf/audio/golfiron2.wav\";\r\nimport golfiron3Audio from \"../golf/audio/golfiron3.wav\";\r\n\r\nimport countdownAudio from \"../golf/audio/countdown.wav\";\r\nimport golfclapAudio from \"../golf/audio/golfclap.wav\";\r\nimport golfputtAudio from \"../golf/audio/golfputt.wav\";\r\nimport golfscoreAudio from \"../golf/audio/golfscore.wav\";\r\n\r\n// http://jsfiddle.net/AceJJ/1748/ fireworks\r\nimport * as util from \"../golf/GolfUtil\";\r\nimport {\r\n  HURRY_UP_MS,\r\n  GRASS_COLOR,\r\n  MATCH_OVER_MS,\r\n  BALL_RADIUS,\r\n  PENALTY_STROKES,\r\n  CLUBS,\r\n} from \"../golf/GolfConstants\";\r\n\r\nlet ctx;\r\nlet canvas;\r\nconst fixedTimeStep = 1 / 60; // seconds\r\nconst maxSubSteps = 10; // Max sub steps to catch up with the wall clock\r\nlet lastTime;\r\n\r\nfunction drawBall(\r\n  x,\r\n  y,\r\n  stroke,\r\n  playerColor,\r\n  playerIndex,\r\n  playerState,\r\n  showNameTag,\r\n  playerName,\r\n  canvasHeight\r\n) {\r\n  // ball border width\r\n  ctx.lineWidth = 1;\r\n\r\n  ctx.fillStyle = playerColor;\r\n  ctx.strokeStyle = stroke;\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, BALL_RADIUS, 0, 2 * Math.PI);\r\n  ctx.fill();\r\n  ctx.closePath();\r\n\r\n  ctx.beginPath();\r\n  ctx.arc(x, y, BALL_RADIUS - ctx.lineWidth / 2, 0, 2 * Math.PI);\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n\r\n  if (\r\n    showNameTag &&\r\n    playerState &&\r\n    (playerState === \"STILL\" || playerState === \"MOVING\")\r\n  ) {\r\n    let ballIndexMod = playerIndex % 10;\r\n    let poleMin = Math.max(100, canvasHeight * 0.2);\r\n    let poleMax = Math.max(150, canvasHeight * 0.4);\r\n    let indexFactor = (poleMax - poleMin) / 10;\r\n    let poleHeight = poleMin + ballIndexMod * indexFactor;\r\n\r\n    ctx.lineWidth = 2;\r\n    ctx.strokeStyle = playerColor;\r\n    ctx.beginPath();\r\n    ctx.moveTo(x, y);\r\n    ctx.lineTo(x, y - poleHeight);\r\n    ctx.stroke();\r\n    ctx.closePath();\r\n\r\n    ctx.font = \"20px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillText(playerName, x, y - poleHeight - 5);\r\n  }\r\n}\r\n\r\nclass GolfRace extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // för att göra det mer smooth. så behöver jag typ dela upp ätandet så att det sker i flera tick? för just nu är ett tick storleken på food och allt annat\r\n    // lite delay när jag ökar speeden. är det olika delay för olika snakes? optimera senare.\r\n    const canvasHeight = Math.floor(window.innerHeight - 160);\r\n    const canvasWidth = Math.floor(window.innerWidth);\r\n\r\n    const soundEffects = {\r\n      wood: [\r\n        {\r\n          audio: util.createAudio(golfwood1Audio),\r\n          minpower: 400,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfwood2Audio),\r\n          minpower: 300,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfwood3Audio),\r\n          minpower: 200,\r\n        },\r\n      ],\r\n      golfclap: {\r\n        audio: util.createAudio(golfclapAudio),\r\n      },\r\n      iron: [\r\n        {\r\n          audio: util.createAudio(golfiron1Audio),\r\n          minpower: 350,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfiron2Audio),\r\n          minpower: 250,\r\n        },\r\n        {\r\n          audio: util.createAudio(golfiron3Audio),\r\n          minpower: 150,\r\n        },\r\n      ],\r\n      putt: [\r\n        {\r\n          audio: util.createAudio(golfputtAudio),\r\n          minpower: 8,\r\n        },\r\n      ],\r\n      countdown: {\r\n        audio: util.createAudio(countdownAudio),\r\n      },\r\n    };\r\n    this.state = {\r\n      levelData: null,\r\n      world: null,\r\n      level: null,\r\n      startTime: null,\r\n      expTime: null,\r\n      time: 0,\r\n      canvasHeight,\r\n      canvasWidth,\r\n      leaderId: null,\r\n      matchEndTime: null,\r\n      testacceleration: 195,\r\n      testClubIndex: 2,\r\n      testBallIndex: 0,\r\n      balls: null,\r\n      nextLevelTimer: null,\r\n      leaderboard: [],\r\n      soundEffects,\r\n    };\r\n    // golf\r\n    this.init = this.init.bind(this);\r\n    this.ensurePlayersInBounds = this.ensurePlayersInBounds.bind(this);\r\n    this.swing = this.swing.bind(this);\r\n    this.drawGround = this.drawGround.bind(this);\r\n    this.drawPlayHud = this.drawPlayHud.bind(this);\r\n    this.renderFrame = this.renderFrame.bind(this);\r\n    this.animate = this.animate.bind(this);\r\n    this.testSwing = this.testSwing.bind(this);\r\n    this.syncPlayersObjectToFirebase = this.syncPlayersObjectToFirebase.bind(\r\n      this\r\n    );\r\n    this.initControllerListener = this.initControllerListener.bind(this);\r\n    this.isLevelCompleted = this.isLevelCompleted.bind(this);\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n    this.saveGame = this.saveGame.bind(this);\r\n    this.setEventHandlers = this.setEventHandlers.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.init();\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // kan jag ha det här?\r\n\r\n    return true;\r\n  }\r\n\r\n  setEventHandlers(world) {\r\n    world.on(\"postStep\", (evt) => {\r\n      const { balls, level, canvasWidth } = this.state;\r\n      const { game: _game } = this.props;\r\n      const players = Object.values(_game.players);\r\n      const stillBalls = balls.filter(\r\n        (x) => x.velocity[0] === 0 && x.velocity[1] === 0\r\n      );\r\n      if (stillBalls.length === 0) {\r\n        return;\r\n      }\r\n      const playersToUpdateState = players.filter(\r\n        (x) =>\r\n          x.state === \"MOVING\" && stillBalls.some((b) => x.key === b.playerKey)\r\n      );\r\n      if (playersToUpdateState.length === 0) {\r\n        return;\r\n      }\r\n      const newPlayerState = players.map((player, index) => {\r\n        if (playersToUpdateState.some((x) => x.key === player.key)) {\r\n          return {\r\n            ...player,\r\n            state: \"STILL\",\r\n            distance: util.getDistanceYards(\r\n              canvasWidth,\r\n              balls[player.ballIndex].interpolatedPosition[0]\r\n            ),\r\n            //TODO här ska vi kanske räkna distance mellan boll och högerväggen\r\n          };\r\n        }\r\n        return player;\r\n      });\r\n      this.syncPlayersToFirebase(newPlayerState);\r\n    });\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  ensurePlayersInBounds() {\r\n    //TODO den här ska inte behövas. högerkant ska vi ha en fysisk vägg så ingen beräkning behövs.\r\n    //TODO i vänsterkant däremot behövs något som det här faktiskt? så kanske behåll denna metod för att koll när man dör\r\n\r\n    //TODO när man är utanför till vänster och åker ut så lägg till spelaren i state.leaderboard med antal spelare kvar som sin position.\r\n    const { balls, canvasWidth, level } = this.state;\r\n    const ensuredBalls = balls.map((ball) => {\r\n      const result = ball;\r\n      if (\r\n        ball.interpolatedPosition[0] < 0 ||\r\n        ball.interpolatedPosition[0] > canvasWidth\r\n      ) {\r\n        result.dead = true;\r\n      }\r\n      return result;\r\n    });\r\n\r\n    this.setState(() => ({\r\n      balls: ensuredBalls,\r\n    }));\r\n  }\r\n\r\n  drawBalls() {\r\n    const { balls, canvasHeight } = this.state;\r\n    const { game } = this.props;\r\n    const players = Object.values(game.players);\r\n\r\n    const len = players.length;\r\n    for (let i = 0; i < len; i++) {\r\n      const player = players[i];\r\n      const pos = balls[player.ballIndex].interpolatedPosition;\r\n      drawBall(\r\n        pos[0],\r\n        pos[1],\r\n        \"gray\",\r\n        player.color,\r\n        player.ballIndex,\r\n        player.state,\r\n        player.showNameTag,\r\n        player.name,\r\n        canvasHeight\r\n      );\r\n    }\r\n  }\r\n\r\n  drawGround() {\r\n    //TODO för race så räcker det kanske med att uppdater så att points är rätt? så kommer de alltid ritas bra här.\r\n    //TODO behöver bara se till att points som försvinner till vänster tas bort och vi lägger till nya points till höger dynamiskt\r\n    //TODO kan det blir problem med scroll i webläsaren?\r\n    const { level, canvasHeight, canvasWidth } = this.state;\r\n    const { points } = level;\r\n\r\n    ctx.fillStyle = level.color;\r\n    const groundLineWidth = 3;\r\n    ctx.lineWidth = groundLineWidth;\r\n\r\n    ctx.beginPath();\r\n    const firstPoint = points[0];\r\n    ctx.moveTo(firstPoint[0], firstPoint[1]);\r\n\r\n    points.slice(1).forEach((point) => {\r\n      ctx.lineTo(point[0], point[1]);\r\n    });\r\n\r\n    // draw a complete shape so fill works\r\n    // add padding so the outline stroke doesn't show up\r\n\r\n    ctx.lineTo(canvasWidth + groundLineWidth, points[points.length - 1][1]);\r\n    ctx.lineTo(canvasWidth + groundLineWidth, canvasHeight + groundLineWidth);\r\n    ctx.lineTo(-groundLineWidth, canvasHeight + groundLineWidth);\r\n    ctx.lineTo(-groundLineWidth, points[0][1]);\r\n\r\n    ctx.strokeStyle = GRASS_COLOR;\r\n    ctx.stroke();\r\n    ctx.fill();\r\n    ctx.closePath();\r\n  }\r\n\r\n  drawPlayHud() {\r\n    //TODO denna kanske inte behövs, eller kan skrivas om. En timer bara kanske. som visar vilken nivå (speed) vi är på\r\n    //TODO och en timer som räknar ner för när nästa nivå kommer.\r\n    const { expTime, canvasWidth } = this.state;\r\n    const { game } = this.props;\r\n    ctx.font = \"24px roboto\";\r\n    ctx.fillStyle = \"#000000\";\r\n    ctx.fillText(`Level 1. next level in 24s`, 15, 24);\r\n    ctx.font = \"20px roboto\";\r\n    ctx.textAlign = \"right\";\r\n    ctx.fillText(`pin: ${game.gameId}`, canvasWidth - 30, 24);\r\n    ctx.textAlign = \"left\";\r\n\r\n    const timeRemaining = Math.floor((expTime - Date.now()) / 1000);\r\n    //TODO gör någon ljudeffekt för när nästa nivå kommer\r\n    // if (timeRemaining === 10) {\r\n    //   soundEffects.countdown.audio.play();\r\n    // }\r\n  }\r\n\r\n  testSwing() {\r\n    const { testacceleration, testClubIndex, testBallIndex } = this.state;\r\n    const club = CLUBS[testClubIndex];\r\n    const swing = util.getSwingData(club, testacceleration);\r\n    this.swing(swing, testBallIndex, true);\r\n  }\r\n\r\n  swing(velocity, ballIndex, test) {\r\n    const { balls, soundEffects } = this.state;\r\n    const {\r\n      game: { players },\r\n    } = this.props;\r\n    const clubtype = util.identifyClubType(velocity);\r\n    const power = velocity.x + velocity.y;\r\n    const soundEffect = soundEffects[clubtype].find((x) => power > x.minpower);\r\n    // ljudet borde styras mer av var på banan jag slår. spawn så är det en ren smäll. utanför spawn så är det lite mer \"gräsljud\"?\r\n    // iron och wood blir samma. wood ska jag inte kunna välja utanför spawn?\r\n    if (soundEffect) {\r\n      soundEffect.audio.currentTime = 0;\r\n      soundEffect.audio.play();\r\n    }\r\n\r\n    const ballToHit = balls.find((b) => b.ballIndex === ballIndex);\r\n    players[ballToHit.playerKey].state = \"MOVING\";\r\n    players[ballToHit.playerKey].showNameTag = false;\r\n\r\n    const velocityWithDirection = { ...velocity, y: -velocity.y };\r\n\r\n    this.syncPlayersObjectToFirebase(players);\r\n    ballToHit.velocity[0] = velocityWithDirection.x;\r\n    ballToHit.velocity[1] = velocityWithDirection.y;\r\n    ballToHit.strokes += 1;\r\n    ballToHit.lastPos = [...ballToHit.position];\r\n    this.setState(() => ({ balls }));\r\n  }\r\n\r\n  init() {\r\n    const { game } = this.props;\r\n    const { canvasHeight, canvasWidth } = this.state;\r\n    canvas = document.getElementById(\"golfcanvas\");\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.lineWidth = 5;\r\n\r\n    //TODO det jag behöver göra nu:\r\n    //1. lägg till en svag förflyttning av hela ground. antar att det är x value på alla level.points jag vill ändra? och då ritas det rätt?\r\n    //  är det minst en px som måste flyttas? pixel per sekund ärdet som vi vill definera. och i render så får vi kolla hur mycket de ska flyttas?\r\n    // vad är fpsen? 60?\r\n    //2. behöver ha en sensor eller något som kollar när biten längst till höger komm in på kartan så ska jag lägga till en till ny point till höger så det alltid finns minst en extra bit till höger.\r\n    //3. kan också städa bort points till vänster när de går utanför skärmen på liknande sätt.\r\n    //4. lägg till en osynlig(?) som ligger precis i högerkanten och som bollen kan studsa i som vanlig groundmaterial. den ska vara sjukt hög. och inte röra på sig med ground utan fast.\r\n    //5. lägg till timer som ökar på speeden på intervaller. kolla lite på hur vi gjorde med timer på vanliga golfen.\r\n    //6. lägg till system med att man dör när man ramlar ut till vänster och vinnaren är den som är kvar längst. leaderboard fixa.\r\n    //7. kolla att replay funkar smidigt så man kan spela flera gånger.\r\n    //8. lägg till coins och poweups... se taiga\r\n    const level = util.levelGen(canvasWidth, canvasHeight, false);\r\n    const world = util.createWorld();\r\n\r\n    //TODO här skapas marken från level.points det görs i init alltså.. och aldrig igen?\r\n    //TODO vad behöver göras för att ta bort och lägga till en bit? ha en trigger för när en bit behöver bytas.\r\n    //TODO då tas den bort till vänster. en ny bit genereras till höger och world.addBody körs (removeBody också?)\r\n    //TODO skapa en enkel variant av createGround som är \"updateground\" den ska inte bry sig om hole..\r\n    //TODO denna updateground kanske behöver göras om och om igen när marken flyttar sig? nej det är ju samma som boll flyttar sig..\r\n    //TODO TODO::: en metod som tar bort en piece vänster och lägger till en till höger (räkna att den pointen blir valid som andra points valideras vid initgenerering)\r\n    //TODO en enkel variant av createGround och world.addbody/removebody behöver köras.\r\n    //createground ser ut att vara reobde av ett lvel.hole..?\r\n    const groundBodies = util.createGround(level);\r\n\r\n    for (const body of groundBodies) {\r\n      world.addBody(body);\r\n    }\r\n\r\n    const playerKeys = Object.keys(game.players);\r\n    const len = playerKeys.length;\r\n    const createdPlayers = [];\r\n    const balls = [];\r\n    const playerColors = util.getPlayerColors(len);\r\n    for (let i = 0; i < len; i++) {\r\n      const ball = util.createBall(level.spawn, true);\r\n      // hur håller jag koll på vilken boll som är vilken spelare?\r\n      ball.playerKey = playerKeys[i];\r\n      ball.ballIndex = i;\r\n      ball.strokes = 0;\r\n      ball.dead = false;\r\n      ball.lastPos = [...ball.position];\r\n      world.addBody(ball);\r\n      const player = Object.assign(\r\n        {\r\n          ballIndex: i,\r\n          key: playerKeys[i],\r\n          color: playerColors[i],\r\n          state: \"STILL\",\r\n          distance: util.getDistanceYards(canvasWidth, level.spawn[0]),\r\n          showNameTag: false,\r\n        },\r\n        game.players[playerKeys[i]]\r\n      );\r\n      balls.push(ball);\r\n      createdPlayers.push(player);\r\n    }\r\n    //\r\n\r\n    this.setState(() => ({\r\n      world,\r\n      level,\r\n      balls,\r\n      startTime: Date.now(),\r\n      expTime: Date.now() + level.time,\r\n    }));\r\n\r\n    createdPlayers.forEach((player) => this.initControllerListener(player));\r\n\r\n    this.setEventHandlers(world);\r\n\r\n    this.syncToFirebase(createdPlayers, level);\r\n    requestAnimationFrame(this.animate);\r\n  }\r\n\r\n  syncPlayersToFirebase(players) {\r\n    const { game, gameFunc } = this.props;\r\n    game.players = players.reduce((_result, player) => {\r\n      const result = _result;\r\n      result[player.key] = player;\r\n      return result;\r\n    }, game.players);\r\n    this.saveGame(game);\r\n  }\r\n\r\n  syncPlayersObjectToFirebase(playersObj) {\r\n    const { game, gameFunc } = this.props;\r\n    game.players = playersObj;\r\n\r\n    this.saveGame(game);\r\n  }\r\n\r\n  syncToFirebase(players, level) {\r\n    const { game, gameFunc } = this.props;\r\n\r\n    game.players = players.reduce((_result, player) => {\r\n      const result = _result;\r\n      result[player.key] = player;\r\n      return result;\r\n    }, game.players);\r\n    game.status = \"IN_PROGRESS\";\r\n    game.minigame.levelColor = level.color;\r\n    this.saveGame(game);\r\n  }\r\n\r\n  saveGame(game) {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game } = this.props;\r\n    const { soundEffects, leaderboard } = this.state;\r\n    //TODO flera rundor eller gå direkt till final_result med en replayknapp.\r\n    //TODO få till leaderboard på något vis.\r\n    game.minigame.leaderboard = leaderboard.map((x) => ({\r\n      ...x,\r\n    }));\r\n    game.phase = \"final_result\";\r\n    this.saveGame(game);\r\n  }\r\n\r\n  animate(time) {\r\n    const { world } = this.state;\r\n    const {\r\n      game: { phase },\r\n    } = this.props;\r\n    requestAnimationFrame(this.animate);\r\n\r\n    const deltaTime = lastTime ? (time - lastTime) / 400 : 0;\r\n\r\n    // Move bodies forward in time\r\n\r\n    world.step(fixedTimeStep, deltaTime, maxSubSteps);\r\n    lastTime = time;\r\n\r\n    if (phase === \"gameplay\") {\r\n      this.ensurePlayersInBounds();\r\n      this.renderFrame();\r\n      this.drawPlayHud();\r\n      if (this.isLevelCompleted()) {\r\n        this.nextPhase();\r\n      }\r\n    }\r\n    //  else if (phase === \"level_completed\") {\r\n    //   this.renderFrame();\r\n    //   this.drawLevelCompleteHud();\r\n    //   if (this.isLoadNextLevel()) {\r\n    //     this.loadNextLevel();\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  initControllerListener(player) {\r\n    const { game } = this.props;\r\n    const { balls } = this.state;\r\n    const swingRef = fireGolf\r\n      .database()\r\n      .ref(`/games/${game.key}/players/${player.key}/swing`);\r\n\r\n    const that = this;\r\n    swingRef.on(\"value\", (snapshot) => {\r\n      const { game: _game } = that.props;\r\n      const currentPlayer = _game.players[player.key];\r\n      const swingData = snapshot.val();\r\n      if (swingData) {\r\n        that.swing(swingData, currentPlayer.ballIndex);\r\n      } else {\r\n        console.log(\"move error\");\r\n      }\r\n    });\r\n\r\n    const findMyBallRef = fireGolf\r\n      .database()\r\n      .ref(`/games/${game.key}/players/${player.key}/showNameTag`);\r\n\r\n    findMyBallRef.on(\"value\", (snapshot) => {\r\n      const { game: _game } = that.props;\r\n      const currentPlayer = _game.players[player.key];\r\n      const findData = snapshot.val();\r\n\r\n      if (findData) {\r\n        currentPlayer.showNameTag = true;\r\n        // this.setState(() => ({ balls })); kanske behöver trigga denna?\r\n      } else {\r\n        currentPlayer.showNameTag = false;\r\n\r\n        console.log(\"findmyball error\");\r\n      }\r\n    });\r\n  }\r\n\r\n  isLevelCompleted() {\r\n    //TODO kolla om spelet är klart, dvs bara en levande boll kvar.\r\n    const { expTime, balls } = this.state;\r\n    const now = Date.now();\r\n\r\n    //TODO nu kan sista spelaren spela vidare om den vill..\r\n    if (balls.every((b) => b.dead)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  renderFrame() {\r\n    const { canvasHeight, canvasWidth } = this.state;\r\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\r\n\r\n    // Transform the canvas\r\n    // Note that we need to flip the y axis since Canvas pixel coordinates\r\n    // goes from top to bottom, while physics does the opposite.\r\n    ctx.save();\r\n\r\n    this.drawGround();\r\n    this.drawBalls();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      canvasHeight,\r\n      canvasWidth,\r\n      testClubIndex,\r\n      testacceleration,\r\n      testBallIndex,\r\n      balls,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"phase-container\" id=\"golfboard\">\r\n        <canvas id=\"golfcanvas\" height={canvasHeight} width={canvasWidth} />\r\n        <button type=\"button\" onClick={this.testSwing}>\r\n          swing\r\n        </button>\r\n        <FormControl>\r\n          <InputLabel htmlFor=\"clubc-required\">Club</InputLabel>\r\n          <Select\r\n            value={testClubIndex || 0}\r\n            onChange={this.handleChangeSelect}\r\n            name=\"testClubIndex\"\r\n            inputProps={{\r\n              id: \"club-required\",\r\n            }}\r\n          >\r\n            {CLUBS.map((c, index) => (\r\n              <MenuItem key={c.id} value={c.id}>\r\n                {c.name}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <TextField\r\n          label=\"Acceleration\"\r\n          name=\"testacceleration\"\r\n          type=\"number\"\r\n          value={testacceleration}\r\n          margin=\"normal\"\r\n          onChange={this.handleChange(\"testacceleration\")}\r\n        />\r\n        {balls && (\r\n          <FormControl>\r\n            <InputLabel htmlFor=\"ball-required\">Ball</InputLabel>\r\n            <Select\r\n              value={testBallIndex || 0}\r\n              onChange={this.handleChangeSelect}\r\n              name=\"testBallIndex\"\r\n              inputProps={{\r\n                id: \"ball-required\",\r\n              }}\r\n            >\r\n              {balls.map((b, index) => (\r\n                <MenuItem key={b.ballIndex} value={b.ballIndex}>\r\n                  {b.ballIndex}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGolfRace.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default GolfRace;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\nimport SpotifyResultQuestion from './SpotifyResultQuestion';\r\nimport SpotifyProgressbar from '../SpotifyProgressbar';\r\nimport TrackPlayer from '../TrackPlayer';\r\nimport * as util from '../SpotifyUtil';\r\nimport * as SpotifyWS from '../SpotifyServiceInterface';\r\nimport {\r\n  AUTH_EXPIRE_MS,\r\n  MISSING_ALBUM_COVER,\r\n  CLIENT_ID,\r\n  SONG_VOLUME_FADE_TIME,\r\n  SPOTIFY_AUTH_SCOPES,\r\n} from '../SpotifyConstants';\r\n\r\n\r\nfunction testAudio(tracks) {\r\n  console.table(tracks);\r\n  let i = 0;\r\n  const audio = new Audio(tracks[i].audio);\r\n  audio.onerror = (e) => {\r\n    console.log(`error on track:${i}`);\r\n    console.log(e);\r\n    i += 1;\r\n    if (i < tracks.length) {\r\n      audio.src = tracks[i].audio;\r\n      audio.play();\r\n    }\r\n  };\r\n  audio.oncanplay = () => {\r\n    i += 1;\r\n    if (i < tracks.length) {\r\n      audio.pause();\r\n      audio.src = tracks[i].audio;\r\n      audio.play();\r\n    } else {\r\n      console.log(`done testing tracks:${i}`);\r\n    }\r\n  };\r\n  audio.play();\r\n}\r\n\r\nclass Spotify extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const nrOfPlayers = Object.values(props.game.players).length;\r\n    this.state = {\r\n      spotifytoken: localStorage.getItem('spotifytoken') || '',\r\n      tokentimestamp: localStorage.getItem('spotifytoken_timestamp') || '',\r\n      playlists: [],\r\n      tracks: [],\r\n      questionTracks: [],\r\n      questions: [],\r\n      usedQuestions: [],\r\n      topArtists: [],\r\n      questionPlaying: false,\r\n      progress: 0,\r\n      progressText: '',\r\n      songCurrentTime: 0,\r\n      counter: 0,\r\n      songDuration: nrOfPlayers < 10 ? 20 : 30,\r\n    };\r\n\r\n    this.nextPhase = this.nextPhase.bind(this);\r\n    this.playQuestion = this.playQuestion.bind(this);\r\n    this.saveGame = this.saveGame.bind(this);\r\n    this.nextQuestion = this.nextQuestion.bind(this);\r\n    this.getArtistTopTrack = this.getArtistTopTrack.bind(this);\r\n    this.initQuiz = this.initQuiz.bind(this);\r\n    this.setProgress = this.setProgress.bind(this);\r\n  }\r\n\r\n\r\n  async componentDidMount() {\r\n    const { game } = this.props;\r\n    const { spotifytoken, tokentimestamp } = this.state;\r\n    const t0 = performance.now();\r\n\r\n    if (!spotifytoken || Date.now() - tokentimestamp > AUTH_EXPIRE_MS) {\r\n      const authEndpoint = 'https://accounts.spotify.com/authorize';\r\n      const redirectUri = window.location.origin + window.location.pathname;\r\n      localStorage.setItem('spotify_type', 'host');\r\n\r\n      window.location = `${authEndpoint}?client_id=${CLIENT_ID}&redirect_uri=${redirectUri}&scope=${SPOTIFY_AUTH_SCOPES.join('%20')}&response_type=token&show_dialog=true`;\r\n    }\r\n\r\n    const playerArray = Object.values(game.players);\r\n    const maxQuestionsPerList = Math.ceil((game.minigame.questions) / playerArray.length);\r\n    const playerProgressRatio = 80 / playerArray.length;\r\n\r\n    for (let i = 0; i < playerArray.length; i++) {\r\n      const player = playerArray[i];\r\n      this.setProgress(0, true, `Läser spellista för ${player.name}`);\r\n      const playlistTracks = await SpotifyWS.getPlaylistTracks(player.playlist, spotifytoken);\r\n      this.setProgress(playerProgressRatio / 2, true);\r\n\r\n      const validTracks = util.getValidTracks(playlistTracks);\r\n      const minifiedTracks = validTracks.map((t) => {\r\n        const track = {\r\n          name: t.track.name,\r\n          audio: t.track.preview_url,\r\n          artists: t.track.artists.map(a => a.name).join(', '),\r\n          artistList: t.track.artists.map(a => a.name),\r\n          img: t.track.album.images.length > 0 ? t.track.album.images[0].url : MISSING_ALBUM_COVER,\r\n          playerKey: player.key,\r\n          playerName: player.name,\r\n          id: t.track.id,\r\n          popularity: t.track.popularity,\r\n        };\r\n        return track;\r\n      });\r\n\r\n      const playlist = {\r\n        playerKey: player.key,\r\n        playerName: player.name,\r\n        totalTracks: minifiedTracks.length,\r\n      };\r\n      // genre och artist kan vara bakvänt..\r\n      // vill inte göra anrop i onödan om inte qtyp finns för den typen av fråga\r\n      // get artist toptracks kanske behöver ett filter på tracks som har preview_url?\r\n      // error on track audio:[object Object] på spellistan yaaaaaas postmalone sunflower tror jag. lösningen är att den låten inte ska kunna spelas upp alls?\r\n      // testa min validering som jag testat innan. behöver ha någon form av validering när frågorna genereras så att allt ljud fungerar..?\r\n\r\n\r\n      if (game.minigame.qArtist || game.minigame.qGenre) {\r\n        const artistsIds = validTracks.map(t => t.track.artists.map(a => a.id).join(',')).join(',').split(',');\r\n        const artistIdsFrequencyMap = util.getIdFrequencyMap(artistsIds);\r\n        const uniqArtistIds = Object.keys(artistIdsFrequencyMap);\r\n\r\n        const playlistArtists = await SpotifyWS.getArtists(uniqArtistIds, spotifytoken);\r\n        const playlistGenres = [];\r\n        playlistArtists.forEach((artist) => {\r\n          const frequency = artistIdsFrequencyMap[artist.id];\r\n          for (let k = 0; k < frequency; k++) {\r\n            playlistGenres.push(...artist.genres);\r\n          }\r\n        });\r\n        playlist.genres = util.getGenresFrequencyMap(playlistGenres, playlist.totalTracks);\r\n\r\n        if (game.minigame.qArtist) {\r\n          playlist.artists = util.getArtistFrequencyMap(minifiedTracks);\r\n          const topArtistName = Object.keys(playlist.artists).reduce((a, b) => ((playlist.artists[a] > playlist.artists[b]) && (minifiedTracks.find(x => x.artists.includes(a) && x.audio)) ? a : b));\r\n          const topArtistRaw = playlistArtists.find(a => a.name === topArtistName);\r\n          playlist.topArtist = {\r\n            id: topArtistRaw.id,\r\n            name: topArtistRaw.name,\r\n            img: topArtistRaw.images.length > 0 ? topArtistRaw.images[0].url : MISSING_ALBUM_COVER,\r\n          };\r\n        }\r\n      }\r\n\r\n      if (game.minigame.qFeatures) {\r\n        playlist.popularity = util.getAvaragePopularity(minifiedTracks);\r\n\r\n        const tracksIds = minifiedTracks.map(t => t.id);\r\n        const trackFeatures = await SpotifyWS.getTrackFeatures(tracksIds, spotifytoken);\r\n\r\n        playlist.danceability = trackFeatures.reduce((acc, curr) => acc + curr.danceability, 0) / trackFeatures.length;\r\n        playlist.energy = trackFeatures.reduce((acc, curr) => acc + curr.energy, 0) / trackFeatures.length;\r\n        playlist.tempo = trackFeatures.reduce((acc, curr) => acc + curr.tempo, 0) / trackFeatures.length;\r\n        playlist.valence = trackFeatures.reduce((acc, curr) => acc + curr.valence, 0) / trackFeatures.length;\r\n      }\r\n      this.setProgress(playerProgressRatio / 2, true);\r\n\r\n      this.setState(state => ({\r\n        playlists: [...state.playlists, playlist],\r\n        tracks: [...state.tracks, ...minifiedTracks],\r\n      }), () => {\r\n        if (i + 1 === playerArray.length) {\r\n          this.setProgress(85, false, 'Genererar frågor');\r\n          const { playlists, tracks } = this.state;\r\n          const questionTracks = util.getQuestionTracks(tracks);\r\n          // testAudio(questionTracks);\r\n\r\n          const filteredQuestionTracks = util.filterQuestionTracks(playlists, questionTracks, maxQuestionsPerList);\r\n\r\n          const generatedQuestions = util.generateQuestions(playlists, filteredQuestionTracks, game.minigame);\r\n          generatedQuestions.sort(() => Math.random() - 0.5);\r\n          if (generatedQuestions.length > game.minigame.questions) {\r\n            generatedQuestions.length = game.minigame.questions;\r\n          }\r\n\r\n          const sortedQuestions = util.sortQuestions(generatedQuestions);\r\n\r\n          this.setProgress(90, false);\r\n\r\n          this.setState(() => {\r\n            console.table(sortedQuestions);\r\n            return ({\r\n              questions: sortedQuestions,\r\n            });\r\n          }, () => {\r\n            const { questions } = this.state;\r\n            if (questions.length < game.minigame.questions) {\r\n              game.minigame.questions = questions.length;\r\n              this.saveGame(game);\r\n            }\r\n            const t1 = performance.now();\r\n            console.log(`componentDidMount took ${t1 - t0} milliseconds.`);\r\n\r\n            this.initQuiz();\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate() {\r\n    // kan jag ha det här?\r\n\r\n    return true;\r\n  }\r\n\r\n  async getArtistTopTrack(question) {\r\n    const { spotifytoken } = this.state;\r\n    const topTracks = await SpotifyWS.getArtistTopTracks(question.artistId, spotifytoken);\r\n\r\n    const trackIndex = Math.floor(Math.random() * Math.min(10, topTracks.length));\r\n    const track = {\r\n      img: question.img,\r\n      audio: topTracks[trackIndex].preview_url,\r\n    };\r\n    return track;\r\n  }\r\n\r\n  async getGenreTopTrack(question) {\r\n    const { spotifytoken } = this.state;\r\n    const topTracks = await SpotifyWS.getGenreTopTracks(question.genre, spotifytoken);\r\n\r\n    const usableTracks = topTracks.items.filter(x => x.preview_url);\r\n    const trackIndex = Math.floor(Math.random() * Math.min(10, usableTracks.length));\r\n    const selectedTrack = usableTracks[trackIndex];\r\n    const track = {\r\n      name: selectedTrack.name,\r\n      img: selectedTrack.album.images.length > 0 ? selectedTrack.album.images[0].url : MISSING_ALBUM_COVER,\r\n      audio: selectedTrack.preview_url,\r\n      artists: selectedTrack.artists.map(a => a.name).join(', '),\r\n    };\r\n    return track;\r\n  }\r\n\r\n  setProgress(progress, incremental, progressText) {\r\n    this.setState(state => ({\r\n      progress: incremental ? state.progress + progress : progress,\r\n      progressText: progressText || state.progressText,\r\n    }));\r\n  }\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  async initQuiz() {\r\n    const { questions, tracks } = this.state;\r\n    const { game } = this.props;\r\n    const t0 = performance.now();\r\n    const finalQuestions = [...questions];\r\n    // add questiondata from spotify API to just the questions that will be used\r\n    for (let i = 0, len = finalQuestions.length; i < len; i++) {\r\n      const question = finalQuestions[i];\r\n      switch (question.qtype) {\r\n        case 'artist':\r\n          question.track = await this.getArtistTopTrack(question);\r\n          if (!question.track.audio) {\r\n            const sampleTrack = tracks.find(x => x.artists.includes(question.artist) && x.audio);\r\n            if (sampleTrack) {\r\n              question.track.audio = sampleTrack.audio;\r\n            }\r\n          }\r\n          break;\r\n        case 'genre':\r\n          question.track = await this.getGenreTopTrack(question);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    this.setProgress(100, false);\r\n    this.setState(() => ({\r\n      questions: finalQuestions,\r\n    }), () => {\r\n      if (game.phase === 'gameplay') {\r\n        const t1 = performance.now();\r\n        console.log(`initQuiz took ${t1 - t0} milliseconds.`);\r\n        this.playQuestion();\r\n      }\r\n    });\r\n  }\r\n\r\n  nextQuestion() {\r\n    this.playQuestion();\r\n  }\r\n\r\n  playQuestion() {\r\n    const { questions, tracks, songDuration } = this.state;\r\n    const { game } = this.props;\r\n    const currentQuestion = questions[game.minigame.currentq];\r\n    this.setState({ questionPlaying: true });\r\n    if (currentQuestion.track) {\r\n      const audio = new Audio(currentQuestion.track.audio);\r\n      audio.onerror = () => {\r\n        console.log(`error on track audio:${currentQuestion.track}`);\r\n        setTimeout(this.nextPhase(), 15000);\r\n      };\r\n      audio.volume = 0;\r\n      audio.play();\r\n      // audio.onended = () => {\r\n      //   this.nextPhase();\r\n      // };\r\n      // fade in and out\r\n      audio.ontimeupdate = () => {\r\n        const left = (songDuration || audio.duration) - audio.currentTime;\r\n        if (left <= 0) {\r\n          audio.pause();\r\n          this.nextPhase();\r\n          return;\r\n        }\r\n        const fadeout = left <= SONG_VOLUME_FADE_TIME;\r\n        if (fadeout) {\r\n          audio.volume = left / SONG_VOLUME_FADE_TIME;\r\n        } else if (audio.volume < 1) {\r\n          audio.volume = Math.min(1, audio.volume + 0.1);\r\n        }\r\n        this.setState(() => ({\r\n          songCurrentTime: audio.currentTime,\r\n        }));\r\n      };\r\n    } else {\r\n      let counter = currentQuestion.time * 10;\r\n      const i = setInterval(() => {\r\n        counter -= 1;\r\n        this.setState(() => ({\r\n          counter,\r\n        }), () => {\r\n          if (this.state.counter <= 0) {\r\n            this.nextPhase();\r\n            clearInterval(i);\r\n          }\r\n        });\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  saveGame(game) {\r\n    const { gameFunc } = this.props;\r\n    gameFunc.update(game);\r\n  }\r\n\r\n  nextPhase() {\r\n    const { game } = this.props;\r\n    this.setState({ questionPlaying: false });\r\n    game.phase = 'level_completed';\r\n    this.saveGame(game);\r\n  }\r\n\r\n  render() {\r\n    const { game, gameFunc } = this.props;\r\n    const {\r\n      tracks, questions, questionPlaying, songCurrentTime, songDuration, playlists, progress, counter, progressText,\r\n    } = this.state;\r\n\r\n    if (game.phase === 'gameplay' && !questionPlaying) {\r\n      return (\r\n        <div style={{ marginTop: 30 }}>\r\n          <Typography style={{ fontSize: 28, padding: 15, fontWeight: 400 }}>{progressText}</Typography>\r\n          <SpotifyProgressbar progress={progress} />\r\n        </div>\r\n      );\r\n    }\r\n    const question = questions[game.minigame.currentq];\r\n\r\n    if (game.phase === 'level_completed') {\r\n      // game behöver vara uppdaterat med svar från spelarna och den senaste frågan?\r\n      // i firebase kommer man bara se player.answers och inte quiz.questions. men vi behöver synka currentquestionindex kanske?\r\n      // det är i resultqestion som jag rättar svaren så jag behöver ju hela tracks där och currentquestion\r\n      return (\r\n        <SpotifyResultQuestion game={game} playlists={playlists} gameFunc={gameFunc} tracks={tracks} question={question} nextQuestion={this.nextQuestion} />\r\n      );\r\n    }\r\n\r\n    let progressTime;\r\n    if (question.time) {\r\n      const hundreds = question.time * 10;\r\n      progressTime = (hundreds - counter) / 10;\r\n    }\r\n    switch (question.qtype) {\r\n      case 'track_owner':\r\n      case 'artist':\r\n      case 'genre':\r\n        return (\r\n          <div>\r\n            <TrackPlayer text={question.text} track={{ ...question.track, currentTime: songCurrentTime, duration: songDuration }} />\r\n          </div>\r\n        );\r\n      case 'popularity':\r\n      case 'tempo':\r\n      case 'energy':\r\n      case 'valence':\r\n      case 'danceability':\r\n      case 'totalTracks':\r\n        return (\r\n          <div>\r\n            <TrackPlayer text={question.text} track={{ img: MISSING_ALBUM_COVER, currentTime: progressTime, duration: question.time }} />\r\n          </div>\r\n        );\r\n      default:\r\n        return (null);\r\n    }\r\n  }\r\n}\r\nSpotify.propTypes = {\r\n  gameFunc: PropTypes.object.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default Spotify;\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\n\r\nclass GolfRaceSetup extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nameGenerator: true,\r\n    };\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeBool = (name) => (event) => {\r\n    this.setState({ [name]: event.target.checked });\r\n  };\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  startGame = (multiplayerMode) => {\r\n    const { game, gameFunc } = this.props;\r\n    const { nameGenerator } = this.state;\r\n    const minigame = {\r\n      nameGenerator,\r\n    };\r\n    game.minigame = minigame;\r\n    game.phase = \"connection\";\r\n    game.status = \"IN_PROGRESS\";\r\n    gameFunc.update(game);\r\n  };\r\n\r\n  render() {\r\n    const { nameGenerator } = this.state;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <Typography variant=\"h4\">Game Settings</Typography>\r\n        <Button onClick={() => this.startGame(\"classic\")} variant=\"contained\">\r\n          Start\r\n        </Button>\r\n        <FormControl component=\"fieldset\">\r\n          <FormGroup>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={nameGenerator}\r\n                  onChange={this.handleChangeBool(\"nameGenerator\")}\r\n                  value=\"nameGenerator\"\r\n                />\r\n              }\r\n              label=\"Generate names for players\"\r\n            />\r\n          </FormGroup>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nGolfRaceSetup.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default GolfRaceSetup;\r\n","import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport PhaseSetup from \"./PhaseSetup\";\r\nimport PhaseConnection from \"./PhaseConnection\";\r\nimport PhaseStarting from \"./PhaseStarting\";\r\nimport Snake from \"../snake/Snake\";\r\nimport Tetris from \"../tetris/Tetris\";\r\nimport PhaseFinalResult from \"./PhaseFinalResult\";\r\nimport PhaseEnd from \"./PhaseEnd\";\r\nimport SnakeStarting from \"../snake/SnakeStarting\";\r\nimport Golf from \"../golf/Golf\";\r\nimport GolfStarting from \"../golf/GolfStarting\";\r\nimport SnakeSetup from \"../snake/SnakeSetup\";\r\nimport GolfSetup from \"../golf/GolfSetup\";\r\nimport SpotifySetup from \"../spotify/host/SpotifySetup\";\r\nimport SpotifyConnection from \"../spotify/host/SpotifyConnection\";\r\nimport SpotifyStarting from \"../spotify/host/SpotifyStarting\";\r\nimport Spotify from \"../spotify/host/Spotify\";\r\nimport { SPOTIFY_WHITE, SPOTIFY_GREEN } from \"../spotify/SpotifyConstants\";\r\nimport GolfRace from \"../golfrace/GolfRace\";\r\nimport GolfRaceSetup from \"../golfrace/GolfRaceSetup\";\r\n// kan jag lägga till primary och secondary färger? ersätter blå/pink?\r\n// eller jag får styla det nu. det är bara UI-componenterna som är formade för en mörk bakgrund nu.\r\n// fixa en generell spotify.css? i den har jag bara generella saker som är för alla compoenneter. typ body.backgorundcolor = darkgray, typgrahy color inte helt vit?\r\n// kan jag lägga in saker i theme här? typ att inte använda ren vit till text #fff\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: SPOTIFY_GREEN,\r\n    },\r\n    secondary: {\r\n      main: SPOTIFY_WHITE,\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiButton: {\r\n      // Name of the component ⚛️ / style sheet\r\n      root: {\r\n        // Name of the rule\r\n        borderRadius: 500,\r\n        padding: \"11px 44px\",\r\n        color: SPOTIFY_WHITE,\r\n        letterSpacing: \".16em\",\r\n        WebkitTransition: \"none 33ms cubic-bezier(.3,0,.7,1)\",\r\n        transition: \"none 33ms cubic-bezier(.3,0,.7,1)\",\r\n        WebkitTransitionProperty: \"all\",\r\n        transitionProperty: \"all\",\r\n        touchAction: \"manipulation\",\r\n        willChange: \"transform\",\r\n        lineHeight: 1.6,\r\n        minWidth: 130,\r\n        margin: 10,\r\n        fontWeight: 300,\r\n        fontSize: 11,\r\n        \"&:hover\": {\r\n          WebkitTransition: \"none 33ms cubic-bezier(.3,0,0,1)\",\r\n          transition: \"none 33ms cubic-bezier(.3,0,0,1)\",\r\n          WebkitTransitionProperty: \"all\",\r\n          transitionProperty: \"all\",\r\n          WebkitTransform: \"scale(1.06)\",\r\n          transform: \"scale(1.06)\",\r\n        },\r\n      },\r\n      textPrimary: {\r\n        backgroundColor: SPOTIFY_GREEN,\r\n        color: SPOTIFY_WHITE,\r\n        \"&:hover\": {\r\n          backgroundColor: \"#1ed760\",\r\n        },\r\n      },\r\n      textSecondary: {\r\n        backgroundColor: \"rgba(24,24,24,.7)\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"rgba(24,24,24,.7)\",\r\n          webkitBoxShadow: \"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)\",\r\n          boxShadow: \"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)\",\r\n        },\r\n        webkitBoxShadow: \"inset 0 0 0 2px #b3b3b3\",\r\n        boxShadow: \"inset 0 0 0 2px #b3b3b3\",\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nclass Minigame extends PureComponent {\r\n  render() {\r\n    const { game, gameFunc } = this.props;\r\n    switch (game.gametype) {\r\n      case \"snake\":\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === \"setup\" && (\r\n              <SnakeSetup game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"starting\" && (\r\n              <SnakeStarting game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"gameplay\" && (\r\n              <Snake game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"final_result\" && (\r\n              <PhaseFinalResult game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"end\" && (\r\n              <PhaseEnd game={game} gameFunc={gameFunc} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"tetris\":\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === \"setup\" && (\r\n              <PhaseSetup game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"starting\" && (\r\n              <PhaseStarting game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"gameplay\" && (\r\n              <Tetris game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"final_result\" && (\r\n              <PhaseFinalResult game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"end\" && (\r\n              <PhaseEnd game={game} gameFunc={gameFunc} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"golf\":\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === \"setup\" && (\r\n              <GolfSetup game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"starting\" && (\r\n              <GolfStarting game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {(game.phase === \"gameplay\" ||\r\n              game.phase === \"level_completed\") && (\r\n              <Golf game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"final_result\" && (\r\n              <PhaseFinalResult game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"end\" && (\r\n              <PhaseEnd game={game} gameFunc={gameFunc} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"golfrace\":\r\n        return (\r\n          <div className=\"host-container\">\r\n            {game.phase === \"setup\" && (\r\n              <GolfRaceSetup game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"starting\" && (\r\n              <GolfStarting game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"gameplay\" && (\r\n              <GolfRace game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"final_result\" && (\r\n              <PhaseFinalResult game={game} gameFunc={gameFunc} />\r\n            )}\r\n            {game.phase === \"end\" && (\r\n              <PhaseEnd game={game} gameFunc={gameFunc} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"spotify\":\r\n        document.querySelector(\"body\").classList.add(\"dark-mode\");\r\n        return (\r\n          <MuiThemeProvider theme={theme}>\r\n            <div className=\"host-container\">\r\n              {game.phase === \"setup\" && (\r\n                <SpotifySetup game={game} gameFunc={gameFunc} />\r\n              )}\r\n              {game.phase === \"connection\" && (\r\n                <SpotifyConnection game={game} gameFunc={gameFunc} />\r\n              )}\r\n              {(game.phase === \"gameplay\" ||\r\n                game.phase === \"level_completed\") && (\r\n                <Spotify game={game} gameFunc={gameFunc} />\r\n              )}\r\n              {game.phase === \"final_result\" && (\r\n                <PhaseFinalResult game={game} gameFunc={gameFunc} />\r\n              )}\r\n              {game.phase === \"end\" && (\r\n                <PhaseEnd game={game} gameFunc={gameFunc} />\r\n              )}\r\n            </div>\r\n          </MuiThemeProvider>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n}\r\nMinigame.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  gameFunc: PropTypes.object.isRequired,\r\n};\r\nexport default Minigame;\r\n","import React, { Component } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport Quiz from \"../quiz/host/Quiz\";\r\nimport { fire, fireGolf } from \"../../base\";\r\nimport Minigame from \"../minigame/host/Minigame\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\n\r\nfunction fetchGame(gametype, gameId, callback) {\r\n  if (gametype === \"golf\" || gametype === \"golfrace\") {\r\n    fireGolf\r\n      .database()\r\n      .ref(\"games\")\r\n      .orderByChild(\"gameId\")\r\n      .equalTo(gameId)\r\n      .once(\"value\", callback);\r\n  } else {\r\n    fire\r\n      .database()\r\n      .ref(\"games\")\r\n      .orderByChild(\"gameId\")\r\n      .equalTo(gameId)\r\n      .once(\"value\", callback);\r\n  }\r\n}\r\n\r\nclass Host extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      game: {},\r\n      gametype: \"other\",\r\n      gameId: localStorage.getItem(\"RecentGameId\") || \"\",\r\n      password: \"\",\r\n      isRedirected:\r\n        Date.now() - localStorage.getItem(\"spotifytoken_timestamp\") < 2000,\r\n    };\r\n    this.updateGame = this.updateGame.bind(this);\r\n    this.initGameListiner = this.initGameListiner.bind(this);\r\n    this.restartGame = this.restartGame.bind(this);\r\n    this.quitGame = this.quitGame.bind(this);\r\n    this.endGame = this.endGame.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { gameId, isRedirected } = this.state;\r\n    let href = window.location.href;\r\n    let hasParams =\r\n      href.indexOf(\"?pin=\") > -1 && href.indexOf(\"&gametype=\") > -1;\r\n    let urlParams = href.split(\"?\")[1];\r\n\r\n    // testa det här. ska vara instant host nu när man klikcar på länken.. testa både golf och inte golf och en där man går vanligt via host\r\n\r\n    if (hasParams) {\r\n      let pinParam = urlParams.substring(\r\n        urlParams.indexOf(\"pin=\") + 4,\r\n        urlParams.lastIndexOf(\"&gametype\")\r\n      );\r\n      let gametypeParam = urlParams.substring(\r\n        urlParams.indexOf(\"gametype=\") + 9\r\n      );\r\n      if (gametypeParam) {\r\n        this.setState({ gametype: gametypeParam });\r\n      }\r\n      if (pinParam) {\r\n        this.joinGame(pinParam, gametypeParam);\r\n      }\r\n    } else if (isRedirected) {\r\n      this.joinGame(gameId, null);\r\n    }\r\n  }\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  updateGame(gameupdate) {\r\n    const { showSnackbar } = this.props;\r\n    const { game } = this.state;\r\n    // se till att inte updatera game.players...\r\n    // game som kommer in här ska bara innehålla det som ska uppdateras.\r\n    // updateras med gamesettings, phasechanges, currenquestionId etc\r\n    if (game.gametype === \"golf\" || game.gametype === \"golfrace\") {\r\n      fireGolf\r\n        .database()\r\n        .ref(`games/${game.key}`)\r\n        .update(gameupdate, (error) => {\r\n          if (error) {\r\n            const snack = {\r\n              variant: \"error\",\r\n              message: \"Unexpected internal error\",\r\n            };\r\n            showSnackbar(snack);\r\n          }\r\n        });\r\n    } else {\r\n      fire\r\n        .database()\r\n        .ref(`games/${game.key}`)\r\n        .update(gameupdate, (error) => {\r\n          if (error) {\r\n            const snack = {\r\n              variant: \"error\",\r\n              message: \"Unexpected internal error\",\r\n            };\r\n            showSnackbar(snack);\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  restartGame() {\r\n    const game = {};\r\n    game.players = [];\r\n    game.phase = \"setup\";\r\n    this.updateGame(game);\r\n  }\r\n\r\n  quitGame() {\r\n    const { toggleHeader } = this.props;\r\n    this.updateGame({ phase: null });\r\n    toggleHeader(true);\r\n  }\r\n\r\n  endGame() {\r\n    this.updateGame({ phase: \"final_result\" });\r\n  }\r\n\r\n  joinGame(gameId, type) {\r\n    const { password, gametype } = this.state;\r\n    const { showSnackbar, toggleHeader } = this.props;\r\n    const that = this;\r\n    if (!type) {\r\n      type = gametype;\r\n    }\r\n    fetchGame(type, gameId, (snapshot) => {\r\n      if (snapshot.val()) {\r\n        let game;\r\n        snapshot.forEach((child) => {\r\n          game = child.val();\r\n        });\r\n        if (game.password === password) {\r\n          that.initGameListiner(game);\r\n          toggleHeader();\r\n        } else {\r\n          const snack = {\r\n            variant: \"error\",\r\n            message: \"Could not find matching game\",\r\n          };\r\n          showSnackbar(snack);\r\n        }\r\n      } else {\r\n        const snack = {\r\n          variant: \"info\",\r\n          message: \"No game found\",\r\n        };\r\n        showSnackbar(snack);\r\n      }\r\n    });\r\n  }\r\n\r\n  initGameListiner(_game) {\r\n    let gameRef;\r\n    if (_game.gametype === \"golf\" || _game.gametype === \"golfrace\") {\r\n      gameRef = fireGolf.database().ref(`games/${_game.key}`);\r\n    } else {\r\n      gameRef = fire.database().ref(`games/${_game.key}`);\r\n    }\r\n    const that = this;\r\n    gameRef.on(\"value\", (snapshot) => {\r\n      const game = snapshot.val();\r\n      if (!game.phase) {\r\n        game.phase = \"setup\";\r\n      }\r\n      if (game) {\r\n        // kan blir problem med asynch setstate?\r\n        that.setState({\r\n          game,\r\n        });\r\n      } else {\r\n        that.setState({\r\n          game: \"\",\r\n        });\r\n      }\r\n    });\r\n    // koppla game till gameKey\r\n    // lägg till en likadan listener i Play.\r\n    // hosts gamelistiner ska lyssna på alla ändringar. Play ska inte lyssna på andra players ändringar om det går. något att optimera i framtiden.\r\n    // ett alt är att lyfta ut Players till en egen root? kan lägga phase och currentq i en game.state och sen är det allt som Player lyssnar på?\r\n    // men play behöver också behöva synca sin egna player.\r\n  }\r\n\r\n  render() {\r\n    // behöver bara updatera phase till firebase när det är phases som play bryr sig om. t.ex. inte setup då play bara kan connecta till games som är i phase==connection\r\n    // lägg till två rutor här för att söka fram ett game med hjälp av gameid och pass.\r\n\r\n    // strukturera filerna för host och play. kommentera i varje fil vad syftet med den är. vad den ska updatera i game etc.\r\n    // HostSetup updates settings and sets phase to connection on action\r\n    // connection shows players and sets phase to starting on action\r\n    // starting shows a countdown sets phase to awating_question and currentQuestion to 0(or some id) after countdown\r\n    // awaiting_question shows countdown and sets phase to show question after countdown\r\n    // show_question shows question and sets phase to answer after countdown\r\n    // answer shows q&a, countdown, nrPlayersAnswered, sets phase to result_question after countdown\r\n    // result_question shows stats about the answers, correct answer, hightscorelist etc, sets phase to awaiting_question and currentQuestion++ on action.\r\n    // result_question sets phase to final_result if questions are all done.\r\n    // final_result shows result of all players. top 3 and/or all. sets phase to end on action\r\n    // end shows options for replay, export result, etc.\r\n    const { gameId, password, game, isRedirected, gametype } = this.state;\r\n    const { showSnackbar, toggleHeader } = this.props;\r\n    const gameFunctions = {\r\n      update: this.updateGame,\r\n      restart: this.restartGame,\r\n      end: this.endGame,\r\n      quit: this.quitGame,\r\n    };\r\n\r\n    if (!game.phase && isRedirected) {\r\n      return (\r\n        <div>\r\n          <span>Loading...</span>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!game.phase) {\r\n      return (\r\n        <div className=\"page-container host-page\" style={{ marginTop: 30 }}>\r\n          <FormControl component=\"fieldset\" style={{ marginRight: 30 }}>\r\n            <FormLabel component=\"legend\">Game type</FormLabel>\r\n            <RadioGroup\r\n              aria-label=\"gametype\"\r\n              name=\"gametype\"\r\n              value={gametype || \"\"}\r\n              onChange={this.handleChangeSelect}\r\n            >\r\n              <FormControlLabel\r\n                value=\"other\"\r\n                control={<Radio />}\r\n                label=\"Other\"\r\n              />\r\n              <FormControlLabel value=\"golf\" control={<Radio />} label=\"Golf\" />\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <FormControl>\r\n            <TextField\r\n              label=\"Game PIN\"\r\n              name=\"Game ID\"\r\n              value={gameId}\r\n              margin=\"normal\"\r\n              onChange={this.handleChange(\"gameId\")}\r\n            />\r\n          </FormControl>\r\n          <FormControl>\r\n            <TextField\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              margin=\"normal\"\r\n              value={password}\r\n              onChange={this.handleChange(\"password\")}\r\n            />\r\n          </FormControl>\r\n          <Button\r\n            onClick={() => this.joinGame(gameId, gametype)}\r\n            variant=\"contained\"\r\n          >\r\n            Host\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"page-container host-page\">\r\n        {game.gametype === \"quiz\" && (\r\n          <Quiz game={game} gameFunc={gameFunctions} />\r\n        )}\r\n        {game.gametype === \"snake\" && (\r\n          <Minigame game={game} gameFunc={gameFunctions} />\r\n        )}\r\n        {game.gametype === \"tetris\" && (\r\n          <Minigame game={game} gameFunc={gameFunctions} />\r\n        )}\r\n        {game.gametype === \"golf\" && (\r\n          <Minigame game={game} gameFunc={gameFunctions} />\r\n        )}\r\n        {game.gametype === \"golfrace\" && (\r\n          <Minigame game={game} gameFunc={gameFunctions} />\r\n        )}\r\n        {game.gametype === \"spotify\" && (\r\n          <Minigame game={game} gameFunc={gameFunctions} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nHost.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  toggleHeader: PropTypes.func.isRequired,\r\n};\r\nexport default Host;\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseConnection extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            authId: '',\r\n            playerCreated: false,\r\n        };\r\n        this.createPlayer = this.createPlayer.bind(this);\r\n        this.generateName = this.generateName.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        //problem vid restart så skapas en ny användare. test spara playerkey till localhost och testa använda den keyn om den passar\r\n        if (!this.props.playerKey && this.props.game.quiz.nameGenerator) {\r\n            this.props.addPlayer(this.generatePlayer());\r\n        }\r\n    }\r\n    createPlayer() {\r\n        //validera så att namnet inte är taget.\r\n        let player = {\r\n            name: this.state.name,\r\n            score: 0,\r\n\r\n        }\r\n        this.props.addPlayer(player);\r\n        this.setState({ playerCreated: true });\r\n    }\r\n    handleChange = name => event => {\r\n        this.setState({\r\n            [name]: event.target.value,\r\n        });\r\n    };\r\n\r\n    generatePlayer() {\r\n        //skriv upp en lista med namn. kanske använda två arrayer en med adjekktiv och en med substantiv \"crazy tomato\" etc. \r\n        //använd generateName(this.game.players) den randomar ett namn, kollar om namnet redan finns och randomar igen isåfall.\r\n        //randomar xx antal gånger sen lägger den till ett extra adjektiv\r\n        let name = this.generateName();\r\n        let player = {\r\n            name: name,\r\n            score: 0,\r\n        }\r\n        return player;\r\n    }\r\n    generateName() {\r\n        let adjectives = [\"adamant\", \"adroit\", \"amatory\", \"animistic\", \"antic\", \"arcadian\", \"baleful\", \"bellicose\", \"bilious\", \"boorish\", \"calamitous\", \"caustic\", \"cerulean\", \"comely\", \"concomitant\", \"contumacious\", \"corpulent\", \"crapulous\", \"defamatory\", \"didactic\", \"dilatory\", \"dowdy\", \"efficacious\", \"effulgent\", \"egregious\", \"endemic\", \"equanimous\", \"execrable\", \"fastidious\", \"feckless\", \"fecund\", \"friable\", \"fulsome\", \"garrulous\", \"guileless\", \"gustatory\", \"heuristic\", \"histrionic\", \"hubristic\", \"incendiary\", \"insidious\", \"insolent\", \"intransigent\", \"inveterate\", \"invidious\", \"irksome\", \"jejune\", \"jocular\", \"judicious\", \"lachrymose\", \"limpid\", \"loquacious\", \"luminous\", \"mannered\", \"mendacious\", \"meretricious\", \"minatory\", \"mordant\", \"munificent\", \"nefarious\", \"noxious\", \"obtuse\", \"parsimonious\", \"pendulous\", \"pernicious\", \"pervasive\", \"petulant\", \"platitudinous\", \"precipitate\", \"propitious\", \"puckish\", \"querulous\", \"quiescent\", \"rebarbative\", \"recalcitant\", \"redolent\", \"rhadamanthine\", \"risible\", \"ruminative\", \"sagacious\", \"salubrious\", \"sartorial\", \"sclerotic\", \"serpentine\", \"spasmodic\", \"strident\", \"taciturn\", \"tenacious\", \"tremulous\", \"trenchant\", \"turbulent\", \"turgid\", \"ubiquitous\", \"uxorious\", \"verdant\", \"voluble\", \"voracious\", \"wheedling\", \"withering\", \"zealous\"];\r\n        let nouns = [\"ninja\", \"chair\", \"pancake\", \"statue\", \"unicorn\", \"rainbows\", \"laser\", \"senor\", \"bunny\", \"captain\", \"nibblets\", \"cupcake\", \"carrot\", \"gnomes\", \"glitter\", \"potato\", \"salad\", \"toejam\", \"curtains\", \"beets\", \"toilet\", \"exorcism\", \"stick figures\", \"mermaid eggs\", \"sea barnacles\", \"dragons\", \"jellybeans\", \"snakes\", \"dolls\", \"bushes\", \"cookies\", \"apples\", \"ice cream\", \"ukulele\", \"kazoo\", \"banjo\", \"opera singer\", \"circus\", \"trampoline\", \"carousel\", \"carnival\", \"locomotive\", \"hot air balloon\", \"praying mantis\", \"animator\", \"artisan\", \"artist\", \"colorist\", \"inker\", \"coppersmith\", \"director\", \"designer\", \"flatter\", \"stylist\", \"leadman\", \"limner\", \"make-up artist\", \"model\", \"musician\", \"penciller\", \"producer\", \"scenographer\", \"set decorator\", \"silversmith\", \"teacher\", \"auto mechanic\", \"beader\", \"bobbin boy\", \"clerk of the chapel\", \"filling station attendant\", \"foreman\", \"maintenance engineering\", \"mechanic\", \"miller\", \"moldmaker\", \"panel beater\", \"patternmaker\", \"plant operator\", \"plumber\", \"sawfiler\", \"shop foreman\", \"soaper\", \"stationary engineer\", \"wheelwright\", \"woodworkers\"];\r\n        let finalName = \"\";\r\n        let currentNames = [];\r\n        if (this.props.game.players) {\r\n            currentNames = Object.values(this.props.game.players).map(a => a.name);\r\n        }\r\n        for (let i = 0; i < 20; i++) {\r\n            let name = \"\";\r\n            if (i > 10) {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            } else {\r\n                name = adjectives[Math.floor(Math.random() * adjectives.length)] + \" \" + nouns[Math.floor(Math.random() * nouns.length)];\r\n            }\r\n            if (currentNames.indexOf(name) > -1) {\r\n                continue;\r\n            } else {\r\n                finalName = name;\r\n                break;\r\n            }\r\n        }\r\n        return finalName;\r\n\r\n    }\r\n\r\n    render() {\r\n        let players = this.props.game.players;\r\n        let playerName = '';\r\n        if (players && this.props.playerKey) {\r\n            playerName = players[this.props.playerKey].name;\r\n        }\r\n        let playersInLobby = [];\r\n        if (players) {\r\n            playersInLobby = Object.values(players);\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>! </Typography>\r\n\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography paragraph variant=\"subtitle1\">Players in lobby</Typography>\r\n                                <Grid container>\r\n                                    {playersInLobby.map((player, index) =>\r\n                                        <Grid key={player.key} item md={3} xs={6}>\r\n                                            <Typography paragraph variant=\"body1\">{player.name}</Typography>\r\n                                        </Grid>)}\r\n                                </Grid>\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                                <Typography paragraph variant=\"subtitle1\">Waiting for the host to start the game</Typography>\r\n\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    {playerName &&\r\n                        <div >\r\n                            <div className=\"quiz-top-section\">\r\n                            </div>\r\n                            <div className='quiz-middle-section'>\r\n                                <Typography variant=\"h5\">Welcome <span className=\"dynamic-text\">{playerName}</span>!</Typography>\r\n                                <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n\r\n\r\n                            </div>\r\n                            <div className=\"quiz-bottom-section\">\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    {!playerName &&\r\n                        <div>\r\n                            <FormControl>\r\n                                <TextField\r\n                                    label=\"Name\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    margin=\"normal\"\r\n                                    onChange={this.handleChange('name')}\r\n                                />\r\n                            </FormControl>\r\n                            <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseConnection;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseStarting extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Starting quiz</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Starting quiz...</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseStarting;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport CountdownAnimation from '../../common/CountdownAnimation';\r\n\r\nclass PhaseAwaitingQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                        <Typography variant=\"h5\">Loading question</Typography>\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <CountdownAnimation speed=\"slow\" />\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseAwaitingQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nclass PhaseShowQuestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (this.props.game.quiz.remoteMode) {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">{this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the question on the screen!</Typography>\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseShowQuestion;","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AnswerOption from '../AnswerOption';\r\n\r\nclass PhaseAnswer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      counter: 0,\r\n      question: {},\r\n      hasAnswered: false,\r\n      selectedAnswer: '',\r\n    };\r\n    this.answerQuestion = this.answerQuestion.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const question = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];\r\n    this.setState({ question, startTime: Date.now() });\r\n  }\r\n\r\n    answerQuestion = (answer) => {\r\n      this.setState({ selectedAnswer: answer, hasAnswered: true });\r\n      const answerTime = Date.now() - this.state.startTime;\r\n      const correct = this.state.question.correctAnswers.indexOf(answer) > -1;\r\n      let score = 0;\r\n      // använd object speed={easy: 100, medium: 200, hard:300} score += speed[question.difficulty]\r\n      if (correct) {\r\n        switch (this.state.question.difficulty) {\r\n          case 'easy':\r\n            score += 100;\r\n            break;\r\n          case 'medium':\r\n            score += 200;\r\n            break;\r\n          case 'hard':\r\n            score += 300;\r\n            break;\r\n          case undefined:\r\n            score += 200;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        if (this.props.game.quiz.timelimit && this.state.question.timelimit) {\r\n          // let timeRemaining = this.state.question.timelimit - answerTime;\r\n          const timeFactorUsed = answerTime / (this.state.question.timelimit * 1000);\r\n          const timeBonus = Math.floor((score / Math.max(0.2, timeFactorUsed)) / 10);\r\n          score += timeBonus;\r\n        }\r\n      }\r\n      const playerAnswer = {\r\n        answer,\r\n        score,\r\n        answerTime,\r\n        questionId: this.state.question.id,\r\n      };\r\n      this.props.saveAnswer(playerAnswer);\r\n    };\r\n\r\n    render() {\r\n        let answers = [];\r\n        if (this.props.game) {\r\n            answers = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers;\r\n        }\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography paragraph variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span> \r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } \r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                            <Typography variant=\"h5\">\r\n                                {this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question}\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-middle-and-bottom-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} remoteMode={true} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            \r\n        } \r\n            if (this.state.hasAnswered) {\r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-top-section\">\r\n                        </div>\r\n                        <div className='quiz-middle-section'>\r\n                            <Typography variant=\"body1\">\r\n                                You answered: <span className=\"dynamic-text\">{this.state.selectedAnswer}</span>\r\n                            </Typography>\r\n                        </div>\r\n                        <div className=\"quiz-bottom-section\">\r\n                        </div>\r\n                    </div>\r\n                );\r\n            } \r\n                return (\r\n                    <div className=\"phase-container\">\r\n                        <div className=\"quiz-complete-section\">\r\n                            <Grid container spacing={8} className=\"full-height\">\r\n                                {answers.map((answer, index) =>\r\n                                    <Grid key={index} item xs={6}>\r\n                                        <AnswerOption answer={answer} index={index} answerQuestion={this.answerQuestion} />\r\n                                    </Grid>)}\r\n                            </Grid>\r\n                        </div>\r\n                    </div>\r\n                );\r\n            \r\n        \r\n    }\r\n}\r\nexport default PhaseAnswer;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport Podium from '../Podium';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nclass PhaseFinalResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expanded: null\r\n        };\r\n        this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n    }\r\n    handleChange = panel => (event, expanded) => {\r\n        this.setState({\r\n            expanded: expanded ? panel : false,\r\n        });\r\n    };\r\n    getPlayerAnswerData() {\r\n        let answerDataList = [];\r\n\r\n        let currentPlayer = this.props.game.players[this.props.playerKey];\r\n\r\n        for (let i = 0; i < this.props.game.quiz.questions.length; i++) {\r\n            let answerData = {\r\n                question: {},\r\n                score: 0,\r\n                time: 0,\r\n                answer: '',\r\n            };\r\n            let question = this.props.game.quiz.questions[i];\r\n\r\n            if (currentPlayer.answers[question.id]) {\r\n                answerData.score = currentPlayer.answers[question.id].score;\r\n                answerData.answer = currentPlayer.answers[question.id].answer;\r\n                answerData.time = currentPlayer.answers[question.id].answerTime;\r\n            } else {\r\n                answerData.score = 0;\r\n                answerData.answer = \"no answer\";\r\n                answerData.time = 0;\r\n            }\r\n            answerData.question = question;\r\n\r\n            answerDataList.push(answerData);\r\n        }\r\n        return answerDataList;\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.props.game.quiz.remoteMode) {\r\n            let playerData = this.getPlayerAnswerData();\r\n            return (<div className=\"phase-container\">\r\n                <div className=\"quiz-top-section\">\r\n                    <Typography variant=\"h5\">Quiz finished</Typography>\r\n                </div>\r\n                <div className='quiz-middle-section'>\r\n                    <Typography variant=\"subtitle1\">You finished\r\n                        <span className=\"dynamic-text\">2nd</span> with a score of  <span className=\"dynamic-text\">560</span>\r\n                    </Typography>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography >Final scoretable</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <div>\r\n                                <Podium game={this.props.game} />\r\n                            </div>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                            <Typography>Your own data</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails style={{display:'block'}}>\r\n                            {playerData.map((data, index) =>\r\n                                <ExpansionPanel key={data.question.id} expanded={this.state.expanded === data.question.id} onChange={this.handleChange(data.question.id)}>\r\n                                    <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                                        <Typography variant=\"subtitle1\">{data.question.question}</Typography>\r\n                                        <Typography variant=\"subtitle2\">{data.score}pt</Typography>\r\n                                    </ExpansionPanelSummary>\r\n                                    <ExpansionPanelDetails>\r\n                                        <Typography>Your answer: {data.answer}</Typography>\r\n                                        <Typography>Your time: {data.time/1000}sec</Typography>\r\n\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Correct answers</Typography>\r\n                                        <List>\r\n                                            {data.question.correctAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\">Wrong answers</Typography>\r\n                                        <List>\r\n                                            {data.question.wrongAnswers.map((answer, index) =>\r\n                                                <ListItem key={answer}>\r\n                                                    <ListItemText\r\n                                                        primary={answer}\r\n                                                    />\r\n                                                </ListItem>\r\n                                            )}\r\n                                        </List>\r\n                                    </ExpansionPanelDetails>\r\n                                </ExpansionPanel>\r\n                            )}\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                </div>\r\n                <div className=\"quiz-bottom-section\">\r\n                </div>\r\n            </div>);\r\n        } else {\r\n            return (\r\n                <div className=\"phase-container\">\r\n                    <div className=\"quiz-top-section\">\r\n                    </div>\r\n                    <div className='quiz-middle-section'>\r\n                        <Typography variant=\"h5\">Look at the screen.</Typography>\r\n\r\n                    </div>\r\n                    <div className=\"quiz-bottom-section\">\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default PhaseFinalResult;","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport AnswerOption from '../AnswerOption';\r\nimport AnswerChart from '../AnswerChart';\r\nimport Leaderboard from '../Leaderboard';\r\n\r\nPlayerQuestionResult.propTypes = {\r\n  playerData: PropTypes.object.isRequired,\r\n};\r\nfunction PlayerQuestionResult(props) {\r\n  const { playerData } = props;\r\n  const wrongAnswer = playerData.hasAnswered && playerData.currentQuestionScore === 0;\r\n  const correctAnswer = playerData.currentQuestionScore > 0;\r\n  return (\r\n    <div>\r\n      {correctAnswer > 0 && <Typography variant=\"h5\">Correct answer!</Typography>}\r\n      {wrongAnswer && <Typography variant=\"h5\">Wrong answer!</Typography>}\r\n      {!playerData.hasAnswered && <Typography variant=\"h5\">You did not answer the question</Typography>}\r\n      {playerData.hasAnswered && (\r\n      <div>\r\n        <Typography variant=\"body1\">\r\n          <div>\r\n            <span>Score: </span>\r\n            {' '}\r\n            <span className=\"dynamic-text\">{playerData.currentQuestionScore}</span>\r\n          </div>\r\n          <div>\r\n            <span>Time: </span>\r\n            {' '}\r\n            <span className=\"dynamic-text\">{playerData.answerTime}</span>\r\n          </div>\r\n          <div>\r\n            <span>Total score: </span>\r\n            {' '}\r\n            <span className=\"dynamic-text\">{playerData.totalScore}</span>\r\n          </div>\r\n        </Typography>\r\n      </div>\r\n      )}\r\n      {playerData.oldLeaderboardPosition !== playerData.newLeaderboardPosition && (\r\n      <div>\r\n        <Typography variant=\"body1\">\r\n          <span>Old position:</span>\r\n          <span>\r\n            {' '}\r\n            {playerData.oldLeaderboardPosition}\r\n          </span>\r\n          <span>New position: </span>\r\n          <span>{playerData.newLeaderboardPosition}</span>\r\n        </Typography>\r\n      </div>\r\n      )}\r\n      {playerData.oldLeaderboardPosition === playerData.newLeaderboardPosition && (\r\n      <div>\r\n        <Typography variant=\"body1\">\r\n          <span>Position: </span>\r\n          <span>\r\n            {' '}\r\n            {playerData.newLeaderboardPosition}\r\n          </span>\r\n        </Typography>\r\n      </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nclass PhaseResultQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getPlayerAnswerData = this.getPlayerAnswerData.bind(this);\r\n  }\r\n\r\n  getPlayerAnswerData() {\r\n    const { game, playerKey } = this.props;\r\n    const answerData = {\r\n      totalScore: 0,\r\n      currentQuestionScore: 0,\r\n      newLeaderboardPosition: 1,\r\n      oldLeaderboardPosition: 1,\r\n      answerTime: 0,\r\n      hasAnswered: false,\r\n    };\r\n    const currentQuestion = game.quiz.questions[game.quiz.currentQuestion];\r\n    const currentPlayer = game.players[playerKey];\r\n    // answers kan vara undefined. refactorera hela klassen\r\n    // den här läsningen håller inte. kan bli fel värden som man missar att svara på en fråga.\r\n    // gör om till reduce och se om det ska vara iteration på answers eller på quiz.questions kanske?\r\n\r\n    for (let j = 0; j < game.quiz.questions.length; j++) {\r\n      const question = game.quiz.questions[j];\r\n      const answer = currentPlayer.answers ? currentPlayer.answers[question.id] : false;\r\n      if (answer) {\r\n        if (answer.questionId === currentQuestion.id) {\r\n          answerData.hasAnswered = true;\r\n          answerData.currentQuestionScore = answer.score;\r\n          answerData.answerTime = answer.answerTime;\r\n        }\r\n        answerData.totalScore += answer.score;\r\n      }\r\n    }\r\n\r\n    const playerKeys = game.players ? Object.keys(game.players) : [];\r\n    for (let i = 0; i < playerKeys.length; i++) {\r\n      if (playerKeys[i] === currentPlayer.key) {\r\n        continue;\r\n      }\r\n      const opponent = game.players[playerKeys[i]];\r\n      let totalScore = 0;\r\n      let currentQuestionScore = 0;\r\n      for (let j = 0; j < game.quiz.questions.length; j++) {\r\n        const question = game.quiz.questions[j];\r\n        const answer = opponent.answers ? opponent.answers[question.id] : false;\r\n        if (answer) {\r\n          if (answer.questionId === currentQuestion.id) {\r\n            currentQuestionScore = answer.score;\r\n          }\r\n          totalScore += answer.score;\r\n        }\r\n      }\r\n      if (totalScore > answerData.totalScore) {\r\n        answerData.newLeaderboardPosition += 1;\r\n      }\r\n      if (totalScore - currentQuestionScore > answerData.totalScore - answerData.currentQuestionScore) {\r\n        answerData.oldLeaderboardPosition += 1;\r\n      }\r\n    }\r\n\r\n    return answerData;\r\n  }\r\n\r\n  render() {\r\n    const { game } = this.props;\r\n    const playerData = this.getPlayerAnswerData();\r\n\r\n    if (game.quiz.remoteMode) {\r\n      let currentQuestion;\r\n      if (game) {\r\n        currentQuestion = game.quiz.questions[game.quiz.currentQuestion];\r\n      }\r\n      const { answers } = currentQuestion;\r\n      return (\r\n        <div className=\"phase-container\">\r\n          <div className=\"quiz-top-section\">\r\n            <PlayerQuestionResult playerData={playerData} />\r\n          </div>\r\n          <div className=\"quiz-middle-section\">\r\n            <Grid container>\r\n              <Grid item md={6} xs={12}>\r\n                <div className=\"quiz-answer-chart\">\r\n\r\n                  <AnswerChart game={game} />\r\n                </div>\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <div>\r\n                  <Leaderboard game={game} />\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n          <div className=\"quiz-bottom-section\">\r\n            <Grid container>\r\n              {answers.map((answer, index) => (\r\n                <Grid key={answer} item xs={6}>\r\n                  <AnswerOption answer={answer} index={index} />\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\">\r\n          <PlayerQuestionResult playerData={playerData} />\r\n        </div>\r\n        <div className=\"quiz-bottom-section\">\r\n          <Typography variant=\"subtitle1\">Look at the screen to se overall player results</Typography>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseResultQuestion.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  playerKey: PropTypes.string.isRequired,\r\n};\r\nexport default PhaseResultQuestion;\r\n","import React, { Component } from 'react';\r\nimport { fire } from '../../../base';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport PhaseConnection from './PhaseConnection';\r\nimport PhaseStarting from './PhaseStarting';\r\nimport PhaseAwaitingQuestion from './PhaseAwaitingQuestion';\r\nimport PhaseShowQuestion from './PhaseShowQuestion';\r\nimport PhaseAnswer from './PhaseAnswer';\r\nimport PhaseFinalResult from './PhaseFinalResult';\r\nimport PhaseResultQuestion from './PhaseResultQuestion';\r\nimport PhaseEnd from './PhaseEnd';\r\nclass Quiz extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.saveAnswer = this.saveAnswer.bind(this);\r\n    }\r\n\r\n    saveAnswer(answer) {\r\n        let that = this;\r\n        let currentQuestionId = this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;\r\n        fire.database().ref('/games/' + that.props.game.key + '/players/' + this.props.playerKey + '/answers/' + currentQuestionId).set(answer, function (error) {\r\n            if (error) {\r\n                let snack = {\r\n                    variant: \"error\",\r\n                    message: \"Unexpected internal error\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n            else {\r\n                let snack = {\r\n                    variant: \"success\",\r\n                    message: \"Successfully updated player!\"\r\n                }\r\n                that.props.showSnackbar(snack);\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let lastPhase = this.props.game.phase === \"final_result\" || this.props.game.phase === \"end\";\r\n        return (\r\n            <div className=\"play-container\">\r\n                {this.props.game.phase === \"connection\" && <PhaseConnection game={this.props.game} addPlayer={this.props.createPlayer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"starting\" && <PhaseStarting game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"awaiting_question\" && <PhaseAwaitingQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"show_question\" && <PhaseShowQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} />}\r\n                {this.props.game.phase === \"answer\" && <PhaseAnswer game={this.props.game} saveAnswer={this.saveAnswer} playerKey={this.props.playerKey} />}\r\n                {this.props.game.phase === \"result_question\" && <PhaseResultQuestion game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n                {lastPhase  && <PhaseFinalResult game={this.props.game} updatePlayer={this.props.updatePlayer} playerKey={this.props.playerKey} />}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Quiz;","import React, { Component } from 'react';\r\n\r\nclass PhaseEnd extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                PlayEnd\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PhaseEnd;","import React, { Component } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nfunction generateName(currentNames) {\r\n  const adjectives = ['rutig,', 'antik', 'arg', 'lugn', 'friterad', 'hemlig', 'lycklig', 'gammal', 'rutten', 'smidig', 'vegansk', 'stark', 'full', 'giftig', 'djurig', 'artig', 'smutsig', 'dum', 'smart', 'stilig', 'snabb', 'långsam', 'seg', 'blygsam', 'envis', 'cool', 'tuff', 'spännande', 'farlig'];\r\n  const nouns = ['ninja', 'stol', 'pankaka', 'staty', 'enhörning', 'regnbåge', 'kanin', 'kapten', 'cupcake', 'morot', 'potatis', 'salad', 'gardin', 'toalett', 'streckgubbe', 'drake', 'farmor', 'mormor', 'farfar', 'morfar', 'mellanchef', 'rörmokare', 'bilförsäljare', 'skogshuggare', 'pensionär', 'cirkus', 'studdsmatta', 'clown', 'mellanchef', 'busschafför', 'luftballong', 'boss', 'tiger'];\r\n  let finalName = '';\r\n  for (let i = 0; i < 20; i++) {\r\n    let name = '';\r\n    if (i > 10) {\r\n      name = `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`;\r\n    } else {\r\n      name = `${adjectives[Math.floor(Math.random() * adjectives.length)]} ${nouns[Math.floor(Math.random() * nouns.length)]}`;\r\n    }\r\n    if (currentNames.indexOf(name) > -1) {\r\n      continue;\r\n    } else {\r\n      finalName = name;\r\n      break;\r\n    }\r\n  }\r\n  return finalName;\r\n}\r\nclass PhaseConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: '',\r\n    };\r\n    this.createPlayer = this.createPlayer.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { playerKey, game, addPlayer } = this.props;\r\n    if (!playerKey && game.minigame.nameGenerator) {\r\n      addPlayer(this.generatePlayer());\r\n    }\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  createPlayer() {\r\n    const { name } = this.state;\r\n    const { addPlayer } = this.props;\r\n    // validera så att namnet inte är taget.\r\n    const player = {\r\n      name,\r\n      score: 0,\r\n    };\r\n    addPlayer(player);\r\n  }\r\n\r\n  generatePlayer() {\r\n    const { game } = this.props;\r\n    let currentNames = [];\r\n    if (game.players) {\r\n      currentNames = Object.values(game.players).map(a => a.name);\r\n    }\r\n    const name = generateName(currentNames);\r\n    const player = {\r\n      name,\r\n      score: 0,\r\n    };\r\n    return player;\r\n  }\r\n\r\n\r\n  render() {\r\n    const { game, playerKey } = this.props;\r\n    const { name } = this.state;\r\n    let playerName = '';\r\n    if (game.players && playerKey && game.players[playerKey]) {\r\n      playerName = game.players[playerKey].name;\r\n    }\r\n    return (\r\n      <div className=\"phase-container\">\r\n        {playerName\r\n          ? (\r\n            <div>\r\n              <div className=\"quiz-top-section\" />\r\n              <div className=\"quiz-middle-section\">\r\n                <Typography variant=\"h5\">\r\n                  <span>Welcome </span>\r\n                  <span className=\"dynamic-text\">{playerName}</span>\r\n                </Typography>\r\n                <Typography variant=\"subtitle1\"> Watch the screen, your name should show.</Typography>\r\n              </div>\r\n              <div className=\"quiz-bottom-section\" />\r\n            </div>\r\n          )\r\n          : (\r\n            <div>\r\n              <FormControl>\r\n                <TextField\r\n                  label=\"Name\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  margin=\"normal\"\r\n                  onChange={this.handleChange('name')}\r\n                />\r\n              </FormControl>\r\n              <Button onClick={this.createPlayer} variant=\"contained\">done</Button>\r\n            </div>\r\n          )\r\n            }\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPhaseConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  playerKey: PropTypes.string,\r\n  addPlayer: PropTypes.func.isRequired,\r\n};\r\nexport default PhaseConnection;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseStarting extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\">\r\n          <Typography variant=\"h5\">Starting game...</Typography>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseStarting;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass PhaseFinalResult extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\">\r\n          <Typography variant=\"h5\">Look at the screen. playerKey</Typography>\r\n        </div>\r\n        <div className=\"quiz-bottom-section\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PhaseFinalResult;\r\n","import React, { Component, Fragment } from \"react\";\r\nimport LeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport RightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport UpIcon from \"@material-ui/icons/ExpandLess\";\r\nimport DownIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport PropTypes from \"prop-types\";\r\nimport { fire } from \"../../../base\";\r\n\r\nclass SnakeController extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleAction = this.handleAction.bind(this);\r\n  }\r\n\r\n  handleAction(name) {\r\n    const { playerKey, game } = this.props;\r\n    const currentPlayer = game.players[playerKey];\r\n\r\n    fire\r\n      .database()\r\n      .ref(`/games/${game.key}/minigame/snakes/${currentPlayer.snakeId}/move`)\r\n      .set(name, (error) => {\r\n        if (error) {\r\n          console.log(\"error updated snake move\");\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { game, playerKey } = this.props;\r\n    const currentPlayer = game.players[playerKey];\r\n    const playerSnake = game.minigame.snakes[currentPlayer.snakeId];\r\n\r\n    const allControlActions = playerSnake.actions;\r\n    const displayName =\r\n      playerSnake.playerKeys.length === 1\r\n        ? currentPlayer.name\r\n        : playerSnake.name;\r\n\r\n    return (\r\n      <div className=\"snake-controller-container\">\r\n        <div style={{ position: \"absolute\", zIndex: 100 }}>{displayName}</div>\r\n        <Button\r\n          key={\"up\"}\r\n          className=\"snake-controller-button-fullwidth\"\r\n          onClick={() => {\r\n            this.handleAction(\"up\");\r\n          }}\r\n          disabled={!currentPlayer.controlActions.includes(\"up\")}\r\n          style={{\r\n            backgroundColor: playerSnake.color,\r\n            opacity: currentPlayer.controlActions.includes(\"up\") ? 1.0 : 0.3,\r\n          }}\r\n        >\r\n          <UpIcon className=\"player-controlls-icon\" />\r\n        </Button>\r\n        <Button\r\n          key={\"left\"}\r\n          className=\"snake-controller-button\"\r\n          onClick={() => {\r\n            this.handleAction(\"left\");\r\n          }}\r\n          disabled={!currentPlayer.controlActions.includes(\"left\")}\r\n          style={{\r\n            backgroundColor: playerSnake.color,\r\n            opacity: currentPlayer.controlActions.includes(\"left\") ? 1.0 : 0.3,\r\n          }}\r\n        >\r\n          <LeftIcon className=\"player-controlls-icon\" />\r\n        </Button>\r\n        <Button\r\n          key={\"right\"}\r\n          className=\"snake-controller-button\"\r\n          disabled={!currentPlayer.controlActions.includes(\"right\")}\r\n          onClick={() => {\r\n            this.handleAction(\"right\");\r\n          }}\r\n          style={{\r\n            backgroundColor: playerSnake.color,\r\n            opacity: currentPlayer.controlActions.includes(\"right\") ? 1.0 : 0.3,\r\n          }}\r\n        >\r\n          <RightIcon className=\"player-controlls-icon\" />\r\n        </Button>\r\n        <Button\r\n          key={\"down\"}\r\n          className=\"snake-controller-button-fullwidth\"\r\n          disabled={!currentPlayer.controlActions.includes(\"down\")}\r\n          onClick={() => {\r\n            this.handleAction(\"down\");\r\n          }}\r\n          style={{\r\n            backgroundColor: playerSnake.color,\r\n            opacity: currentPlayer.controlActions.includes(\"down\") ? 1.0 : 0.3,\r\n          }}\r\n        >\r\n          <DownIcon className=\"player-controlls-icon\" />\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSnakeController.propTypes = {\r\n  playerKey: PropTypes.string.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n};\r\nexport default SnakeController;\r\n","import React, { Component } from 'react';\r\n\r\nclass TetrisController extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"phase-container\">\r\n                TetrisController.js\r\n\r\n                här  ska jag visa knappar för moves. och en metod här som tar knapptrycket och updaterar en specifik property i firebase baserat på gameid, playerkey etc.\r\n                måste ha med snakeId in i dnena kommmponent?\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TetrisController;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport {\r\n  MISSING_ALBUM_COVER,\r\n} from './SpotifyConstants';\r\n\r\nfunction slimifyPlaylist(playlist) {\r\n  const slim = {\r\n    name: playlist.name,\r\n    id: playlist.id,\r\n    img: playlist.images.length > 0 ? playlist.images[0] : MISSING_ALBUM_COVER,\r\n    totalSongs: playlist.tracks.total,\r\n    owner: playlist.owner.display_name,\r\n  };\r\n  return slim;\r\n}\r\n\r\nconst styles = theme => ({\r\n  img: {\r\n    height: 64,\r\n    webkitBboxShadow: '0 0 10px rgba(0,0,0,.3)',\r\n    boxShadow: '0 0 10px rgba(0,0,0,.3)',\r\n  },\r\n  listitem: {\r\n\r\n  },\r\n  primary: {\r\n    fontSize: 16,\r\n  },\r\n  dot: {\r\n    fontSize: '11px',\r\n    padding: '0 8px',\r\n  },\r\n  root: {\r\n    backgroundColor: 'inherit',\r\n  },\r\n  header: {\r\n    backgroundColor: '#282828',\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  },\r\n});\r\nfunction SpotifyPlayListSelector(props) {\r\n  const { classes, playlists, setSelection } = props;\r\n  if (!playlists) {\r\n    return null;\r\n  }\r\n  const slimPlaylists = playlists.map(pl => slimifyPlaylist(pl));\r\n\r\n  return (\r\n    <div>\r\n      <Typography className={classes.header} variant=\"subtitle1\">Select a playlist</Typography>\r\n      <List className={classes.root}>\r\n        <Grid container>\r\n          {slimPlaylists.map(playlist => (\r\n            <Grid item md={4} xs={12} key={playlist.id}>\r\n              <ListItem button onClick={() => setSelection(playlist.id)} className={classes.listitem}>\r\n                <img src={playlist.img.url} alt={playlist.name} className={classes.img} onError={(e) => { e.target.onerror = null; e.target.src = MISSING_ALBUM_COVER; }} />\r\n                <ListItemText\r\n                  classes={{ primary: classes.primary }}\r\n                  primary={playlist.name}\r\n                  secondary={(\r\n                    <span>\r\n                      {`by ${playlist.owner}`}\r\n                      <span className={classes.dot}>•</span>\r\n                      {`${playlist.totalSongs} songs`}\r\n                    </span>\r\n                  )}\r\n                />\r\n              </ListItem>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </List>\r\n    </div>\r\n  );\r\n}\r\nSpotifyPlayListSelector.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  playlists: PropTypes.array.isRequired,\r\n  setSelection: PropTypes.func,\r\n};\r\n\r\nexport default withStyles(styles)(SpotifyPlayListSelector);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport * as util from \"../SpotifyUtil\";\r\nimport SpotifyPlayListSelector from \"../SpotifyPlaylistSelector\";\r\nimport {\r\n  AUTH_EXPIRE_MS,\r\n  CLIENT_ID,\r\n  SPOTIFY_AUTH_SCOPES,\r\n} from \"../SpotifyConstants\";\r\n\r\nclass SpotifyConnection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      selectedPlaylist: \"\",\r\n      spotifyUser: null,\r\n      avatar: null,\r\n      playlists: [],\r\n      invalidSpotifyToken:\r\n        !localStorage.getItem(\"spotifytoken\") ||\r\n        Date.now() - localStorage.getItem(\"spotifytoken_timestamp\") >\r\n          AUTH_EXPIRE_MS,\r\n    };\r\n    this.createPlayer = this.createPlayer.bind(this);\r\n    this.setPlaylist = this.setPlaylist.bind(this);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { game } = this.props;\r\n    const { invalidSpotifyToken } = this.state;\r\n    const token = localStorage.getItem(\"spotifytoken\");\r\n\r\n    // If there is no token, redirect to Spotify authorization. kolla om token gått ut också\r\n    // jag kan sätta redirect till någon anna route och lösa det så att när man kommer dit så går den direkt och kollar i firebase och connectar än till rätt game?\r\n\r\n    //TODO Det fungerar inte med andra konton än mitt riktigt.. kanske för att den kopplad till appen?\r\n    //TODO något har ändrats kanske, tror vi använde refreshtokens m.m. när vi gjorde PE hackathon grejen...\r\n    //TODO se exempel i spotofy docs getting started med auth.. det tokenet jag får här för kalle testsson är invalid.. det kanske är ett refreshtoken?\r\n    //TODO kanske ska användasd vidare?\r\n\r\n    //TODO men konstigaste är ju att det fungerar för mitt riktiga konto. får ett riktigt token då..\r\n\r\n    if (invalidSpotifyToken) {\r\n      const authEndpoint = \"https://accounts.spotify.com/authorize\";\r\n      // Replace with your app's client ID, redirect URI and desired scopes\r\n      const redirectUri = window.location.origin + window.location.pathname;\r\n      localStorage.setItem(\"spotify_type\", \"play\");\r\n\r\n      localStorage.setItem(\"RecentGameIdPlay\", game.gameId);\r\n      window.location = `${authEndpoint}?client_id=${CLIENT_ID}&redirect_uri=${redirectUri}&scope=${SPOTIFY_AUTH_SCOPES.join(\r\n        \"%20\"\r\n      )}&response_type=token&show_dialog=true`;\r\n    }\r\n    const myHeaders = new Headers();\r\n    myHeaders.append(\"Authorization\", `Bearer ${token}`);\r\n    const getHeader = {\r\n      method: \"GET\",\r\n      headers: myHeaders,\r\n    };\r\n\r\n    const profileResponse = await fetch(\r\n      \"https://api.spotify.com/v1/me\",\r\n      getHeader\r\n    );\r\n    const profileResult = await profileResponse.json();\r\n\r\n    let hasNext = true;\r\n    let offset = 0;\r\n    const limit = 50;\r\n    const userPlaylists = [];\r\n    while (hasNext) {\r\n      const playlistsResponse = await fetch(\r\n        `https://api.spotify.com/v1/users/${\r\n          profileResult.id\r\n        }/playlists?limit=${limit}&offset=${offset}`,\r\n        getHeader\r\n      );\r\n      const playlistsResult = await playlistsResponse.json();\r\n      userPlaylists.push(...playlistsResult.items);\r\n      if (playlistsResult.items.length < limit) {\r\n        hasNext = false;\r\n      } else {\r\n        offset += limit;\r\n      }\r\n    }\r\n\r\n    const existingPlaylists = Object.values(game.players || {}).map(\r\n      (x) => x.playlist\r\n    );\r\n    const selectablePlaylists = userPlaylists.filter(\r\n      (x) => !existingPlaylists.includes(x.id) && util.isValidPlaylist(x)\r\n    );\r\n\r\n    this.setState(() => ({\r\n      playlists: selectablePlaylists,\r\n      name: profileResult.display_name,\r\n      avatar:\r\n        profileResult.images.length > 0 ? profileResult.images[0].url : null,\r\n    }));\r\n  }\r\n\r\n  setPlaylist(selectedPlaylist) {\r\n    this.createPlayer(selectedPlaylist);\r\n  }\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  createPlayer(selectedPlaylist) {\r\n    const { name, avatar } = this.state;\r\n    const { addPlayer } = this.props;\r\n    // jag skulle kunna spara userid istället för name och avatar. och sen i host ta ut avatar och name\r\n    const player = {\r\n      name,\r\n      playlist: selectedPlaylist,\r\n      score: 0,\r\n      avatar,\r\n    };\r\n    addPlayer(player);\r\n    this.setState({ selectedPlaylist });\r\n  }\r\n\r\n  render() {\r\n    const { game, playerKey } = this.props;\r\n    const { playlists, selectedPlaylist, invalidSpotifyToken } = this.state;\r\n    if (invalidSpotifyToken) {\r\n      return <span>Loading...</span>;\r\n    }\r\n    let playerName = \"\";\r\n    if (game.players && playerKey && game.players[playerKey]) {\r\n      playerName = game.players[playerKey].name;\r\n    }\r\n    // fiska fram info om vilken playlist som blev vald här? använd playlists och selectedplaylist (id) för att göra det\r\n    return (\r\n      <div className=\"phase-container\">\r\n        {selectedPlaylist ? (\r\n          <div>\r\n            <div className=\"quiz-top-section\" />\r\n            <div className=\"quiz-middle-section\">\r\n              <Typography variant=\"h5\">\r\n                <span>Välkommen </span>\r\n                <span className=\"dynamic-text\">{playerName}</span>\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\" style={{ marginTop: 15 }}>\r\n                {\r\n                  \"Ditt namn syns nu på spelskärmen. När spelet startar kommer frågor att presenteras och du svarar här på din enhet. Du kan välja ett eller flera svarsalternativ. Du får ett poäng för varje rätt svar och ett minus för varje felaktigt svar. Du kan inte få minuspoäng på en fråga.\"\r\n                }\r\n              </Typography>\r\n            </div>\r\n            <div className=\"quiz-bottom-section\" />\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <SpotifyPlayListSelector\r\n              setSelection={this.setPlaylist}\r\n              playlists={playlists}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyConnection.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  playerKey: PropTypes.string,\r\n  addPlayer: PropTypes.func.isRequired,\r\n};\r\nexport default SpotifyConnection;\r\n","import React, { Component } from 'react';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { fire } from '../../../../base';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  itemtext: {\r\n    overflow: 'hidden',\r\n  },\r\n  header: {\r\n    padding: 10,\r\n  },\r\n  itemtextDense: {\r\n    paddingLeft: 2,\r\n    paddingRight: 2,\r\n    overflow: 'hidden',\r\n  },\r\n  listitem: {\r\n    paddingLeft: 12,\r\n    paddingRight: 38,\r\n  },\r\n  container: {\r\n    height: '100vh',\r\n    width: '100vw',\r\n  },\r\n  headcontainer: {\r\n    backgroundColor: '#282828',\r\n    marginBottom: 10,\r\n  },\r\n});\r\n\r\nclass SpotifyController extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      answer: ['default'],\r\n      searchInput: '',\r\n      showSearch: false,\r\n    };\r\n    this.saveAnswer = this.saveAnswer.bind(this);\r\n    this.toggleOption = this.toggleOption.bind(this);\r\n    this.toggleSearch = this.toggleSearch.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.saveAnswer();\r\n  }\r\n\r\n  handleChange = name => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  toggleSearch = () => {\r\n    this.setState(state => ({\r\n      showSearch: !state.showSearch,\r\n      searchInput: '',\r\n    }));\r\n  }\r\n\r\n  toggleOption(playerKey) {\r\n    this.setState((state) => {\r\n      if (state.answer.includes(playerKey)) {\r\n        return ({\r\n          answer: state.answer.filter(a => a !== playerKey),\r\n        });\r\n      }\r\n      return ({\r\n        answer: [...state.answer, playerKey],\r\n      });\r\n    });\r\n  }\r\n\r\n  saveAnswer() {\r\n    const { answer } = this.state;\r\n    const { game, playerKey } = this.props;\r\n    const answerObj = {\r\n      answer,\r\n      question: game.minigame.currentq,\r\n      playerKey,\r\n    };\r\n    fire.database().ref(`/games/${game.key}/answers`).push(answerObj, (error) => {\r\n      if (error) {\r\n        alert(`error saving answer${error}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes, game } = this.props;\r\n    const { answer, searchInput, showSearch } = this.state;\r\n    const players = Object.values(game.players);\r\n    const useDense = players.length > 11;\r\n    const filteredPlayers = players.filter(p => answer.includes(p.playerKey) || p.name.toLowerCase().includes(searchInput.toLowerCase()));\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className={classes.container}>\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n            justify=\"space-between\"\r\n            alignItems=\"center\"\r\n            className={classes.headcontainer}\r\n          >\r\n            <Grid item>\r\n              <Typography className={classes.header} variant=\"subtitle1\">Markera ditt svar</Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              {showSearch ? (\r\n                <TextField\r\n                  value={searchInput}\r\n                  placeholder=\"Sök\"\r\n                  onChange={this.handleChange('searchInput')}\r\n                />\r\n              ) : (\r\n                <IconButton\r\n                  key=\"close\"\r\n                  aria-label=\"Close\"\r\n                  color=\"inherit\"\r\n                  className={classes.close}\r\n                  onClick={this.toggleSearch}\r\n                >\r\n                  <SearchIcon className={classes.icon} />\r\n                </IconButton>\r\n              )\r\n        }\r\n            </Grid>\r\n          </Grid>\r\n          <List dense={useDense} className={classes.root}>\r\n            <Grid container>\r\n              {filteredPlayers.map(player => (\r\n                <Grid key={player.key} item md={4} xs={useDense ? 6 : 12}>\r\n                  <ListItem button onClick={() => this.toggleOption(player.key)} className={classes.listitem}>\r\n                    <ListItemAvatar>\r\n                      {player.avatar ? (\r\n                        <Avatar\r\n                          alt={player.name}\r\n                          src={player.avatar}\r\n                        />\r\n                      ) : <Avatar><PersonIcon /></Avatar>}\r\n                    </ListItemAvatar>\r\n                    {answer.includes(player.key) ? (\r\n                      <ListItemText className={useDense ? classes.itemtextDense : classes.itemtext} primary={player.name} />\r\n                    ) : (\r\n                      <ListItemText className={useDense ? classes.itemtextDense : classes.itemtext} secondary={player.name} />\r\n                    )}\r\n                    <ListItemSecondaryAction>\r\n                      <Checkbox\r\n                        onClick={() => this.toggleOption(player.key)}\r\n                        color=\"primary\"\r\n                        checked={answer.includes(player.key)}\r\n                      />\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </List>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyController.propTypes = {\r\n  playerKey: PropTypes.string.isRequired,\r\n  game: PropTypes.object.isRequired,\r\n  classes: PropTypes.any,\r\n};\r\nexport default withStyles(styles)(SpotifyController);\r\n","import React, { Component } from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Typography } from '@material-ui/core';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass SpotifyResultQuestion extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { game } = this.props;\r\n    return (\r\n      <div className=\"phase-container\">\r\n        <div className=\"quiz-top-section\" />\r\n        <div className=\"quiz-middle-section\" />\r\n        <div className=\"quiz-bottom-section\">\r\n          <Typography variant=\"subtitle1\">Kolla på spelskrämen för att se ställningen</Typography>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nSpotifyResultQuestion.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  playerKey: PropTypes.string.isRequired,\r\n};\r\nexport default SpotifyResultQuestion;\r\n","import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport PhaseConnection from \"./PhaseConnection\";\r\nimport PhaseStarting from \"./PhaseStarting\";\r\nimport PhaseFinalResult from \"./PhaseFinalResult\";\r\nimport SnakeController from \"../snake/SnakeController\";\r\nimport TetrisController from \"../tetris/TetrisController\";\r\nimport SpotifyConnection from \"../spotify/play/SpotifyConnection\";\r\nimport SpotifyController from \"../spotify/play/SpotifyController\";\r\nimport SpotifyResultQuestion from \"../spotify/play/SpotifyResultQuestion\";\r\nimport { SPOTIFY_GREEN, SPOTIFY_WHITE } from \"../spotify/SpotifyConstants\";\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      main: SPOTIFY_GREEN,\r\n    },\r\n    secondary: {\r\n      main: SPOTIFY_WHITE,\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiButton: {\r\n      // Name of the component ⚛️ / style sheet\r\n      root: {\r\n        // Name of the rule\r\n        borderRadius: 500,\r\n        padding: \"11px 44px\",\r\n        color: SPOTIFY_WHITE,\r\n        letterSpacing: \".16em\",\r\n        WebkitTransition: \"none 33ms cubic-bezier(.3,0,.7,1)\",\r\n        transition: \"none 33ms cubic-bezier(.3,0,.7,1)\",\r\n        WebkitTransitionProperty: \"all\",\r\n        transitionProperty: \"all\",\r\n        touchAction: \"manipulation\",\r\n        willChange: \"transform\",\r\n        lineHeight: 1.6,\r\n        minWidth: 130,\r\n        margin: 10,\r\n        fontWeight: 300,\r\n        fontSize: 11,\r\n        \"&:hover\": {\r\n          WebkitTransition: \"none 33ms cubic-bezier(.3,0,0,1)\",\r\n          transition: \"none 33ms cubic-bezier(.3,0,0,1)\",\r\n          WebkitTransitionProperty: \"all\",\r\n          transitionProperty: \"all\",\r\n          WebkitTransform: \"scale(1.06)\",\r\n          transform: \"scale(1.06)\",\r\n        },\r\n      },\r\n      textPrimary: {\r\n        backgroundColor: SPOTIFY_GREEN,\r\n        color: SPOTIFY_WHITE,\r\n        \"&:hover\": {\r\n          backgroundColor: \"#1ed760\",\r\n        },\r\n      },\r\n      textSecondary: {\r\n        backgroundColor: \"rgba(24,24,24,.7)\",\r\n        \"&:hover\": {\r\n          backgroundColor: \"rgba(24,24,24,.7)\",\r\n          webkitBoxShadow: \"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)\",\r\n          boxShadow: \"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)\",\r\n        },\r\n        webkitBoxShadow: \"inset 0 0 0 2px #b3b3b3\",\r\n        boxShadow: \"inset 0 0 0 2px #b3b3b3\",\r\n      },\r\n    },\r\n  },\r\n});\r\nclass Minigame extends PureComponent {\r\n  render() {\r\n    const { game, playerKey, createPlayer } = this.props;\r\n    const lastPhase = game.phase === \"final_result\" || game.phase === \"end\";\r\n    switch (game.gametype) {\r\n      case \"snake\":\r\n        return (\r\n          <div className=\"play-container\">\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection\r\n                game={game}\r\n                addPlayer={createPlayer}\r\n                playerKey={playerKey}\r\n              />\r\n            )}\r\n            {game.phase === \"starting\" && <PhaseStarting game={game} />}\r\n            {game.phase === \"gameplay\" && (\r\n              <SnakeController game={game} playerKey={playerKey} />\r\n            )}\r\n            {lastPhase && (\r\n              <PhaseFinalResult game={game} playerKey={playerKey} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"tetris\":\r\n        return (\r\n          <div className=\"play-container\">\r\n            {game.phase === \"connection\" && (\r\n              <PhaseConnection\r\n                game={game}\r\n                addPlayer={createPlayer}\r\n                playerKey={playerKey}\r\n              />\r\n            )}\r\n            {game.phase === \"starting\" && <PhaseStarting game={game} />}\r\n            {game.phase === \"gameplay\" && <TetrisController game={game} />}\r\n            {lastPhase && (\r\n              <PhaseFinalResult game={game} playerKey={playerKey} />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"spotify\":\r\n        document.querySelector(\"body\").classList.add(\"dark-mode\");\r\n        return (\r\n          <MuiThemeProvider theme={theme}>\r\n            <div className=\"play-container\">\r\n              {game.phase === \"connection\" && (\r\n                <SpotifyConnection\r\n                  game={game}\r\n                  addPlayer={createPlayer}\r\n                  playerKey={playerKey}\r\n                />\r\n              )}\r\n              {game.phase === \"gameplay\" && (\r\n                <SpotifyController game={game} playerKey={playerKey} />\r\n              )}\r\n              {game.phase === \"level_completed\" && (\r\n                <SpotifyResultQuestion game={game} playerKey={playerKey} />\r\n              )}\r\n              {lastPhase && (\r\n                <PhaseFinalResult game={game} playerKey={playerKey} />\r\n              )}\r\n            </div>\r\n          </MuiThemeProvider>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n}\r\nMinigame.propTypes = {\r\n  game: PropTypes.object.isRequired,\r\n  createPlayer: PropTypes.func.isRequired,\r\n  playerKey: PropTypes.string.isRequired,\r\n};\r\nexport default Minigame;\r\n","import React, { Component } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport GameIcon from \"@material-ui/icons/VideogameAsset\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport GolfIcon from \"@material-ui/icons/GolfCourse\";\r\nimport SpotifyIcon from \"@material-ui/icons/MusicNote\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { fire, fireGolf } from \"../../base\";\r\nimport Quiz from \"../quiz/play/Quiz\";\r\nimport Minigame from \"../minigame/play/Minigame\";\r\n\r\nfunction fetchGame(gametype, gameId, callback) {\r\n  fire\r\n    .database()\r\n    .ref(\"games\")\r\n    .orderByChild(\"gameId\")\r\n    .equalTo(gameId)\r\n    .once(\"value\", callback);\r\n}\r\nclass Play extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      game: {},\r\n      gameId: \"\",\r\n      gametype: \"other\",\r\n      recentGameId: localStorage.getItem(\"RecentGameIdPlay\") || \"\",\r\n      playerKey: \"\",\r\n      recentGame: null,\r\n      isRedirected:\r\n        Date.now() - localStorage.getItem(\"spotifytoken_timestamp\") < 2000,\r\n    };\r\n    this.createPlayer = this.createPlayer.bind(this);\r\n    this.joinGame = this.joinGame.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { recentGameId, isRedirected } = this.state;\r\n\r\n    let gamePinParam = window.location.href.split(\"pin=\")[1];\r\n    if (gamePinParam) {\r\n      this.joinGame(gamePinParam);\r\n    }\r\n    if (isRedirected) {\r\n      this.joinGame(recentGameId);\r\n    }\r\n    if (recentGameId) {\r\n      // behöver spara recentgametype?\r\n      fetchGame(\"default\", recentGameId, (snapshot) => {\r\n        if (snapshot.val()) {\r\n          let game;\r\n          snapshot.forEach((child) => {\r\n            game = child.val();\r\n          });\r\n          if (game.status === \"IN_PROGRESS\") {\r\n            this.setState({ recentGame: game });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChangeSelect = (event) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({\r\n      [name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  joinGame(gameId) {\r\n    const { showSnackbar, toggleHeader } = this.props;\r\n    const { gametype } = this.state;\r\n    const that = this;\r\n    fetchGame(gametype, gameId, (snapshot) => {\r\n      if (snapshot.val()) {\r\n        let game;\r\n        snapshot.forEach((child) => {\r\n          game = child.val();\r\n        });\r\n        // får skapa en ny attribut, canPlayerJoin true/false om det begövs\r\n        if (game.phase === \"connection\") {\r\n          const storedPlayerKey = localStorage.getItem(\"RecentPlayerKey\");\r\n          if (\r\n            storedPlayerKey &&\r\n            game.players &&\r\n            game.players[storedPlayerKey]\r\n          ) {\r\n            that.setState({ playerKey: storedPlayerKey });\r\n          }\r\n          that.initGameListiner(game);\r\n          const snack = {\r\n            variant: \"success\",\r\n            message: \"Connected to game\",\r\n          };\r\n          showSnackbar(snack);\r\n          toggleHeader(false);\r\n        } else if (game.phase === \"setup\") {\r\n          const snack = {\r\n            variant: \"error\",\r\n            message: \"Game is not yet started\",\r\n          };\r\n          showSnackbar(snack);\r\n        } else {\r\n          const storedPlayerKey = localStorage.getItem(\"RecentPlayerKey\");\r\n          if (\r\n            storedPlayerKey &&\r\n            game.players &&\r\n            game.players[storedPlayerKey]\r\n          ) {\r\n            that.setState({ playerKey: storedPlayerKey });\r\n            localStorage.setItem(\"RecentGameIdPlay\", game.gameId);\r\n            that.initGameListiner(game);\r\n            const snack = {\r\n              variant: \"success\",\r\n              message: \"Connected to game\",\r\n            };\r\n            showSnackbar(snack);\r\n            toggleHeader(false);\r\n          } else {\r\n            const snack = {\r\n              variant: \"error\",\r\n              message: \"Game is in progress\",\r\n            };\r\n            showSnackbar(snack);\r\n          }\r\n        }\r\n      } else {\r\n        const snack = {\r\n          variant: \"info\",\r\n          message: \"No game found\",\r\n        };\r\n        showSnackbar(snack);\r\n      }\r\n    });\r\n  }\r\n\r\n  initGameListiner(_game) {\r\n    let gameRef = fire.database().ref(`games/${_game.key}`);\r\n\r\n    const that = this;\r\n    gameRef.on(\"value\", (snapshot) => {\r\n      const game = snapshot.val();\r\n      if (game) {\r\n        // kan blir problem med asynch setstate?\r\n        that.setState({\r\n          game,\r\n        });\r\n      } else {\r\n        that.setState({\r\n          game: \"\",\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  createPlayer(player) {\r\n    const { game } = this.state;\r\n    const { showSnackbar } = this.props;\r\n    let playerRef = fire\r\n      .database()\r\n      .ref(`/games/${game.key}/players`)\r\n      .push();\r\n\r\n    const newPlayer = Object.assign({ key: playerRef.key }, player);\r\n    const that = this;\r\n    playerRef.set(newPlayer, (error) => {\r\n      if (error) {\r\n        const snack = {\r\n          variant: \"error\",\r\n          message: \"Unexpected internal error\",\r\n        };\r\n        showSnackbar(snack);\r\n      } else {\r\n        that.setState({\r\n          playerKey: newPlayer.key,\r\n        });\r\n        localStorage.setItem(\"RecentPlayerKey\", newPlayer.key);\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      game,\r\n      playerKey,\r\n      gameId,\r\n      recentGameId,\r\n      recentGame,\r\n      isRedirected,\r\n      gametype,\r\n    } = this.state;\r\n    const { showSnackbar } = this.props;\r\n    const gameAvatars = {\r\n      golf: <GolfIcon />,\r\n      spotify: <SpotifyIcon />,\r\n      quiz: <GameIcon />,\r\n      snake: <GameIcon />,\r\n    };\r\n    if (!game.phase && isRedirected) {\r\n      return (\r\n        <div>\r\n          <span>Loading...</span>\r\n        </div>\r\n      );\r\n    }\r\n    if (!game.phase) {\r\n      return (\r\n        <div className=\"page-container play-page\">\r\n          <div>\r\n            <FormControl>\r\n              <TextField\r\n                label=\"Game PIN\"\r\n                name=\"Game ID\"\r\n                value={gameId}\r\n                margin=\"normal\"\r\n                onChange={this.handleChange(\"gameId\")}\r\n              />\r\n            </FormControl>\r\n            <Button onClick={() => this.joinGame(gameId)} variant=\"contained\">\r\n              Join\r\n            </Button>\r\n          </div>\r\n          {recentGame && (\r\n            <div>\r\n              <List>\r\n                <ListItem>\r\n                  <ListItemAvatar>\r\n                    <Avatar>{gameAvatars[recentGame.gametype]}</Avatar>\r\n                  </ListItemAvatar>\r\n                  <ListItemText\r\n                    primary={recentGame.title}\r\n                    secondary={recentGame.gameId}\r\n                  />\r\n                  <ListItemSecondaryAction>\r\n                    <IconButton\r\n                      aria-label=\"reconnect\"\r\n                      onClick={() => this.joinGame(recentGameId)}\r\n                    >\r\n                      <Typography>reconnect</Typography>\r\n                    </IconButton>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              </List>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"page-container play-page\">\r\n        {game.gametype === \"quiz\" && (\r\n          <Quiz\r\n            game={game}\r\n            createPlayer={this.createPlayer}\r\n            playerKey={playerKey}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n        {game.gametype === \"snake\" && (\r\n          <Minigame\r\n            game={game}\r\n            createPlayer={this.createPlayer}\r\n            playerKey={playerKey}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n        {game.gametype === \"tetris\" && (\r\n          <Minigame\r\n            game={game}\r\n            createPlayer={this.createPlayer}\r\n            playerKey={playerKey}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n        {game.gametype === \"spotify\" && (\r\n          <Minigame\r\n            game={game}\r\n            createPlayer={this.createPlayer}\r\n            playerKey={playerKey}\r\n            showSnackbar={showSnackbar}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nPlay.propTypes = {\r\n  showSnackbar: PropTypes.func.isRequired,\r\n  toggleHeader: PropTypes.func.isRequired,\r\n};\r\nexport default Play;\r\n","import React, { Component } from 'react';\r\nimport { Typography, Card } from '@material-ui/core';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    const timestamp = localStorage.getItem('spotifytoken_timestamp');\r\n    const spotifyType = localStorage.getItem('spotify_type');\r\n    if (Date.now() - timestamp < 2000 && spotifyType) {\r\n      props.history.push(`/${spotifyType}`);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"app-page home-page\">\r\n        <Grid container spacing={24}>\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h3\">Welcome to stagehoot</Typography>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Link to=\"/play\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Play\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Connect to a game as player</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <Link to=\"/host\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Host\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Host a created game using game pin</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Link to=\"/create\">\r\n              <Card className=\"card-button\">\r\n                <CardHeader title=\"Create\" />\r\n                <CardContent>\r\n                  <Typography variant=\"subtitle1\" align=\"center\">Setup a new game and recive a related game pin</Typography>\r\n                </CardContent>\r\n              </Card>\r\n            </Link>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Home);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport green from '@material-ui/core/colors/green';\r\nimport amber from '@material-ui/core/colors/amber';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst styles1 = theme => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nfunction MySnackbarContent(props) {\r\n  const {\r\n    classes, message, onClose, variant, ...other\r\n  } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={classes[variant]}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={(\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={classNames(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n            )}\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"Close\"\r\n          color=\"inherit\"\r\n          className={classes.close}\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nMySnackbarContent.propTypes = {\r\n  message: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  variant: PropTypes.oneOf(['success', 'warning', 'error', 'info']).isRequired,\r\n};\r\n\r\nconst MySnackbarContentWrapper = withStyles(styles1)(MySnackbarContent);\r\n\r\nclass CustomizedSnackbars extends React.Component {\r\n    handleClose = (reason) => {\r\n      const { hideSnackbar } = this.props;\r\n      if (reason === 'clickaway') {\r\n        return;\r\n      }\r\n      hideSnackbar();\r\n    };\r\n\r\n    render() {\r\n      const { snack } = this.props;\r\n      return (\r\n        <div>\r\n          <Snackbar\r\n            anchorOrigin={{\r\n              vertical: 'bottom',\r\n              horizontal: 'left',\r\n            }}\r\n            open={snack.open}\r\n            autoHideDuration={6000}\r\n            onClose={this.handleClose}\r\n          >\r\n            <MySnackbarContentWrapper\r\n              onClose={this.handleClose}\r\n              variant={snack.variant}\r\n              message={snack.message}\r\n            />\r\n          </Snackbar>\r\n        </div>\r\n      );\r\n    }\r\n}\r\nCustomizedSnackbars.propTypes = {\r\n  snack: PropTypes.object,\r\n  hideSnackbar: PropTypes.func.isRequired,\r\n};\r\nexport default CustomizedSnackbars;\r\n","import React, { Component } from 'react';\nimport './App.scss';\nimport {\n  HashRouter as Router,\n  Route,\n} from 'react-router-dom';\nimport { fire } from './base';\nimport Header from './components/common/Header';\nimport Create from './components/pages/Create';\nimport Host from './components/pages/Host';\nimport Play from './components/pages/Play';\nimport Home from './components/pages/Home';\nimport CustomizedSnackbars from './components/common/CustomizedSnackbars';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      snack: '',\n      showHeader: true,\n    };\n    const hash = window.location.hash\n      .substring(1)\n      .split('&')\n      .reduce((initial, item) => {\n        if (item) {\n          const parts = item.split('=');\n          initial[parts[0]] = decodeURIComponent(parts[1]);\n        }\n        return initial;\n      }, {});\n    window.location.hash = '';\n    if (hash.access_token) {\n      localStorage.setItem('spotifytoken', hash.access_token);\n      localStorage.setItem('spotifytoken_timestamp', Date.now());\n    }\n    this.showSnackbar = this.showSnackbar.bind(this);\n    this.hideSnackbar = this.hideSnackbar.bind(this);\n    this.toggleHeader = this.toggleHeader.bind(this);\n\n  }\n\n  hideSnackbar() {\n    const snack = this.state.snack;\n    snack.open = false;\n    this.setState({\n      snack,\n    });\n  }\n\n  showSnackbar(snack) {\n    snack.open = true;\n    this.setState({\n      snack,\n    });\n  }\n\n  toggleHeader(value) {\n    this.setState({ showHeader: value });\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"App\">\n          {this.state.showHeader && <Header />}\n          <div id=\"content\">\n            <Route exact path=\"/play\" render={() => <Play showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/host\" render={() => <Host showSnackbar={this.showSnackbar} toggleHeader={this.toggleHeader} />} />\n            <Route exact path=\"/create\" render={() => <Create showSnackbar={this.showSnackbar} />} />\n            <Route exact path=\"/\" render={() => <Home />} />\n\n          </div>\n          {this.state.snack && <CustomizedSnackbars snack={this.state.snack} hideSnackbar={this.hideSnackbar} />}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}