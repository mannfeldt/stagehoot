(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{279:function(e,a,t){e.exports=t(602)},284:function(e,a,t){},286:function(e,a,t){},442:function(e,a,t){e.exports={cyanColor:"#80DEEA",redColor:"#EF9A9A",purpleColor:"#CE93D8",greenColor:"#C5E1A5"}},602:function(e,a,t){"use strict";t.r(a);var n,r,s=t(0),i=t.n(s),o=t(39),l=t.n(o),c=(t(284),t(4)),m=t(5),u=t(8),h=t(6),p=t(7),d=t(1),g=(t(286),t(217)),v=t.n(g),b=(t(293),t(295),v.a.initializeApp({apiKey:"AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU",authDomain:"stagehoot.firebaseapp.com",databaseURL:"https://stagehoot.firebaseio.com",projectId:"stagehoot",storageBucket:"stagehoot.appspot.com",messagingSenderId:"589747985768"})),y=t(603),f=t(40),E=t.n(f),k=t(219),O=t.n(k),j=t(12),w=t.n(j),C=t(115),q=t.n(C),S=t(88),x=t.n(S),N=t(116),P=t.n(N),z=t(10),A=t.n(z),G=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).openMenu=function(e){t.setState({anchorEl:e.currentTarget})},t.state={anchorEl:null},t.openMenu=t.openMenu.bind(Object(d.a)(Object(d.a)(t))),t.handleClose=t.handleClose.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e="Stagehoot";"ettkilomjol-dev"===b.options.projectId&&(e="Ett Kilo Mj\xf6l DEV");var a=window.location.href.substr(window.location.href.indexOf("/#/")+2);return i.a.createElement("div",{id:"header"},i.a.createElement(q.a,{position:"static"},i.a.createElement(x.a,{className:"toolbar"},i.a.createElement("div",{className:"appbar-container--left"},i.a.createElement(y.a,{className:"appbar-title text-big",to:"/"},e),i.a.createElement("span",{className:"hide-mobile"},i.a.createElement(y.a,{to:"/"},i.a.createElement(w.a,{className:"/"===a?"appbar-nav-button selected-route":"appbar-nav-button"},"Home")),i.a.createElement(y.a,{to:"/play"},i.a.createElement(w.a,{className:"/play"===a?"appbar-nav-button selected-route":"appbar-nav-button"},"Play")),i.a.createElement(y.a,{to:"/host"},i.a.createElement(w.a,{className:"/host"===a?"appbar-nav-button selected-route":"appbar-nav-button"},"Host")),i.a.createElement(y.a,{to:"/create"},i.a.createElement(w.a,{className:"/create"===a?"appbar-nav-button selected-route":"appbar-nav-button"},"Create")))),i.a.createElement("div",{className:"appbar-container--right hide-desktop"},i.a.createElement(E.a,{onClick:this.openMenu},i.a.createElement(O.a,null)),i.a.createElement(P.a,{open:!!this.state.anchorEl,onClose:this.handleClose,anchorEl:this.state.anchorEl},i.a.createElement(function(e){var a=[];return a.push(i.a.createElement(y.a,{key:a.length,to:"/"},i.a.createElement(A.a,{onClick:e.onClose},"Home"))),a.push(i.a.createElement(y.a,{key:a.length,to:"/play"},i.a.createElement(A.a,{onClick:e.onClose},"Play"))),a.push(i.a.createElement(y.a,{key:a.length,to:"/host"},i.a.createElement(A.a,{onClick:e.onClose},"Host"))),a.push(i.a.createElement(y.a,{key:a.length,to:"/create"},i.a.createElement(A.a,{onClick:e.onClose},"Create"))),i.a.createElement("div",{className:"header-menulist"},a)},{onClose:this.handleClose}))))))}}]),a}(s.Component),F=G,M=t(28),Q=t(33),T=t.n(Q),_=t(15),D=t.n(_),I=t(34),K=t.n(I),L=t(26),R=t.n(L),B=t(69),H=t.n(B),W=t(89),J=t.n(W),U=t(49),V=t.n(U),Y=t(29),Z=t.n(Y),X=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.state={nrOfQuestions:"10",category:"0",difficulty:"0",aType:"0"},t.generateQuestions=t.generateQuestions.bind(Object(d.a)(Object(d.a)(t))),t.parseDOMArray=t.parseDOMArray.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"parseDOM",value:function(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent}},{key:"parseDOMArray",value:function(e){for(var a=[],t=0;t<e.length;t++)a.push(this.parseDOM(e[t]));return a}},{key:"generateQuestions",value:function(){var e=this,a="https://opentdb.com/api.php?";"0"!==this.state.nrOfQuestions&&(a+="amount="+this.state.nrOfQuestions),"0"!==this.state.category&&(a+="&category="+this.state.category),"0"!==this.state.difficulty&&(a+="&difficulty="+this.state.difficulty),"0"!==this.state.aType&&(a+="&type="+this.state.aType),fetch(a).then(function(e){return e.json()}).then(function(a){if(0===a.response_code){for(var t=[],n=0;n<a.results.length;n++){var r=a.results[n],s={question:e.parseDOM(r.question),correctAnswers:[e.parseDOM(r.correct_answer)],wrongAnswers:e.parseDOMArray(r.incorrect_answers),qType:"text",aType:r.type,category:r.category,difficulty:r.difficulty};t.push(s)}e.props.addQuestions(t)}else{var i={variant:"error",message:"Could not generate questions( code: "+a.response_code+")"};e.props.showSnackbar(i)}})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Number of questions",name:"nrOfQuestions",value:this.state.nrOfQuestions,margin:"normal",onChange:this.handleChange("nrOfQuestions")})),i.a.createElement(D.a,null,i.a.createElement(T.a,{htmlFor:"category"},"Category"),i.a.createElement(K.a,{value:this.state.category||"",onChange:this.handleChangeSelect,name:"category",inputProps:{id:"category"}},i.a.createElement(A.a,{value:"0"},"Any category"),i.a.createElement(A.a,{value:"9"},"General Knowledge"),i.a.createElement(A.a,{value:"10"},"Entertainment: Books"),i.a.createElement(A.a,{value:"11"},"Entertainment: Film"),i.a.createElement(A.a,{value:"12"},"Entertainment: Music"),i.a.createElement(A.a,{value:"13"},"Entertainment: Musicals and Theatres"),i.a.createElement(A.a,{value:"14"},"Entertainment: Television"),i.a.createElement(A.a,{value:"15"},"Entertainment: Video Games"),i.a.createElement(A.a,{value:"16"},"Entertainment: Board Games"),i.a.createElement(A.a,{value:"17"},"Science and Nature"),i.a.createElement(A.a,{value:"18"},"Science: Computers"),i.a.createElement(A.a,{value:"19"},"Science: Mathematics"),i.a.createElement(A.a,{value:"20"},"Mythology"),i.a.createElement(A.a,{value:"21"},"Sports"),i.a.createElement(A.a,{value:"22"},"Geography"),i.a.createElement(A.a,{value:"23"},"History"),i.a.createElement(A.a,{value:"24"},"Politics"),i.a.createElement(A.a,{value:"25"},"Art"),i.a.createElement(A.a,{value:"26"},"Celebrities"),i.a.createElement(A.a,{value:"27"},"Animals"),i.a.createElement(A.a,{value:"28"},"Vehicles"),i.a.createElement(A.a,{value:"29"},"Entertainment: Comics"),i.a.createElement(A.a,{value:"30"},"Science: Gadgets"),i.a.createElement(A.a,{value:"31"},"Entertainment: Japanese Anime and Manga"),i.a.createElement(A.a,{value:"32"},"Entertainment: Cartoon and Animations"))),i.a.createElement(D.a,null,i.a.createElement(T.a,{htmlFor:"difficulty"},"Difficulty"),i.a.createElement(K.a,{value:this.state.difficulty||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty"}},i.a.createElement(A.a,{value:"0"},"Any difficulty"),i.a.createElement(A.a,{value:"easy"},"Easy"),i.a.createElement(A.a,{value:"medium"},"Medium"),i.a.createElement(A.a,{value:"hard"},"Hard"))),i.a.createElement(D.a,null,i.a.createElement(T.a,{htmlFor:"aType"},"Answer type"),i.a.createElement(K.a,{value:this.state.aType||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType"}},i.a.createElement(A.a,{value:"0"},"Any type"),i.a.createElement(A.a,{value:"multiple"},"Multiple choice"),i.a.createElement(A.a,{value:"boolean"},"True/False"))),i.a.createElement(w.a,{onClick:this.generateQuestions,variant:"contained"},"Generate"))}}]),a}(s.Component),$=X,ee=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleTrueFalse=function(e){var a=e.target.value;t.setState({correctAnswer:a,wrongAnswerOne:"true"===a?"false":"true"})},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.state={question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:"",timelimit:"10",qType:"text",aType:"multiple",answerBool:"",generateQuestions:!0},t.sendQuestion=t.sendQuestion.bind(Object(d.a)(Object(d.a)(t))),t.toggleGenerateQuestion=t.toggleGenerateQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"sendQuestion",value:function(){var e={question:this.state.question,correctAnswers:[this.state.correctAnswer],wrongAnswers:[this.state.wrongAnswerOne,this.state.wrongAnswerTwo,this.state.wrongAnswerThree],timelimit:this.state.timelimit,qType:this.state.qType,aType:this.state.aType};this.setState({question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:""}),this.props.addQuestion(e)}},{key:"toggleGenerateQuestion",value:function(){this.setState({generateQuestions:!this.state.generateQuestions})}},{key:"render",value:function(){return this.state.generateQuestions?i.a.createElement("div",null,i.a.createElement(w.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Custom questions"),i.a.createElement($,{addQuestions:this.props.addQuestions,showSnackbar:this.props.showSnackbar})):i.a.createElement("div",null,i.a.createElement(w.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Auto generate questions"),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"qtype-required"},"Question type"),i.a.createElement(K.a,{value:this.state.qType||"",onChange:this.handleChangeSelect,name:"qtype",inputProps:{id:"qtype-required"}},i.a.createElement(A.a,{value:"text"},"Text"),i.a.createElement(A.a,{value:"image"},"Image"),i.a.createElement(A.a,{value:"video"},"Video"))),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"aType-required"},"Answer type"),i.a.createElement(K.a,{value:this.state.aType||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType-required"}},i.a.createElement(A.a,{value:"boolean"},"True/false"),i.a.createElement(A.a,{value:"player"},"Player"),i.a.createElement(A.a,{value:"multiple"},"Mulitichoice"),i.a.createElement(A.a,{value:"free"},"Free text"))),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Question",name:"question",value:this.state.question,margin:"normal",onChange:this.handleChange("question")})),"multiple"===this.state.aType&&i.a.createElement("div",null,i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Correct answer",name:"correctAnswer",margin:"normal",value:this.state.correctAnswer,onChange:this.handleChange("correctAnswer")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Wrong answer",name:"wrongAnswerOne",margin:"normal",value:this.state.wrongAnswerOne,onChange:this.handleChange("wrongAnswerOne")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Wrong answer",name:"wrongAnswerTwo",margin:"normal",value:this.state.wrongAnswerTwo,onChange:this.handleChange("wrongAnswerTwo")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Wrong answer",name:"wrongAnswerThree",margin:"normal",value:this.state.wrongAnswerThree,onChange:this.handleChange("wrongAnswerThree")}))),"boolean"===this.state.aType&&i.a.createElement("div",null,i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(V.a,{component:"legend"},"Answer"),i.a.createElement(J.a,{"aria-label":"answer",name:"correctAnswer",value:this.state.correctAnswer,onChange:this.handleTrueFalse},i.a.createElement(Z.a,{value:"true",control:i.a.createElement(H.a,null),label:"True"}),i.a.createElement(Z.a,{value:"false",control:i.a.createElement(H.a,null),label:"False"})))),this.props.isTimelimit&&i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Time limit",name:"timelimit",type:"number",value:this.state.timelimit,margin:"normal",onChange:this.handleChange("timelimit")})),i.a.createElement(w.a,{onClick:this.sendQuestion,variant:"contained"},"Add question"))}}]),a}(s.Component),ae=ee,te=t(35),ne=t(16),re=t.n(ne),se=t(117),ie=t.n(se),oe=t(118),le=t.n(oe),ce=t(119),me=t.n(ce),ue=t(44),he=t.n(ue),pe=t(52),de=t.n(pe),ge=t(51),ve=t.n(ge),be=t(56),ye=t.n(be),fe=t(220),Ee=t.n(fe),ke=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={expanded:!1},t.deleteQuestion=t.deleteQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"deleteQuestion",value:function(){this.props.deleteQuestion(this.props.question)}},{key:"render",value:function(){var e=this.props.classes;return i.a.createElement(ie.a,{className:e.card},i.a.createElement(le.a,{action:i.a.createElement(E.a,{onClick:this.deleteQuestion},i.a.createElement(Ee.a,null)),title:this.props.question.question,subheader:this.props.question.timelimit?this.props.question.timelimit+" seconds":"default timelimit"}),i.a.createElement(me.a,null,i.a.createElement(he.a,{variant:"subtitle1",align:"left"},"Correct answers"),i.a.createElement(de.a,null,this.props.question.correctAnswers.map(function(e,a){return i.a.createElement(ve.a,{key:a},i.a.createElement(ye.a,{primary:e}))})),i.a.createElement(he.a,{variant:"subtitle1",align:"left"},"Wrong answers"),i.a.createElement(de.a,null,this.props.question.wrongAnswers.map(function(e,a){return i.a.createElement(ve.a,{key:a},i.a.createElement(ye.a,{primary:e}))}))))}}]),a}(s.Component),Oe=Object(te.withStyles)(function(e){return{card:{maxWidth:400}}})(ke),je=t(14),we=t.n(je),Ce=t(50),qe=t.n(Ce),Se=t(32),xe=t.n(Se),Ne=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"quiz",gamemode:"normal",timelimit:!0,timescore:!1,questions:[],gameid:"",gamePass:""},t.addQuestion=t.addQuestion.bind(Object(d.a)(Object(d.a)(t))),t.addQuestions=t.addQuestions.bind(Object(d.a)(Object(d.a)(t))),t.deleteQuestion=t.deleteQuestion.bind(Object(d.a)(Object(d.a)(t))),t.validateGame=t.validateGame.bind(Object(d.a)(Object(d.a)(t))),t.createQuiz=t.createQuiz.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"calculateDefaultTimeLimit",value:function(e){return"multiple"===e.aType||"boolean"===e.aType?10+Math.floor((e.correctAnswers.join().length+e.wrongAnswers.join().length)/50):"free"===e.aType?20:"player"===e.aType?20:void 0}},{key:"addQuestion",value:function(e){var a=this.state.questions;0===a.length?e.id=1:e.id=Math.max.apply(Math,a.map(function(e){return e.id}))+1,this.state.timelimit&&!e.timelimit&&(e.timelimit=this.calculateDefaultTimeLimit(e)),a.push(e),this.setState({questions:a});this.props.showSnackbar({variant:"success",message:"Added question"})}},{key:"addQuestions",value:function(e){for(var a=this.state.questions,t=0;t<e.length;t++){var n=e[t];0===a.length?n.id=1:n.id=Math.max.apply(Math,a.map(function(e){return e.id}))+1,this.state.timelimit&&!n.timelimit&&(n.timelimit=this.calculateDefaultTimeLimit(n)),a.push(n)}this.setState({questions:a});this.props.showSnackbar({variant:"success",message:"Added questions"})}},{key:"deleteQuestion",value:function(e){var a=this.state.questions,t=a.map(function(e){return e.id}).indexOf(e.id);a.splice(t,1),this.setState({questions:a})}},{key:"createQuiz",value:function(){var e;e={password:this.state.gamePass,gametype:this.state.gametype,tile:this.state.title,quiz:{gamemode:"normal",timelimit:this.state.timelimit,timescore:this.state.timescore,questions:this.state.questions}},this.props.createQuiz(e)}},{key:"validateGame",value:function(e){return!0}},{key:"clearForm",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app-page create-page"},i.a.createElement(we.a,{container:!0,spacing:8},i.a.createElement("form",{autoComplete:"off"},i.a.createElement(we.a,{item:!0,xs:4},i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"Gametype"),i.a.createElement(K.a,{value:this.state.gametype||"",onChange:this.handleChangeSelect,name:"gametype",inputProps:{id:"gametype-required"}},i.a.createElement(A.a,{value:"quiz"},"Quiz"),i.a.createElement(A.a,{value:"survey"},"Survey"),i.a.createElement(A.a,{value:"discussion"},"Discussion"),i.a.createElement(A.a,{value:"minigame"},"Mini game"))),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"Gamemode"),i.a.createElement(K.a,{value:this.state.gamemode||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},i.a.createElement(A.a,{value:"normal"},"Normal"),i.a.createElement(A.a,{value:"wild"},"Wild"))),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(V.a,{component:"legend"},"Game options"),i.a.createElement(qe.a,null,i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.timelimit,onChange:this.handleChangeBool("timelimit"),value:"timelimit"}),label:"Time limited questions"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.timescore,onChange:this.handleChangeBool("timescore"),value:"timescore"}),label:"Time based score"}))),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Title",name:"title",value:this.state.title,margin:"normal",onChange:this.handleChange("title")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Password",type:"password",name:"gamePass",margin:"normal",value:this.state.gamePass,onChange:this.handleChange("gamePass")})),i.a.createElement(w.a,{onClick:this.createQuiz,variant:"contained"},"Create"))),i.a.createElement(we.a,{item:!0,xs:8},i.a.createElement(ae,{addQuestions:this.addQuestions,addQuestion:this.addQuestion,isTimelimit:!!this.state.timelimit,showSnackbar:this.props.showSnackbar})),this.state.questions.map(function(a,t){return i.a.createElement(we.a,{item:!0,xs:6,key:a.id},i.a.createElement(Oe,{question:a,transitionDelay:t,deleteQuestion:e.deleteQuestion}))})))}}]),a}(s.Component),Pe=t(9),ze=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"snake",gamemode:"survival",racetarget:20,opponentCollision:!1,eatOpponents:!1,wallCollision:!0,gameid:"",gamePass:"",difficulty:"300"},t.validateGame=t.validateGame.bind(Object(d.a)(Object(d.a)(t))),t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"createGame",value:function(){var e;e={password:this.state.gamePass,gametype:this.state.gametype,tile:this.state.title,minigame:{gamemode:this.state.gamemode,wallCollision:this.state.wallCollision,eatOpponents:this.state.opponentCollision&&this.state.eatOpponents,opponentCollision:this.state.opponentCollision,racetarget:this.state.racetarget,difficulty:this.state.difficulty}},this.props.createGame(e)}},{key:"validateGame",value:function(e){return!0}},{key:"clearForm",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"app-page create-page"},i.a.createElement(we.a,{container:!0,spacing:8},i.a.createElement("form",{autoComplete:"off"},i.a.createElement(we.a,{item:!0,xs:4},i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"Game mode"),i.a.createElement(K.a,{value:this.state.gamemode||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},i.a.createElement(A.a,{value:"survival"},"Survival"),i.a.createElement(A.a,{value:"race"},"Race"))),"race"===this.props.gamemode&&i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Snake length",name:"racetarget",type:"number",value:this.state.racetarget,margin:"normal",onChange:this.handleChange("racetarget")})),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"difficulty"),i.a.createElement(K.a,{value:this.state.difficulty||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},i.a.createElement(A.a,{value:"500"},"Easy"),i.a.createElement(A.a,{value:"300"},"Medium"),i.a.createElement(A.a,{value:"100"},"Hard"),i.a.createElement(A.a,{value:"75"},"Pro"))),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.wallCollision,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.opponentCollision,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.opponentCollision&&this.state.eatOpponents,disabled:!this.state.opponentCollision,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Title",name:"title",value:this.state.title,margin:"normal",onChange:this.handleChange("title")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Password",type:"password",name:"gamePass",margin:"normal",value:this.state.gamePass,onChange:this.handleChange("gamePass")})),i.a.createElement(w.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(s.Component),Ae=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"tetris",gamemode:"survival",gameid:"",gamePass:""},t.validateGame=t.validateGame.bind(Object(d.a)(Object(d.a)(t))),t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"createGame",value:function(){var e;e={password:this.state.gamePass,gametype:this.state.gametype,tile:this.state.title,minigame:{gamemode:this.state.gamemode}},this.props.createGame(e)}},{key:"validateGame",value:function(e){return!0}},{key:"clearForm",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",{className:"app-page create-page"},i.a.createElement(we.a,{container:!0,spacing:8},i.a.createElement("form",{autoComplete:"off"},i.a.createElement(we.a,{item:!0,xs:4},i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"Game mode"),i.a.createElement(K.a,{value:this.state.gamemode||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},i.a.createElement(A.a,{value:"survival"},"Survival"),i.a.createElement(A.a,{value:"race"},"Race"))),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Title",name:"title",value:this.state.title,margin:"normal",onChange:this.handleChange("title")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Password",type:"password",name:"gamePass",margin:"normal",value:this.state.gamePass,onChange:this.handleChange("gamePass")})),i.a.createElement(w.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(s.Component),Ge=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setGameType=function(e){return function(a){t.setState({gametype:e})}},t.state={gametype:""},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-page create-page"},!this.state.gametype&&i.a.createElement(we.a,{container:!0,spacing:24},i.a.createElement(w.a,{onClick:this.setGameType("snake"),variant:"contained"},"Snake"),i.a.createElement(w.a,{onClick:this.setGameType("tetris"),variant:"contained"},"Tetris")),"skulle kunna ha generallisering h\xe4r i minigame? gemensamma phases som ligger under minigame/play minigame/host och sen kan det finnas en mapp f\xf6r varje game minigame/snake som inneh\xe5ller vissa specifika phases","snake"===this.state.gametype&&i.a.createElement(ze,{createGame:this.props.createGame}),"tetris"===this.state.gametype&&i.a.createElement(Ae,{createGame:this.props.createGame}))}}]),a}(s.Component),Fe=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).setGameType=function(e){return function(a){t.setState({gametype:e})}},t.state={gametype:"",gameId:""},t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t.validateGame=t.validateGame.bind(Object(d.a)(Object(d.a)(t))),t.generateGameId=t.generateGameId.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"createGame",value:function(e){if(e.gameId=this.generateGameId(),e.created=Date.now(),e.status="CREATED",e.phase="setup",this.validateGame(e)){var a=this,t=b.database().ref("/games").push();e.key=t.key,t.set(e,function(t){if(t){a.setState({errorText:"Error: "+t});a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{a.props.showSnackbar({variant:"success",message:"Successfully created!"}),a.setState({gameId:e.gameId,gametype:"done"}),localStorage.setItem("RecentGameId",e.gameId)}})}}},{key:"validateGame",value:function(e){return!0}},{key:"generateGameId",value:function(){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<6;t++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}},{key:"render",value:function(){return i.a.createElement("div",{className:"app-page create-page"},!this.state.gametype&&i.a.createElement(we.a,{container:!0,spacing:24},i.a.createElement(w.a,{onClick:this.setGameType("quiz"),variant:"contained"},"Quiz"),i.a.createElement(w.a,{onClick:this.setGameType("survey"),variant:"contained"},"Survey"),i.a.createElement(w.a,{onClick:this.setGameType("minigame"),variant:"contained"},"Mini game"),i.a.createElement(w.a,{onClick:this.setGameType("discussion"),variant:"contained"},"Discussion")),"quiz"===this.state.gametype&&i.a.createElement(Ne,{createQuiz:this.createGame,showSnackbar:this.props.showSnackbar}),"minigame"===this.state.gametype&&i.a.createElement(Ge,{createGame:this.createGame,showSnackbar:this.props.showSnackbar}),"done"===this.state.gametype&&i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"h2"},"Created game ID:  ",i.a.createElement("span",{className:"dynamic-text"},this.state.gameId)),i.a.createElement(y.a,{to:"/host"},"Host game")))}}]),a}(s.Component),Me=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChangeBool=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.checked))}},t.state={surveyPlayers:!1,answerStreak:!0,nameGenerator:!1,remoteMode:!1,useTeams:!1,randomizeQuestionOrder:!1,autoPlayQuestions:!1},t.startGame=t.startGame.bind(Object(d.a)(Object(d.a)(t))),t.createTeamGame=t.createTeamGame.bind(Object(d.a)(Object(d.a)(t))),t.createClassicGame=t.createClassicGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"createTeamGame",value:function(){this.startGame(!0)}},{key:"createClassicGame",value:function(){this.startGame(!1)}},{key:"startGame",value:function(e){var a={},t=this.props.game.quiz;t.surveyPlayers=this.state.surveyPlayers,t.answerStreak=this.state.answerStreak,t.nameGenerator=this.state.nameGenerator,t.remoteMode=this.state.remoteMode,t.useTeams=e,t.autoPlayQuestions=this.state.autoPlayQuestions,t.randomizeQuestionOrder=this.state.randomizeQuestionOrder,t.currentQuestion=0,a.quiz=t,a.phase="connection",a.status="IN_PROGRESS",this.props.gameFunc.update(a)}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h4"},"Game Settings"),i.a.createElement(w.a,{onClick:this.createClassicGame,variant:"contained"},"Classic"),i.a.createElement(w.a,{onClick:this.createTeamGame,variant:"contained"},"Team mode"),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(qe.a,null,i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.nameGenerator,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.remoteMode,onChange:this.handleChangeBool("remoteMode"),value:"remoteMode"}),label:"Remote playmode"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.answerStreak,onChange:this.handleChangeBool("answerStreak"),value:"answerStreak"}),label:"Use answer scorestreak"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.surveyPlayers,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.randomizeQuestionOrder,onChange:this.handleChangeBool("randomizeQuestionOrder"),value:"randomizeQuestionOrder"}),label:"Randomize question order"}),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.autoPlayQuestions,onChange:this.handleChangeBool("autoPlayQuestions"),value:"autoPlayQuestions"}),label:"Auto play questions"}))))}}]),a}(s.Component),Qe=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game.players;return e=e?Object.values(e):[],i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h2"},"Join game with Game ID:  ",i.a.createElement("span",{className:"dynamic-text"},this.props.game.gameId)),i.a.createElement(Pe.a,{variant:"subtitle1"},this.props.game.title)),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(we.a,{container:!0},e.map(function(e,a){return i.a.createElement(we.a,{key:a,item:!0,xs:3},i.a.createElement(Pe.a,{paragraph:!0,variant:"body1"},e.name))}))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(w.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(s.Component),Te=(t(442),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return"slow"===this.props.speed?i.a.createElement("div",{className:"demo_slow"},i.a.createElement("div",{className:"demo_slow__colored-blocks"},i.a.createElement("div",{className:"demo_slow__colored-blocks-rotater"},i.a.createElement("div",{className:"demo_slow__colored-block"}),i.a.createElement("div",{className:"demo_slow__colored-block"}),i.a.createElement("div",{className:"demo_slow__colored-block"}),i.a.createElement("div",{className:"demo_slow__colored-block"})),i.a.createElement("div",{className:"demo_slow__colored-blocks-inner"}),i.a.createElement("div",{className:"demo_slow__text"},"Ready")),i.a.createElement("div",{className:"demo_slow__inner"},i.a.createElement("svg",{className:"demo_slow__numbers",viewBox:"0 0 100 100"},i.a.createElement("defs",null,i.a.createElement("path",{className:"demo_slow__num-path-1",d:"M40,28 55,22 55,78"}),i.a.createElement("path",{className:"demo_slow__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),i.a.createElement("path",{className:"demo_slow__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),i.a.createElement("path",{className:"demo_slow__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),i.a.createElement("path",{className:"demo_slow__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),i.a.createElement("path",{className:"demo_slow__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19 \r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73 \r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83 \r l0,-61 L40,28"})))):i.a.createElement("div",{className:"demo"},i.a.createElement("div",{className:"demo__colored-blocks"},i.a.createElement("div",{className:"demo__colored-blocks-rotater"},i.a.createElement("div",{className:"demo__colored-block"}),i.a.createElement("div",{className:"demo__colored-block"}),i.a.createElement("div",{className:"demo__colored-block"}),i.a.createElement("div",{className:"demo__colored-block"})),i.a.createElement("div",{className:"demo__colored-blocks-inner"}),i.a.createElement("div",{className:"demo__text"},"Ready")),i.a.createElement("div",{className:"demo__inner"},i.a.createElement("svg",{className:"demo__numbers",viewBox:"0 0 100 100"},i.a.createElement("defs",null,i.a.createElement("path",{className:"demo__num-path-1",d:"M40,28 55,22 55,78"}),i.a.createElement("path",{className:"demo__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),i.a.createElement("path",{className:"demo__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),i.a.createElement("path",{className:"demo__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),i.a.createElement("path",{className:"demo__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),i.a.createElement("path",{className:"demo__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19 \r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73 \r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83 \r l0,-61 L40,28"}))))}}]),a}(s.Component)),_e=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"awaiting_question"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h2"},"Starting quiz"),i.a.createElement(Te,{speed:"slow"}))}}]),a}(s.Component),De=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"show_question"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h2"},"Loading next question"),i.a.createElement(Te,{speed:"slow"}))}}]),a}(s.Component),Ie=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={question:""},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e});var a=3e3+20*e.question.length;setTimeout(this.nextPhase,a)}},{key:"nextPhase",value:function(){var e=[];if("multiple"===this.state.question.aType?(e=this.state.question.wrongAnswers.concat(this.state.question.correctAnswers),e=this.shuffle(e)):"boolean"===this.state.question.aType&&(e=["True","False"]),e.length){var a={phase:"answer"};a.quiz=this.props.game.quiz,a.quiz.questions[a.quiz.currentQuestion].answers=e,this.props.gameFunc.update(a)}else this.props.gameFunc.update({phase:"answer"})}},{key:"shuffle",value:function(e){for(var a=e.length;a>0;){var t=Math.floor(Math.random()*a),n=e[--a];e[a]=e[t],e[t]=n}return e}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h2"},this.state.question.question)),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),Ke=t(43),Le=t.n(Ke),Re=t(127),Be=t.n(Re),He=t(129),We=t.n(He),Je=t(128),Ue=t.n(Je),Ve=t(130),Ye=t.n(Ve),Ze=[{icon:i.a.createElement(Be.a,null),color:"#80DEEA"},{icon:i.a.createElement(Ue.a,null),color:"#EF9A9A"},{icon:i.a.createElement(We.a,null),color:"#CE93D8"},{icon:i.a.createElement(Ye.a,null),color:"#C5E1A5"}],Xe=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=Ze[this.props.index],t=this.props.classes;return i.a.createElement("div",{className:"full-height"},this.props.answerQuestion&&i.a.createElement(Le.a,{onClick:function(){e.props.answerQuestion(e.props.answer)},className:t.playAnswer,style:{backgroundColor:a.color}},i.a.createElement("div",{className:"button-answer-icon"},a.icon),this.props.remoteMode&&i.a.createElement("div",{className:t.answer},this.props.answer)),!this.props.answerQuestion&&i.a.createElement(Le.a,{className:t.paper,style:{backgroundColor:a.color}},i.a.createElement("div",{className:t.icon},a.icon),i.a.createElement("div",{className:t.answer},this.props.answer)))}}]),a}(s.Component),$e=Object(te.withStyles)(function(e){return{root:{flexGrow:1},paper:{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},playAnswer:{width:"50vw",height:"100%",textAlign:"center",color:e.palette.text.secondary},icon:{float:"left",fontSize:"28",color:"white",marginLeft:"10px"},answer:{fontSize:"24",color:"white"}}})(Xe),ea=t(120),aa=t.n(ea),ta=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes,a=null===this.props.value?this.props.startValue:this.props.value,t=this.props.startValue;t<1&&(t=1),a<0&&(a=0);var n=a/t;return i.a.createElement("div",{className:e.container},i.a.createElement(Pe.a,{variant:"caption",className:e.text},this.props.text),i.a.createElement(aa.a,{className:e.circle,classes:{colorSecondary:e.circle},variant:"static",value:100*n,thickness:4,size:300}))}}]),a}(s.Component),na=Object(te.withStyles)(function(e){return{text:{marginBottom:"-200px",fontSize:"86px",paddingTop:"160px"},circle:{color:"#6JpDK4"}}})(ta),ra=t(121),sa=t.n(ra),ia=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"h5"},"Answers collected"),i.a.createElement(sa.a,{className:e.bar,variant:"determinate",value:this.props.value}))}}]),a}(s.Component),oa=Object(te.withStyles)(function(e){return{bar:{color:"#32386D"}}})(ia),la=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={counter:null,timelimit:0,started:!1,isTimelimited:!0,question:{question:"",answers:[]}},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];if(this.setState({question:a,isTimelimited:this.props.game.quiz.timelimit,timelimit:10*a.timelimit}),this.props.game.quiz.timelimit)var t=this.props.game.players?Object.keys(this.props.game.players):[],n=10*a.timelimit,r=setInterval(function(){for(var s=0,i=0;i<t.length;i++)e.props.game.players[t[i]].answers&&e.props.game.players[t[i]].answers[a.id]&&s++;n--,e.setState({counter:n,started:!0}),(n<=-5||s===t.length)&&(e.nextPhase(),clearInterval(r))},100)}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"result_question"})}},{key:"render",value:function(){var e=[];this.props.game&&(e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers);for(var a=0,t=this.props.game.players?Object.keys(this.props.game.players):[],n=0;n<t.length;n++)this.props.game.players[t[n]].answers&&this.props.game.players[t[n]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]&&a++;var r=a/t.length*100;return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h2"},this.state.question.question)),i.a.createElement("div",{className:"quiz-middle-section"},!this.state.isTimelimited&&i.a.createElement(w.a,{onClick:this.nextPhase},"Next"),this.state.isTimelimited&&i.a.createElement(na,{startValue:this.state.timelimit,value:this.state.counter,text:Math.ceil(this.state.counter/10)}),i.a.createElement("div",{className:"quiz-answercounter-container"},i.a.createElement(oa,{value:r}))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(we.a,{container:!0,spacing:8},e.map(function(e,a){return i.a.createElement(we.a,{key:a,item:!0,xs:6},i.a.createElement($e,{answer:e,index:a}))}))))}}]),a}(s.Component),ca=t(131),ma=["#80DEEA","#EF9A9A","#CE93D8","#C5E1A5"],ua=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(d.a)(Object(d.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(d.a)(Object(d.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"getChartData",value:function(){for(var e={labels:[],datasets:[{data:[],label:"podium",backgroundColor:[],borderWidth:1}]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=[],n=0;n<a.length;n++){var r={},s=this.props.game.players[a[n]],i=0;if(s.answers){for(var o=0;o<Object.keys(s.answers).length;o++){var l=this.props.game.quiz.questions[o],c=s.answers[l.id];c&&(i+=c.score)}r.score=i,r.name=s.name,t.push(r)}}t.sort(function(e,a){return a.score-e.score});for(var m=t.length>20?20:t.length,u=0;u<m;u++)e.labels.push(t[u].name),e.datasets[0].data.push(t[u].score),e.datasets[0].backgroundColor.push(ma[u%4]);return e}},{key:"getChartHeight",value:function(){var e=70+30*this.getChartData().labels.length;return e>740&&(e=740),e}},{key:"getChartOptions",value:function(){var e=(740-this.getChartHeight())/2;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(e){e.animationObject.onAnimationProgress=function(){var a=this.chart.ctx,t=this.chart;a.textAlign="center",a.textBaseline="bottom",a.font="20px Roboto";var n=e.animationObject.currentStep/e.animationObject.numSteps,r=t.getDatasetMeta(0);r.hidden||r.data.forEach(function(e,r){var s=Math.floor(t.data.datasets[0].data[r]*n).toString();a.fillStyle=ma[r%4];var i=e.tooltipPosition();a.fillText(s,i.x+2+6*s.length,i.y+e._model.height/2)})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!0,beginAtZero:!0}],xAxes:[{display:!0,beginAtZero:!0}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:60,top:e,bottom:e}}}}},{key:"getWinnerString",value:function(){return"Congratulations [name of player]! "}},{key:"render",value:function(){return i.a.createElement("div",{style:{maxHeight:740}},i.a.createElement(ca.b,{data:this.getChartData,height:740,options:this.getChartOptions()}),i.a.createElement(Pe.a,{variant:"subtitle1"},this.getWinnerString()))}}]),a}(s.Component),ha=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h2"},"Final score"),i.a.createElement(ua,{game:this.props.game})),i.a.createElement("div",{className:"align-bottom "},i.a.createElement("div",null,i.a.createElement(w.a,{onClick:this.props.gameFunc.restart},"Replay quiz"),i.a.createElement(w.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),i.a.createElement(w.a,{onClick:function(){return alert("show results")}},"Show results"),i.a.createElement(w.a,{onClick:function(){return alert("start survey")}},"Start survey"),i.a.createElement(w.a,null,i.a.createElement(y.a,{to:"/create"},"Host game")))))}}]),a}(s.Component),pa=t(61),da=[{icon:i.a.createElement(Be.a,null),color:"#80DEEA"},{icon:i.a.createElement(Ue.a,null),color:"#EF9A9A"},{icon:i.a.createElement(We.a,null),color:"#CE93D8"},{icon:i.a.createElement(Ye.a,null),color:"#C5E1A5"}],ga=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(d.a)(Object(d.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(d.a)(Object(d.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(d.a)(Object(d.a)(t))),t.getAnswerData=t.getAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"getAnswerData",value:function(){for(var e={data:[],topPlayer:{score:0,playerKey:""},correctAnswers:[]},a=[],t=this.props.game.players?Object.keys(this.props.game.players):[],n=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],r=0;r<t.length;r++){var s=this.props.game.players[t[r]];if(s.answers){var i=s.answers[n.id];i&&(a.push(i.answer),i.score>e.topPlayer.score&&(e.topPlayer.score=i.score,e.topPlayer.playerKey=s.key))}}for(var o=0;o<n.answers.length;o++){for(var l=0,c=0;c<a.length;c++)n.answers.indexOf(a[c])===o&&l++;e.data.push(l),n.correctAnswers.indexOf(n.answers[o])>-1&&e.correctAnswers.push(o)}return e}},{key:"getChartData",value:function(){var e={labels:[],datasets:[{data:[],label:"asdf",backgroundColor:[],borderWidth:1}]},a=this.getAnswerData();e.datasets[0].borderColor=[],e.datasets[0].data=a.data;for(var t=0;t<a.data.length;t++)e.labels.push(""),e.datasets[0].backgroundColor.push(da[t].color);return e}},{key:"getChartHeight",value:function(){var e=this.getAnswerData(),a=65+25*Math.max.apply(Math,Object(pa.a)(e.data));return a>300?300:a}},{key:"getChartOptions",value:function(){var e=this;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(a){var t=e.getAnswerData();a.animationObject.onAnimationProgress=function(){var e=this.chart.ctx,n=this.chart;e.textAlign="center",e.fillStyle="black",e.textBaseline="bottom",e.font="24px Roboto";var r=a.animationObject.currentStep/a.animationObject.numSteps,s=n.getDatasetMeta(0);s.hidden||s.data.forEach(function(a,s){var i=Math.floor(n.data.datasets[0].data[s]*r),o=a.tooltipPosition();if(e.fillStyle=da[s].color,e.fillText(i,o.x,o.y-2),e.beginPath(),e.rect(o.x-a._view.width/2,n.height-32,a._view.width,22),e.fill(),t.correctAnswers.indexOf(s)>-1){var l=new Image;l.src="/stagehoot/baseline-done_outline-24px.svg",l.height=100,l.width=100;var c=n.height-34;e.drawImage(l,o.x-12,c)}})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!1,beginAtZero:!0}],xAxes:[{display:!1}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:0,top:25,bottom:40}}}}},{key:"render",value:function(){return i.a.createElement(ca.a,{data:this.getChartData,height:this.getChartHeight(),options:this.getChartOptions()})}}]),a}(s.Component),va=t(123),ba=t.n(va),ya=t(59),fa=t.n(ya),Ea=t(124),ka=t.n(Ea),Oa=t(122),ja=t.n(Oa),wa=t(125),Ca=t.n(wa),qa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChangePage=function(e,a){t.setState({page:a})},t.handleChangeRowsPerPage=function(e){t.setState({rowsPerPage:e.target.value})},t.state={leaderboardData:t.getLeaderboardData(),page:0,rowsPerPage:10},t.startScoreCounter=t.startScoreCounter.bind(Object(d.a)(Object(d.a)(t))),t.getScoreCellWidth=t.getScoreCellWidth.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){setTimeout(this.startScoreCounter,2e3)}},{key:"startScoreCounter",value:function(){var e=this,a=setInterval(function(){for(var t=e.state.leaderboardData,n=!0,r=0;r<t.players.length;r++){var s=t.players[r];s.currentQuestionScore>0&&(n=!1,s.currentQuestionScore--,s.totalScore++)}t.players.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.setState({leaderboard:t}),n&&clearInterval(a)},10)}},{key:"getLeaderboardData",value:function(){for(var e={players:[]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],n=[],r=0;r<a.length;r++){var s={},i=this.props.game.players[a[r]],o=0;if(i.answers)for(var l=0;l<Object.keys(i.answers).length;l++){var c=this.props.game.quiz.questions[l],m=i.answers[c.id];m&&(m.questionId===t.id?(s.currentQuestionScore=m.score,s.lastScore=m.score):o+=m.score)}s.totalScore=o,s.name=i.name,s.key=i.key,n.push(s)}return n.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.players=n,e}},{key:"getLeaderboardScore",value:function(e){return 0===e.currentQuestionScore?e.totalScore+" (+"+e.lastScore+")":e.totalScore+"           "}},{key:"getScoreCellWidth",value:function(){for(var e=0,a=this.getLeaderboardData(),t=0;t<a.players.length;t++){var n=a.players[t],r=n.totalScore+" (+"+n.lastScore+")";r.length>e&&(e=r.length)}return 6*e+65}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.leaderboardData,r=t.rowsPerPage,s=t.page;return i.a.createElement("div",{className:a.root},i.a.createElement(ja.a,{className:a.table},i.a.createElement(ba.a,null,n.players.slice(s*r,s*r+r).map(function(a,t){return i.a.createElement(ka.a,{key:a.key},i.a.createElement(fa.a,{padding:"dense"},t+1),i.a.createElement(fa.a,null,a.name),i.a.createElement(fa.a,{style:{width:e.getScoreCellWidth()}},e.getLeaderboardScore(a)))}))),n.players.length>10&&i.a.createElement(Ca.a,{component:"div",count:n.players.length,rowsPerPage:r,page:s,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),a}(s.Component),Sa=Object(te.withStyles)(function(e){return{root:{width:"100%"},table:{maxWidth:700,whiteSpace:"nowrap"}}})(qa),xa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t.nextQuestion=t.nextQuestion.bind(Object(d.a)(Object(d.a)(t))),t.finalizeQuiz=t.finalizeQuiz.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"nextQuestion",value:function(){var e={};e.quiz=this.props.game.quiz,e.quiz.currentQuestion=e.quiz.currentQuestion+1,e.phase="awaiting_question",this.props.gameFunc.update(e)}},{key:"finalizeQuiz",value:function(){this.props.gameFunc.update({phase:"final_result"})}},{key:"render",value:function(){var e=[],a="";this.props.game&&(e=(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion]).answers);var t="undefined"===typeof this.props.game.quiz.questions[this.props.game.quiz.currentQuestion+1];return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},a.question)),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(we.a,{container:!0},i.a.createElement(we.a,{item:!0,md:6,xs:12},i.a.createElement("div",{className:"quiz-answer-chart"},i.a.createElement(ga,{game:this.props.game}))),i.a.createElement(we.a,{item:!0,md:6,xs:12},i.a.createElement("div",null,i.a.createElement(Sa,{game:this.props.game}))),i.a.createElement(we.a,{item:!0,xs:12},i.a.createElement("div",null,t&&i.a.createElement(w.a,{onClick:this.finalizeQuiz},"Finalize result"),!t&&i.a.createElement(w.a,{onClick:this.nextQuestion},"Next question"),i.a.createElement(w.a,{onClick:this.props.gameFunc.restart},"Restart quiz"),i.a.createElement(w.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),i.a.createElement(w.a,{onClick:this.props.gameFunc.end},"End quiz"))))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(we.a,{className:"align-bottom",container:!0},e.map(function(e,a){return i.a.createElement(we.a,{key:a,item:!0,xs:6},i.a.createElement($e,{answer:e,index:a}))}))))}}]),a}(s.Component),Na=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},"HostEnd toggleHeader()")}}]),a}(s.Component),Pa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"host-container"},"setup"===this.props.game.phase&&i.a.createElement(Me,{game:this.props.game,gameFunc:this.props.gameFunc}),"connection"===this.props.game.phase&&i.a.createElement(Qe,{game:this.props.game,gameFunc:this.props.gameFunc}),"starting"===this.props.game.phase&&i.a.createElement(_e,{game:this.props.game,gameFunc:this.props.gameFunc}),"awaiting_question"===this.props.game.phase&&i.a.createElement(De,{game:this.props.game,gameFunc:this.props.gameFunc}),"show_question"===this.props.game.phase&&i.a.createElement(Ie,{game:this.props.game,gameFunc:this.props.gameFunc}),"answer"===this.props.game.phase&&i.a.createElement(la,{game:this.props.game,gameFunc:this.props.gameFunc}),"result_question"===this.props.game.phase&&i.a.createElement(xa,{game:this.props.game,gameFunc:this.props.gameFunc}),"final_result"===this.props.game.phase&&i.a.createElement(ha,{game:this.props.game,gameFunc:this.props.gameFunc}),"end"===this.props.game.phase&&i.a.createElement(Na,{game:this.props.game,gameFunc:this.props.gameFunc}))}}]),a}(s.Component),za=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(M.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a={},n=t.props.game.minigame;n.surveyPlayers=t.state.surveyPlayers,n.nameGenerator=t.state.nameGenerator,n.multiplayerMode=e,n.wallCollision=t.state.wallCollision,n.opponentCollision=t.state.opponentCollision,n.eatOpponents=t.state.opponentCollision&&t.state.eatOpponents,n.racetarget=t.state.racetarget,n.difficulty=t.state.difficulty,n.gamemode=t.state.gamemode,a.minigame=n,a.phase="connection",a.status="IN_PROGRESS",t.props.gameFunc.update(a)},t.state={surveyPlayers:!1,nameGenerator:!1,gamemode:t.props.game.minigame.gamemode,racetarget:t.props.game.minigame.racetarget,opponentCollision:t.props.game.minigame.opponentCollision,eatOpponents:t.props.game.minigame.eatOpponents,wallCollision:t.props.game.minigame.wallCollision,difficulty:t.props.game.minigame.difficulty},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h4"},"Game Settings"),i.a.createElement(w.a,{onClick:function(){return e.startGame("classic")},variant:"contained"},"Classic"),i.a.createElement(w.a,{onClick:function(){return e.startGame("coop")},variant:"contained"},"Co-op multiplayer"),i.a.createElement(w.a,{onClick:function(){return e.startGame("team")},variant:"contained"},"Team multiplayer"),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(qe.a,null,i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.nameGenerator,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"Game mode"),i.a.createElement(K.a,{value:this.state.gamemode||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},i.a.createElement(A.a,{value:"survival"},"Survival"),i.a.createElement(A.a,{value:"race"},"Race"))),"race"===this.props.gamemode&&i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Snake length",name:"racetarget",type:"number",value:this.state.racetarget,margin:"normal",onChange:this.handleChange("racetarget")})),i.a.createElement(D.a,{required:!0},i.a.createElement(T.a,{htmlFor:"gametype-required"},"difficulty"),i.a.createElement(K.a,{value:this.state.difficulty||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},i.a.createElement(A.a,{value:"500"},"Easy"),i.a.createElement(A.a,{value:"300"},"Medium"),i.a.createElement(A.a,{value:"100"},"Hard"),i.a.createElement(A.a,{value:"75"},"Pro"))),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.wallCollision,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.opponentCollision,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),i.a.createElement(D.a,{component:"fieldset"},i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.opponentCollision&&this.state.eatOpponents,disabled:!this.state.opponentCollision,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"})),i.a.createElement(Z.a,{control:i.a.createElement(xe.a,{checked:this.state.surveyPlayers,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}))))}}]),a}(s.Component),Aa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game.players;return e=e?Object.values(e):[],i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h2"},"Join game with Game ID:  ",i.a.createElement("span",{className:"dynamic-text"},this.props.game.gameId)),i.a.createElement(Pe.a,{variant:"subtitle1"},this.props.game.title)),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(we.a,{container:!0},e.map(function(e,a){return i.a.createElement(we.a,{key:a,item:!0,xs:3},i.a.createElement(Pe.a,{paragraph:!0,variant:"body1"},e.name))}))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(w.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(s.Component),Ga=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"gameplay"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h2"},"Starting game"),i.a.createElement(Te,{speed:"slow"}))}}]),a}(s.Component),Fa=function(e){function a(e){var t;Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={gameTicker:null,ticks:0,winners:[],paused:!0,overlay:!1,settings:{snake:{size:20,speed:t.props.game.minigame.difficulty,border:"#000",respawntime:3},food:{background:"#EC5E0B",border:"#73AA24"},canvas:{background:"#F5F5F5",border:"#000"}}},t.state.settings.canvas.height=Math.round(window.innerHeight/t.state.settings.snake.size)*t.state.settings.snake.size,t.state.settings.canvas.width=Math.round(window.innerWidth/t.state.settings.snake.size)*t.state.settings.snake.size,t.state.snakes=t.getSnakesInStartingPosition(t.props.game.minigame.snakes,t.state.settings);for(var n=[],r=0;r<3*t.props.game.minigame.snakes.length;r++){var s={index:r,active:!1};n.push(s)}return t.state.foods=n,t.drawSnakes=t.drawSnakes.bind(Object(d.a)(Object(d.a)(t))),t.generateFood=t.generateFood.bind(Object(d.a)(Object(d.a)(t))),t.generateSnakes=t.generateSnakes.bind(Object(d.a)(Object(d.a)(t))),t.resetCanvas=t.resetCanvas.bind(Object(d.a)(Object(d.a)(t))),t.drawFood=t.drawFood.bind(Object(d.a)(Object(d.a)(t))),t.detectCollisions=t.detectCollisions.bind(Object(d.a)(Object(d.a)(t))),t.initControllerListener=t.initControllerListener.bind(Object(d.a)(Object(d.a)(t))),t.generateFoods=t.generateFoods.bind(Object(d.a)(Object(d.a)(t))),t.isEndGame=t.isEndGame.bind(Object(d.a)(Object(d.a)(t))),t.detectOpponentCollision=t.detectOpponentCollision.bind(Object(d.a)(Object(d.a)(t))),t.detectSelfCollision=t.detectSelfCollision.bind(Object(d.a)(Object(d.a)(t))),t.detectWallCollision=t.detectWallCollision.bind(Object(d.a)(Object(d.a)(t))),t.togglePausGame=t.togglePausGame.bind(Object(d.a)(Object(d.a)(t))),t.renderOverlay=t.renderOverlay.bind(Object(d.a)(Object(d.a)(t))),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"getSnakesInStartingPosition",value:function(e,a){for(var t=0;t<e.length;t++){var n=e[t];n.direction=n.actions[t%4];var r=void 0;switch(n.direction){case"right":r=this.getRandomStartingPosLeft(e,a),n.body=[{x:r.x,y:r.y},{x:r.x-a.snake.size,y:r.y},{x:r.x-2*a.snake.size,y:r.y},{x:r.x-3*a.snake.size,y:r.y}];break;case"left":r=this.getRandomStartingPosRight(e,a),n.body=[{x:r.x,y:r.y},{x:r.x+a.snake.size,y:r.y},{x:r.x+2*a.snake.size,y:r.y},{x:r.x+3*a.snake.size,y:r.y}];break;case"up":r=this.getRandomStartingPosBottom(e,a),n.body=[{x:r.x,y:r.y},{x:r.x,y:r.y+a.snake.size},{x:r.x,y:r.y+2*a.snake.size},{x:r.x,y:r.y+3*a.snake.size}];break;case"down":r=this.getRandomStartingPosTop(e,a),n.body=[{x:r.x,y:r.y},{x:r.x,y:r.y-a.snake.size},{x:r.x,y:r.y-2*a.snake.size},{x:r.x,y:r.y-3*a.snake.size}]}}return e}},{key:"getRandomStartingPosTop",value:function(e,a){for(var t=[],n=0;n<e.length;n++){var r=e[n];"down"===r.direction&&r.body&&t.push(r.body[0].x)}var s=a.snake.size,i=8*s,o=a.canvas.width-2*i,l=2*s;return{x:this.getRandomStartingPos(o,i,t,s),y:l}}},{key:"getRandomStartingPosBottom",value:function(e,a){for(var t=[],n=0;n<e.length;n++){var r=e[n];"up"===r.direction&&r.body&&t.push(r.body[0].x)}var s=a.snake.size,i=8*s,o=a.canvas.width-2*i,l=a.canvas.height-3*s;return{x:this.getRandomStartingPos(o,i,t,s),y:l}}},{key:"getRandomStartingPosRight",value:function(e,a){for(var t=[],n=0;n<e.length;n++){var r=e[n];"left"===r.direction&&r.body&&t.push(r.body[0].y)}var s=a.snake.size,i=8*s,o=a.canvas.height-2*i;return{x:a.canvas.width-3*s,y:this.getRandomStartingPos(o,i,t,s)}}},{key:"getRandomStartingPosLeft",value:function(e,a){for(var t=[],n=0;n<e.length;n++){var r=e[n];"right"===r.direction&&r.body&&t.push(r.body[0].y)}var s=a.snake.size,i=8*s,o=a.canvas.height-2*i;return{x:2*s,y:this.getRandomStartingPos(o,i,t,s)}}},{key:"getRandomStartingPos",value:function(e,a,t,n){var r=Math.round(Math.random()*e/n)*n+a;return t.indexOf(r)>-1||t.indexOf(r+n)>-1||t.indexOf(r-n)>-1?this.getRandomStartingPos(e,a,t,n):r}},{key:"componentDidMount",value:function(){var e=document.querySelector("#snakeboard");r=e.querySelector("canvas"),n=r.getContext("2d"),this.generateSnakes();var a=this,t=setInterval(function(){if(a.state.paused){if(a.state.overlay)return;a.renderOverlay()}else!a.state.winners.length>0?(a.generateSnakes(),a.detectCollisions(),a.isEndGame()):a.nextPhase()},a.state.settings.snake.speed);this.setState({gameTicker:t});for(var s=0;s<this.state.snakes.length;s++){var i=this.state.snakes[s];this.initControllerListener(i)}}},{key:"initControllerListener",value:function(e){var a=b.database().ref("/games/"+this.props.game.key+"/minigame/snakes/"+e.id),t=this;a.on("value",function(e){var a=e.val();a&&!t.state.paused?t.setState(function(e,t){var n=Object(pa.a)(e.snakes);return a.move&&(n[a.id].direction=a.move),{snakes:n}}):console.log("move error")})}},{key:"renderOverlay",value:function(){this.setState(function(e,a){return{overlay:!0}}),n.globalAlpha=.4,n.textAlign="center",n.font="100px roboto",n.fillStyle="#000000",1===this.state.ticks?n.fillText("Click to start",r.width/2,r.height/2):this.state.winners.length>0?n.fillText("Game over",r.width/2,r.height/2):n.fillText("Paused",r.width/2,r.height/2),n.globalAlpha=1,n.font="20px roboto";for(var e=this.state.snakes,a=this.state.settings.snake.size,t=0;t<e.length;t++){var s=e[t];if(s.body[0]){var i=Math.max(a,s.body[0].x),o=Math.max(a,s.body[0].y);i>=r.width&&(i=r.width-2*a),o>=r.height&&(o=r.height-2*a);var l=1===s.playerKeys.length?this.props.game.players[s.playerKeys[0]].name:s.name;switch(n.fillStyle=s.color,s.direction){case"right":n.textAlign="center",n.fillText(l,i,o-a/5);break;case"left":case"up":n.textAlign="start",n.fillText(l,i,o-a/5);break;case"down":n.textAlign="start",n.fillText(l,i,o+2*a)}}}}},{key:"isEndGame",value:function(){var e=[],a=Object(pa.a)(this.state.snakes);if("survival"===this.props.game.minigame.gamemode)if(1===a.length&&a[0].dead)e.push(a[0]);else{for(var t=0;t<a.length;t++)if(a[t].dead||e.push(a[t]),e.length>1)return;if(0===e.length){for(var n=0,r=0,s=0;s<a.length;s++)a[s].score>r&&(n=s,r=a[s].score);e.push(a[n])}}else if("race"===this.props.game.minigame.gamemode)for(var i=0;i<a.length;i++)a[i].body.length>=this.props.game.minigame.racetarget&&e.push(a[i]);e.length>0&&this.setState(function(a,t){return{winners:e,paused:!0,overlay:!1}})}},{key:"shouldComponentUpdate",value:function(e,a){return!1}},{key:"resetCanvas",value:function(){r.width=this.state.settings.canvas.width,r.height=this.state.settings.canvas.height,n.fillStyle=this.state.settings.canvas.background,n.fillRect(0,0,r.width,r.height)}},{key:"getRandomCanvasPositionMargin",value:function(e,a,t){return{x:Math.round(Math.random()*(t-14*e)/e)*e+4*e,y:Math.round(Math.random()*(a-2*e)/e)*e+2*e}}},{key:"generateSnakes",value:function(){for(var e=[],a=Object(pa.a)(this.state.foods),t=this.state.settings.snake.size,n=0;n<this.state.snakes.length;n++){var s=this.state.snakes[n];if(s.respawning)Date.now()>s.respawntime&&(s.dead=!1,s.respawning=!1),e.push(s);else{if(s.dead){if("survival"===this.props.game.minigame.gamemode){s.body=[],e.push(s);continue}if("race"===this.props.game.minigame.gamemode){var i=this.state.settings.canvas.width-t,o=this.state.settings.canvas.height-t,l=this.getRandomCanvasPositionMargin(t,o,i);s.body=[{x:l.x,y:l.y},{x:l.x-t,y:l.y},{x:l.x-2*t,y:l.y},{x:l.x-3*t,y:l.y}],s.direction="right",s.respawning=!0,s.respawntime=Date.now()+1e3*this.state.settings.snake.respawntime,e.push(s);continue}}var c=s.body,m=void 0,u=!this.props.game.minigame.wallCollision;switch(s.direction){case"right":m={x:u&&c[0].x>=r.width-t?0:c[0].x+t,y:c[0].y};break;case"up":m={x:c[0].x,y:u&&0===c[0].y?r.height-t:c[0].y-t};break;case"left":m={x:u&&0===c[0].x?r.width-t:c[0].x-t,y:c[0].y};break;case"down":m={x:c[0].x,y:u&&c[0].y>=r.height-t?0:c[0].y+t}}c.unshift(m),this.resetCanvas();for(var h=void 0,p=0;p<a.length;p++){var d=a[p];if(c[0].x===d.x&&c[0].y===d.y){h=!0,d.active=!1;break}}h?s.score+=10:c.pop(),e.push(s)}}this.setState(function(t,n){var r=t.ticks;return{snakes:e,foods:a,ticks:r+1}}),this.generateFoods(),this.drawSnakes()}},{key:"drawSnakes",value:function(){var e=this.state.settings.snake.size;n.globalCompositeOperation="multiply",n.strokestyle=this.state.settings.snake.border;for(var a=0;a<this.state.snakes.length;a++){var t=this.state.snakes[a];t.respawning&&this.state.ticks%2===0?n.fillStyle=this.state.settings.canvas.background:n.fillStyle=t.color,t.body.forEach(function(a){n.fillRect(a.x,a.y,e,e),n.strokeRect(a.x,a.y,e,e)})}}},{key:"generateFoods",value:function(){for(var e=Object(pa.a)(this.state.foods),a=0;a<e.length;a++){var t=e[a];this.generateFood(t)}this.setState(function(a,t){return{foods:e}})}},{key:"generateFood",value:function(e){var a=this;if(e.active)this.drawFood(e);else{var t=this.state.settings.snake.size,n=this.state.settings.canvas.width-t,r=this.state.settings.canvas.height-t;e.x=Math.round(Math.random()*n/t)*t,e.y=Math.round(Math.random()*r/t)*t;for(var s=0;s<this.state.snakes.length;s++){this.state.snakes[s].body.forEach(function(t){t.x===e.x&&t.y===e.y?a.generateFood(e):a.drawFood(e)})}}}},{key:"togglePausGame",value:function(){this.setState({paused:!this.state.paused,overlay:!1})}},{key:"drawFood",value:function(e){var a=this.state.settings.snake.size;n.fillStyle=this.state.settings.food.background,n.strokestyle=this.state.settings.food.border,n.fillRect(e.x,e.y,a,a),n.strokeRect(e.x,e.y,a,a),e.active=!0}},{key:"detectCollisions",value:function(){for(var e=this.state.snakes,a=0;a<e.length;a++)e[a].dead||(this.detectSelfCollision(e[a])&&(e[a].dead=!0),this.props.game.minigame.wallCollision&&this.detectWallCollision(e[a])&&(e[a].dead=!0));this.props.game.minigame.opponentCollision&&(e=this.detectOpponentCollision(e)),this.setState(function(a,t){return{snakes:e}})}},{key:"detectOpponentCollision",value:function(e){for(var a=0;a<e.length;a++)if(!e[a].dead)for(var t=e[a],n=0;n<e.length;n++)if(n!==a&&!e[n].dead)for(var r=e[n],s=0;s<r.body.length;s++){r.body[s].x===t.body[0].x&&r.body[s].y===t.body[0].y&&(0===s?(t.dead=!0,r.dead=!0):this.props.game.minigame.eatOpponents?1===s?r.dead=!0:r.body.length=s:t.dead=!0)}return e}},{key:"detectSelfCollision",value:function(e){for(var a=e.body,t=4;t<a.length;t++){if(a[t].x===a[0].x&&a[t].y===a[0].y)return!0}return!1}},{key:"detectWallCollision",value:function(e){var a=e.body,t=this.state.settings.snake.size,n=a[0].x<0,s=a[0].y<0,i=a[0].x>r.width-t,o=a[0].y>r.height-t;return n||s||i||o}},{key:"nextPhase",value:function(){clearInterval(this.state.gameTicker);var e=this.props.game;e.minigame.snakes=this.state.snakes,e.minigame.winners=this.state.winners,e.minigame.ticks=this.state.ticks,e.phase="final_result",this.props.gameFunc.update(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"phase-container",id:"snakeboard",onClick:function(){return e.togglePausGame()}},i.a.createElement("canvas",null))}}]),a}(s.Component),Ma=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},"tetris.js")}}]),a}(s.Component),Qa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t.replayGame=t.replayGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"replayGame",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h2"},"Final score"),'skriv ut vinnaren och hur l\xe5ng tid gamet tog (anv\xe4nd minigame.ticks och minigame.difficulty f\xf6r att r\xe4kna ut sekunder) minigame.winners inner h\xe5ller vinnare/vinnarna. kan vara s\xe5 att winners inte finns om det snakes.length === 1 men d\xe5 \xe4r ju den "vinnaren". typ i coop singelplayer podium'),i.a.createElement("div",{className:"align-bottom "},i.a.createElement("div",null,i.a.createElement(w.a,{onClick:this.replayGame},"Replay game"),i.a.createElement(w.a,{onClick:this.props.gameFunc.restart},"Re-host game"),i.a.createElement(w.a,{onClick:this.props.gameFunc.quit},"Quit game"),i.a.createElement(w.a,{onClick:function(){return alert("show results")}},"Show results"),i.a.createElement(w.a,{onClick:function(){return alert("start survey")}},"Start survey"),i.a.createElement(w.a,null,i.a.createElement(y.a,{to:"/create"},"Create new game")))))}}]),a}(s.Component),Ta=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},"HostEnd toggleHeader()")}}]),a}(s.Component),_a=["#F44336","#9C27B0","#2196F3","#4CAF50","#FFEB3B","#FF9800","#607D8B","#795548","#E91E63","#3F51B5","#673AB7","#00BCD4","#03A9F4","#8BC34A","#CDDC39","#009688","#FFC107","#FF5722"],Da=["Stan","Jane","Sara","Dan","Lisa","Joe","Rose","Ray","Lyra","Sam","Lucy","Ben","Noa","Mark","Eve","Ned","Ann","Todd"],Ia=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={counter:t.startCounter(),snakesize:20},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t.createSnakes=t.createSnakes.bind(Object(d.a)(Object(d.a)(t))),t.createCoopSnakes=t.createCoopSnakes.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"createSnakes",value:function(){for(var e=Object.keys(this.props.game.players),a=[],t=0;t<e.length;t++){var n={playerKeys:[this.props.game.players[e[t]].key],actions:["up","down","right","left"],score:0,color:_a[t%_a.length],name:Da[t%Da.length],id:t};a.push(n)}return a}},{key:"createTeamSnakes",value:function(){for(var e=Object.keys(this.props.game.players),a=[],t=0;t<e.length;t++){var n={playerKeys:[this.props.game.players[e[t]].key],direction:"right",id:t,score:0,body:[{x:300,y:100},{x:300-this.state.snakesize,y:100},{x:300-2*this.state.snakesize,y:100},{x:300-3*this.state.snakesize,y:100}]};a.push(n)}return a}},{key:"createCoopSnakes",value:function(){var e=[],a={playerKeys:Object.keys(this.props.game.players),direction:"right",actions:["up","down","right","left"],score:0,color:_a[Math.floor(Math.random()*_a.length)],name:Da[Math.floor(Math.random()*Da.length)],id:0,body:[{x:300,y:90},{x:300-this.state.snakesize,y:90},{x:300-2*this.state.snakesize,y:90},{x:300-3*this.state.snakesize,y:90}]};return e.push(a),e}},{key:"chunkify",value:function(e,a){if(a<2)return[e];var t,n=e.length,r=[],s=0;if(n%a===0)for(t=Math.floor(n/a);s<n;)r.push(e.slice(s,s+=t));else for(;s<n;)t=Math.ceil((n-s)/a--),r.push(e.slice(s,s+=t));return r}},{key:"nextPhase",value:function(){var e=[];switch(this.props.game.minigame.multiplayerMode){case"classic":e=this.createSnakes();break;case"coop":e=this.createCoopSnakes();break;case"team":e=this.createTeamSnakes()}for(var a=this.props.game.players,t=0;t<e.length;t++)for(var n=this.chunkify(e[t].actions,e[t].playerKeys.length),r=0;r<e[t].playerKeys.length;r++){var s=a[e[t].playerKeys[r]];s.snakeId=e[t].id,s.controlActions=n[r]}var i=this.props.game;i.minigame.snakes=e,i.phase="gameplay",i.players=a,this.props.gameFunc.update(i)}},{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement(Pe.a,{variant:"h2"},"Starting game"),i.a.createElement(Te,{speed:"slow"}))}}]),a}(s.Component),Ka=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){switch(this.props.game.gametype){case"snake":return i.a.createElement("div",{className:"host-container"},"setup"===this.props.game.phase&&i.a.createElement(za,{game:this.props.game,gameFunc:this.props.gameFunc}),"connection"===this.props.game.phase&&i.a.createElement(Aa,{game:this.props.game,gameFunc:this.props.gameFunc}),"starting"===this.props.game.phase&&i.a.createElement(Ia,{game:this.props.game,gameFunc:this.props.gameFunc}),"gameplay"===this.props.game.phase&&i.a.createElement(Fa,{game:this.props.game,gameFunc:this.props.gameFunc}),"final_result"===this.props.game.phase&&i.a.createElement(Qa,{game:this.props.game,gameFunc:this.props.gameFunc}),"end"===this.props.game.phase&&i.a.createElement(Ta,{game:this.props.game,gameFunc:this.props.gameFunc}));case"tetris":return i.a.createElement("div",{className:"host-container"},"setup"===this.props.game.phase&&i.a.createElement(za,{game:this.props.game,gameFunc:this.props.gameFunc}),"connection"===this.props.game.phase&&i.a.createElement(Aa,{game:this.props.game,gameFunc:this.props.gameFunc}),"starting"===this.props.game.phase&&i.a.createElement(Ga,{game:this.props.game,gameFunc:this.props.gameFunc}),"gameplay"===this.props.game.phase&&i.a.createElement(Ma,{game:this.props.game,gameFunc:this.props.gameFunc}),"final_result"===this.props.game.phase&&i.a.createElement(Qa,{game:this.props.game,gameFunc:this.props.gameFunc}),"end"===this.props.game.phase&&i.a.createElement(Ta,{game:this.props.game,gameFunc:this.props.gameFunc}));default:return null}}}]),a}(s.Component),La=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.state={game:{},gameId:localStorage.getItem("RecentGameId")||"",password:""},t.updateGame=t.updateGame.bind(Object(d.a)(Object(d.a)(t))),t.fetchGame=t.fetchGame.bind(Object(d.a)(Object(d.a)(t))),t.initGameListiner=t.initGameListiner.bind(Object(d.a)(Object(d.a)(t))),t.restartGame=t.restartGame.bind(Object(d.a)(Object(d.a)(t))),t.quitGame=t.quitGame.bind(Object(d.a)(Object(d.a)(t))),t.endGame=t.endGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"updateGame",value:function(e){var a=this;b.database().ref("games/"+a.state.game.key).update(e,function(e){if(e){a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}})}},{key:"restartGame",value:function(){var e={players:[],phase:"setup"};this.updateGame(e)}},{key:"quitGame",value:function(){this.updateGame({phase:null}),this.props.toggleHeader(!0)}},{key:"endGame",value:function(){this.updateGame({phase:"final_result"})}},{key:"fetchGame",value:function(){var e=this;b.database().ref("games").orderByChild("gameId").equalTo(e.state.gameId).once("value",function(a){if(a.val()){var t;if(a.forEach(function(e){t=e.val()}),t.password===e.state.password)e.initGameListiner(t.key),e.props.toggleHeader();else{e.props.showSnackbar({variant:"error",message:"Could not find matching game"})}}else{e.props.showSnackbar({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=b.database().ref("games/"+e),t=this;a.on("value",function(e){var a=e.val();a?t.setState({game:a}):t.setState({game:""})})}},{key:"render",value:function(){var e={update:this.updateGame,restart:this.restartGame,end:this.endGame,quit:this.quitGame};return this.state.game.phase?i.a.createElement("div",{className:"page-container host-page"},"quiz"===this.state.game.gametype&&i.a.createElement(Pa,{game:this.state.game,gameFunc:e}),"snake"===this.state.game.gametype&&i.a.createElement(Ka,{game:this.state.game,gameFunc:e}),"tetris"===this.state.game.gametype&&i.a.createElement(Ka,{game:this.state.game,gameFunc:e})):i.a.createElement("div",{className:"page-container host-page"},i.a.createElement(we.a,{container:!0,spacing:24},i.a.createElement("form",{autoComplete:"off"},i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Game ID",name:"Game ID",value:this.state.gameId,margin:"normal",onChange:this.handleChange("gameId")})),i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Password",type:"password",name:"password",margin:"normal",value:this.state.password,onChange:this.handleChange("password")})),i.a.createElement(w.a,{onClick:this.fetchGame,variant:"contained"},"Fetch"))))}}]),a}(s.Component),Ra=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.state={name:"",authId:"",playerCreated:!1},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.generateName=t.generateName.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){!this.props.playerKey&&this.props.game.quiz.nameGenerator&&this.props.addPlayer(this.generatePlayer())}},{key:"createPlayer",value:function(){var e={name:this.state.name,score:0};this.props.addPlayer(e),this.setState({playerCreated:!0})}},{key:"generatePlayer",value:function(){return{name:this.generateName(),score:0}}},{key:"generateName",value:function(){var e=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],a=["ninja","chair","pancake","statue","unicorn","rainbows","laser","senor","bunny","captain","nibblets","cupcake","carrot","gnomes","glitter","potato","salad","toejam","curtains","beets","toilet","exorcism","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"],t="",n=[];this.props.game.players&&(n=Object.values(this.props.game.players).map(function(e){return e.name}));for(var r=0;r<20;r++){var s="";if(s=r>10?e[Math.floor(Math.random()*e.length)]+" "+e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)]:e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)],!(n.indexOf(s)>-1)){t=s;break}}return t}},{key:"render",value:function(){var e=this.props.game.players,a="";e&&this.props.playerKey&&(a=e[this.props.playerKey].name);var t=[];return e&&(t=Object.values(e)),this.props.game.quiz.remoteMode?i.a.createElement("div",{className:"phase-container"},a&&i.a.createElement("div",null,i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},"Welcome ",i.a.createElement("span",{className:"dynamic-text"},a),"! ")),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{paragraph:!0,variant:"subtitle1"},"Players in lobby"),i.a.createElement(we.a,{container:!0},t.map(function(e,a){return i.a.createElement(we.a,{key:e.key,item:!0,md:3,xs:6},i.a.createElement(Pe.a,{paragraph:!0,variant:"body1"},e.name))}))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(Pe.a,{paragraph:!0,variant:"subtitle1"},"Waiting for the host to start the game"))),!a&&i.a.createElement("div",null,i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),i.a.createElement(w.a,{onClick:this.createPlayer,variant:"contained"},"done"))):i.a.createElement("div",{className:"phase-container"},a&&i.a.createElement("div",null,i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Welcome ",i.a.createElement("span",{className:"dynamic-text"},a),"!"),i.a.createElement(Pe.a,{variant:"subtitle1"}," Watch the screen, your name should show.")),i.a.createElement("div",{className:"quiz-bottom-section"})),!a&&i.a.createElement("div",null,i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),i.a.createElement(w.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(s.Component),Ba=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},"Starting quiz")),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Te,{speed:"slow"})),i.a.createElement("div",{className:"quiz-bottom-section"})):i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Starting quiz...")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),Ha=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},"Loading question")),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Te,{speed:"slow"})),i.a.createElement("div",{className:"quiz-bottom-section"})):i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Look at the screen.")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),Wa=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),i.a.createElement("div",{className:"quiz-bottom-section"})):i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Look at the question on the screen!")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),Ja=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).answerQuestion=function(e){t.setState({selectedAnswer:e,hasAnswered:!0});var a=Date.now()-t.state.startTime,n=0;if(t.state.question.correctAnswers.indexOf(e)>-1){switch(t.state.question.difficulty){case"easy":n+=100;break;case"medium":n+=200;break;case"hard":n+=300;break;case void 0:n+=200}if(t.props.game.quiz.timelimit&&t.state.question.timelimit){var r=a/(1e3*t.state.question.timelimit);n+=Math.floor(n/r/10)}}var s={answer:e,score:n,answerTime:a,questionId:t.state.question.id};t.props.saveAnswer(s)},t.state={counter:0,question:{},hasAnswered:!1,selectedAnswer:""},t.answerQuestion=t.answerQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e,startTime:Date.now()})}},{key:"render",value:function(){var e=this,a=[];return this.props.game&&(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers),this.props.game.quiz.remoteMode?this.state.hasAnswered?i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{paragraph:!0,variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"body1"},"You answered: ",i.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),i.a.createElement("div",{className:"quiz-bottom-section"})):i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),i.a.createElement("div",{className:"quiz-middle-and-bottom-section"},i.a.createElement(we.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return i.a.createElement(we.a,{key:t,item:!0,xs:6},i.a.createElement($e,{answer:a,index:t,answerQuestion:e.answerQuestion,remoteMode:!0}))})))):this.state.hasAnswered?i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"body1"},"You answered: ",i.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),i.a.createElement("div",{className:"quiz-bottom-section"})):i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-complete-section"},i.a.createElement(we.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return i.a.createElement(we.a,{key:t,item:!0,xs:6},i.a.createElement($e,{answer:a,index:t,answerQuestion:e.answerQuestion}))}))))}}]),a}(s.Component),Ua=t(70),Va=t.n(Ua),Ya=t(71),Za=t.n(Ya),Xa=t(72),$a=t.n(Xa),et=t(60),at=t.n(et),tt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a,n){t.setState({expanded:!!n&&e})}},t.state={expanded:null},t.getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e=[],a=this.props.game.players[this.props.playerKey],t=0;t<this.props.game.quiz.questions.length;t++){var n={question:{},score:0,time:0,answer:""},r=this.props.game.quiz.questions[t];a.answers[r.id]?(n.score=a.answers[r.id].score,n.answer=a.answers[r.id].answer,n.time=a.answers[r.id].answerTime):(n.score=0,n.answer="no answer",n.time=0),n.question=r,e.push(n)}return e}},{key:"render",value:function(){var e=this;if(this.props.game.quiz.remoteMode){var a=this.getPlayerAnswerData();return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},i.a.createElement(Pe.a,{variant:"h5"},"Quiz finished")),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"subtitle1"},"You finished",i.a.createElement("span",{className:"dynamic-text"},"2nd")," with a score of  ",i.a.createElement("span",{className:"dynamic-text"},"560")),i.a.createElement(Va.a,null,i.a.createElement(Za.a,{expandIcon:i.a.createElement(at.a,null)},i.a.createElement(Pe.a,null,"Final scoretable")),i.a.createElement($a.a,null,i.a.createElement("div",null,i.a.createElement(ua,{game:this.props.game})))),i.a.createElement(Va.a,null,i.a.createElement(Za.a,{expandIcon:i.a.createElement(at.a,null)},i.a.createElement(Pe.a,null,"Your own data")),i.a.createElement($a.a,{style:{display:"block"}},a.map(function(a,t){return i.a.createElement(Va.a,{key:a.question.id,expanded:e.state.expanded===a.question.id,onChange:e.handleChange(a.question.id)},i.a.createElement(Za.a,{expandIcon:i.a.createElement(at.a,null)},i.a.createElement(Pe.a,{variant:"subtitle1"},a.question.question),i.a.createElement(Pe.a,{variant:"subtitle2"},a.score,"pt")),i.a.createElement($a.a,null,i.a.createElement(Pe.a,null,"Your answer: ",a.answer),i.a.createElement(Pe.a,null,"Your time: ",a.time/1e3,"sec"),i.a.createElement(Pe.a,{variant:"subtitle1",align:"left"},"Correct answers"),i.a.createElement(de.a,null,a.question.correctAnswers.map(function(e,a){return i.a.createElement(ve.a,{key:e},i.a.createElement(ye.a,{primary:e}))})),i.a.createElement(Pe.a,{variant:"subtitle1",align:"left"},"Wrong answers"),i.a.createElement(de.a,null,a.question.wrongAnswers.map(function(e,a){return i.a.createElement(ve.a,{key:e},i.a.createElement(ye.a,{primary:e}))}))))})))),i.a.createElement("div",{className:"quiz-bottom-section"}))}return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Look at the screen.")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),nt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t.getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e={totalScore:0,currentQuestionScore:0,newLeaderboardPosition:1,oldLeaderboardPosition:1,answerTime:0,hasAnswered:!1},a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],t=this.props.game.players[this.props.playerKey],n=0;n<Object.keys(t.answers).length;n++){var r=this.props.game.quiz.questions[n],s=t.answers[r.id];s&&(s.questionId===a.id&&(e.hasAnswered=!0,e.currentQuestionScore=s.score,e.answerTime=s.answerTime),e.totalScore+=s.score)}for(var i=this.props.game.players?Object.keys(this.props.game.players):[],o=0;o<i.length;o++)if(i[o]!==t.key){for(var l=this.props.game.players[i[o]],c=0,m=0,u=0;u<Object.keys(l.answers).length;u++){var h=this.props.game.quiz.questions[u],p=l.answers[h.id];p&&(p.questionId===a.id&&(m=p.score),c+=p.score)}c>e.totalScore&&e.newLeaderboardPosition++,c-m>e.totalScore-e.currentQuestionScore&&e.oldLeaderboardPosition++}return e}},{key:"render",value:function(){var e=this.getPlayerAnswerData(),a=e.hasAnswered&&0===e.currentQuestionScore,t=e.currentQuestionScore>0,n=!e.hasAnswered;if(this.props.game.quiz.remoteMode){var r=[];return this.props.game&&(r=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers),i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},t>0&&i.a.createElement(Pe.a,{variant:"h5"},"Correct answer!"),a&&i.a.createElement(Pe.a,{variant:"h5"},"Wrong answer!"),n&&i.a.createElement(Pe.a,{variant:"h5"},"You did not answer the question"),!n&&i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"body1"},"Score:  ",i.a.createElement("span",{className:"dynamic-text"},e.totalScore)," Time:  ",i.a.createElement("span",{className:"dynamic-text"},e.answerTime/1e3)," seconds")),e.oldLeaderboardPosition!==e.newLeaderboardPosition&&i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"body1"},"Old position:",e.oldLeaderboardPosition," New position:",e.newLeaderboardPosition)),e.oldLeaderboardPosition===e.newLeaderboardPosition&&i.a.createElement(Pe.a,{variant:"body1"},"Position:",e.newLeaderboardPosition)),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(we.a,{container:!0},i.a.createElement(we.a,{item:!0,md:6,xs:12},i.a.createElement("div",{className:"quiz-answer-chart"},i.a.createElement(ga,{game:this.props.game}))),i.a.createElement(we.a,{item:!0,md:6,xs:12},i.a.createElement("div",null,i.a.createElement(Sa,{game:this.props.game}))))),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(we.a,{container:!0},r.map(function(e,a){return i.a.createElement(we.a,{key:a,item:!0,xs:6},i.a.createElement($e,{answer:e,index:a}))}))))}return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"},t>0&&i.a.createElement(Pe.a,{paragraph:!0,variant:"h5"},"Correct answer!"),a&&i.a.createElement(Pe.a,{paragraph:!0,variant:"h5"},"Wrong answer!"),n&&i.a.createElement(Pe.a,{paragraph:!0,variant:"h5"},"You did not answer the question")),i.a.createElement("div",{className:"quiz-middle-section"},!n&&i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"body1"},"Score:",e.totalScore),i.a.createElement(Pe.a,{variant:"body1"},"Time:",e.answerTime/1e3," seconds")),e.oldLeaderboardPosition!==e.newLeaderboardPosition&&i.a.createElement("div",null,i.a.createElement(Pe.a,{variant:"body1"},"Old position:",e.oldLeaderboardPosition),i.a.createElement(Pe.a,{variant:"body1"},"New position:",e.newLeaderboardPosition)),e.oldLeaderboardPosition===e.newLeaderboardPosition&&i.a.createElement(Pe.a,{variant:"body1"},"Position:",e.newLeaderboardPosition)),i.a.createElement("div",{className:"quiz-bottom-section"},i.a.createElement(Pe.a,{variant:"subtitle1"},"Look at the screen to se overall player results")))}}]),a}(s.Component),rt=(s.Component,function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t.saveAnswer=t.saveAnswer.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"saveAnswer",value:function(e){var a=this,t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;b.database().ref("/games/"+a.props.game.key+"/players/"+this.props.playerKey+"/answers/"+t).set(e,function(e){if(e){a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{a.props.showSnackbar({variant:"success",message:"Successfully updated player!"})}})}},{key:"render",value:function(){var e="final_result"===this.props.game.phase||"end"===this.props.game.phase;return i.a.createElement("div",{className:"play-container"},"connection"===this.props.game.phase&&i.a.createElement(Ra,{game:this.props.game,addPlayer:this.props.createPlayer,playerKey:this.props.playerKey}),"starting"===this.props.game.phase&&i.a.createElement(Ba,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"awaiting_question"===this.props.game.phase&&i.a.createElement(Ha,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"show_question"===this.props.game.phase&&i.a.createElement(Wa,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"answer"===this.props.game.phase&&i.a.createElement(Ja,{game:this.props.game,saveAnswer:this.saveAnswer,playerKey:this.props.playerKey}),"result_question"===this.props.game.phase&&i.a.createElement(nt,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}),e&&i.a.createElement(tt,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}))}}]),a}(s.Component)),st=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.state={name:"",authId:"",playerCreated:!1},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.generateName=t.generateName.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){!this.props.playerKey&&this.props.game.minigame.nameGenerator&&this.props.addPlayer(this.generatePlayer())}},{key:"createPlayer",value:function(){var e={name:this.state.name,score:0};this.props.addPlayer(e),this.setState({playerCreated:!0})}},{key:"generatePlayer",value:function(){return{name:this.generateName(),score:0}}},{key:"generateName",value:function(){var e=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],a=["ninja","chair","pancake","statue","unicorn","rainbows","laser","senor","bunny","captain","nibblets","cupcake","carrot","gnomes","glitter","potato","salad","toejam","curtains","beets","toilet","exorcism","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"],t="",n=[];this.props.game.players&&(n=Object.values(this.props.game.players).map(function(e){return e.name}));for(var r=0;r<20;r++){var s="";if(s=r>10?e[Math.floor(Math.random()*e.length)]+" "+e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)]:e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)],!(n.indexOf(s)>-1)){t=s;break}}return t}},{key:"render",value:function(){var e=this.props.game.players,a="";return e&&this.props.playerKey&&(a=e[this.props.playerKey].name),i.a.createElement("div",{className:"phase-container"},a&&i.a.createElement("div",null,i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Welcome ",i.a.createElement("span",{className:"dynamic-text"},a),"!"),i.a.createElement(Pe.a,{variant:"subtitle1"}," Watch the screen, your name should show.")),i.a.createElement("div",{className:"quiz-bottom-section"})),!a&&i.a.createElement("div",null,i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),i.a.createElement(w.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(s.Component),it=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Starting game...")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),ot=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"quiz-top-section"}),i.a.createElement("div",{className:"quiz-middle-section"},i.a.createElement(Pe.a,{variant:"h5"},"Look at the screen.")),i.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(s.Component),lt=(s.Component,t(162)),ct=t.n(lt),mt=t(161),ut=t.n(mt),ht=t(160),pt=t.n(ht),dt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t.handleAction=t.handleAction.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"validateDirectionChange",value:function(e,a){return"left"===e&&"right"!==a||"right"===e&&"left"!==a||"up"===e&&"down"!==a||"down"===e&&"up"!==a}},{key:"handleAction",value:function(e){var a=this.props.game.players[this.props.playerKey].snakeId,t=this.props.game.minigame.snakes[a];t.move!==e?this.validateDirectionChange(e,t.move)?b.database().ref("/games/"+this.props.game.key+"/minigame/snakes/"+a+"/move").set(e,function(e){e?console.log("error updated snake move"):console.log("successfully updated snake move")}):console.log("move is unvalid"):console.log("move is same as current direction")}},{key:"render",value:function(){var e=this,a=this.props.game.players[this.props.playerKey],t=this.props.game.minigame.snakes[a.snakeId],n=a.controlActions,r=t.actions,o=1===t.playerKeys.length?a.name:t.name;return i.a.createElement("div",{className:"phase-container"},i.a.createElement("div",{className:"player-controlls-container"},r.map(function(a,r){return i.a.createElement(s.Fragment,{key:a},n.indexOf(a)>-1&&i.a.createElement(w.a,{key:a,className:"player-controlls-action player-controlls-"+a,onClick:function(){e.handleAction(a)},style:{backgroundColor:t.color}},"up"===a&&i.a.createElement(pt.a,{className:"player-controlls-icon"}),"down"===a&&i.a.createElement(at.a,{className:"player-controlls-icon"}),"right"===a&&i.a.createElement(ut.a,{className:"player-controlls-icon"}),"left"===a&&i.a.createElement(ct.a,{className:"player-controlls-icon"})),-1===n.indexOf(a)&&i.a.createElement(w.a,{key:a,className:"player-controlls-action player-controlls-"+a,style:{backgroundColor:t.color,opacity:.3}},"up"===a&&i.a.createElement(pt.a,{className:"player-controlls-icon"}),"down"===a&&i.a.createElement(at.a,{className:"player-controlls-icon"}),"right"===a&&i.a.createElement(ut.a,{className:"player-controlls-icon"}),"left"===a&&i.a.createElement(ct.a,{className:"player-controlls-icon"})))}),i.a.createElement("div",{className:"player-controlls-action player-controlls-middle"},i.a.createElement(Pe.a,{variant:"body1"},o))))}}]),a}(s.Component),gt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"phase-container"},"TetrisController.js h\xe4r  ska jag visa knappar f\xf6r moves. och en metod h\xe4r som tar knapptrycket och updaterar en specifik property i firebase baserat p\xe5 gameid, playerkey etc. m\xe5ste ha med snakeId in i dnena kommmponent?")}}]),a}(s.Component),vt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e="final_result"===this.props.game.phase||"end"===this.props.game.phase;switch(this.props.game.gametype){case"snake":return i.a.createElement("div",{className:"play-container"},"connection"===this.props.game.phase&&i.a.createElement(st,{game:this.props.game,addPlayer:this.props.createPlayer,playerKey:this.props.playerKey}),"starting"===this.props.game.phase&&i.a.createElement(it,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"gameplay"===this.props.game.phase&&i.a.createElement(dt,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}),e&&i.a.createElement(ot,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}));case"tetris":return i.a.createElement("div",{className:"play-container"},"connection"===this.props.game.phase&&i.a.createElement(st,{game:this.props.game,addPlayer:this.props.createPlayer,playerKey:this.props.playerKey}),"starting"===this.props.game.phase&&i.a.createElement(it,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"gameplay"===this.props.game.phase&&i.a.createElement(gt,{game:this.props.game,updatePlayer:this.props.updatePlayer}),e&&i.a.createElement(ot,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}));default:return null}}}]),a}(s.Component),bt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(M.a)({},e,a.target.value))}},t.state={game:{},gameId:"",playerKey:""},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.fetchGame=t.fetchGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"fetchGame",value:function(){var e=this;b.database().ref("games").orderByChild("gameId").equalTo(e.state.gameId).once("value",function(a){if(a.val()){var t;if(a.forEach(function(e){t=e.val()}),"connection"===t.phase){var n=localStorage.getItem("RecentPlayerKey");n&&t.players&&t.players[n]&&e.setState({playerKey:n}),e.initGameListiner(t.key);e.props.showSnackbar({variant:"success",message:"Connected to game"}),e.props.toggleHeader(!1)}else if("setup"===t.phase){e.props.showSnackbar({variant:"error",message:"Game is not yet started"})}else{var r=localStorage.getItem("RecentPlayerKey");if(r&&t.players&&t.players[r]){e.setState({playerKey:r}),e.initGameListiner(t.key);e.props.showSnackbar({variant:"success",message:"Connected to game"}),e.props.toggleHeader(!1)}else{e.props.showSnackbar({variant:"error",message:"Game is in progress"})}}}else{e.props.showSnackbar({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=b.database().ref("games/"+e),t=this;a.on("value",function(e){var a=e.val();a?t.setState({game:a}):t.setState({game:""})})}},{key:"createPlayer",value:function(e){var a=b.database().ref("/games/"+this.state.game.key+"/players").push();e.key=a.key;var t=this;a.set(e,function(a){if(a){t.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else t.setState({playerKey:e.key}),localStorage.setItem("RecentPlayerKey",e.key)})}},{key:"render",value:function(){return this.state.game.phase?i.a.createElement("div",{className:"page-container play-page"},"quiz"===this.state.game.gametype&&i.a.createElement(rt,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar}),"snake"===this.state.game.gametype&&i.a.createElement(vt,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar}),"tetris"===this.state.game.gametype&&i.a.createElement(vt,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar})):i.a.createElement("div",{className:"page-container play-page"},i.a.createElement(we.a,{container:!0,spacing:24},i.a.createElement("form",{autoComplete:"off"},i.a.createElement(D.a,null,i.a.createElement(R.a,{label:"Game ID",name:"Game ID",value:this.state.gameId,margin:"normal",onChange:this.handleChange("gameId")})),i.a.createElement(w.a,{onClick:this.fetchGame,variant:"contained"},"Join"))))}}]),a}(s.Component),yt=function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-page home-page"},"HOME PAGE")}}]),a}(s.Component),ft=t(230),Et=t(222),kt=t.n(Et),Ot=t(224),jt=t.n(Ot),wt=t(225),Ct=t.n(wt),qt=t(228),St=t.n(qt),xt=t(226),Nt=t.n(xt),Pt=t(227),zt=t.n(Pt),At=t(126),Gt=t.n(At),Ft=t(90),Mt=t.n(Ft),Qt=t(223),Tt=t.n(Qt),_t={success:kt.a,warning:Tt.a,error:jt.a,info:Ct.a};var Dt=Object(te.withStyles)(function(e){return{success:{backgroundColor:Nt.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:zt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var a=e.classes,t=e.className,n=e.message,r=e.onClose,s=e.variant,o=Object(ft.a)(e,["classes","className","message","onClose","variant"]),l=_t[s];return i.a.createElement(Mt.a,Object.assign({className:re()(a[s],t),"aria-describedby":"client-snackbar",message:i.a.createElement("span",{id:"client-snackbar",className:a.message},i.a.createElement(l,{className:re()(a.icon,a.iconVariant)}),n),action:[i.a.createElement(E.a,{key:"close","aria-label":"Close",color:"inherit",className:a.close,onClick:r},i.a.createElement(St.a,{className:a.icon}))]},o))}),It=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(u.a)(this,(e=Object(h.a)(a)).call.apply(e,[this].concat(r)))).handleClose=function(e,a){"clickaway"!==a&&t.props.hideSnackbar()},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(Gt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.props.snack.open,autoHideDuration:6e3,onClose:this.handleClose},i.a.createElement(Dt,{onClose:this.handleClose,variant:this.props.snack.variant,message:this.props.snack.message})))}}]),a}(i.a.Component),Kt=t(605),Lt=t(604),Rt=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={snack:"",showHeader:!0},t.showSnackbar=t.showSnackbar.bind(Object(d.a)(Object(d.a)(t))),t.hideSnackbar=t.hideSnackbar.bind(Object(d.a)(Object(d.a)(t))),t.toggleHeader=t.toggleHeader.bind(Object(d.a)(Object(d.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"hideSnackbar",value:function(){var e=this.state.snack;e.open=!1,this.setState({snack:e})}},{key:"showSnackbar",value:function(e){e.open=!0,this.setState({snack:e})}},{key:"toggleHeader",value:function(e){this.setState({showHeader:e})}},{key:"render",value:function(){var e=this;return i.a.createElement(Kt.a,null,i.a.createElement("div",{className:"App"},this.state.showHeader&&i.a.createElement(F,null),i.a.createElement("div",{id:"content"},i.a.createElement(Lt.a,{exact:!0,path:"/play",render:function(){return i.a.createElement(bt,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),i.a.createElement(Lt.a,{exact:!0,path:"/host",render:function(){return i.a.createElement(La,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),i.a.createElement(Lt.a,{exact:!0,path:"/create",render:function(){return i.a.createElement(Fe,{showSnackbar:e.showSnackbar})}}),i.a.createElement(Lt.a,{exact:!0,path:"/",render:function(){return i.a.createElement(yt,null)}})),this.state.snack&&i.a.createElement(It,{snack:this.state.snack,hideSnackbar:this.hideSnackbar})))}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(Rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[279,2,1]]]);
//# sourceMappingURL=main.a51e73bf.chunk.js.map