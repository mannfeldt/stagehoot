(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{327:function(e,a,t){e.exports=t.p+"static/media/golfwood.f1bbe86f.wav"},328:function(e,a,t){e.exports=t.p+"static/media/golfwood2.ca14b160.wav"},329:function(e,a,t){e.exports=t.p+"static/media/golfwood3.38090044.wav"},330:function(e,a,t){e.exports=t.p+"static/media/golfiron.6846921d.wav"},331:function(e,a,t){e.exports=t.p+"static/media/golfiron2.535d13e9.wav"},332:function(e,a,t){e.exports=t.p+"static/media/golfiron3.f554f315.wav"},333:function(e,a,t){e.exports=t.p+"static/media/countdown.5c685d8c.wav"},334:function(e,a,t){e.exports=t.p+"static/media/golfclap.389fcba5.wav"},335:function(e,a,t){e.exports=t.p+"static/media/golfputt.464ec7d0.wav"},336:function(e,a,t){e.exports=t.p+"static/media/golfscore.f6affd73.wav"},341:function(e,a,t){e.exports=t.p+"static/media/driverIcon.664410f5.svg"},342:function(e,a,t){e.exports=t.p+"static/media/ironIcon.aff82a3f.svg"},343:function(e,a,t){e.exports=t.p+"static/media/putterIcon.017c75cd.svg"},344:function(e,a,t){e.exports=t.p+"static/media/golfbag.c7fbd966.svg"},345:function(e,a,t){e.exports=t.p+"static/media/fingerprint.deabfcc6.svg"},400:function(e,a,t){e.exports=t(798)},405:function(e,a,t){},407:function(e,a,t){},566:function(e,a,t){e.exports={cyanColor:"#66b1bb",redColor:"#EF9A9A",purpleColor:"#CE93D8",greenColor:"#9db484"}},785:function(e,a,t){},798:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(48),o=t.n(i),s=(t(405),t(5)),l=t(4),c=t(8),m=t(6),u=t(7),d=t(1),h=(t(407),t(801)),p=t(800),g=t(323),v=t.n(g),f=(t(413),t(415),v.a.initializeApp({apiKey:"AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU",authDomain:"stagehoot.firebaseapp.com",databaseURL:"https://stagehoot.firebaseio.com",projectId:"stagehoot",storageBucket:"stagehoot.appspot.com",messagingSenderId:"589747985768"})),b=t(799),y=t(161),E=t.n(y),w=t(124),k=t.n(w),O=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e="Stagehoot";return"ettkilomjol-dev"===f.options.projectId&&(e="Ett Kilo Mj\xf6l DEV"),r.a.createElement("div",{id:"header"},r.a.createElement(E.a,{position:"static"},r.a.createElement(k.a,{className:"toolbar"},r.a.createElement("div",{className:"appbar-container--left"},r.a.createElement(b.a,{className:"appbar-title text-big",to:"/"},e)))))}}]),a}(n.Component),j=t(10),C=t.n(j),x=t(3),S=t(40),q=t.n(S),P=t(41),N=t.n(P),z=t(35),G=t(16),T=t(19),M=t.n(T),A=t(12),I=t.n(A),F=t(24),_=t.n(F),D=t(11),Q=t.n(D),B=t(13),W=t.n(B),L=t(25),R=t.n(L),H=t(66),K=t.n(H),U=t(47),V=t.n(U),J=t(23),Y=t.n(J),Z=t(26),X=t.n(Z),$=t(21),ee=t(17),ae=t.n(ee),te=t(162),ne=t.n(te),re=t(55),ie=t.n(re),oe=t(61),se=t.n(oe),le=t(43),ce=t.n(le),me=t(44),ue=t.n(me),de=t(45),he=t.n(de),pe=t(325),ge=t.n(pe),ve=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={expanded:!1},t.deleteQuestion=t.deleteQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"deleteQuestion",value:function(){this.props.deleteQuestion(this.props.question)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ne.a,{className:e.card},r.a.createElement(q.a,{action:r.a.createElement(ie.a,{onClick:this.deleteQuestion},r.a.createElement(ge.a,null)),title:this.props.question.question,subheader:this.props.question.timelimit?this.props.question.timelimit+" seconds":"default timelimit"}),r.a.createElement(N.a,null,r.a.createElement(se.a,{variant:"subtitle1",align:"left"},"Correct answers"),r.a.createElement(ce.a,null,this.props.question.correctAnswers.map(function(e,a){return r.a.createElement(ue.a,{key:a},r.a.createElement(he.a,{primary:e}))})),r.a.createElement(se.a,{variant:"subtitle1",align:"left"},"Wrong answers"),r.a.createElement(ce.a,null,this.props.question.wrongAnswers.map(function(e,a){return r.a.createElement(ue.a,{key:a},r.a.createElement(he.a,{primary:e}))}))))}}]),a}(n.Component),fe=Object($.withStyles)(function(e){return{card:{maxWidth:400}}})(ve),be=t(95),ye=t.n(be),Ee=t(125),we=t.n(Ee);function ke(e){return"multiple"===e.aType||"boolean"===e.aType?10+Math.floor((e.correctAnswers.join().length+e.wrongAnswers.join().length)/30):"free"===e.aType?20:(e.aType,20)}function Oe(e){return(new DOMParser).parseFromString("<!doctype html><body>".concat(e),"text/html").body.textContent}function je(e){for(var a=[],t=0;t<e.length;t++)a.push(Oe(e[t]));return a}var Ce,xe,Se=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={nrOfQuestions:"10",category:"0",difficulty:"0",aType:"0"},t.generateQuestions=t.generateQuestions.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"generateQuestions",value:function(){var e=this.state,a=e.nrOfQuestions,t=e.category,n=e.difficulty,r=e.aType,i=this.props,o=i.addQuestions,s=i.showSnackbar,l="https://opentdb.com/api.php?";"0"!==a&&(l+="amount=".concat(a)),"0"!==t&&(l+="&category=".concat(t)),"0"!==n&&(l+="&difficulty=".concat(n)),"0"!==r&&(l+="&type=".concat(r)),fetch(l).then(function(e){return e.json()}).then(function(e){if(0===e.response_code){for(var a=[],t=0;t<e.results.length;t++){var n=e.results[t],r={question:Oe(n.question),correctAnswers:[Oe(n.correct_answer)],wrongAnswers:je(n.incorrect_answers),qType:"text",aType:n.type,category:n.category,difficulty:n.difficulty};a.push(r)}o(a)}else{var i={variant:"error",message:"Could not generate questions( code: ".concat(e.response_code,")")};s(i)}})}},{key:"render",value:function(){var e=this.state,a=e.nrOfQuestions,t=e.category,n=e.difficulty,i=e.aType;return r.a.createElement("div",null,r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,{fullWidth:!0},r.a.createElement(M.a,{label:"Number of questions",name:"nrOfQuestions",value:a,margin:"normal",onChange:this.handleChange("nrOfQuestions")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{fullWidth:!0},r.a.createElement(_.a,{htmlFor:"category"},"Category"),r.a.createElement(R.a,{value:t||"",onChange:this.handleChangeSelect,name:"category",inputProps:{id:"category"}},r.a.createElement(Q.a,{value:"0"},"Any category"),r.a.createElement(Q.a,{value:"9"},"General Knowledge"),r.a.createElement(Q.a,{value:"10"},"Entertainment: Books"),r.a.createElement(Q.a,{value:"11"},"Entertainment: Film"),r.a.createElement(Q.a,{value:"12"},"Entertainment: Music"),r.a.createElement(Q.a,{value:"13"},"Entertainment: Musicals and Theatres"),r.a.createElement(Q.a,{value:"14"},"Entertainment: Television"),r.a.createElement(Q.a,{value:"15"},"Entertainment: Video Games"),r.a.createElement(Q.a,{value:"16"},"Entertainment: Board Games"),r.a.createElement(Q.a,{value:"17"},"Science and Nature"),r.a.createElement(Q.a,{value:"18"},"Science: Computers"),r.a.createElement(Q.a,{value:"19"},"Science: Mathematics"),r.a.createElement(Q.a,{value:"20"},"Mythology"),r.a.createElement(Q.a,{value:"21"},"Sports"),r.a.createElement(Q.a,{value:"22"},"Geography"),r.a.createElement(Q.a,{value:"23"},"History"),r.a.createElement(Q.a,{value:"24"},"Politics"),r.a.createElement(Q.a,{value:"25"},"Art"),r.a.createElement(Q.a,{value:"26"},"Celebrities"),r.a.createElement(Q.a,{value:"27"},"Animals"),r.a.createElement(Q.a,{value:"28"},"Vehicles"),r.a.createElement(Q.a,{value:"29"},"Entertainment: Comics"),r.a.createElement(Q.a,{value:"30"},"Science: Gadgets"),r.a.createElement(Q.a,{value:"31"},"Entertainment: Japanese Anime and Manga"),r.a.createElement(Q.a,{value:"32"},"Entertainment: Cartoon and Animations")))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,{fullWidth:!0},r.a.createElement(_.a,{htmlFor:"difficulty"},"Difficulty"),r.a.createElement(R.a,{value:n||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty"}},r.a.createElement(Q.a,{value:"0"},"Any difficulty"),r.a.createElement(Q.a,{value:"easy"},"Easy"),r.a.createElement(Q.a,{value:"medium"},"Medium"),r.a.createElement(Q.a,{value:"hard"},"Hard")))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,{fullWidth:!0},r.a.createElement(_.a,{htmlFor:"aType"},"Answer type"),r.a.createElement(R.a,{value:i||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType"}},r.a.createElement(Q.a,{value:"0"},"Any type"),r.a.createElement(Q.a,{value:"multiple"},"Multiple choice"),r.a.createElement(Q.a,{value:"boolean"},"True/False")))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.generateQuestions,variant:"contained"},"Generate"))))}}]),a}(n.Component),qe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleTrueFalse=function(e){var a=e.target.value;t.setState({correctAnswer:a,wrongAnswerOne:"true"===a?"false":"true"})},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:"",timelimit:"10",qType:"text",aType:"multiple",generateQuestions:!0},t.sendQuestion=t.sendQuestion.bind(Object(d.a)(Object(d.a)(t))),t.toggleGenerateQuestion=t.toggleGenerateQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"sendQuestion",value:function(){var e=this.state,a=e.question,t=e.correctAnswer,n=e.wrongAnswerOne,r=e.wrongAnswerTwo,i=e.wrongAnswerThree,o=e.timelimit,s=e.qType,l=e.aType,c=this.props.addQuestion,m={question:a,correctAnswers:[t],wrongAnswers:[n,r,i],timelimit:o,qType:s,aType:l};this.setState({question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:""}),c(m)}},{key:"toggleGenerateQuestion",value:function(){var e=this.state.generateQuestions;this.setState({generateQuestions:!e})}},{key:"render",value:function(){var e=this.state,a=e.question,t=e.correctAnswer,n=e.wrongAnswerOne,i=e.wrongAnswerTwo,o=e.wrongAnswerThree,s=e.timelimit,l=e.qType,c=e.aType,m=e.generateQuestions,u=this.props,d=u.addQuestions,h=u.showSnackbar,p=u.isTimelimit;return m?r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Custom questions"),r.a.createElement(I.a,{onClick:this.toggleGenerateQuestion,disabled:!0,variant:"contained"},"Auto generate questions"),r.a.createElement(Se,{addQuestions:d,showSnackbar:h})):r.a.createElement("div",null,r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.toggleGenerateQuestion,disabled:!0,variant:"contained"},"Custom questions"),r.a.createElement(I.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Auto generate questions")),r.a.createElement(C.a,{item:!0,xs:12,md:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"qtype-required"},"Question type"),r.a.createElement(R.a,{value:l||"",onChange:this.handleChangeSelect,name:"qType",inputProps:{id:"qtype-required"}},r.a.createElement(Q.a,{value:"text"},"Text"),r.a.createElement(Q.a,{value:"image"},"Image"),r.a.createElement(Q.a,{value:"video"},"Video")))),r.a.createElement(C.a,{item:!0,xs:12,md:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"aType-required"},"Answer type"),r.a.createElement(R.a,{value:c||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType-required"}},r.a.createElement(Q.a,{value:"boolean"},"True/false"),r.a.createElement(Q.a,{value:"player"},"Player"),r.a.createElement(Q.a,{value:"multiple"},"Mulitichoice"),r.a.createElement(Q.a,{value:"free"},"Free text")))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{fullWidth:!0},r.a.createElement(M.a,{label:"Question",name:"question",value:a,margin:"normal",onChange:this.handleChange("question")}))),"multiple"===c&&r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Correct answer",name:"correctAnswer",margin:"normal",value:t,onChange:this.handleChange("correctAnswer")}))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Wrong answer",name:"wrongAnswerOne",margin:"normal",value:n,onChange:this.handleChange("wrongAnswerOne")}))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Wrong answer",name:"wrongAnswerTwo",margin:"normal",value:i,onChange:this.handleChange("wrongAnswerTwo")}))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Wrong answer",name:"wrongAnswerThree",margin:"normal",value:o,onChange:this.handleChange("wrongAnswerThree")})))),"boolean"===c&&r.a.createElement("div",null,r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(K.a,{component:"legend"},"Answer"),r.a.createElement(we.a,{"aria-label":"answer",name:"correctAnswer",value:t,onChange:this.handleTrueFalse},r.a.createElement(Y.a,{value:"true",control:r.a.createElement(ye.a,null),label:"True"}),r.a.createElement(Y.a,{value:"false",control:r.a.createElement(ye.a,null),label:"False"}))))),p&&r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Time limit",name:"timelimit",type:"number",value:s,margin:"normal",onChange:this.handleChange("timelimit")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.sendQuestion,variant:"contained"},"Add question"))))}}]),a}(n.Component),Pe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"quiz",gamemode:"normal",timelimit:!0,timescore:!1,questions:[],gamePass:""},t.addQuestion=t.addQuestion.bind(Object(d.a)(Object(d.a)(t))),t.addQuestions=t.addQuestions.bind(Object(d.a)(Object(d.a)(t))),t.deleteQuestion=t.deleteQuestion.bind(Object(d.a)(Object(d.a)(t))),t.createQuiz=t.createQuiz.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"addQuestion",value:function(e){var a=this.state,t=a.questions,n=a.timelimit,r=this.props.showSnackbar,i=e;0===t.length?i.id=1:i.id=Math.max.apply(Math,Object(z.a)(t.map(function(e){return e.id})))+1,n&&!i.timelimit&&(i.timelimit=ke(i)),t.push(i),this.setState({questions:t});r({variant:"success",message:"Added question"})}},{key:"addQuestions",value:function(e){for(var a=this.state,t=a.questions,n=a.timelimit,r=this.props.showSnackbar,i=0;i<e.length;i++){var o=e[i];0===t.length?o.id=1:o.id=Math.max.apply(Math,Object(z.a)(t.map(function(e){return e.id})))+1,n&&!o.timelimit&&(o.timelimit=ke(o)),t.push(o)}this.setState({questions:t});r({variant:"success",message:"Added questions"})}},{key:"deleteQuestion",value:function(e){var a=this.state.questions,t=a.map(function(e){return e.id}).indexOf(e.id);a.splice(t,1),this.setState({questions:a})}},{key:"createQuiz",value:function(){var e=this.props.createQuiz,a=this.state,t=a.timelimit;e({password:a.gamePass,gametype:a.gametype,tile:a.title,quiz:{gamemode:"normal",timelimit:t,timescore:a.timescore,questions:a.questions}})}},{key:"render",value:function(){var e=this,a=this.state,t=a.timelimit,n=a.gamePass,i=a.title,o=a.timescore,s=a.gamemode,l=a.questions,c=this.props.showSnackbar;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(C.a,{container:!0,spacing:8},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(x.b,{variant:"h4"},"New quiz")),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Gamemode"),r.a.createElement(R.a,{value:s||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"normal"},"Normal"),r.a.createElement(Q.a,{value:"wild"},"Wild")))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(K.a,{component:"legend"},"Game options"),r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:t,onChange:this.handleChangeBool("timelimit"),value:"timelimit"}),label:"Time limited questions"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o,onChange:this.handleChangeBool("timescore"),value:"timescore"}),label:"Time based score"})))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Title",name:"title",value:i,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"gamePass",margin:"normal",value:n,onChange:this.handleChange("gamePass")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.createQuiz,variant:"contained"},"Create quiz")))),r.a.createElement(C.a,{item:!0,xs:12,md:6},r.a.createElement(qe,{addQuestions:this.addQuestions,addQuestion:this.addQuestion,isTimelimit:!!t,showSnackbar:c})),r.a.createElement(C.a,{container:!0},l.map(function(a,t){return r.a.createElement(C.a,{item:!0,xs:12,md:6,key:a.id},r.a.createElement(fe,{question:a,transitionDelay:t,deleteQuestion:e.deleteQuestion}))}))))}}]),a}(n.Component),Ne=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"tetris",gamemode:"survival",password:""},t.validateGame=t.validateGame.bind(Object(d.a)(Object(d.a)(t))),t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state;e({password:a.password,gametype:a.gametype,title:a.title,minigame:{gamemode:a.gamemode}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(C.a,{container:!0,spacing:8},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(C.a,{item:!0,xs:4},r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:n||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"survival"},"Survival"),r.a.createElement(Q.a,{value:"race"},"Race"))),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")})),r.a.createElement(I.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),ze=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"golf",holes:18,scoremode:"strokes",speedmode:!0,opponentCollision:!1,password:"",gamemode:"classic",difficulty:"300"},t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state,t=a.password,n=a.gametype,r=a.title,i=a.gamemode,o=a.holes;e({password:t,gametype:n,title:r,minigame:{gamemode:i,scoremode:a.scoremode,speedmode:a.speedmode,holes:o,difficulty:a.difficulty}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode,i=e.holes,o=e.difficulty,s=e.scoremode,l=e.speedmode;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(x.b,{variant:"h4"},"New Golf game")),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:n||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"classic"},"Classic"),r.a.createElement(Q.a,{value:"wild"},"Wild"))),r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"scoremode-required"},"Score mode"),r.a.createElement(R.a,{value:s||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"scoremode",inputProps:{id:"scoremode-required"}},r.a.createElement(Q.a,{value:"strokes"},"Strokes"),r.a.createElement(Q.a,{value:"time"},"Time"),r.a.createElement(Q.a,{value:"compedetive"},"Compedetive")))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(R.a,{value:o||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(Q.a,{value:"500"},"Easy"),r.a.createElement(Q.a,{value:"300"},"Medium"),r.a.createElement(Q.a,{value:"100"},"Hard"),r.a.createElement(Q.a,{value:"75"},"Pro")))),r.a.createElement(C.a,{item:!0,xs:12},"classic"===n&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Holes to play",name:"holes",type:"number",value:i,margin:"normal",onChange:this.handleChange("holes")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:l,onChange:this.handleChangeBool("speedmode"),value:"speedmode"}),label:"Speed mode"}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),Ge=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"snake",gamemode:"survival",racetarget:20,opponentCollision:!1,eatOpponents:!1,wallCollision:!0,password:"",difficulty:"300"},t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state,t=a.password,n=a.gametype,r=a.title,i=a.gamemode,o=a.wallCollision,s=a.opponentCollision;e({password:t,gametype:n,title:r,minigame:{gamemode:i,wallCollision:o,eatOpponents:a.eatOpponents,opponentCollision:s,racetarget:a.racetarget,difficulty:a.difficulty}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode,i=e.wallCollision,o=e.opponentCollision,s=e.eatOpponents,l=e.racetarget,c=e.difficulty;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(x.b,{variant:"h4"},"New Snake game")),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:n||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"survival"},"Survival"),r.a.createElement(Q.a,{value:"race"},"Race")))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(R.a,{value:c||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(Q.a,{value:"500"},"Easy"),r.a.createElement(Q.a,{value:"300"},"Medium"),r.a.createElement(Q.a,{value:"100"},"Hard"),r.a.createElement(Q.a,{value:"75"},"Pro")))),r.a.createElement(C.a,{item:!0,xs:12},"race"===n&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Snake length",name:"racetarget",type:"number",value:l,margin:"normal",onChange:this.handleChange("racetarget")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:i,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o&&s,disabled:!o,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),Te=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"spotify",questions:18,password:"",gamemode:"classic",difficulty:"300"},t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state;e({password:a.password,gametype:a.gametype,title:a.title,minigame:{gamemode:a.gamemode,questions:a.questions}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode,i=e.questions;e.difficulty,e.scoremode,e.speedmode;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(x.b,{variant:"h4"},"New Spotify game")),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,{required:!0,fullWidth:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:n||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"classic"},"Classic"),r.a.createElement(Q.a,{value:"wild"},"Wild")))),r.a.createElement(C.a,{item:!0,xs:12},"classic"===n&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"questions to play",name:"questions",type:"number",value:i,margin:"normal",onChange:this.handleChange("questions")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")}))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(I.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),Me=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).setGameType=function(e){return function(a){t.setState({gametype:e})}},t.state={gametype:""},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.createGame,a=this.state.gametype;return r.a.createElement("div",{className:"app-page create-page"},!a&&r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("snake")},r.a.createElement(q.a,{title:"Snake"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Create a classic game of snake or change the modes to fit your audience")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("tetris")},r.a.createElement(q.a,{title:"Tetris"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Game is not available yet")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("golf")},r.a.createElement(q.a,{title:"Golf"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Create a multiplayer golf simulation game")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("spotify")},r.a.createElement(q.a,{title:"Spotify"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Get to know your friends Music taste"))))),"snake"===a&&r.a.createElement(Ge,{createGame:e}),"tetris"===a&&r.a.createElement(Ne,{createGame:e}),"golf"===a&&r.a.createElement(ze,{createGame:e}),"spotify"===a&&r.a.createElement(Te,{createGame:e}))}}]),a}(n.Component),Ae=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).setGameType=function(e){return function(){t.setState({gametype:e})}},t.state={gametype:"",gameId:""},t.createGame=t.createGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(e){var a=e;a.gameId=function(){for(var e="",a="ABCDEFGHJKLMNOPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz0123456789",t=0;t<6;t++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}(),a.created=Date.now(),a.status="CREATED",a.phase="setup";var t=this,n=f.database().ref("/games").push();a.key=n.key,n.set(a,function(e){if(e){t.setState({errorText:"Error: ".concat(e)});t.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{t.props.showSnackbar({variant:"success",message:"Successfully created!"}),t.setState({gameId:a.gameId,gametype:"done"}),localStorage.setItem("RecentGameId",a.gameId)}})}},{key:"render",value:function(){var e=this.state,a=e.gametype,t=e.gameId,n=this.props.showSnackbar;return r.a.createElement("div",{className:"app-page create-page"},!a&&r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("quiz")},r.a.createElement(q.a,{title:"Quiz"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Create your own quiz or generate one fast and easy")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("minigame")},r.a.createElement(q.a,{title:"Mini Game"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Create a game to play just for fun or team building purposes")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("survey")},r.a.createElement(q.a,{title:"Survey"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Survey your audience")))),r.a.createElement(C.a,{item:!0,xs:6},r.a.createElement(x.a,{className:"card-button",onClick:this.setGameType("discussion")},r.a.createElement(q.a,{title:"Discussion"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Create a discussion on a sppecified topic"))))),"quiz"===a&&r.a.createElement(Pe,{createQuiz:this.createGame,showSnackbar:n}),"minigame"===a&&r.a.createElement(Me,{createGame:this.createGame,showSnackbar:n}),"done"===a&&r.a.createElement("div",null,r.a.createElement(x.b,{variant:"h2"},r.a.createElement("span",null,"Created game PIN: ")," ",r.a.createElement("span",{className:"dynamic-text"},t)),r.a.createElement(b.a,{to:"/host"},"Host game")))}}]),a}(n.Component),Ie=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.state={surveyPlayers:!1,answerStreak:!0,nameGenerator:!1,remoteMode:!1,useTeams:!1,randomizeQuestionOrder:!1,autoPlayQuestions:!1},t.startGame=t.startGame.bind(Object(d.a)(Object(d.a)(t))),t.createTeamGame=t.createTeamGame.bind(Object(d.a)(Object(d.a)(t))),t.createClassicGame=t.createClassicGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createTeamGame",value:function(){this.startGame(!0)}},{key:"createClassicGame",value:function(){this.startGame(!1)}},{key:"startGame",value:function(e){var a={},t=this.props.game.quiz;t.surveyPlayers=this.state.surveyPlayers,t.answerStreak=this.state.answerStreak,t.nameGenerator=this.state.nameGenerator,t.remoteMode=this.state.remoteMode,t.useTeams=e,t.autoPlayQuestions=this.state.autoPlayQuestions,t.randomizeQuestionOrder=this.state.randomizeQuestionOrder,t.currentQuestion=0,a.quiz=t,a.phase="connection",a.status="IN_PROGRESS",this.props.gameFunc.update(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h4"},"Game Settings"),r.a.createElement(I.a,{onClick:this.createClassicGame,variant:"contained"},"Classic"),r.a.createElement(I.a,{onClick:this.createTeamGame,variant:"contained"},"Team mode"),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.nameGenerator,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.remoteMode,onChange:this.handleChangeBool("remoteMode"),value:"remoteMode"}),label:"Remote playmode"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.answerStreak,onChange:this.handleChangeBool("answerStreak"),value:"answerStreak"}),label:"Use answer scorestreak"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.surveyPlayers,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.randomizeQuestionOrder,onChange:this.handleChangeBool("randomizeQuestionOrder"),value:"randomizeQuestionOrder"}),label:"Randomize question order"}),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:this.state.autoPlayQuestions,onChange:this.handleChangeBool("autoPlayQuestions"),value:"autoPlayQuestions"}),label:"Auto play questions"}))))}}]),a}(n.Component),Fe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game.players;return e=e?Object.values(e):[],r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h2"},r.a.createElement("span",null,"Join game at: "),r.a.createElement("span",{className:"dynamic-text"},"mannfeldt.github.io/stagehoot")),r.a.createElement(x.b,{variant:"h2"},r.a.createElement("span",null,"Enter game PIN: "),r.a.createElement("span",{className:"dynamic-text"},this.props.game.gameId)),r.a.createElement(x.b,{variant:"subtitle1"},this.props.game.title)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0},e.map(function(e,a){return r.a.createElement(C.a,{key:a,item:!0,xs:3},r.a.createElement(x.b,{paragraph:!0,variant:"body1",className:"dynamic-text"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(I.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(n.Component),_e=(t(566),function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return"slow"===this.props.speed?r.a.createElement("div",{className:"demo_slow"},r.a.createElement("div",{className:"demo_slow__colored-blocks"},r.a.createElement("div",{className:"demo_slow__colored-blocks-rotater"},r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"})),r.a.createElement("div",{className:"demo_slow__colored-blocks-inner"}),r.a.createElement("div",{className:"demo_slow__text"},"Ready")),r.a.createElement("div",{className:"demo_slow__inner"},r.a.createElement("svg",{className:"demo_slow__numbers",viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("path",{className:"demo_slow__num-path-1",d:"M40,28 55,22 55,78"}),r.a.createElement("path",{className:"demo_slow__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),r.a.createElement("path",{className:"demo_slow__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),r.a.createElement("path",{className:"demo_slow__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),r.a.createElement("path",{className:"demo_slow__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),r.a.createElement("path",{className:"demo_slow__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r l0,-61 L40,28"})))):r.a.createElement("div",{className:"demo"},r.a.createElement("div",{className:"demo__colored-blocks"},r.a.createElement("div",{className:"demo__colored-blocks-rotater"},r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"})),r.a.createElement("div",{className:"demo__colored-blocks-inner"}),r.a.createElement("div",{className:"demo__text"},"Ready")),r.a.createElement("div",{className:"demo__inner"},r.a.createElement("svg",{className:"demo__numbers",viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("path",{className:"demo__num-path-1",d:"M40,28 55,22 55,78"}),r.a.createElement("path",{className:"demo__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),r.a.createElement("path",{className:"demo__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),r.a.createElement("path",{className:"demo__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),r.a.createElement("path",{className:"demo__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),r.a.createElement("path",{className:"demo__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r l0,-61 L40,28"}))))}}]),a}(n.PureComponent)),De=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"awaiting_question"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Starting quiz"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component),Qe=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"show_question"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Loading next question"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component),Be=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={question:""},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e});var a=3e3+20*e.question.length;setTimeout(this.nextPhase,a)}},{key:"nextPhase",value:function(){var e=[];if("multiple"===this.state.question.aType?(e=this.state.question.wrongAnswers.concat(this.state.question.correctAnswers),e=this.shuffle(e)):"boolean"===this.state.question.aType&&(e=["True","False"]),e.length){var a={phase:"answer"};a.quiz=this.props.game.quiz,a.quiz.questions[a.quiz.currentQuestion].answers=e,this.props.gameFunc.update(a)}else this.props.gameFunc.update({phase:"answer"})}},{key:"shuffle",value:function(e){for(var a=e.length;a>0;){var t=Math.floor(Math.random()*a),n=e[--a];e[a]=e[t],e[t]=n}return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h2"},this.state.question.question)),r.a.createElement("div",{className:"quiz-middle-section"}),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),We=t(60),Le=t.n(We),Re=t(168),He=t.n(Re),Ke=t(170),Ue=t.n(Ke),Ve=t(169),Je=t.n(Ve),Ye=t(171),Ze=t.n(Ye),Xe=[{icon:r.a.createElement(He.a,null),color:"#73c7d2"},{icon:r.a.createElement(Je.a,null),color:"#d78a8a"},{icon:r.a.createElement(Ue.a,null),color:"#b984c2"},{icon:r.a.createElement(Ze.a,null),color:"#b1ca94"}],$e=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=Xe[this.props.index],t=this.props.classes;return r.a.createElement("div",{className:"full-height"},this.props.answerQuestion&&r.a.createElement(Le.a,{onClick:function(){e.props.answerQuestion(e.props.answer)},className:t.playAnswer,style:{backgroundColor:a.color}},r.a.createElement("div",{className:"button-answer-icon"},a.icon),this.props.remoteMode&&r.a.createElement("div",{className:t.answer},this.props.answer)),!this.props.answerQuestion&&r.a.createElement(Le.a,{className:t.paper,style:{backgroundColor:a.color}},r.a.createElement("div",{className:t.icon},a.icon),r.a.createElement("div",{className:t.answer},this.props.answer)))}}]),a}(n.Component),ea=Object($.withStyles)(function(e){return{root:{flexGrow:1},paper:{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary,height:"100%"},playAnswer:{width:"50vw",height:"100%",textAlign:"center",color:e.palette.text.secondary},icon:{float:"left",fontSize:"28",color:"white",marginLeft:"10px"},answer:{fontSize:18,fontWeight:500,color:"white"}}})($e),aa=t(163),ta=t.n(aa),na=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.text,n=e.value,i=e.startValue,o=null===n?i:n;o<0&&(o=0);var s=o/(i<1?0:i);return r.a.createElement("div",{className:a.container},r.a.createElement(x.b,{variant:"caption",className:a.text},t),r.a.createElement(ta.a,{className:a.circle,classes:{colorSecondary:a.circle},variant:"static",value:100*s,thickness:4,size:300}))}}]),a}(n.PureComponent),ra=Object($.withStyles)(function(e){return{text:{marginBottom:"-200px",fontSize:"86px",paddingTop:"160px"},circle:{color:"#6JpDK4"}}})(na),ia=t(96),oa=t.n(ia),sa=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(x.b,{variant:"h5"},"Answers collected"),r.a.createElement(oa.a,{className:e.bar,variant:"determinate",value:this.props.value}))}}]),a}(n.Component),la=Object($.withStyles)(function(e){return{bar:{color:"#32386D"}}})(sa),ca=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:null,timelimit:0,started:!1,isTimelimited:!0,question:{question:"",answers:[]}},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];if(this.setState({question:a,isTimelimited:this.props.game.quiz.timelimit,timelimit:10*a.timelimit}),this.props.game.quiz.timelimit)var t=this.props.game.players?Object.keys(this.props.game.players):[],n=10*a.timelimit,r=setInterval(function(){for(var i=0,o=0;o<t.length;o++)e.props.game.players[t[o]].answers&&e.props.game.players[t[o]].answers[a.id]&&i++;n--,e.setState({counter:n,started:!0}),(n<=-5||i===t.length)&&(e.nextPhase(),clearInterval(r))},100)}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"result_question"})}},{key:"render",value:function(){var e=[];this.props.game&&(e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers);for(var a=0,t=this.props.game.players?Object.keys(this.props.game.players):[],n=0;n<t.length;n++)this.props.game.players[t[n]].answers&&this.props.game.players[t[n]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]&&a++;var i=a/t.length*100;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h2"},this.state.question.question)),r.a.createElement("div",{className:"quiz-middle-section"},!this.state.isTimelimited&&r.a.createElement(I.a,{onClick:this.nextPhase},"Next"),this.state.isTimelimited&&r.a.createElement(ra,{startValue:this.state.timelimit,value:this.state.counter,text:Math.ceil(this.state.counter/10)}),r.a.createElement("div",{className:"quiz-answercounter-container"},r.a.createElement(la,{value:i}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(C.a,{container:!0,className:"align-bottom"},e.map(function(e,a){return r.a.createElement(C.a,{key:a,item:!0,xs:6},r.a.createElement(ea,{answer:e,index:a}))}))))}}]),a}(n.Component),ma=t(102),ua=["#80DEEA","#EF9A9A","#CE93D8","#C5E1A5"],da=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(d.a)(Object(d.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(d.a)(Object(d.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getChartData",value:function(){for(var e={labels:[],datasets:[{data:[],label:"podium",backgroundColor:[],borderWidth:1}]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=[],n=0;n<a.length;n++){var r={},i=this.props.game.players[a[n]],o=0;if(i.answers){for(var s=0;s<Object.keys(i.answers).length;s++){var l=this.props.game.quiz.questions[s],c=i.answers[l.id];c&&(o+=c.score)}r.score=o,r.name=i.name,t.push(r)}}t.sort(function(e,a){return a.score-e.score});for(var m=t.length>20?20:t.length,u=0;u<m;u++)e.labels.push(t[u].name),e.datasets[0].data.push(t[u].score),e.datasets[0].backgroundColor.push(ua[u%4]);return e}},{key:"getChartHeight",value:function(){var e=70+30*this.getChartData().labels.length;return e>740&&(e=740),e}},{key:"getChartOptions",value:function(){var e=(740-this.getChartHeight())/2;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(e){e.animationObject.onAnimationProgress=function(){var a=this.chart.ctx,t=this.chart;a.textAlign="center",a.textBaseline="bottom",a.font="20px Roboto";var n=e.animationObject.currentStep/e.animationObject.numSteps,r=t.getDatasetMeta(0);r.hidden||r.data.forEach(function(e,r){var i=Math.floor(t.data.datasets[0].data[r]*n).toString();a.fillStyle=ua[r%4];var o=e.tooltipPosition();a.fillText(i,o.x+2+6*i.length,o.y+e._model.height/2)})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!0,beginAtZero:!0}],xAxes:[{display:!0,beginAtZero:!0}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:60,top:e,bottom:e}}}}},{key:"getWinnerString",value:function(){return"Congratulations [name of player]! "}},{key:"render",value:function(){return r.a.createElement("div",{style:{maxHeight:740}},r.a.createElement(ma.b,{data:this.getChartData,height:740,options:this.getChartOptions()}),r.a.createElement(x.b,{variant:"subtitle1"},this.getWinnerString()))}}]),a}(n.Component),ha=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h2"},"Final score"),r.a.createElement(da,{game:this.props.game})),r.a.createElement("div",{className:"align-bottom "},r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.props.gameFunc.restart},"Replay quiz"),r.a.createElement(I.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),r.a.createElement(I.a,{onClick:function(){return alert("show results")}},"Show results"),r.a.createElement(I.a,{onClick:function(){return alert("start survey")}},"Start survey"),r.a.createElement(I.a,null,r.a.createElement(b.a,{to:"/create"},"Host game")))))}}]),a}(n.Component),pa=[{icon:r.a.createElement(He.a,null),color:"#80DEEA"},{icon:r.a.createElement(Je.a,null),color:"#EF9A9A"},{icon:r.a.createElement(Ue.a,null),color:"#CE93D8"},{icon:r.a.createElement(Ze.a,null),color:"#C5E1A5"}],ga=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(d.a)(Object(d.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(d.a)(Object(d.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(d.a)(Object(d.a)(t))),t.getAnswerData=t.getAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getAnswerData",value:function(){for(var e={data:[],topPlayer:{score:0,playerKey:""},correctAnswers:[]},a=[],t=this.props.game.players?Object.keys(this.props.game.players):[],n=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],r=0;r<t.length;r++){var i=this.props.game.players[t[r]];if(i.answers){var o=i.answers[n.id];o&&(a.push(o.answer),o.score>e.topPlayer.score&&(e.topPlayer.score=o.score,e.topPlayer.playerKey=i.key))}}for(var s=0;s<n.answers.length;s++){for(var l=0,c=0;c<a.length;c++)n.answers.indexOf(a[c])===s&&l++;e.data.push(l),n.correctAnswers.indexOf(n.answers[s])>-1&&e.correctAnswers.push(s)}return e}},{key:"getChartData",value:function(){var e={labels:[],datasets:[{data:[],label:"asdf",backgroundColor:[],borderWidth:1}]},a=this.getAnswerData();e.datasets[0].borderColor=[],e.datasets[0].data=a.data;for(var t=0;t<a.data.length;t++)e.labels.push(""),e.datasets[0].backgroundColor.push(pa[t].color);return e}},{key:"getChartHeight",value:function(){var e=this.getAnswerData(),a=65+25*Math.max.apply(Math,Object(z.a)(e.data));return a>300?300:a}},{key:"getChartOptions",value:function(){var e=this;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(a){var t=e.getAnswerData();a.animationObject.onAnimationProgress=function(){var e=this.chart.ctx,n=this.chart;e.textAlign="center",e.fillStyle="black",e.textBaseline="bottom",e.font="24px Roboto";var r=a.animationObject.currentStep/a.animationObject.numSteps,i=n.getDatasetMeta(0);i.hidden||i.data.forEach(function(a,i){var o=Math.floor(n.data.datasets[0].data[i]*r),s=a.tooltipPosition();if(e.fillStyle=pa[i].color,e.fillText(o,s.x,s.y-2),e.beginPath(),e.rect(s.x-a._view.width/2,n.height-32,a._view.width,22),e.fill(),t.correctAnswers.indexOf(i)>-1){var l=new Image;l.src="/stagehoot/baseline-done_outline-24px.svg",l.height=100,l.width=100;var c=n.height-34;e.drawImage(l,s.x-12,c)}})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!1,beginAtZero:!0}],xAxes:[{display:!1}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:0,top:25,bottom:40}}}}},{key:"render",value:function(){return r.a.createElement(ma.a,{data:this.getChartData,height:this.getChartHeight(),options:this.getChartOptions()})}}]),a}(n.Component),va=t(98),fa=t.n(va),ba=t(57),ya=t.n(ba),Ea=t(99),wa=t.n(Ea),ka=t(97),Oa=t.n(ka),ja=t(100),Ca=t.n(ja),xa=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChangePage=function(e,a){t.setState({page:a})},t.handleChangeRowsPerPage=function(e){t.setState({rowsPerPage:e.target.value})},t.state={leaderboardData:t.getLeaderboardData(),page:0,rowsPerPage:10},t.startScoreCounter=t.startScoreCounter.bind(Object(d.a)(Object(d.a)(t))),t.getScoreCellWidth=t.getScoreCellWidth.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){setTimeout(this.startScoreCounter,2e3)}},{key:"startScoreCounter",value:function(){var e=this,a=setInterval(function(){for(var t=e.state.leaderboardData,n=!0,r=0;r<t.players.length;r++){var i=t.players[r];i.currentQuestionScore>0&&(n=!1,i.currentQuestionScore--,i.totalScore++)}t.players.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.setState({leaderboard:t}),n&&clearInterval(a)},10)}},{key:"getLeaderboardData",value:function(){for(var e={players:[]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],n=[],r=0;r<a.length;r++){var i={},o=this.props.game.players[a[r]],s=0;if(o.answers)for(var l=0;l<this.props.game.quiz.questions.length;l++){var c=this.props.game.quiz.questions[l],m=o.answers[c.id];m&&(m.questionId===t.id?(i.currentQuestionScore=m.score,i.lastScore=m.score):s+=m.score)}i.totalScore=s,i.name=o.name,i.key=o.key,n.push(i)}return n.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.players=n,e}},{key:"getLeaderboardScore",value:function(e){return 0===e.currentQuestionScore?"".concat(e.totalScore," (+").concat(e.lastScore,")"):"".concat(e.totalScore,"           ")}},{key:"getScoreCellWidth",value:function(){for(var e=0,a=this.getLeaderboardData(),t=0;t<a.players.length;t++){var n=a.players[t],r="".concat(n.totalScore," (+").concat(n.lastScore,")");r.length>e&&(e=r.length)}return 6*e+65}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.leaderboardData,i=t.rowsPerPage,o=t.page;return r.a.createElement("div",{className:a.root},r.a.createElement(Oa.a,{className:a.table},r.a.createElement(fa.a,null,n.players.slice(o*i,o*i+i).map(function(a,t){return r.a.createElement(wa.a,{key:a.key},r.a.createElement(ya.a,{padding:"dense"},t+1),r.a.createElement(ya.a,null,a.name),r.a.createElement(ya.a,{style:{width:e.getScoreCellWidth()}},e.getLeaderboardScore(a)))}))),n.players.length>10&&r.a.createElement(Ca.a,{component:"div",count:n.players.length,rowsPerPage:i,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),a}(n.Component),Sa=Object($.withStyles)(function(e){return{root:{width:"100%"},table:{maxWidth:700,whiteSpace:"nowrap"}}})(xa),qa=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t.nextQuestion=t.nextQuestion.bind(Object(d.a)(Object(d.a)(t))),t.finalizeQuiz=t.finalizeQuiz.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextQuestion",value:function(){var e={};e.quiz=this.props.game.quiz,e.quiz.currentQuestion=e.quiz.currentQuestion+1,e.phase="awaiting_question",this.props.gameFunc.update(e)}},{key:"finalizeQuiz",value:function(){this.props.gameFunc.update({phase:"final_result"})}},{key:"render",value:function(){var e=[],a="";this.props.game&&(e=(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion]).answers);var t="undefined"===typeof this.props.game.quiz.questions[this.props.game.quiz.currentQuestion+1];return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h6",style:{float:"right"}},"Game PIN:".concat(this.props.game.gameId," ")),r.a.createElement(x.b,{variant:"h5"},a.question)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",{className:"quiz-answer-chart"},r.a.createElement(ga,{game:this.props.game}))),r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(Sa,{game:this.props.game})))),r.a.createElement("div",null,t&&r.a.createElement(I.a,{onClick:this.finalizeQuiz},"Finalize result"),!t&&r.a.createElement(I.a,{onClick:this.nextQuestion},"Next question"),r.a.createElement(I.a,{onClick:this.props.gameFunc.restart},"Restart quiz"),r.a.createElement(I.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),r.a.createElement(I.a,{onClick:this.props.gameFunc.end},"End quiz"))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(C.a,{className:"align-bottom",container:!0},e.map(function(e,a){return r.a.createElement(C.a,{key:a,item:!0,xs:6},r.a.createElement(ea,{answer:e,index:a}))}))))}}]),a}(n.Component),Pa=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"HostEnd toggleHeader()")}}]),a}(n.Component),Na=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"host-container"},"setup"===this.props.game.phase&&r.a.createElement(Ie,{game:this.props.game,gameFunc:this.props.gameFunc}),"connection"===this.props.game.phase&&r.a.createElement(Fe,{game:this.props.game,gameFunc:this.props.gameFunc}),"starting"===this.props.game.phase&&r.a.createElement(De,{game:this.props.game,gameFunc:this.props.gameFunc}),"awaiting_question"===this.props.game.phase&&r.a.createElement(Qe,{game:this.props.game,gameFunc:this.props.gameFunc}),"show_question"===this.props.game.phase&&r.a.createElement(Be,{game:this.props.game,gameFunc:this.props.gameFunc}),"answer"===this.props.game.phase&&r.a.createElement(ca,{game:this.props.game,gameFunc:this.props.gameFunc}),"result_question"===this.props.game.phase&&r.a.createElement(qa,{game:this.props.game,gameFunc:this.props.gameFunc}),"final_result"===this.props.game.phase&&r.a.createElement(ha,{game:this.props.game,gameFunc:this.props.gameFunc}),"end"===this.props.game.phase&&r.a.createElement(Pa,{game:this.props.game,gameFunc:this.props.gameFunc}))}}]),a}(n.Component),za=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a=t.props,n=a.game,r=a.gameFunc,i=t.state,o={surveyPlayers:i.surveyPlayers,nameGenerator:i.nameGenerator,multiplayerMode:e,wallCollision:i.wallCollision,opponentCollision:i.opponentCollision,eatOpponents:i.eatOpponents,racetarget:i.racetarget,difficulty:i.difficulty,gamemode:i.gamemode};n.minigame=o,n.phase="connection",n.status="IN_PROGRESS",r.update(n)},t.state={surveyPlayers:!1,nameGenerator:!1,gamemode:e.game.minigame.gamemode,racetarget:e.game.minigame.racetarget,opponentCollision:e.game.minigame.opponentCollision,eatOpponents:e.game.minigame.eatOpponents,wallCollision:e.game.minigame.wallCollision,difficulty:e.game.minigame.difficulty},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.surveyPlayers,n=a.nameGenerator,i=a.wallCollision,o=a.opponentCollision,s=a.eatOpponents,l=a.racetarget,c=a.difficulty,m=a.gamemode;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h4"},"Game Settings"),r.a.createElement(I.a,{onClick:function(){return e.startGame("classic")},variant:"contained"},"Classic"),r.a.createElement(I.a,{onClick:function(){return e.startGame("coop")},variant:"contained"},"Co-op multiplayer"),r.a.createElement(I.a,{onClick:function(){return e.startGame("team")},variant:"contained"},"Team multiplayer"),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:n,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:m||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"survival"},"Survival"),r.a.createElement(Q.a,{value:"race"},"Race"))),"race"===m&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Snake length",name:"racetarget",type:"number",value:l,margin:"normal",onChange:this.handleChange("racetarget")})),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(R.a,{value:c||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(Q.a,{value:"500"},"Easy"),r.a.createElement(Q.a,{value:"300"},"Medium"),r.a.createElement(Q.a,{value:"100"},"Hard"),r.a.createElement(Q.a,{value:"75"},"Pro"))),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:i,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o&&s,disabled:!o,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"})),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:t,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}))))}}]),a}(n.Component),Ga=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game,a=e.players;return a=a?Object.values(a):[],r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h2"},r.a.createElement("span",null,"Join game with Game PIN: "),r.a.createElement("span",{className:"dynamic-text"},e.gameId)),r.a.createElement(x.b,{variant:"subtitle1"},e.title)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0},a.map(function(e){return r.a.createElement(C.a,{key:e.key,item:!0,xs:3},r.a.createElement(x.b,{paragraph:!0,variant:"body1",className:"dynamic-text"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(I.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(n.Component),Ta=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t.startCounter(),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this;setInterval(function(){e.setState(function(e){return{counter:e.counter+1}})},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"gameplay"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Starting game"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component),Ma=20;function Aa(e,a){var t=e.filter(function(e){return"down"===e.direction&&e.body}),n=Object(z.a)(new Set(t.map(function(e){return e.body[0].x}))),r=8*Ma,i=2*Ma;return{x:Da(a-2*r,r,n),y:i}}function Ia(e,a){var t=e.filter(function(e){return"up"===e.direction&&e.body}),n=Object(z.a)(new Set(t.map(function(e){return e.body[0].x}))),r=8*Ma,i=a.width-2*r,o=a.height-3*Ma;return{x:Da(i,r,n),y:o}}function Fa(e,a){var t=e.filter(function(e){return"left"===e.direction&&e.body}),n=Object(z.a)(new Set(t.map(function(e){return e.body[0].y}))),r=8*Ma,i=a.height-2*r;return{x:a.width-3*Ma,y:Da(i,r,n)}}function _a(e,a){var t=e.filter(function(e){return"right"===e.direction&&e.body}),n=Object(z.a)(new Set(t.map(function(e){return e.body[0].y}))),r=8*Ma;return{x:2*Ma,y:Da(a-2*r,r,n)}}function Da(e,a,t){var n=Math.round(Math.random()*e/Ma)*Ma+a;return t.some(function(e){return e===n||e===n-Ma||e===n+Ma})?Da(e,a,t):n}function Qa(e){var a=e.body;return!(a.length<5)&&a.slice(4).some(function(e){return e.x===a[0].x&&e.y===a[0].y})}function Ba(e,a,t){var n=e.x<0,r=e.y<0,i=e.x>t-Ma,o=e.y>a-Ma;return n||r||i||o}var Wa,La,Ra=20,Ha=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).togglePausGame=function(){t.setState(function(e){return{isPaused:!e.isPaused,overlay:!1}})};var n=Math.floor(window.innerHeight/Ra)*Ra,r=Math.floor(window.innerWidth/Ra)*Ra,i=2*e.game.minigame.snakes.length;return t.state={gameTicker:null,ticks:0,winners:[],snakes:function(e,a){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.direction=r.actions[t%4],r.moves=[];var i=void 0;switch(r.direction){case"right":i=_a(e,a.height),r.body=[{x:i.x,y:i.y},{x:i.x-Ma,y:i.y},{x:i.x-2*Ma,y:i.y},{x:i.x-3*Ma,y:i.y}];break;case"left":i=Fa(e,a),r.body=[{x:i.x,y:i.y},{x:i.x+Ma,y:i.y},{x:i.x+2*Ma,y:i.y},{x:i.x+3*Ma,y:i.y}];break;case"up":i=Ia(e,a),r.body=[{x:i.x,y:i.y},{x:i.x,y:i.y+Ma},{x:i.x,y:i.y+2*Ma},{x:i.x,y:i.y+3*Ma}];break;case"down":i=Aa(e,a.width),r.body=[{x:i.x,y:i.y},{x:i.x,y:i.y-Ma},{x:i.x,y:i.y-2*Ma},{x:i.x,y:i.y-3*Ma}]}}return e}(e.game.minigame.snakes,{height:n,width:r}),foods:function(e){for(var a=[],t=0;t<e;t++)a.push({active:!1});return a}(i),settings:{snake:{size:Ra,speed:e.game.minigame.difficulty,border:"#000",respawntime:3},food:{background:"#EC5E0B",border:"#73AA24"},canvas:{height:n,width:r,background:"#F5F5F5",border:"#000"}}},t.drawSnakes=t.drawSnakes.bind(Object(d.a)(Object(d.a)(t))),t.generateFood=t.generateFood.bind(Object(d.a)(Object(d.a)(t))),t.generateSnakes=t.generateSnakes.bind(Object(d.a)(Object(d.a)(t))),t.resetCanvas=t.resetCanvas.bind(Object(d.a)(Object(d.a)(t))),t.drawFood=t.drawFood.bind(Object(d.a)(Object(d.a)(t))),t.detectCollisions=t.detectCollisions.bind(Object(d.a)(Object(d.a)(t))),t.initControllerListener=t.initControllerListener.bind(Object(d.a)(Object(d.a)(t))),t.generateFoods=t.generateFoods.bind(Object(d.a)(Object(d.a)(t))),t.isEndGame=t.isEndGame.bind(Object(d.a)(Object(d.a)(t))),t.togglePausGame=t.togglePausGame.bind(Object(d.a)(Object(d.a)(t))),t.renderOverlay=t.renderOverlay.bind(Object(d.a)(Object(d.a)(t))),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.snakes,t=e.settings,n=document.querySelector("#snakeboard");xe=n.querySelector("canvas"),Ce=xe.getContext("2d"),this.resetCanvas(),this.generateSnakes(),this.generateFoods();var r=this,i=setInterval(function(){if(r.state.isPaused){if(r.state.overlay)return;r.renderOverlay()}else 0===r.state.winners.length?(r.resetCanvas(),r.generateSnakes(),r.generateFoods(),r.detectCollisions(),r.isEndGame()):r.nextPhase()},t.snake.speed);this.setState({gameTicker:i});for(var o=0,s=a.length;o<s;o++){var l=a[o];this.initControllerListener(l)}}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"nextPhase",value:function(){var e=this.state,a=e.gameTicker,t=e.snakes,n=e.winners,r=e.ticks,i=this.props,o=i.game,s=i.gameFunc;clearInterval(a),o.minigame.snakes=t,o.minigame.winners=n,o.minigame.ticks=r,o.phase="final_result",s.update(o)}},{key:"initControllerListener",value:function(e){var a=this.props.game,t=f.database().ref("/games/".concat(a.key,"/minigame/snakes/").concat(e.id)),n=this;t.on("value",function(a){var t=a.val();t&&!n.state.isPaused?n.setState(function(a){var n=Object(z.a)(a.snakes);return t.move&&n[e.id].moves.push(t.move),{snakes:n}}):console.log("move error")})}},{key:"isEndGame",value:function(){var e=this.state.snakes,a=this.props.game.minigame,t=a.gamemode,n=a.racetarget;if(!("survival"===t&&e.filter(function(e){return!e.dead}).length>1)&&("race"!==t||e.some(function(e){return e.body.length>=n}))){var r=[];if("survival"===t){var i=e.filter(function(e){return!e.dead});if(1===i.length)r=i;else{var o=e.reduce(function(e,a){return e.score>a.score?e:a});r.push(o)}}else"race"===t&&(r=e.filter(function(e){return e.body.length>=n}));this.setState(function(){return{winners:r,isPaused:!0,overlay:!1}})}}},{key:"resetCanvas",value:function(){var e=this.state.settings;xe.width=e.canvas.width,xe.height=e.canvas.height,Ce.fillStyle=e.canvas.background,Ce.fillRect(0,0,xe.width,xe.height)}},{key:"generateSnakes",value:function(){for(var e=this.state,a=e.snakes,t=e.foods,n=e.settings,r=this.props.game,i=[],o=!r.minigame.wallCollision,s=function(e,s){var l=a[e];if(l.respawning)return Date.now()>l.respawntime&&(l.dead=!1,l.respawning=!1),i.push(l),"continue";if(l.dead){if("survival"===r.minigame.gamemode)return l.body=[],i.push(l),"continue";if("race"===r.minigame.gamemode){var c=n.canvas.width-Ra,m=function(e,a){return{x:Math.round(Math.random()*(a-14*Ma)/Ma)*Ma+4*Ma,y:Math.round(Math.random()*(e-2*Ma)/Ma)*Ma+2*Ma}}(n.canvas.height-Ra,c);return l.body=[{x:m.x,y:m.y},{x:m.x-Ra,y:m.y},{x:m.x-2*Ra,y:m.y},{x:m.x-3*Ra,y:m.y}],l.direction="right",l.respawning=!0,l.respawntime=Date.now()+1e3*n.snake.respawntime,i.push(l),"continue"}}var u,d,h={up:{x:l.body[0].x,y:o&&0===l.body[0].y?xe.height-Ra:l.body[0].y-Ra},down:{x:l.body[0].x,y:o&&l.body[0].y>=xe.height-Ra?0:l.body[0].y+Ra},right:{x:o&&l.body[0].x>=xe.width-Ra?0:l.body[0].x+Ra,y:l.body[0].y},left:{x:o&&0===l.body[0].x?xe.width-Ra:l.body[0].x-Ra,y:l.body[0].y}},p=l.moves.shift();u=p,d=l.direction,u&&{left:"right",right:"left",up:"down",down:"up"}[u]!==d&&(l.direction=p);var g=h[l.direction];l.body.unshift(g);var v=t.find(function(e){return e.active&&l.body[0].x===e.x&&l.body[0].y===e.y});v?(l.score+=10,v.active=!1):l.body.pop(),i.push(l)},l=0,c=a.length;l<c;l++)s(l);this.setState(function(e){return{snakes:i,foods:t,ticks:e.ticks+1}}),this.drawSnakes(i)}},{key:"drawSnakes",value:function(e){var a=this.state,t=a.settings,n=a.ticks;Ce.globalCompositeOperation="multiply",Ce.strokestyle=t.snake.border;for(var r=0,i=e.length;r<i;r++){var o=e[r];o.respawning&&n%2===0?Ce.fillStyle=t.canvas.background:Ce.fillStyle=o.color;for(var s=0,l=o.body.length;s<l;s++){var c=o.body[s];Ce.fillRect(c.x,c.y,Ra,Ra),Ce.strokeRect(c.x,c.y,Ra,Ra)}}}},{key:"generateFoods",value:function(){for(var e=this.state.foods,a=0,t=e.length;a<t;a++){var n=e[a];n.active||(n=this.generateFood()),this.drawFood(n),e[a]=n}this.setState(function(){return{foods:e}})}},{key:"generateFood",value:function(){var e=this.state,a=e.snakes,t=e.settings,n=t.canvas.width-Ra,r=t.canvas.height-Ra,i=Math.round(Math.random()*n/Ra)*Ra,o=Math.round(Math.random()*r/Ra)*Ra;return a.some(function(e){return e.body.some(function(e){return e.x===i&&e.y===o})})?this.generateFood():{active:!0,x:i,y:o}}},{key:"drawFood",value:function(e){var a=this.state.settings;Ce.fillStyle=a.food.background,Ce.strokestyle=a.food.border,Ce.fillRect(e.x,e.y,Ra,Ra),Ce.strokeRect(e.x,e.y,Ra,Ra)}},{key:"detectCollisions",value:function(){for(var e=this.state.snakes,a=this.props.game.minigame,t=0;t<e.length;t++)e[t].dead||(Qa(e[t])&&(e[t].dead=!0),a.wallCollision&&Ba(e[t].body[0],xe.height,xe.width)&&(e[t].dead=!0));a.opponentCollision&&(e=function(e,a){for(var t=0,n=e.length;t<n;t++)if(!e[t].dead)for(var r=e[t],i=0;i<n;i++)if(i!==t&&!e[i].dead)for(var o=e[i],s=0,l=o.body.length;s<l;s++)o.body[s].x===r.body[0].x&&o.body[s].y===r.body[0].y&&(0===s?(r.dead=!0,o.dead=!0):a?1===s?o.dead=!0:(o.body.length=s,l=s):r.dead=!0);return e}(e,a.eatOpponents)),this.setState(function(){return{snakes:e}})}},{key:"renderOverlay",value:function(){var e=this.state,a=e.ticks,t=e.snakes,n=e.winners,r=this.props.game;this.setState(function(){return{overlay:!0}}),Ce.globalAlpha=.4,Ce.textAlign="center",Ce.font="100px roboto",Ce.fillStyle="#000000",1===a?Ce.fillText("Click to start",xe.width/2,xe.height/2):n.length>0?Ce.fillText("Game over",xe.width/2,xe.height/2):Ce.fillText("Paused",xe.width/2,xe.height/2),Ce.globalAlpha=1,Ce.font="20px roboto";for(var i=0;i<t.length;i++){var o=t[i];if(o.body[0]){var s=Math.max(Ra,o.body[0].x),l=Math.max(Ra,o.body[0].y);s>=xe.width&&(s=xe.width-2*Ra),l>=xe.height&&(l=xe.height-2*Ra);var c=1===o.playerKeys.length?r.players[o.playerKeys[0]].name:o.name;Ce.fillStyle=o.color;var m={right:{textAlign:"center",yPos:l-Ra/5},left:{textAlign:"start",yPos:l-Ra/5},up:{textAlign:"start",yPos:l-Ra/5},down:{textAlign:"start",yPos:l+2*Ra}};Ce.textAlign=m[o.direction].textAlign,Ce.fillText(c,s,m[o.direction].yPos)}}}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container",id:"snakeboard",role:"button",tabIndex:0,onClick:this.togglePausGame,onKeyDown:this.togglePausGame},r.a.createElement("canvas",null))}}]),a}(n.Component),Ka=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"tetris.js")}}]),a}(n.Component),Ua=window.innerWidth,Va=window.innerHeight,Ja=!0,Ya={x:400,y:300},Za=[],Xa=[],$a=400,et=new Image;function at(){Ua!=window.innerWidth&&(Wa.width=Ua=window.innerWidth),Va!=window.innerHeight&&(Wa.height=Va=window.innerHeight),La.save(),Ja?(Ja=!1,La.globalAlpha=1):La.globalAlpha=.2,La.drawImage(et,0,0,Ua,Va),La.restore();for(var e=[],a=0;a<Xa.length;a++){Xa[a].update(),Xa[a].render(La);var t=Math.sqrt(Math.pow(Ya.x-Xa[a].pos.x,2)+Math.pow(Ya.y-Xa[a].pos.y,2)),n=Xa[a].pos.y<2*Va/3&&100*Math.random()<=1;Xa[a].pos.y<Va/5||Xa[a].vel.y>=0||t<50||n?Xa[a].explode():e.push(Xa[a])}Xa=e;for(var r=[],i=0;i<Za.length;i++)Za[i].update(),Za[i].exists()&&(Za[i].render(La),r.push(Za[i]));for(Za=r;Za.length>$a;)Za.shift()}function tt(e){this.pos={x:e?e.x:0,y:e?e.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}function nt(e){tt.apply(this,[{x:e,y:Va}]),this.explosionColor=0}function rt(){!function(e){if(Xa.length<10){var a=new nt(e);a.explosionColor=10*Math.floor(360*Math.random()/10),a.vel.y=-3*Math.random()-4,a.vel.x=6*Math.random()-3,a.size=8,a.shrink=.999,a.gravity=.01,Xa.push(a)}}(Ya.x)}et.src="https://www.golfworldtravel.se/wp-content/uploads/2013/12/Arabella-Sheraton-Golf-4.jpg",tt.prototype.update=function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade},tt.prototype.render=function(e){if(this.exists()){e.save(),e.globalCompositeOperation="lighter";var a=this.pos.x,t=this.pos.y,n=this.size/2,r=e.createRadialGradient(a,t,.1,a,t,n);r.addColorStop(.1,"rgba(255,255,255,".concat(this.alpha,")")),r.addColorStop(.8,"hsla(".concat(this.color,", 100%, 50%, ").concat(this.alpha,")")),r.addColorStop(1,"hsla(".concat(this.color,", 100%, 50%, 0.1)")),e.fillStyle=r,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size:this.size,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()}},tt.prototype.exists=function(){return this.alpha>=.1&&this.size>=1},nt.prototype=new tt,nt.prototype.constructor=nt,nt.prototype.explode=function(){for(var e=10*Math.random()+80,a=0;a<e;a++){var t=new tt(this.pos),n=Math.random()*Math.PI*2,r=15*Math.cos(Math.random()*Math.PI/2);t.vel.x=Math.cos(n)*r,t.vel.y=Math.sin(n)*r,t.size=10,t.gravity=.2,t.resistance=.92,t.shrink=.05*Math.random()+.93,t.flick=!0,t.color=this.explosionColor,Za.push(t)}},nt.prototype.render=function(e){if(this.exists()){e.save(),e.globalCompositeOperation="lighter";var a=this.pos.x,t=this.pos.y,n=this.size/2,r=e.createRadialGradient(a,t,.1,a,t,n);r.addColorStop(.1,"rgba(255, 255, 255 ,".concat(this.alpha,")")),r.addColorStop(1,"rgba(0, 0, 0, ".concat(this.alpha,")")),e.fillStyle=r,e.beginPath(),e.arc(this.pos.x,this.pos.y,this.flick?Math.random()*this.size/2+this.size/2:this.size,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()}};var it=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).replayGame=t.replayGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){Wa=document.getElementById("fireworkscanvas"),La=Wa.getContext("2d"),Wa.width=window.innerWidth,Wa.height=window.innerHeight,setInterval(rt,800),setInterval(at,20)}},{key:"replayGame",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props,a=e.gameFunc,t=e.game,n=Wa?Wa.height:window.innerHeight,i=Wa?Wa.width:window.innerWidth,o=t.players[t.minigame.leaderboard[0].playerKey],s=t.minigame.leaderboard[0].totalScore;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("canvas",{id:"fireworkscanvas"}),r.a.createElement("div",{style:{position:"absolute",top:0,marginTop:n/2,marginLeft:i/2}},r.a.createElement(x.b,{variant:"h2",style:{color:"white"}},"".concat(o.name," vinner med ").concat(s," po\xe4ng"))),r.a.createElement("div",{style:{position:"absolute",top:0,marginTop:n}},r.a.createElement("div",null,r.a.createElement(I.a,{onClick:this.replayGame},"Replay game"),r.a.createElement(I.a,{onClick:a.restart},"Re-host game"),r.a.createElement(I.a,{onClick:a.quit},"Quit game"),r.a.createElement(I.a,{onClick:function(){return alert("show results")}},"Show results"),r.a.createElement(I.a,{onClick:function(){return alert("start survey")}},"Start survey"),r.a.createElement(I.a,null,r.a.createElement(b.a,{to:"/create"},"Create new game")))))}}]),a}(n.Component),ot=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.game;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,null,"hur seer detta ut konstigt med dollarsign?HostEnd toggleheader()".concat(e.title)))}}]),a}(n.PureComponent);function st(e,a){var t=a;if(t<2)return[e];var n,r=e.length,i=[],o=0;if(r%t===0)for(n=Math.floor(r/t);o<r;)i.push(e.slice(o,o+=n));else for(;o<r;)n=Math.ceil((r-o)/t),t-=1,i.push(e.slice(o,o+=n));return i}var lt=["#F44336","#9C27B0","#2196F3","#4CAF50","#FFEB3B","#FF9800","#607D8B","#795548","#E91E63","#3F51B5","#673AB7","#00BCD4","#03A9F4","#8BC34A","#CDDC39","#009688","#FFC107","#FF5722"],ct=["Stan","Jane","Sara","Dan","Lisa","Joe","Rose","Ray","Lyra","Sam","Lucy","Ben","Noa","Mark","Eve","Ned","Ann","Todd"],mt=20,ut=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).startCounter(),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){0===(a-=1)&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){var e,a=this.props,t=a.game,n=a.gameFunc,r={classic:function(e){for(var a=Object.keys(e),t=[],n=0;n<a.length;n++){var r={playerKeys:[e[a[n]].key],actions:["up","down","right","left"],score:0,color:lt[n%lt.length],name:ct[n%ct.length],id:n};t.push(r)}return t}(t.players),team:function(e){for(var a=Object.keys(e),t=[],n=0;n<a.length;n++){var r={playerKeys:[e[a[n]].key],direction:"right",id:n,score:0,body:[{x:300,y:100},{x:300-mt,y:100},{x:300-2*mt,y:100},{x:300-3*mt,y:100}]};t.push(r)}return t}(t.players),coop:function(e){var a=[],t={playerKeys:Object.keys(e),direction:"right",actions:["up","down","right","left"],score:0,color:lt[Math.floor(Math.random()*lt.length)],name:ct[Math.floor(Math.random()*ct.length)],id:0,body:[{x:300,y:90},{x:300-mt,y:90},{x:300-2*mt,y:90},{x:300-3*mt,y:90}]};return a.push(t),a}(t.players)};e=r[t.minigame.multiplayerMode];for(var i=0;i<e.length;i++)for(var o=st(e[i].actions,e[i].playerKeys.length),s=0;s<e[i].playerKeys.length;s++){var l=t.players[e[i].playerKeys[s]];l.snakeId=e[i].id,l.controlActions=o[s]}t.minigame.snakes=e,t.phase="gameplay",n.update(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Starting game"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component),dt=t(53),ht=t(49),pt=t(327),gt=t.n(pt),vt=t(328),ft=t.n(vt),bt=t(329),yt=t.n(bt),Et=t(330),wt=t.n(Et),kt=t(331),Ot=t.n(kt),jt=t(332),Ct=t.n(jt),xt=t(333),St=t.n(xt),qt=t(334),Pt=t.n(qt),Nt=t(335),zt=t.n(Nt),Gt=t(336),Tt=t.n(Gt),Mt=t(337),At=t(338),It=t.n(At),Ft=10,_t=7,Dt=10,Qt=3,Bt=12,Wt="green",Lt=[{name:"Albatross",score:-3},{name:"Eagle",score:-2},{name:"Birdie",score:-1},{name:"Par",score:0},{name:"Bogey",score:1},{name:"Double bogey",score:2},{name:"Triple bogey",score:3},{name:"Quadruple bogey",score:4}],Rt=[{name:"Wood",type:"wood",id:0,loft:22,powerFactor:3.8,max:800},{name:"Hybrid",type:"iron",id:1,loft:26,powerFactor:3.6,max:800},{name:"3 Iron",type:"iron",id:2,loft:31,powerFactor:3.2,max:700},{name:"4 Iron",type:"iron",id:3,loft:34,powerFactor:3.15,max:700},{name:"5 Iron",type:"iron",id:4,loft:37,powerFactor:3.1,max:700},{name:"6 Iron",type:"iron",id:5,loft:40,powerFactor:3.05,max:700},{name:"7 Iron",type:"iron",id:6,loft:43,powerFactor:3,max:700},{name:"8 Iron",type:"iron",id:7,loft:46,powerFactor:2.95,max:700},{name:"9 Iron",type:"iron",id:8,loft:49,powerFactor:2.9,max:700},{name:"Wedge",type:"iron",id:9,loft:62,powerFactor:2.75,max:700},{name:"Chipper",type:"iron",id:10,loft:78,powerFactor:2.6,max:700},{name:"Putter",type:"putt",id:11,loft:1,powerFactor:1.6,max:400}],Ht=["orange","brown","gray"];function Kt(e,a){return Math.floor(Math.random()*(a-e+1))+e}var Ut,Vt,Jt=new ht.Material,Yt=new ht.Material,Zt=new ht.Material,Xt=new ht.ContactMaterial(Jt,Yt,{friction:1,restitution:.5}),$t=new ht.ContactMaterial(Jt,Zt,{friction:.1,restitution:0,relaxation:8}),en=Math.pow(2,1),an=Math.pow(2,2);function tn(){var e=new ht.World({gravity:[0,60]});return e.sleepMode=ht.World.BODY_SLEEPING,e.addContactMaterial(Xt),e.addContactMaterial($t),e}function nn(e){var a=new ht.Circle({radius:Qt,collisionGroup:en,collisionMask:an});a.material=Jt;var t=new ht.Body({mass:1,position:e});return t.addShape(a),t.angularDamping=.8,t.damping=.18,t.sleepTimeLimit=1,t.sleepSpeedLimit=2,t}function rn(e,a){return e>a?Math.floor((e-a)/4):Math.floor((a-e)/4)}function on(e){var a=new Audio,t=document.createElement("source");return t.type="audio/mpeg",t.src=e,a.appendChild(t),a}function sn(e,a){var t=(90-e.loft)/90,n=e.loft/90,r=a;return{x:Math.min(Math.ceil(r*t*e.powerFactor),e.max),y:Math.min(Math.ceil(r*n*e.powerFactor),e.max)}}function ln(e){var a=e.width;if(0!==e.points[0][0])throw new Error("invalid points: first x !== 0");if(e.points[e.points.length-1][0]!==a)throw new Error("invalid points: last x !== WIDTH (".concat(a,")"));var t=e.points.findIndex(function(a){return a[0]>e.hole[0]}),n=e.hole[0]-Dt/2,r=e.hole[0]+Dt/2;if(n<=e.points[t-1][0])throw new Error("invalid points: hole x1 cannot be <= the previous x");if(r>=e.points[t][0])throw new Error("invalid points: hole x2 cannot be >= the previous x");var i=[[e.hole[0]-Dt/2,e.hole[1]],[e.hole[0]-Dt/2,e.hole[1]+_t],[e.hole[0],e.hole[1]+Ft],[e.hole[0]+Dt/2,e.hole[1]+_t],[e.hole[0]+Dt/2,e.hole[1]]],o=e.points.slice(0,t).concat(i).concat(e.points.slice(t));return Object(dt.a)({},e,{points:o})}function cn(e){var a=e.height,t=e.width,n=e.points.filter(function(a){return a[0]<e.hole[0]}),r=e.points.filter(function(a){return a[0]>e.hole[0]}),i=n.concat([[n[n.length-1][0],a],[0,a]]),o=[[e.hole[0]-Dt/2,e.hole[1]+_t],[e.hole[0],e.hole[1]+Ft],[e.hole[0]+Dt/2,e.hole[1]+_t],[e.hole[0]+Dt/2,a],[e.hole[0]-Dt/2,a]],s=r.concat([[t,a],[r[0][0],a]]);return[i,o,s].map(function(e){var a=new ht.Body({mass:0});a.fromPolygon(e);var t=!0,n=!1,r=void 0;try{for(var i,s=a.shapes[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var l=i.value;l.material=e===o?Zt:Yt,l.collisionGroup=an,l.collisionMask=en}}catch(c){n=!0,r=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return a})}function mn(e){var a=new ht.Box({width:Dt,height:Ft});a.sensor=!0,a.collisionGroup=an,a.collisionMask=en;var t=new ht.Body({position:[e[0],e[1]+Math.ceil(1.4*Ft)]});return t.damping=0,t.addShape(a),t}function un(e,a){for(var t=[],n=e;n>0;){var r=50;n<r&&(r=n);var i=Kt(a,r);n-i<a&&(i=n),t.push(i),n-=i}return function(e){for(var a=e.length;a;a-=1){var t=Math.floor(Math.random()*a),n=e[a-1];e[a-1]=e[t],e[t]=n}}(t),t}function dn(e,a){var t={3:1===e?25:25-2*e,4:1===e?25:25-2*e,5:1===e?25:25-2*e};return Math.abs(Math.round(t[a.par]))}function hn(e,a){return Math.round((a.time/1e3*1.5-e)/10)}function pn(e,a,t){if(t)return{points:[[0,400],[e,400]],hole:[e/1.5,400],spawn:[100,400],color:"brown",par:4,height:a,time:2e4,width:e};var n,r=un(e,12),i=r.length,o=Kt(2,4);if(e>1e3){var s=Kt(1,18);n=s>8?4:s>4?5:3}else n=5;for(var l,c,m,u,d={hole:{5:i-Kt(2,Math.floor(i/4)),4:i-Kt(Math.floor(i/4),Math.floor(i/2.5)),3:i-Kt(Math.floor(i/2.5),Math.floor(i/2))},time:{5:1e5,4:8e4,3:6e4},flatRatio:{5:40,4:30,3:20}},h=d.hole[n],p=d.time[n],g=[],v=Math.floor(.4*a),f=v+Math.min(400,.5*a),b=0;b<=i;b++){var y=r[b-1],E=void 0,w=void 0;if((E=0===b?0:g[b-1][0]+y)>e&&(E=e),0===b)w=Kt(a-150,a-20);else{var k=g[b-1][1];if(Kt(1,d.flatRatio[n])>10)w=k;else{var O=k-40,j=k+40;O<v&&(j-=O-v,O=v),j>f&&(O-=j-f,j=f),w=Kt(O,j)}}b===o&&(l=E-Math.round(y/2),c=w=g[b-1][1]),b===h&&(m=E-Math.round(y/2),u=w=g[b-1][1]),g.push([E,w])}return{points:g,hole:[m,u],spawn:[l,c],color:Object(Mt.sample)(Ht),par:n,time:p,height:a,width:e}}var gn;var vn=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))};var n=Math.floor(window.innerHeight-160),r=Math.floor(window.innerWidth),i={wood:[{audio:on(gt.a),minpower:400},{audio:on(ft.a),minpower:300},{audio:on(yt.a),minpower:200}],golfclap:{audio:on(Pt.a)},iron:[{audio:on(wt.a),minpower:350},{audio:on(Ot.a),minpower:250},{audio:on(Ct.a),minpower:150}],putt:[{audio:on(zt.a),minpower:8}],ballInHole:{audio:on(Tt.a)},countdown:{audio:on(St.a)}};return t.state={levelData:null,world:null,level:null,startTime:null,expTime:null,holeSensor:null,time:0,canvasHeight:n,canvasWidth:r,leaderId:null,matchEndTime:null,testacceleration:195,testClubIndex:2,testBallIndex:0,balls:null,nextLevelTimer:null,scorers:[],totalScores:[],currentlevelScores:[],leaderboard:[],soundEffects:i},t.init=t.init.bind(Object(d.a)(Object(d.a)(t))),t.ensurePlayersInBounds=t.ensurePlayersInBounds.bind(Object(d.a)(Object(d.a)(t))),t.swing=t.swing.bind(Object(d.a)(Object(d.a)(t))),t.drawGround=t.drawGround.bind(Object(d.a)(Object(d.a)(t))),t.drawLevelCompleteHud=t.drawLevelCompleteHud.bind(Object(d.a)(Object(d.a)(t))),t.drawPlayHud=t.drawPlayHud.bind(Object(d.a)(Object(d.a)(t))),t.renderFrame=t.renderFrame.bind(Object(d.a)(Object(d.a)(t))),t.animate=t.animate.bind(Object(d.a)(Object(d.a)(t))),t.testSwing=t.testSwing.bind(Object(d.a)(Object(d.a)(t))),t.syncPlayersObjectToFirebase=t.syncPlayersObjectToFirebase.bind(Object(d.a)(Object(d.a)(t))),t.initControllerListener=t.initControllerListener.bind(Object(d.a)(Object(d.a)(t))),t.isLevelCompleted=t.isLevelCompleted.bind(Object(d.a)(Object(d.a)(t))),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t.distributeScore=t.distributeScore.bind(Object(d.a)(Object(d.a)(t))),t.isLoadNextLevel=t.isLoadNextLevel.bind(Object(d.a)(Object(d.a)(t))),t.loadNextLevel=t.loadNextLevel.bind(Object(d.a)(Object(d.a)(t))),t.saveGame=t.saveGame.bind(Object(d.a)(Object(d.a)(t))),t.setEventHandlers=t.setEventHandlers.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"setEventHandlers",value:function(e){var a=this;e.on("beginContact",function(e){var t=a.state,n=t.balls,r=t.holeSensor,i=t.startTime,o=t.expTime,s=t.scorers,l=t.soundEffects,c=t.level,m=a.props.game,u=Object.values(m.players);if(e.bodyA===r||e.bodyB===r){var d=e.bodyA===r?e.bodyB:e.bodyA;if(!d.scored){var h=d.playerKey;l.ballInHole.audio.currentTime=0,l.ballInHole.audio.play(),d.scored=!0;var p=o;m.minigame.speedmode&&o>Date.now()+3e4&&(p=o-15e3);var g=Math.floor((Date.now()-i)/1e3),v={playerKey:h,time:g,strokes:d.strokes,hole:m.minigame.round,par:c.par};s.push(v),a.setState(function(){return{balls:n,expTime:p,scorers:s}});var f=u.map(function(e){return e.key===h?Object(dt.a)({},e,{state:"SCORED",scoreTime:g}):e});a.syncPlayersToFirebase(f)}}}),e.on("postStep",function(e){var t=a.state,n=t.balls,r=t.level,i=a.props.game,o=Object.values(i.players),s=n.filter(function(e){return 0===e.velocity[0]&&0===e.velocity[1]});if(0!==s.length){var l=o.filter(function(e){return"MOVING"===e.state&&s.some(function(a){return e.key===a.playerKey})});if(0!==l.length){var c=o.map(function(e,a){return l.some(function(a){return a.key===e.key})?Object(dt.a)({},e,{state:"STILL",distance:rn(r.hole[0],n[e.ballIndex].interpolatedPosition[0])}):e});a.syncPlayersToFirebase(c)}}})}},{key:"ensurePlayersInBounds",value:function(){var e=this.state,a=e.balls,t=e.canvasWidth,n=(e.level,a.map(function(e){var a=e;return(e.interpolatedPosition[0]<0||e.interpolatedPosition[0]>t)&&(a.position=[e.lastPos[0],e.lastPos[1]-20],a.velocity=[0,0]),a}));this.setState(function(){return{balls:n}})}},{key:"drawBalls",value:function(){for(var e,a,t,n,r=this.state.balls,i=this.props.game,o=Object.values(i.players),s=o.length,l=0;l<s;l++){var c=o[l],m=r[c.ballIndex].interpolatedPosition;e=m[0],a=m[1],t=c.color,n="gray",c.state,Ut.lineWidth=1,Ut.fillStyle=t,Ut.strokeStyle=n,Ut.beginPath(),Ut.arc(e,a,Qt,0,2*Math.PI),Ut.fill(),Ut.closePath(),Ut.beginPath(),Ut.arc(e,a,Qt-Ut.lineWidth/2,0,2*Math.PI),Ut.stroke(),Ut.closePath()}}},{key:"drawGround",value:function(){var e=this.state,a=e.level,t=e.canvasHeight,n=e.canvasWidth,r=a.points;Ut.fillStyle=a.color;Ut.lineWidth=3,Ut.beginPath();var i=r[0];Ut.moveTo(i[0],i[1]),r.slice(1).forEach(function(e){Ut.lineTo(e[0],e[1])}),Ut.lineTo(n+3,r[r.length-1][1]),Ut.lineTo(n+3,t+3),Ut.lineTo(-3,t+3),Ut.lineTo(-3,r[0][1]),Ut.strokeStyle=Wt,Ut.stroke(),Ut.fill(),Ut.closePath()}},{key:"drawLevelCompleteHud",value:function(){var e=this.state,a=e.nextLevelTimer,t=(e.level,e.canvasHeight,e.canvasWidth),n=e.leaderboard,r=this.props.game;Ut.font="24px roboto",Ut.fillStyle="#000000",Ut.fillText("Level completed!",15,24),Ut.font="20px roboto",Ut.textAlign="right",Ut.fillText("pin: ".concat(r.gameId),t-20,24),Ut.textAlign="left";var i=Math.floor((a-Date.now())/1e3);Ut.fillText(i,t/2,24);for(var o=0;o<n.length;o++){var s=n[o];Ut.fillText("".concat(r.players[s.playerKey].name,": ").concat(s.totalScore," po\xe4ng"),t/2,60+30*o)}}},{key:"drawPlayHud",value:function(){var e=this.state,a=e.expTime,t=e.level,n=(e.canvasHeight,e.canvasWidth),r=e.soundEffects,i=e.scorers,o=this.props.game;Ut.font="24px roboto",Ut.fillStyle="#000000",Ut.fillText("Hole ".concat(o.minigame.round," Par ").concat(t.par),15,24),Ut.font="20px roboto",Ut.textAlign="right",Ut.fillText("pin: ".concat(o.gameId),n-30,24),Ut.textAlign="left";var s=Math.floor((a-Date.now())/1e3);10===s&&r.countdown.audio.play(),Ut.textAlign="center",Ut.fillText(s,n/2,24),Ut.textAlign="left";i.filter(function(e){return e.hole===o.minigame.round}).slice(0,3).forEach(function(e,a){return Ut.fillText("".concat(o.players[e.playerKey].name," gjorde ").concat(function(e,a){if(1===e)return"Hole in one!";var t=e-a,n=Lt.find(function(e){return e.score===t});return n?n.name:"".concat(t," over par")}(e.strokes,e.par)," efter ").concat(e.time," sekunder"),n/2,40*(1+a))})}},{key:"testSwing",value:function(){var e=this.state,a=e.testacceleration,t=e.testClubIndex,n=e.testBallIndex,r=sn(Rt[t],a);this.swing(r,n,!0)}},{key:"swing",value:function(e,a,t){var n=this.state,r=n.balls,i=n.holeSensor,o=n.soundEffects,s=this.props.game.players,l=function(e){var a=e.y/(e.x+e.y)*90;return a<5?"putt":a<Rt.find(function(e){return"iron"===e.type}).loft-1?"wood":"iron"}(e),c=e.x+e.y,m=o[l].find(function(e){return c>e.minpower});m&&(m.audio.currentTime=0,m.audio.play());var u=r.find(function(e){return e.ballIndex===a});s[u.playerKey].state="MOVING";var d=i.interpolatedPosition[0],h=u.interpolatedPosition[0],p=Object(dt.a)({},e,{y:-e.y});h>d&&(p.x=-p.x),this.syncPlayersObjectToFirebase(s),u.velocity[0]=p.x,u.velocity[1]=p.y,u.strokes+=1,u.lastPos=Object(z.a)(u.position),this.setState(function(){return{balls:r}})}},{key:"createLevel",value:function(){var e=this.state;e.canvasHeight,e.canvasWidth,this.props.game}},{key:"init",value:function(){var e=this,a=this.props.game,t=this.state,n=t.canvasHeight,r=t.canvasWidth;Vt=document.getElementById("golfcanvas"),(Ut=Vt.getContext("2d")).lineWidth=5;var i=ln(pn(r,n,!1)),o=tn(),s=cn(i),l=mn(i.hole),c=!0,m=!1,u=void 0;try{for(var d,h=s[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;o.addBody(p)}}catch(j){m=!0,u=j}finally{try{c||null==h.return||h.return()}finally{if(m)throw u}}o.addBody(l);for(var g,v=Object.keys(a.players),f=v.length,b=[],y=[],E=function(e){for(var a=[],t=Math.random(),n=0;n<e;n++){t+=.618033988749895,t%=1;var r=It.a.fromRatio({h:t,s:.5,v:.95});a.push(r.toHexString())}return a}(f),w=0;w<f;w++){var k=nn([(g=i.spawn)[0],g[1]-Qt]);k.playerKey=v[w],k.ballIndex=w,k.scored=!1,k.strokes=0,k.lastPos=Object(z.a)(k.position),o.addBody(k);var O=Object.assign({ballIndex:w,key:v[w],color:E[w],state:"STILL",distance:rn(i.hole[0],i.spawn[0]),score:0},a.players[v[w]]);y.push(k),b.push(O)}this.setState(function(){return{world:o,level:i,balls:y,holeSensor:l,startTime:Date.now(),expTime:Date.now()+i.time}}),b.forEach(function(a){return e.initControllerListener(a)}),this.setEventHandlers(o),this.syncToFirebase(b,i),requestAnimationFrame(this.animate)}},{key:"syncPlayersToFirebase",value:function(e){var a=this.props,t=a.game;a.gameFunc;t.players=e.reduce(function(e,a){var t=e;return t[a.key]=a,t},t.players),this.saveGame(t)}},{key:"syncPlayersObjectToFirebase",value:function(e){var a=this.props,t=a.game;a.gameFunc;t.players=e,this.saveGame(t)}},{key:"syncToFirebase",value:function(e,a){var t=this.props,n=t.game;t.gameFunc;n.players=e.reduce(function(e,a){var t=e;return t[a.key]=a,t},n.players),n.status="IN_PROGRESS",n.minigame.levelColor=a.color,n.minigame.round=1,this.saveGame(n)}},{key:"saveGame",value:function(e){this.props.gameFunc.update(e)}},{key:"nextPhase",value:function(){var e=this.props,a=e.game,t=(e.gameFunc,this.state),n=t.soundEffects,r=t.leaderboard;"".concat(a.minigame.round)===a.minigame.holes?(a.minigame.leaderboard=r.map(function(e){return Object(dt.a)({},e,{currentRoundScore:null})}),a.phase="final_result"):(n.golfclap.audio.play(),a.phase="level_completed",this.setState(function(){return{nextLevelTimer:Date.now()+1e4}})),this.saveGame(a)}},{key:"animate",value:function(e){var a=this.state.world,t=this.props.game.phase;requestAnimationFrame(this.animate);var n=gn?(e-gn)/400:0;a.step(1/60,n,10),gn=e,"gameplay"===t?(this.ensurePlayersInBounds(),this.renderFrame(),this.drawPlayHud(),this.isLevelCompleted()&&(this.distributeScore(),this.nextPhase())):"level_completed"===t&&(this.renderFrame(),this.drawLevelCompleteHud(),this.isLoadNextLevel()&&this.loadNextLevel())}},{key:"loadNextLevel",value:function(){var e=this.props,a=e.game,t=(e.gameFunc,this.state),n=t.balls,r=t.canvasHeight,i=ln(pn(t.canvasWidth,r,!1)),o=tn(),s=cn(i),l=mn(i.hole),c=!0,m=!1,u=void 0;try{for(var d,h=s[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var p=d.value;o.addBody(p)}}catch(v){m=!0,u=v}finally{try{c||null==h.return||h.return()}finally{if(m)throw u}}o.addBody(l),n.forEach(function(e){e.position=[i.spawn[0],i.spawn[1]-Qt],e.velocity=[0,0],e.scored=!1,e.strokes=0,e.lastPos=Object(z.a)(e.position),o.addBody(e)}),this.setEventHandlers(o);var g=Object.values(a.players).map(function(e){return Object(dt.a)({},e,{state:"STILL",distance:rn(i.hole[0],i.spawn[0])})}).reduce(function(e,a){var t=e;return t[a.key]=a,t},a.players);this.setState(function(){return{world:o,level:i,balls:n,holeSensor:l,startTime:Date.now(),expTime:Date.now()+i.time}}),a.phase="gameplay",a.players=g,a.minigame.round+=1,this.saveGame(a)}},{key:"distributeScore",value:function(){var e,a=this.props.game,t=this.state,n=t.scorers,r=(t.leaderboard,t.level),i=Object(z.a)(n),o=Object.values(a.players),s=n.filter(function(e){return e.hole===a.minigame.round});switch((!s||s.length<o.length)&&o.forEach(function(e){if(!s||!s.some(function(a){return a.playerKey===e.key})){var t={playerKey:e.key,par:r.par,strokes:12,time:1.5*r.time/1e3,hole:a.minigame.round};i.push(t)}}),a.minigame.scoremode){case"strokes":e=o.map(function(e){var t=i.filter(function(a){return a.playerKey===e.key});return{currentRoundScore:dn(t.find(function(e){return e.hole===a.minigame.round}).strokes,r),totalScore:t.reduce(function(e,a){return e+dn(a.strokes,r)},0),playerKey:e.key}}).sort(function(e,a){return a.totalScore-e.totalScore});break;case"time":e=o.map(function(e){var t=i.filter(function(a){return a.playerKey===e.key});return{currentRoundScore:hn(t.find(function(e){return e.hole===a.minigame.round}).time,r),totalScore:t.reduce(function(e,a){return e+hn(a.time,r)},0),playerKey:e.key}}).sort(function(e,a){return a.totalScore-e.totalScore});break;case"compedetive":e=o.map(function(e){var t=i.filter(function(a){return a.playerKey===e.key}),n=t.find(function(e){return e.hole===a.minigame.round});return{currentRoundScore:n.strokes-n.par,totalScore:t.reduce(function(e,a){return e+(a.strokes-n.par)},0),playerKey:e.key}}).sort(function(e,a){return e.totalScore-a.totalScore})}this.setState(function(){return{leaderboard:e,scorers:i}})}},{key:"initControllerListener",value:function(e){var a=this.props.game,t=(this.state.balls,f.database().ref("/games/".concat(a.key,"/players/").concat(e.key,"/swing"))),n=this;t.on("value",function(a){var t=n.props.game.players[e.key],r=a.val();r?n.swing(r,t.ballIndex):console.log("move error")})}},{key:"isLoadNextLevel",value:function(){var e=this.state.nextLevelTimer;return Date.now()>e}},{key:"isLevelCompleted",value:function(){var e=this.state,a=e.expTime,t=e.balls;return Date.now()>a||!t.some(function(e){return!e.scored})}},{key:"renderFrame",value:function(){var e=this.state,a=e.canvasHeight,t=e.canvasWidth;Ut.clearRect(0,0,t,a),Ut.save(),this.drawGround(),this.drawBalls()}},{key:"render",value:function(){var e=this.state,a=e.canvasHeight,t=e.canvasWidth,n=e.testClubIndex,i=e.testacceleration,o=e.testBallIndex,s=e.balls;return r.a.createElement("div",{className:"phase-container",id:"golfboard"},r.a.createElement("canvas",{id:"golfcanvas",height:a,width:t}),r.a.createElement("button",{type:"button",onClick:this.testSwing},"swing"),r.a.createElement(W.a,null,r.a.createElement(_.a,{htmlFor:"clubc-required"},"Club"),r.a.createElement(R.a,{value:n||0,onChange:this.handleChangeSelect,name:"testClubIndex",inputProps:{id:"club-required"}},Rt.map(function(e,a){return r.a.createElement(Q.a,{key:e.id,value:e.id},e.name)}))),r.a.createElement(M.a,{label:"Acceleration",name:"testacceleration",type:"number",value:i,margin:"normal",onChange:this.handleChange("testacceleration")}),s&&r.a.createElement(W.a,null,r.a.createElement(_.a,{htmlFor:"ball-required"},"Ball"),r.a.createElement(R.a,{value:o||0,onChange:this.handleChangeSelect,name:"testBallIndex",inputProps:{id:"ball-required"}},s.map(function(e,a){return r.a.createElement(Q.a,{key:e.ballIndex,value:e.ballIndex},e.ballIndex)}))))}}]),a}(n.Component),fn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).startCounter(),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){0===(a-=1)&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){var e=this.props,a=e.game,t=e.gameFunc;a.phase="gameplay",t.update(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Starting game"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component),bn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a=t.props,n=a.game,r=a.gameFunc,i=t.state,o={surveyPlayers:i.surveyPlayers,nameGenerator:i.nameGenerator,multiplayerMode:e,wallCollision:i.wallCollision,opponentCollision:i.opponentCollision,eatOpponents:i.eatOpponents,racetarget:i.racetarget,difficulty:i.difficulty,gamemode:i.gamemode};n.minigame=o,n.phase="connection",n.status="IN_PROGRESS",r.update(n)},t.state={surveyPlayers:!1,nameGenerator:!1,gamemode:e.game.minigame.gamemode,racetarget:e.game.minigame.racetarget,opponentCollision:e.game.minigame.opponentCollision,eatOpponents:e.game.minigame.eatOpponents,wallCollision:e.game.minigame.wallCollision,difficulty:e.game.minigame.difficulty},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.surveyPlayers,n=a.nameGenerator,i=a.wallCollision,o=a.opponentCollision,s=a.eatOpponents,l=a.racetarget,c=a.difficulty,m=a.gamemode;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h4"},"Game Settings"),r.a.createElement(I.a,{onClick:function(){return e.startGame("classic")},variant:"contained"},"Classic"),r.a.createElement(I.a,{onClick:function(){return e.startGame("coop")},variant:"contained"},"Co-op multiplayer"),r.a.createElement(I.a,{onClick:function(){return e.startGame("team")},variant:"contained"},"Team multiplayer"),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:n,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:m||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"survival"},"Survival"),r.a.createElement(Q.a,{value:"race"},"Race"))),"race"===m&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Snake length",name:"racetarget",type:"number",value:l,margin:"normal",onChange:this.handleChange("racetarget")})),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(R.a,{value:c||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(Q.a,{value:"500"},"Easy"),r.a.createElement(Q.a,{value:"300"},"Medium"),r.a.createElement(Q.a,{value:"100"},"Hard"),r.a.createElement(Q.a,{value:"75"},"Pro"))),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:i,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:o&&s,disabled:!o,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"})),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:t,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}))))}}]),a}(n.Component),yn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a=t.props,n=a.game,r=a.gameFunc,i=t.state,o=i.surveyPlayers,s=i.nameGenerator,l=i.holes,c=i.difficulty,m=i.gamemode,u=i.scoremode,d={surveyPlayers:o,nameGenerator:s,speedmode:i.speedmode,multiplayerMode:e,holes:l,difficulty:c,gamemode:m,scoremode:u};n.minigame=d,n.phase="connection",n.status="IN_PROGRESS",r.update(n)},t.state={surveyPlayers:!1,nameGenerator:!1,gamemode:e.game.minigame.gamemode,holes:e.game.minigame.holes,scoremode:e.game.minigame.scoremode,speedmode:e.game.minigame.speedmode,difficulty:e.game.minigame.difficulty},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.surveyPlayers,n=a.nameGenerator,i=a.holes,o=a.difficulty,s=a.gamemode,l=a.scoremode,c=a.speedmode;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h4"},"Game Settings"),r.a.createElement(I.a,{onClick:function(){return e.startGame("classic")},variant:"contained"},"Classic"),r.a.createElement(I.a,{onClick:function(){return e.startGame("coop")},variant:"contained"},"Co-op multiplayer"),r.a.createElement(I.a,{onClick:function(){return e.startGame("team")},variant:"contained"},"Team multiplayer"),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:n,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:s||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"classic"},"Classic"),r.a.createElement(Q.a,{value:"wild"},"Wild"))),"classic"===s&&r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"holes to play",name:"holes",type:"number",value:i,margin:"normal",onChange:this.handleChange("holes")})),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"scoremode-required"},"Score mode"),r.a.createElement(R.a,{value:l||"",onChange:this.handleChangeSelect,name:"scoremode",inputProps:{id:"scoremode-required"}},r.a.createElement(Q.a,{value:"strokes"},"Strokes"),r.a.createElement(Q.a,{value:"time"},"Time"),r.a.createElement(Q.a,{value:"compedetive"},"Compedetive"))),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(R.a,{value:o||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(Q.a,{value:"500"},"Easy"),r.a.createElement(Q.a,{value:"300"},"Medium"),r.a.createElement(Q.a,{value:"100"},"Hard"),r.a.createElement(Q.a,{value:"75"},"Pro"))),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:c,onChange:this.handleChangeBool("speedmode"),value:"speedmode"}),label:"Speed mode"})),r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:t,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}))))}}]),a}(n.Component),En=18e5,wn="cac8bf9ba7b34b3a8f727eecdef1a2a8",kn="https://spotify.i.lithium.com/t5/image/serverpage/image-id/25294i2836BD1C1A31BDF2/",On=10,jn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a=t.props,n=a.game,r=a.gameFunc,i=t.state,o=i.surveyPlayers,s=i.nameGenerator,l=i.questions,c={surveyPlayers:o,nameGenerator:s,multiplayerMode:e,gamemode:i.gamemode,questions:l,currentq:0};n.minigame=c,n.phase="connection",n.status="IN_PROGRESS",r.update(n)},t.state={surveyPlayers:!1,questions:16,nameGenerator:!1,gamemode:e.game.minigame.gamemode,invalidSpotifyToken:!localStorage.getItem("spotifytoken")||Date.now()-localStorage.getItem("spotifytoken_timestamp")>En},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.invalidSpotifyToken,a=localStorage.getItem("spotifytoken");if(e){var t=window.location.origin+window.location.pathname;localStorage.setItem("spotify_type","host");window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(wn,"&redirect_uri=").concat(t,"&scope=").concat(["user-top-read"].join("%20"),"&response_type=token&show_dialog=true")}(new Headers).append("Authorization","Bearer ".concat(a))}},{key:"render",value:function(){var e=this,a=this.state,t=a.nameGenerator,n=a.gamemode,i=a.questions;return a.invalidSpotifyToken?r.a.createElement("span",null,"Loading..."):r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h4"},"Game Settings"),r.a.createElement(I.a,{onClick:function(){return e.startGame("classic")},color:"primary"},"Classic"),r.a.createElement(I.a,{onClick:function(){return e.startGame("coop")},color:"primary"},"Co-op multiplayer"),r.a.createElement(I.a,{onClick:function(){return e.startGame("team")},color:"primary"},"Team multiplayer"),r.a.createElement(W.a,{component:"fieldset"},r.a.createElement(V.a,null,r.a.createElement(Y.a,{control:r.a.createElement(X.a,{checked:t,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(W.a,{required:!0},r.a.createElement(_.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(R.a,{value:n||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(Q.a,{value:"classic"},"Classic"),r.a.createElement(Q.a,{value:"wild"},"Wild"))),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Questions to play",name:"questions",type:"number",value:i,margin:"normal",onChange:this.handleChange("questions")})))))}}]),a}(n.Component),Cn=t(75),xn=t.n(Cn),Sn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.classes,n=a.players;return n=n?Object.values(n):[],r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{className:t.header},r.a.createElement("span",null,"Join game with Game PIN: "),r.a.createElement("span",{className:t.pin},a.gameId)),r.a.createElement(x.b,{className:t.title},a.title)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"},n.map(function(e){return r.a.createElement(C.a,{key:e.key,item:!0,style:{padding:"15px 30px 30px 30px"}},e.avatar?r.a.createElement("img",{className:t.avatar,src:e.avatar,alt:e.name}):r.a.createElement(xn.a,{classes:{root:t.icon}}),r.a.createElement(x.b,{className:t.secondaryText},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(I.a,{onClick:this.nextPhase,color:"primary"},"Start")))}}]),a}(n.Component),qn=Object($.withStyles)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",flexFlow:"column"},avatar:{marginBottom:5,height:120,borderRadius:"50%",webkitBboxShadow:"0 0 10px rgba(0,0,0,.3)",boxShadow:"0 0 10px rgba(0,0,0,.3)"},icon:{height:120,width:120,marginTop:5},primaryText:{fontSize:18,color:"#fff",fontWeight:500},secondaryText:{fontSize:16,color:"#fff",fontWeight:400,opacity:.6},pin:{fontSize:32},header:{fontSize:28,padding:45,fontWeight:400,color:"#fff"}}})(Sn),Pn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).startCounter(),t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){0===(a-=1)&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){var e=this.props,a=e.game,t=e.gameFunc;a.phase="gameplay",t.update(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(x.b,{variant:"h2"},"Starting game"),r.a.createElement(_e,{speed:"slow"}))}}]),a}(n.Component);var Nn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(d.a)(Object(d.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(d.a)(Object(d.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getChartData",value:function(){for(var e={labels:[],datasets:[{data:[],label:"podium",backgroundColor:[],borderWidth:1}]},a=function(e){var a=Object.values(e.answers).filter(function(a){return a.question===e.minigame.currentq}),t=Object.values(e.players).map(function(e){return{name:e.name,nr:a.reduce(function(a,t){return a+(t.answer&&t.answer.includes(e.key)?1:0)},0)}});return t.sort(function(e,a){return a.nr-e.nr}),t}(this.props.game),t=a.length>30?30:a.length,n=0;n<t;n++)e.labels.push(a[n].name),e.datasets[0].data.push(a[n].nr),e.datasets[0].backgroundColor.push("#1DB954");return e}},{key:"getChartHeight",value:function(){var e=50+22*this.getChartData().labels.length;return e>700&&(e=700),e}},{key:"getChartOptions",value:function(){return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,scales:{yAxes:[{ticks:{beginAtZero:!0,min:0,fontSize:13,fontColor:"rgba(255, 255, 255, 0.7)"},display:!0,beginAtZero:!0}],xAxes:[{display:!0,beginAtZero:!0,ticks:{beginAtZero:!0,min:0,fontSize:16,fontColor:"rgba(255, 255, 255, 0.7)"}}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:15,right:30,bottom:700-this.getChartHeight()}}}}},{key:"render",value:function(){var e=this.getChartOptions();return r.a.createElement("div",{style:{maxHeight:700}},r.a.createElement(ma.b,{data:this.getChartData,height:700,options:e}))}}]),a}(n.Component),zn=t(52),Gn=t.n(zn);function Tn(e){return 0===e.currentqScore?e.totalScore:"".concat(e.totalScore," (+").concat(e.currentqScore,")")}var Mn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChangePage=function(e,a){t.setState({page:a})},t.handleChangeRowsPerPage=function(e){t.setState({rowsPerPage:e.target.value})},t.state={leaderboardData:e.leaderboardData,page:0,rowsPerPage:10},t.startScoreCounter=t.startScoreCounter.bind(Object(d.a)(Object(d.a)(t))),t.getScoreCellWidth=t.getScoreCellWidth.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){setTimeout(this.startScoreCounter,2e3)}},{key:"getScoreCellWidth",value:function(){for(var e=this.state.leaderboardData,a=0,t=0;t<e.length;t++){var n=Tn(e[t]);n.length>a&&(a=n.length)}return 6*a+65}},{key:"startScoreCounter",value:function(){var e=this,a=setInterval(function(){for(var t=!0,n=e.state.leaderboardData,r=0;r<n.length;r++){var i=n[r];i.currentqScore>0&&(t=!1,i.currentqScore-=1,i.totalScore+=1)}n.sort(function(e,a){return a.totalScore-e.totalScore}),e.setState({leaderboard:n}),t&&clearInterval(a)},10)}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.leaderboardData,i=t.rowsPerPage,o=t.page;return r.a.createElement("div",{className:a.root},r.a.createElement(Oa.a,{className:a.table},r.a.createElement(fa.a,null,n.slice(o*i,o*i+i).map(function(t,n){return r.a.createElement(wa.a,{key:t.key},r.a.createElement(ya.a,{padding:"dense"},n+1),r.a.createElement(ya.a,null,r.a.createElement("div",{className:a.player},t.avatar?r.a.createElement(Gn.a,{alt:t.name,src:t.avatar}):r.a.createElement(Gn.a,null,r.a.createElement(xn.a,null)),r.a.createElement("div",{className:a.playerText},r.a.createElement(x.b,null,t.name)))),r.a.createElement(ya.a,{style:{width:e.getScoreCellWidth()}},Tn(t)))}))),n.length>10&&r.a.createElement(Ca.a,{component:"div",count:n.length,rowsPerPage:i,page:o,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),a}(n.Component),An=Object($.withStyles)(function(e){return{root:{width:"100%"},table:{maxWidth:700,whiteSpace:"nowrap"},player:{display:"inline-flex",alignItems:"center"},playerText:{marginLeft:15}}})(Mn),In=t(164),Fn=t.n(In),_n=t(74),Dn=t.n(_n);var Qn=Object($.withStyles)(function(e){return{img:{height:64},listitem:{},primary:{fontSize:16},root:{backgroundColor:"inherit"},header:{fontSize:28,padding:15,fontWeight:400}}})(function(e){var a=e.classes,t=e.answer;if(!t||0===t.length)return null;var n=t.length>3;return r.a.createElement("div",null,r.a.createElement(x.b,{className:a.header},"R\xe4tt svar"),r.a.createElement(Fn.a,null),r.a.createElement(ce.a,{dense:n,className:a.root},r.a.createElement(C.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"},t.map(function(e){return r.a.createElement(C.a,{key:e.key,item:!0},r.a.createElement(ue.a,{className:a.listitem},r.a.createElement(Dn.a,null,e.avatar?r.a.createElement(Gn.a,{alt:e.name,src:e.avatar}):r.a.createElement(Gn.a,null,r.a.createElement(xn.a,null))),r.a.createElement(he.a,{className:n?a.itemtextDense:a.itemtext,primary:e.name})))}))))}),Bn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t.nextQuestion=t.nextQuestion.bind(Object(d.a)(Object(d.a)(t))),t.finalizeQuiz=t.finalizeQuiz.bind(Object(d.a)(Object(d.a)(t))),t.getCorrectAnswer=t.getCorrectAnswer.bind(Object(d.a)(Object(d.a)(t))),t.getLeaderboardData=t.getLeaderboardData.bind(Object(d.a)(Object(d.a)(t))),t.answersCollected=t.answersCollected.bind(Object(d.a)(Object(d.a)(t))),t.getCorrectPlayers=t.getCorrectPlayers.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getCorrectAnswer",value:function(){var e=this.props,a=(e.game,e.tracks),t=e.question;return a.filter(function(e){return e.id===t.track.id}).map(function(e){return e.playerKey})}},{key:"getLeaderboardData",value:function(e){var a=this.props.game,t=Object.values(a.players),n=Object.values(a.answers);return t.map(function(t){var r=0,i=n.find(function(e){return e.playerKey===t.key&&e.question===a.minigame.currentq});return i&&i.answer&&(r=i.answer.reduce(function(a,t){return e.includes(t)?a+1:a-1},0)),{name:t.name,key:t.key,avatar:t.avatar,currentqScore:Math.max(0,r),totalScore:t.score}})}},{key:"getCorrectPlayers",value:function(e){var a=this.props.game,t=[];return e.forEach(function(e){var n=a.players[e];t.push({name:n.name,avatar:n.avatar,key:n.key})}),t}},{key:"finalizeQuiz",value:function(){this.props.gameFunc.update({phase:"final_result"})}},{key:"nextQuestion",value:function(){var e=this.props,a=e.game,t=e.gameFunc,n=e.nextQuestion,r=this.getLeaderboardData(this.getCorrectAnswer()),i=Object(dt.a)({},a);i.phase="gameplay",i.minigame.currentq+=1,r.forEach(function(e){i.players[e.key].score+=e.currentqScore}),t.update(i),n()}},{key:"answersCollected",value:function(){var e=this.props.game;if(!e.answers)return!1;var a=Object.values(e.answers).filter(function(a){return a.question===e.minigame.currentq});return a.length===Object.keys(e.players).length}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.gameFunc,n=e.classes,i=this.answersCollected(),o=a.minigame.currentq===a.minigame.questions;if(i){var s=this.getCorrectAnswer(),l=this.getLeaderboardData(s),c=this.getCorrectPlayers(s);return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{className:n.pin},"Game PIN:".concat(a.gameId," ")),r.a.createElement(Qn,{answer:c})),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(Nn,{game:a}))),r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(An,{leaderboardData:l}))))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement("div",{className:n.actions},o&&r.a.createElement(I.a,{onClick:this.finalizeQuiz,color:"primary"},"Finalize result"),!o&&r.a.createElement(I.a,{onClick:this.nextQuestion,color:"primary"},"Next question"),r.a.createElement(I.a,{onClick:t.restart,color:"secondary"},"Restart quiz"),r.a.createElement(I.a,{onClick:t.quit,color:"secondary"},"Quit quiz"),r.a.createElement(I.a,{onClick:t.end,color:"secondary"},"End quiz"))))}return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{className:n.pin},"Game PIN:".concat(a.gameId," "))),r.a.createElement("div",{className:"quiz-middle-section"}),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement("div",null,o&&r.a.createElement(I.a,{onClick:this.finalizeQuiz,color:"primary"},"Finalize result"),!o&&r.a.createElement(I.a,{onClick:this.nextQuestion,color:"primary"},"Next question"),r.a.createElement(I.a,{onClick:t.restart,color:"secondary"},"Restart quiz"),r.a.createElement(I.a,{onClick:t.quit,color:"secondary"},"Quit quiz"),r.a.createElement(I.a,{onClick:t.end,color:"secondary"},"End quiz"))))}}]),a}(n.Component),Wn=Object($.withStyles)(function(e){return{pin:{position:"absolute",right:0,marginRight:15,fontSize:16},actions:{position:"absolute",bottom:15,left:"50%",marginLeft:"-426px"},itemtext:{overflow:"hidden"},header:{backgroundColor:"#282828",padding:10,marginBottom:10},itemtextDense:{paddingLeft:2,paddingRight:2,overflow:"hidden"},listitem:{paddingLeft:12,paddingRight:38},container:{height:"100vh",width:"100vw"}}})(Bn),Ln=t(339);function Rn(e,a,t){t.questions;var n=t.qtypes,r=[];return n.includes("track_owner")&&r.push(a.map(function(e){return{qtype:"track_owner",atype:"multi",track:e}})),n.includes("popularity"),n.includes("size"),n.includes("artist"),r}function Hn(e){return!(e.tracks.total<On)}function Kn(e){var a=Math.floor(e/60);a=a>=10?a:"0".concat(a);var t=Math.floor(e%60);return t=t>=10?t:"0".concat(t),"".concat(a,":").concat(t)}t(731);var Un=Object($.withStyles)(function(e){return{container:{display:"flex",alignItems:"center",justifyContent:"center",flexFlow:"column"},img:{marginBottom:45,maxHeight:540,webkitBboxShadow:"0 0 10px rgba(0,0,0,.3)",boxShadow:"0 0 10px rgba(0,0,0,.3)"},timeContainer:{display:"flex",marginTop:60,width:680},progress:{width:"100%",height:3,marginTop:10},linearColorPrimary:{backgroundColor:"#404040"},linearBarColorPrimary:{backgroundColor:"#1DB954"},timeTextLeft:{marginRight:20,marginLeft:40,fontSize:16,color:"#fff",opacity:.6,fontWeight:400},timeTextRight:{marginRight:40,marginLeft:20,fontSize:16,color:"#fff",opacity:.6,fontWeight:400},primaryText:{fontSize:18,color:"#fff",fontWeight:500},secondaryText:{fontSize:16,color:"#fff",fontWeight:400,opacity:.6},hidden:{display:"none"},nosize:{width:0,height:0},header:{fontSize:28,padding:45,fontWeight:400}}})(function(e){var a=e.track,t=e.classes,n=Kn(a.currentTime),i=Kn(a.duration),o=a.currentTime/(a.duration-.5)*100;return r.a.createElement("div",{className:t.container},r.a.createElement(x.b,{className:t.header},"Vems l\xe5t \xe4r detta?"),r.a.createElement("img",{src:a.img.url,alt:"cover art",className:t.img}),r.a.createElement("div",{className:t.footer},r.a.createElement(x.b,{className:t.primaryText},a.name),r.a.createElement(x.b,{className:t.secondaryText},a.artists),r.a.createElement("div",{className:t.timeContainer},r.a.createElement(x.b,{className:t.timeTextLeft},n),r.a.createElement(oa.a,{className:t.progress,variant:"determinate",value:o,classes:{colorPrimary:t.linearColorPrimary,barColorPrimary:t.linearBarColorPrimary}}),r.a.createElement(x.b,{className:t.timeTextRight},i)),r.a.createElement("div",null,r.a.createElement(Ln.Progress,{percent:o,status:"success",className:t.nosize,symbolClassName:t.hidden}))))}),Vn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))},t.state={spotifytoken:localStorage.getItem("spotifytoken")||"",tokentimestamp:localStorage.getItem("spotifytoken_timestamp")||"",playlists:[],tracks:[],questionTracks:[],questions:[],usedQuestions:[],songplaying:!1,songCurrentTime:0,songDuration:30},t.nextPhase=t.nextPhase.bind(Object(d.a)(Object(d.a)(t))),t.playQuestion=t.playQuestion.bind(Object(d.a)(Object(d.a)(t))),t.saveGame=t.saveGame.bind(Object(d.a)(Object(d.a)(t))),t.nextQuestion=t.nextQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.game,t=this.state,n=t.spotifytoken,r=t.tokentimestamp;if(!n||Date.now()-r>En){var i=window.location.origin+window.location.pathname;localStorage.setItem("spotify_type","host");window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(wn,"&redirect_uri=").concat(i,"&scope=").concat(["user-top-read"].join("%20"),"&response_type=token&show_dialog=true")}var o=new Headers;o.append("Authorization","Bearer ".concat(n));var s=Object.values(a.players),l=Math.ceil(a.minigame.questions/s.length);s.forEach(function(t,n){fetch("https://api.spotify.com/v1/playlists/".concat(t.playlist,"/tracks"),{method:"GET",headers:o}).then(function(e){return e.json()}).then(function(r){console.table(r);var i=r.items.map(function(e){return{added_at:e.added_at.split("T")[0],name:e.track.name,audio:e.track.preview_url,artists:e.track.artists.map(function(e){return e.name}).join(", "),img:e.track.album.images.length>0?e.track.album.images[0]:kn,playerKey:t.key,playerName:t.name,id:e.track.id}}),o={playerKey:t.key,playerName:t.name,totalTracks:i.length,popularity:function(e){return e.reduce(function(e,a){return e+a.popularity},0)/e.length}(i),artists:function(e){var a={},t=[];return e.forEach(function(e){t.push.apply(t,Object(z.a)(e.artists.map(function(e){return e.name})))}),t.forEach(function(e){a[e]=a[e]+1||1}),a}(i)},c=i.filter(function(e){return e.audio}).sort(function(){return Math.random()-.5});c.length>l&&(c.length=l),e.setState(function(e){return{playlists:Object(z.a)(e.playlist).concat([o]),tracks:Object(z.a)(e.tracks).concat(Object(z.a)(i)),questionTracks:Object(z.a)(e.questionTracks).concat(Object(z.a)(c))}},function(){n+1===s.length&&"gameplay"===a.phase&&e.setState(function(e){return{questions:Rn(e.playlists,e.questionTracks,a.minigame).sort(function(){return Math.random()-.5})}},function(){e.playQuestion()})})})})}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"nextQuestion",value:function(){this.playQuestion()}},{key:"playQuestion",value:function(){var e=this,a=this.state,t=a.questions,n=(a.tracks,this.props.game.minigame.currentq);this.setState({songplaying:!0}),console.table(t);var r=new Audio(t[n].track.audio);r.volume=.1,r.play(),r.onended=function(){e.nextPhase()},r.canplay=function(){e.setState(function(){return{songDuration:r.duration}})},r.ontimeupdate=function(){var a=r.duration-r.currentTime;a<=3?r.volume=a/3:r.volume<1&&(r.volume=Math.min(1,r.volume+.2)),e.setState(function(){return{songCurrentTime:r.currentTime}})}}},{key:"saveGame",value:function(e){this.props.gameFunc.update(e)}},{key:"nextPhase",value:function(){var e=this.props.game;this.setState({songplaying:!1}),e.minigame.currentq>=e.minigame.questions?e.phase="final_result":e.phase="level_completed",this.saveGame(e)}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.gameFunc,n=this.state,i=n.tracks,o=n.questions,s=n.songplaying,l=n.songCurrentTime,c=n.songDuration;if("gameplay"===a.phase&&!s)return r.a.createElement("div",null,"loading questions");var m=o[a.minigame.currentq];if("level_completed"===a.phase)return r.a.createElement(Wn,{game:a,gameFunc:t,tracks:i,question:m,nextQuestion:this.nextQuestion});var u=Object(dt.a)({},m.track,{currentTime:l,duration:c});return r.a.createElement("div",null,"guess_owner"===m.type&&r.a.createElement(Un,{track:u}))}}]),a}(n.Component),Jn=Object($.createMuiTheme)({palette:{type:"dark",primary:{main:"#1DB954"},secondary:{main:"#fff"}},overrides:{MuiButton:{root:{borderRadius:500,padding:"11px 44px",color:"#fff",letterSpacing:".16em",WebkitTransition:"none 33ms cubic-bezier(.3,0,.7,1)",transition:"none 33ms cubic-bezier(.3,0,.7,1)",WebkitTransitionProperty:"all",transitionProperty:"all",touchAction:"manipulation",willChange:"transform",lineHeight:1.6,minWidth:130,margin:10,fontWeight:300,fontSize:11,"&:hover":{WebkitTransition:"none 33ms cubic-bezier(.3,0,0,1)",transition:"none 33ms cubic-bezier(.3,0,0,1)",WebkitTransitionProperty:"all",transitionProperty:"all",WebkitTransform:"scale(1.06)",transform:"scale(1.06)"}},textPrimary:{backgroundColor:"#1DB954",color:"#fff","&:hover":{backgroundColor:"#1ed760"}},textSecondary:{backgroundColor:"rgba(24,24,24,.7)","&:hover":{backgroundColor:"rgba(24,24,24,.7)",webkitBoxShadow:"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)",boxShadow:"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)"},webkitBoxShadow:"inset 0 0 0 2px #b3b3b3",boxShadow:"inset 0 0 0 2px #b3b3b3"}}}}),Yn=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.game,t=e.gameFunc;switch(a.gametype){case"snake":return r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(bn,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(Ga,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(ut,{game:a,gameFunc:t}),"gameplay"===a.phase&&r.a.createElement(Ha,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(it,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(ot,{game:a,gameFunc:t}));case"tetris":return r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(za,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(Ga,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(Ta,{game:a,gameFunc:t}),"gameplay"===a.phase&&r.a.createElement(Ka,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(it,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(ot,{game:a,gameFunc:t}));case"golf":return r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(yn,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(Ga,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(fn,{game:a,gameFunc:t}),("gameplay"===a.phase||"level_completed"===a.phase)&&r.a.createElement(vn,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(it,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(ot,{game:a,gameFunc:t}));case"spotify":return document.querySelector("body").classList.add("dark-mode"),r.a.createElement($.MuiThemeProvider,{theme:Jn},r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(jn,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(qn,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(Pn,{game:a,gameFunc:t}),("gameplay"===a.phase||"level_completed"===a.phase)&&r.a.createElement(Vn,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(it,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(ot,{game:a,gameFunc:t})));default:return null}}}]),a}(n.PureComponent);var Zn=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.state={game:{},gameId:localStorage.getItem("RecentGameId")||"",password:"",isRedirected:Date.now()-localStorage.getItem("spotifytoken_timestamp")<2e3},t.updateGame=t.updateGame.bind(Object(d.a)(Object(d.a)(t))),t.initGameListiner=t.initGameListiner.bind(Object(d.a)(Object(d.a)(t))),t.restartGame=t.restartGame.bind(Object(d.a)(Object(d.a)(t))),t.quitGame=t.quitGame.bind(Object(d.a)(Object(d.a)(t))),t.endGame=t.endGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.gameId;e.isRedirected&&this.joinGame(a)}},{key:"updateGame",value:function(e){var a=this.props.showSnackbar,t=this.state.game;f.database().ref("games/".concat(t.key)).update(e,function(e){if(e){a({variant:"error",message:"Unexpected internal error"})}})}},{key:"restartGame",value:function(){var e={players:[],phase:"setup"};this.updateGame(e)}},{key:"quitGame",value:function(){var e=this.props.toggleHeader;this.updateGame({phase:null}),e(!0)}},{key:"endGame",value:function(){this.updateGame({phase:"final_result"})}},{key:"joinGame",value:function(e){var a=this.state.password,t=this.props,n=t.showSnackbar,r=t.toggleHeader,i=this;!function(e,a){f.database().ref("games").orderByChild("gameId").equalTo(e).once("value",a)}(e,function(e){if(e.val()){var t;if(e.forEach(function(e){t=e.val()}),t.password===a)i.initGameListiner(t.key),r();else{n({variant:"error",message:"Could not find matching game"})}}else{n({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=f.database().ref("games/".concat(e)),t=this;a.on("value",function(e){var a=e.val();a.phase||(a.phase="setup"),a?t.setState({game:a}):t.setState({game:""})})}},{key:"render",value:function(){var e=this,a=this.state,t=a.gameId,n=a.password,i=a.game,o=a.isRedirected,s=this.props,l=(s.showSnackbar,s.toggleHeader,{update:this.updateGame,restart:this.restartGame,end:this.endGame,quit:this.quitGame});return!i.phase&&o?r.a.createElement("div",null,r.a.createElement("span",null,"Loading...")):i.phase?r.a.createElement("div",{className:"page-container host-page"},"quiz"===i.gametype&&r.a.createElement(Na,{game:i,gameFunc:l}),"snake"===i.gametype&&r.a.createElement(Yn,{game:i,gameFunc:l}),"tetris"===i.gametype&&r.a.createElement(Yn,{game:i,gameFunc:l}),"golf"===i.gametype&&r.a.createElement(Yn,{game:i,gameFunc:l}),"spotify"===i.gametype&&r.a.createElement(Yn,{game:i,gameFunc:l})):r.a.createElement("div",{className:"page-container host-page"},r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Game PIN",name:"Game ID",value:t,margin:"normal",onChange:this.handleChange("gameId")})),r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Password",type:"password",name:"password",margin:"normal",value:n,onChange:this.handleChange("password")})),r.a.createElement(I.a,{onClick:function(){return e.joinGame(t)},variant:"contained"},"Host"))}}]),a}(n.Component),Xn=t(101),$n=t.n(Xn),er=t(226),ar=t.n(er),tr=t(346),nr=t.n(tr),rr=t(347),ir=t.n(rr),or=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.state={name:"",authId:"",playerCreated:!1},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.generateName=t.generateName.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){!this.props.playerKey&&this.props.game.quiz.nameGenerator&&this.props.addPlayer(this.generatePlayer())}},{key:"createPlayer",value:function(){var e={name:this.state.name,score:0};this.props.addPlayer(e),this.setState({playerCreated:!0})}},{key:"generatePlayer",value:function(){return{name:this.generateName(),score:0}}},{key:"generateName",value:function(){var e=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],a=["ninja","chair","pancake","statue","unicorn","rainbows","laser","senor","bunny","captain","nibblets","cupcake","carrot","gnomes","glitter","potato","salad","toejam","curtains","beets","toilet","exorcism","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"],t="",n=[];this.props.game.players&&(n=Object.values(this.props.game.players).map(function(e){return e.name}));for(var r=0;r<20;r++){var i="";if(i=r>10?e[Math.floor(Math.random()*e.length)]+" "+e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)]:e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)],!(n.indexOf(i)>-1)){t=i;break}}return t}},{key:"render",value:function(){var e=this.props.game.players,a="";e&&this.props.playerKey&&(a=e[this.props.playerKey].name);var t=[];return e&&(t=Object.values(e)),this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},a&&r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h5"},"Welcome ",r.a.createElement("span",{className:"dynamic-text"},a),"! ")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{paragraph:!0,variant:"subtitle1"},"Players in lobby"),r.a.createElement(C.a,{container:!0},t.map(function(e,a){return r.a.createElement(C.a,{key:e.key,item:!0,md:3,xs:6},r.a.createElement(x.b,{paragraph:!0,variant:"body1"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(x.b,{paragraph:!0,variant:"subtitle1"},"Waiting for the host to start the game"))),!a&&r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(I.a,{onClick:this.createPlayer,variant:"contained"},"done"))):r.a.createElement("div",{className:"phase-container"},a&&r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Welcome ",r.a.createElement("span",{className:"dynamic-text"},a),"!"),r.a.createElement(x.b,{variant:"subtitle1"}," Watch the screen, your name should show.")),r.a.createElement("div",{className:"quiz-bottom-section"})),!a&&r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(I.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(n.Component),sr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h5"},"Starting quiz")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(_e,{speed:"slow"})),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Starting quiz...")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),lr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h5"},"Loading question")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(_e,{speed:"slow"})),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Look at the screen.")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),cr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Look at the question on the screen!")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),mr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).answerQuestion=function(e){t.setState({selectedAnswer:e,hasAnswered:!0});var a=Date.now()-t.state.startTime,n=0;if(t.state.question.correctAnswers.indexOf(e)>-1){switch(t.state.question.difficulty){case"easy":n+=100;break;case"medium":n+=200;break;case"hard":n+=300;break;case void 0:n+=200}if(t.props.game.quiz.timelimit&&t.state.question.timelimit){var r=a/(1e3*t.state.question.timelimit);n+=Math.floor(n/Math.max(.2,r)/10)}}var i={answer:e,score:n,answerTime:a,questionId:t.state.question.id};t.props.saveAnswer(i)},t.state={counter:0,question:{},hasAnswered:!1,selectedAnswer:""},t.answerQuestion=t.answerQuestion.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e,startTime:Date.now()})}},{key:"render",value:function(){var e=this,a=[];return this.props.game&&(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers),this.props.game.quiz.remoteMode?this.state.hasAnswered?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{paragraph:!0,variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"body1"},"You answered: ",r.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-middle-and-bottom-section"},r.a.createElement(C.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return r.a.createElement(C.a,{key:t,item:!0,xs:6},r.a.createElement(ea,{answer:a,index:t,answerQuestion:e.answerQuestion,remoteMode:!0}))})))):this.state.hasAnswered?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"body1"},"You answered: ",r.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-complete-section"},r.a.createElement(C.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return r.a.createElement(C.a,{key:t,item:!0,xs:6},r.a.createElement(ea,{answer:a,index:t,answerQuestion:e.answerQuestion}))}))))}}]),a}(n.Component),ur=t(103),dr=t.n(ur),hr=t(104),pr=t.n(hr),gr=t(105),vr=t.n(gr),fr=t(83),br=t.n(fr),yr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a,n){t.setState({expanded:!!n&&e})}},t.state={expanded:null},t.getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e=[],a=this.props.game.players[this.props.playerKey],t=0;t<this.props.game.quiz.questions.length;t++){var n={question:{},score:0,time:0,answer:""},r=this.props.game.quiz.questions[t];a.answers[r.id]?(n.score=a.answers[r.id].score,n.answer=a.answers[r.id].answer,n.time=a.answers[r.id].answerTime):(n.score=0,n.answer="no answer",n.time=0),n.question=r,e.push(n)}return e}},{key:"render",value:function(){var e=this;if(this.props.game.quiz.remoteMode){var a=this.getPlayerAnswerData();return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(x.b,{variant:"h5"},"Quiz finished")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"subtitle1"},"You finished",r.a.createElement("span",{className:"dynamic-text"},"2nd")," with a score of  ",r.a.createElement("span",{className:"dynamic-text"},"560")),r.a.createElement(dr.a,null,r.a.createElement(pr.a,{expandIcon:r.a.createElement(br.a,null)},r.a.createElement(x.b,null,"Final scoretable")),r.a.createElement(vr.a,null,r.a.createElement("div",null,r.a.createElement(da,{game:this.props.game})))),r.a.createElement(dr.a,null,r.a.createElement(pr.a,{expandIcon:r.a.createElement(br.a,null)},r.a.createElement(x.b,null,"Your own data")),r.a.createElement(vr.a,{style:{display:"block"}},a.map(function(a,t){return r.a.createElement(dr.a,{key:a.question.id,expanded:e.state.expanded===a.question.id,onChange:e.handleChange(a.question.id)},r.a.createElement(pr.a,{expandIcon:r.a.createElement(br.a,null)},r.a.createElement(x.b,{variant:"subtitle1"},a.question.question),r.a.createElement(x.b,{variant:"subtitle2"},a.score,"pt")),r.a.createElement(vr.a,null,r.a.createElement(x.b,null,"Your answer: ",a.answer),r.a.createElement(x.b,null,"Your time: ",a.time/1e3,"sec"),r.a.createElement(x.b,{variant:"subtitle1",align:"left"},"Correct answers"),r.a.createElement(ce.a,null,a.question.correctAnswers.map(function(e,a){return r.a.createElement(ue.a,{key:e},r.a.createElement(he.a,{primary:e}))})),r.a.createElement(x.b,{variant:"subtitle1",align:"left"},"Wrong answers"),r.a.createElement(ce.a,null,a.question.wrongAnswers.map(function(e,a){return r.a.createElement(ue.a,{key:e},r.a.createElement(he.a,{primary:e}))}))))})))),r.a.createElement("div",{className:"quiz-bottom-section"}))}return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Look at the screen.")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component);function Er(e){var a=e.playerData,t=a.hasAnswered&&0===a.currentQuestionScore,n=a.currentQuestionScore>0;return r.a.createElement("div",null,n>0&&r.a.createElement(x.b,{variant:"h5"},"Correct answer!"),t&&r.a.createElement(x.b,{variant:"h5"},"Wrong answer!"),!a.hasAnswered&&r.a.createElement(x.b,{variant:"h5"},"You did not answer the question"),a.hasAnswered&&r.a.createElement("div",null,r.a.createElement(x.b,{variant:"body1"},r.a.createElement("div",null,r.a.createElement("span",null,"Score: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.currentQuestionScore)),r.a.createElement("div",null,r.a.createElement("span",null,"Time: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.answerTime)),r.a.createElement("div",null,r.a.createElement("span",null,"Total score: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.totalScore)))),a.oldLeaderboardPosition!==a.newLeaderboardPosition&&r.a.createElement("div",null,r.a.createElement(x.b,{variant:"body1"},r.a.createElement("span",null,"Old position:"),r.a.createElement("span",null," ",a.oldLeaderboardPosition),r.a.createElement("span",null,"New position: "),r.a.createElement("span",null,a.newLeaderboardPosition))),a.oldLeaderboardPosition===a.newLeaderboardPosition&&r.a.createElement("div",null,r.a.createElement(x.b,{variant:"body1"},r.a.createElement("span",null,"Position: "),r.a.createElement("span",null," ",a.newLeaderboardPosition))))}var wr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e=this.props,a=e.game,t=e.playerKey,n={totalScore:0,currentQuestionScore:0,newLeaderboardPosition:1,oldLeaderboardPosition:1,answerTime:0,hasAnswered:!1},r=a.quiz.questions[a.quiz.currentQuestion],i=a.players[t],o=0;o<a.quiz.questions.length;o++){var s=a.quiz.questions[o],l=!!i.answers&&i.answers[s.id];l&&(l.questionId===r.id&&(n.hasAnswered=!0,n.currentQuestionScore=l.score,n.answerTime=l.answerTime),n.totalScore+=l.score)}for(var c=a.players?Object.keys(a.players):[],m=0;m<c.length;m++)if(c[m]!==i.key){for(var u=a.players[c[m]],d=0,h=0,p=0;p<a.quiz.questions.length;p++){var g=a.quiz.questions[p],v=!!u.answers&&u.answers[g.id];v&&(v.questionId===r.id&&(h=v.score),d+=v.score)}d>n.totalScore&&(n.newLeaderboardPosition+=1),d-h>n.totalScore-n.currentQuestionScore&&(n.oldLeaderboardPosition+=1)}return n}},{key:"render",value:function(){var e=this.props.game,a=this.getPlayerAnswerData();if(e.quiz.remoteMode){var t;e&&(t=e.quiz.questions[e.quiz.currentQuestion]);var n=t.answers;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(Er,{playerData:a})),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(C.a,{container:!0},r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",{className:"quiz-answer-chart"},r.a.createElement(ga,{game:e}))),r.a.createElement(C.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(Sa,{game:e}))))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(C.a,{container:!0},n.map(function(e,a){return r.a.createElement(C.a,{key:e,item:!0,xs:6},r.a.createElement(ea,{answer:e,index:a}))}))))}return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(Er,{playerData:a})),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(x.b,{variant:"subtitle1"},"Look at the screen to se overall player results")))}}]),a}(n.Component),kr=(n.Component,function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t.saveAnswer=t.saveAnswer.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"saveAnswer",value:function(e){var a=this,t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;f.database().ref("/games/"+a.props.game.key+"/players/"+this.props.playerKey+"/answers/"+t).set(e,function(e){if(e){a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{a.props.showSnackbar({variant:"success",message:"Successfully updated player!"})}})}},{key:"render",value:function(){var e="final_result"===this.props.game.phase||"end"===this.props.game.phase;return r.a.createElement("div",{className:"play-container"},"connection"===this.props.game.phase&&r.a.createElement(or,{game:this.props.game,addPlayer:this.props.createPlayer,playerKey:this.props.playerKey}),"starting"===this.props.game.phase&&r.a.createElement(sr,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"awaiting_question"===this.props.game.phase&&r.a.createElement(lr,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"show_question"===this.props.game.phase&&r.a.createElement(cr,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"answer"===this.props.game.phase&&r.a.createElement(mr,{game:this.props.game,saveAnswer:this.saveAnswer,playerKey:this.props.playerKey}),"result_question"===this.props.game.phase&&r.a.createElement(wr,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}),e&&r.a.createElement(yr,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}))}}]),a}(n.Component));var Or,jr,Cr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.state={name:""},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.playerKey,t=e.game,n=e.addPlayer;!a&&t.minigame.nameGenerator&&n(this.generatePlayer())}},{key:"createPlayer",value:function(){var e=this.state.name;(0,this.props.addPlayer)({name:e,score:0})}},{key:"generatePlayer",value:function(){var e=this.props.game,a=[];return e.players&&(a=Object.values(e.players).map(function(e){return e.name})),{name:function(e){for(var a=["rutig,","antik","arg","lugn","friterad","hemlig","lycklig","gammal","rutten","smidig","vegansk","stark","full","giftig","djurig","artig","smutsig","dum","smart","stilig","snabb","l\xe5ngsam","seg","blygsam","envis","cool","tuff","sp\xe4nnande","farlig"],t=["ninja","stol","pankaka","staty","enh\xf6rning","regnb\xe5ge","kanin","kapten","cupcake","morot","potatis","salad","gardin","toalett","streckgubbe","drake","farmor","mormor","farfar","morfar","mellanchef","r\xf6rmokare","bilf\xf6rs\xe4ljare","skogshuggare","pension\xe4r","cirkus","studdsmatta","clown","mellanchef","busschaff\xf6r","luftballong","boss","tiger"],n="",r=0;r<20;r++){var i="";if(i=r>10?"".concat(a[Math.floor(Math.random()*a.length)]," ").concat(a[Math.floor(Math.random()*a.length)]," ").concat(t[Math.floor(Math.random()*t.length)]):"".concat(a[Math.floor(Math.random()*a.length)]," ").concat(t[Math.floor(Math.random()*t.length)]),!(e.indexOf(i)>-1)){n=i;break}}return n}(a),score:0}}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=this.state.name,i="";return a.players&&t&&a.players[t]&&(i=a.players[t].name),r.a.createElement("div",{className:"phase-container"},i?r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},r.a.createElement("span",null,"Welcome "),r.a.createElement("span",{className:"dynamic-text"},i)),r.a.createElement(x.b,{variant:"subtitle1"}," Watch the screen, your name should show.")),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Name",name:"name",value:n,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(I.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(n.Component),xr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Starting game...")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),Sr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},"Look at the screen. playerKey")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),qr=t(225),Pr=t.n(qr),Nr=t(224),zr=t.n(Nr),Gr=t(223),Tr=t.n(Gr),Mr=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleAction=t.handleAction.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"handleAction",value:function(e){var a=this.props,t=a.playerKey,n=a.game,r=n.players[t];f.database().ref("/games/".concat(n.key,"/minigame/snakes/").concat(r.snakeId,"/move")).set(e,function(e){e&&console.log("error updated snake move")})}},{key:"render",value:function(){var e=this,a=this.props,t=a.game,i=a.playerKey,o=t.players[i],s=t.minigame.snakes[o.snakeId],l=s.actions,c=1===s.playerKeys.length?o.name:s.name;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"player-controlls-container"},l.map(function(a){return r.a.createElement(n.Fragment,{key:a},o.controlActions.includes(a)?r.a.createElement(I.a,{key:a,className:"player-controlls-action player-controlls-".concat(a),onClick:function(){e.handleAction(a)},style:{backgroundColor:s.color}},"up"===a&&r.a.createElement(Tr.a,{className:"player-controlls-icon"}),"down"===a&&r.a.createElement(br.a,{className:"player-controlls-icon"}),"right"===a&&r.a.createElement(zr.a,{className:"player-controlls-icon"}),"left"===a&&r.a.createElement(Pr.a,{className:"player-controlls-icon"})):r.a.createElement(I.a,{key:a,className:"player-controlls-action player-controlls-".concat(a),style:{backgroundColor:s.color,opacity:.3}},"up"===a&&r.a.createElement(Tr.a,{className:"player-controlls-icon"}),"down"===a&&r.a.createElement(br.a,{className:"player-controlls-icon"}),"right"===a&&r.a.createElement(zr.a,{className:"player-controlls-icon"}),"left"===a&&r.a.createElement(Pr.a,{className:"player-controlls-icon"})))}),r.a.createElement("div",{className:"player-controlls-action player-controlls-middle"},r.a.createElement(x.b,{variant:"body1"},c))))}}]),a}(n.Component),Ar=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"TetrisController.js h\xe4r  ska jag visa knappar f\xf6r moves. och en metod h\xe4r som tar knapptrycket och updaterar en specifik property i firebase baserat p\xe5 gameid, playerkey etc. m\xe5ste ha med snakeId in i dnena kommmponent?")}}]),a}(n.Component),Ir=t(165),Fr=t.n(Ir),_r=t(340),Dr=t.n(_r),Qr=(t(785),t(341)),Br=t.n(Qr),Wr=t(342),Lr=t.n(Wr),Rr=t(343),Hr=t.n(Rr),Kr=t(344),Ur=t.n(Kr),Vr=t(345),Jr=t.n(Vr);var Yr=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleClick=function(e){t.setState({anchorEl:e.currentTarget})},t.handleClose=function(){t.setState({anchorEl:null})},t.handleChange=function(e){return function(a){var n;t.setState((n={},Object(G.a)(n,e,a.target.value),Object(G.a)(n,"anchorEl",null),n))}},t.handleChangeSelect=function(e){t.setState(Object(G.a)({},e.target.name,e.target.value))};var n=Math.floor(window.innerHeight-180),r=Math.floor(window.innerWidth),i={wood:Br.a,iron:Lr.a,putt:Hr.a};return t.state={highestAcceleration:0,isSwinging:!1,swingData:[],clubIndex:0,round:1,canvasHeight:n,strokes:0,canvasWidth:r,anchorEl:null,clubIcons:i},t.renderFrame=t.renderFrame.bind(Object(d.a)(Object(d.a)(t))),t.saveSwing=t.saveSwing.bind(Object(d.a)(Object(d.a)(t))),t.testSwing=t.testSwing.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,null,[{key:"getDerivedStateFromProps",value:function(e,a){return a.round!==e.game.minigame.round?{round:e.game.minigame.round,strokes:0}:null}}]),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;Or=document.getElementById("swingcanvas"),(jr=Or.getContext("2d")).translate(.5,.5);var a=this;Or.addEventListener("touchstart",function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation(),a.setState(function(){return{highestAcceleration:0,swingData:[],isSwinging:!0}})},!1),Or.addEventListener("touchend",function(t){var n=t||window.event;n.preventDefault(),n.stopPropagation();var r=a.state,i=r.highestAcceleration,o=r.clubIndex;a.setState(function(){return{isSwinging:!1}}),e.saveSwing(i,o)},!1),window.addEventListener("devicemotion",function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation();var n=a.state,r=n.isSwinging,i=n.swingData,o=n.highestAcceleration;n.clubIndex;if(r){var s=t.acceleration,l=s.x,c=s.y,m=s.z;i.push({x:Math.round(2*l),y:Math.round(2*c),z:Math.round(2*m)});var u=Math.abs(l),d=Math.abs(m),h=Math.floor(u+d);h>o?a.setState(function(){return{highestAcceleration:h,swingData:i}}):a.setState({swingData:i})}},!0),this.renderFrame()}},{key:"shouldComponentUpdate",value:function(e,a){var t=this.state,n=(t.swingData,t.isSwinging),r=t.strokes,i=t.anchorEl,o=t.clubIndex;if(a.isSwinging!==n)return!0;if(a.strokes!==r)return!0;if(a.anchorEl!==i)return!0;if(a.clubIndex!==o)return!0;var s=this.props,l=s.game,c=s.playerKey;if(e.game.phase!==l.phase)return!0;var m=l.players[c],u=e.game.players[c];return m.state!==u.state}},{key:"testSwing",value:function(){var e=Math.floor(100*Math.random())+10;this.saveSwing(e,2,!0)}},{key:"saveSwing",value:function(e,a,t){var n=this.props,r=n.playerKey,i=n.game,o=this.state.swingData;if("STILL"===i.players[r].state)if("gameplay"===i.phase)if(!function(e){return e.length<10}(o)||t){var s=sn(Rt[a],e);this.setState(function(e){return{strokes:e.strokes+1}}),f.database().ref("/games/".concat(i.key,"/players/").concat(r,"/swing")).set(s,function(e){e?console.log("error updated swing move"):console.log("saved swing success")})}else alert("invalid swing");else alert("game is not playing");else alert("ball is not still")}},{key:"renderFrame",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=(e.classes,this.state),r=n.swingData,i=n.strokes;if(jr){var o=a.players[t];jr.lineWidth=4;var s=new Image;s.src="https://i.imgur.com/DE8oR5A.png",s.onload=function(){jr.clearRect(0,0,Or.width,Or.height),jr.drawImage(s,0,0,Or.width,Or.height);var e,t,n=new Image;n.onload=function(){jr.globalAlpha=.3,jr.drawImage(n,Or.width/4,Or.height/4,Or.width/2,Or.width/2),jr.globalAlpha=1},n.src=Jr.a,function(e){for(var a=e.length,t={y:Or.height/2-2*Bt,x:Or.width/2},n=0;n<a;n++){var r=t.y+Math.round(e[n].z),i=t.x+Math.round(e[n].x);jr.beginPath(),jr.moveTo(t.x,t.y),jr.lineTo(i,r),jr.stroke(),t.y=r,t.x=i}}(r),e=Or.width,t=Or.height,a.minigame.levelColor,jr.fillStyle=Wt,jr.fillRect(0,t-Bt,e,Bt),"STILL"===o.state?(function(e,a,t){jr.font="28px roboto",jr.fillStyle="#000000",jr.textAlign="center",jr.fillText("Slag: ".concat(t),e,a)}(Or.width/2,48,i),function(e,a,t,n,r){jr.lineWidth=1,jr.fillStyle=t,jr.strokeStyle=n,jr.beginPath(),jr.arc(e,a,Bt,0,2*Math.PI),jr.fill(),jr.closePath(),jr.beginPath(),jr.arc(e,a,Bt-jr.lineWidth/2,0,2*Math.PI),jr.stroke(),jr.closePath()}(Or.width/2,Or.height-2*Bt+4,o.color,"gray"),function(e,a,t){jr.font="24px roboto",jr.fillStyle="#000000",jr.textAlign="center",jr.fillText("Distance: ".concat(t," yards"),e,a)}(Or.width/2,24,o.distance)):"SCORED"===o.state&&function(e,a,t,n){jr.font="22px roboto",jr.fillStyle="#000000",jr.textAlign="center",jr.fillText("You scored with ".concat(n," strokes in ").concat(t.scoreTime," seconds"),e,a)}(Or.width/2,36,o,i)}}}},{key:"render",value:function(){var e=this,a=this.props,t=a.game,n=(a.playerKey,a.classes),i=this.state,o=i.highestAcceleration,s=(i.isSwinging,i.canvasHeight),l=i.canvasWidth,c=i.clubIndex,m=i.anchorEl,u=i.clubIcons,d=Boolean(m),h=Rt[c];return this.renderFrame(),r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:n.container},r.a.createElement("canvas",{id:"swingcanvas",className:n.canvas,height:s,width:l}),r.a.createElement("div",{className:n.clubwrapper},r.a.createElement(I.a,{"aria-owns":d?"club-menu":void 0,"aria-haspopup":"true",style:{marginLeft:"-20px",marginRight:"-20px"},onClick:this.handleClick},r.a.createElement("img",{src:Ur.a,alt:"choose club",height:"100"})),r.a.createElement(Fr.a,{id:"club-menu",anchorEl:m,open:d,onClose:this.handleClose},Rt.map(function(a){return r.a.createElement(Q.a,{onClick:e.handleChange("clubIndex"),key:a.id,value:a.id},r.a.createElement("img",{src:u[a.type],alt:a.name,className:n.menuitemicon}),a.name)})),r.a.createElement(x.b,{variant:"body2",style:{display:"grid",paddingBottom:"8px"}},r.a.createElement("span",null,h.name),r.a.createElement("img",{src:u[h.type],alt:"club",height:"60"}))),r.a.createElement("div",{className:n.footer,style:{backgroundColor:t.minigame.levelColor}},r.a.createElement(Dr.a,{minValue:0,height:174,startColor:"green",ringWidth:40,segments:10,needleTransitionDuration:50,needleTransition:"easeLinear",textColor:"ghostwhite",needleColor:"ghostwhite",endColor:"red",currentValueText:"${value} m/s",maxValue:100,value:o/2})),r.a.createElement("button",{style:{position:"absolute",top:"0",left:"0"},type:"button",onClick:this.testSwing},"swing")))}}]),a}(n.Component),Zr=Object($.withStyles)(function(e){return{container:{height:"100vh",width:"100vw"},canvas:{},header:{height:80},footer:{height:180,marginTop:"-4px"},clubwrapper:{display:"flex",marginTop:"-120px",position:"absolute",alignItems:"flex-end"},menuitemicon:{height:"100%",paddingRight:10}}})(Yr);var Xr=Object($.withStyles)(function(e){return{img:{height:64,webkitBboxShadow:"0 0 10px rgba(0,0,0,.3)",boxShadow:"0 0 10px rgba(0,0,0,.3)"},listitem:{},primary:{fontSize:16},root:{backgroundColor:"inherit"},header:{backgroundColor:"#282828",padding:10,marginBottom:10}}})(function(e){var a=e.classes,t=e.playlists,n=e.setSelection;if(!t)return null;var i=t.filter(function(e){return Hn(e)}).map(function(e){return{name:(a=e).name,id:a.id,img:a.images.length>0?a.images[0]:kn,totalSongs:a.tracks.total,owner:a.owner.display_name};var a});return r.a.createElement("div",null,r.a.createElement(x.b,{className:a.header,variant:"subtitle1"},"Select a playlist"),r.a.createElement(ce.a,{className:a.root},r.a.createElement(C.a,{container:!0},i.map(function(e){return r.a.createElement(C.a,{item:!0,md:4,xs:12},r.a.createElement(ue.a,{key:e.id,button:!0,onClick:function(){return n(e.id)},className:a.listitem},r.a.createElement("img",{src:e.img.url,alt:e.name,className:a.img}),r.a.createElement(he.a,{classes:{primary:a.primary},primary:e.name,secondary:"by ".concat(e.owner," \u25cf ").concat(e.totalSongs," songs")})))}))))}),$r=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.state={name:"",selectedPlaylist:"",spotifyUser:null,avatar:null,playlists:[],invalidSpotifyToken:!localStorage.getItem("spotifytoken")||Date.now()-localStorage.getItem("spotifytoken_timestamp")>En},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.setPlaylist=t.setPlaylist.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.game,t=this.state.invalidSpotifyToken,n=localStorage.getItem("spotifytoken");if(t){var r=window.location.origin+window.location.pathname;localStorage.setItem("spotify_type","play");localStorage.setItem("RecentGameIdPlay",a.gameId),window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(wn,"&redirect_uri=").concat(r,"&scope=").concat(["user-top-read","playlist-read-private"].join("%20"),"&response_type=token&show_dialog=true")}var i=new Headers;i.append("Authorization","Bearer ".concat(n)),fetch("https://api.spotify.com/v1/me",{method:"GET",headers:i}).then(function(e){return e.json()}).then(function(a){return e.setState({name:a.display_name,avatar:a.images.length>0?a.images[0].url:null}),fetch("https://api.spotify.com/v1/users/".concat(a.id,"/playlists"),{method:"GET",headers:i})}).then(function(e){return e.json()}).then(function(a){e.setState({playlists:a.items}),console.table(a.items)})}},{key:"setPlaylist",value:function(e){this.createPlayer(e)}},{key:"createPlayer",value:function(e){var a=this.state,t=a.name,n=a.avatar;(0,this.props.addPlayer)({name:t,playlist:e,score:0,avatar:n}),this.setState({selectedPlaylist:e})}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=this.state,i=(n.name,n.playlists),o=n.selectedPlaylist;if(n.invalidSpotifyToken)return r.a.createElement("span",null,"Loading...");var s="";return a.players&&t&&a.players[t]&&(s=a.players[t].name),r.a.createElement("div",{className:"phase-container"},o?r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(x.b,{variant:"h5"},r.a.createElement("span",null,"Welcome "),r.a.createElement("span",{className:"dynamic-text"},s)),r.a.createElement(x.b,{variant:"subtitle1"}," Watch the screen, your name should show.")),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",null,r.a.createElement(Xr,{setSelection:this.setPlaylist,playlists:i})))}}]),a}(n.Component),ei=t(166),ai=t.n(ei),ti=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={answer:[]},t.saveAnswer=t.saveAnswer.bind(Object(d.a)(Object(d.a)(t))),t.toggleOption=t.toggleOption.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.state.answer;this.saveAnswer()}},{key:"toggleOption",value:function(e){this.setState(function(a){return a.answer.includes(e)?{answer:a.answer.filter(function(a){return a!==e})}:{answer:Object(z.a)(a.answer).concat([e])}})}},{key:"saveAnswer",value:function(){var e=this.state.answer,a=this.props,t=a.game,n=a.playerKey,r={answer:e,question:t.minigame.currentq,playerKey:n};f.database().ref("/games/".concat(t.key,"/answers")).push(r,function(e){e&&alert("error saving answer".concat(e))})}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.game,i=this.state.answer,o=Object.values(n.players),s=o.length>11;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:t.container},r.a.createElement(x.b,{className:t.header,variant:"subtitle1"},"Markera ditt svar"),r.a.createElement(ce.a,{dense:s,className:t.root},r.a.createElement(C.a,{container:!0},o.map(function(a){return r.a.createElement(C.a,{key:a.key,item:!0,md:4,xs:s?6:12},r.a.createElement(ue.a,{button:!0,onClick:function(){return e.toggleOption(a.key)},className:t.listitem},r.a.createElement(Dn.a,null,a.avatar?r.a.createElement(Gn.a,{alt:a.name,src:a.avatar}):r.a.createElement(Gn.a,null,r.a.createElement(xn.a,null))),i.includes(a.key)?r.a.createElement(he.a,{className:s?t.itemtextDense:t.itemtext,primary:a.name}):r.a.createElement(he.a,{className:s?t.itemtextDense:t.itemtext,secondary:a.name}),r.a.createElement($n.a,null,r.a.createElement(ai.a,{onClick:function(){return e.toggleOption(a.key)},color:"primary",checked:i.includes(a.key)}))))})))))}}]),a}(n.Component),ni=Object($.withStyles)(function(e){return{root:{width:"100%"},itemtext:{overflow:"hidden"},header:{backgroundColor:"#282828",padding:10,marginBottom:10},itemtextDense:{paddingLeft:2,paddingRight:2,overflow:"hidden"},listitem:{paddingLeft:12,paddingRight:38},container:{height:"100vh",width:"100vw"}}})(ti),ri=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){this.props.game;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"}),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(x.b,{variant:"subtitle1"},"Look at the screen to se overall player results")))}}]),a}(n.Component),ii=Object($.createMuiTheme)({palette:{type:"dark",primary:{main:"#1DB954"},secondary:{main:"#fff"}},overrides:{MuiButton:{root:{borderRadius:500,padding:"11px 44px",color:"#fff",letterSpacing:".16em",WebkitTransition:"none 33ms cubic-bezier(.3,0,.7,1)",transition:"none 33ms cubic-bezier(.3,0,.7,1)",WebkitTransitionProperty:"all",transitionProperty:"all",touchAction:"manipulation",willChange:"transform",lineHeight:1.6,minWidth:130,margin:10,fontWeight:300,fontSize:11,"&:hover":{WebkitTransition:"none 33ms cubic-bezier(.3,0,0,1)",transition:"none 33ms cubic-bezier(.3,0,0,1)",WebkitTransitionProperty:"all",transitionProperty:"all",WebkitTransform:"scale(1.06)",transform:"scale(1.06)"}},textPrimary:{backgroundColor:"#1DB954",color:"#fff","&:hover":{backgroundColor:"#1ed760"}},textSecondary:{backgroundColor:"rgba(24,24,24,.7)","&:hover":{backgroundColor:"rgba(24,24,24,.7)",webkitBoxShadow:"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)",boxShadow:"inset 0 0 0 2px #fff, 0 0 0 1px rgba(0,0,0,0)"},webkitBoxShadow:"inset 0 0 0 2px #b3b3b3",boxShadow:"inset 0 0 0 2px #b3b3b3"}}}}),oi=function(e){function a(){return Object(s.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=e.createPlayer,i="final_result"===a.phase||"end"===a.phase;switch(a.gametype){case"snake":return r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement(Cr,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(xr,{game:a}),"gameplay"===a.phase&&r.a.createElement(Mr,{game:a,playerKey:t}),i&&r.a.createElement(Sr,{game:a,playerKey:t}));case"tetris":return r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement(Cr,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(xr,{game:a}),"gameplay"===a.phase&&r.a.createElement(Ar,{game:a}),i&&r.a.createElement(Sr,{game:a,playerKey:t}));case"golf":return r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement(Cr,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(xr,{game:a}),("gameplay"===a.phase||"level_completed"===a.phase)&&r.a.createElement(Zr,{game:a,playerKey:t}),i&&r.a.createElement(Sr,{game:a,playerKey:t}));case"spotify":return document.querySelector("body").classList.add("dark-mode"),r.a.createElement($.MuiThemeProvider,{theme:ii},r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement($r,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(xr,{game:a}),"gameplay"===a.phase&&r.a.createElement(ni,{game:a,playerKey:t}),"level_completed"===a.phase&&r.a.createElement(ri,{game:a,playerKey:t}),i&&r.a.createElement(Sr,{game:a,playerKey:t})));default:return null}}}]),a}(n.PureComponent);function si(e,a){f.database().ref("games").orderByChild("gameId").equalTo(e).once("value",a)}var li=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(G.a)({},e,a.target.value))}},t.state={game:{},gameId:"",recentGameId:localStorage.getItem("RecentGameIdPlay")||"",playerKey:"",recentGame:null,isRedirected:Date.now()-localStorage.getItem("spotifytoken_timestamp")<2e3},t.createPlayer=t.createPlayer.bind(Object(d.a)(Object(d.a)(t))),t.joinGame=t.joinGame.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.state,t=a.recentGameId;a.isRedirected&&this.joinGame(t),t&&si(t,function(a){var t;a.val()&&(a.forEach(function(e){t=e.val()}),"IN_PROGRESS"===t.status&&e.setState({recentGame:t}))})}},{key:"joinGame",value:function(e){var a=this.props,t=a.showSnackbar,n=a.toggleHeader,r=this;si(e,function(e){if(e.val()){var a;if(e.forEach(function(e){a=e.val()}),"connection"===a.phase){var i=localStorage.getItem("RecentPlayerKey");i&&a.players&&a.players[i]&&r.setState({playerKey:i}),r.initGameListiner(a.key);t({variant:"success",message:"Connected to game"}),n(!1)}else if("setup"===a.phase){t({variant:"error",message:"Game is not yet started"})}else{var o=localStorage.getItem("RecentPlayerKey");if(o&&a.players&&a.players[o]){r.setState({playerKey:o}),localStorage.setItem("RecentGameIdPlay",a.gameId),r.initGameListiner(a.key);t({variant:"success",message:"Connected to game"}),n(!1)}else{t({variant:"error",message:"Game is in progress"})}}}else{t({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=f.database().ref("games/".concat(e)),t=this;a.on("value",function(e){var a=e.val();a?t.setState({game:a}):t.setState({game:""})})}},{key:"createPlayer",value:function(e){var a=this.state.game,t=this.props.showSnackbar,n=f.database().ref("/games/".concat(a.key,"/players")).push(),r=Object.assign({key:n.key},e),i=this;n.set(r,function(e){if(e){t({variant:"error",message:"Unexpected internal error"})}else i.setState({playerKey:r.key}),localStorage.setItem("RecentPlayerKey",r.key)})}},{key:"render",value:function(){var e=this,a=this.state,t=a.game,n=a.playerKey,i=a.gameId,o=a.recentGameId,s=a.recentGame,l=a.isRedirected,c=this.props.showSnackbar,m={golf:r.a.createElement(nr.a,null),spotify:r.a.createElement(ir.a,null),quiz:r.a.createElement(ar.a,null),snake:r.a.createElement(ar.a,null)};return!t.phase&&l?r.a.createElement("div",null,r.a.createElement("span",null,"Loading...")):t.phase?r.a.createElement("div",{className:"page-container play-page"},"quiz"===t.gametype&&r.a.createElement(kr,{game:t,createPlayer:this.createPlayer,playerKey:n,showSnackbar:c}),"snake"===t.gametype&&r.a.createElement(oi,{game:t,createPlayer:this.createPlayer,playerKey:n,showSnackbar:c}),"tetris"===t.gametype&&r.a.createElement(oi,{game:t,createPlayer:this.createPlayer,playerKey:n,showSnackbar:c}),"golf"===t.gametype&&r.a.createElement(oi,{game:t,createPlayer:this.createPlayer,playerKey:n,showSnackbar:c}),"spotify"===t.gametype&&r.a.createElement(oi,{game:t,createPlayer:this.createPlayer,playerKey:n,showSnackbar:c})):r.a.createElement("div",{className:"page-container play-page"},r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(M.a,{label:"Game PIN",name:"Game ID",value:i,margin:"normal",onChange:this.handleChange("gameId")})),r.a.createElement(I.a,{onClick:function(){return e.joinGame(i)},variant:"contained"},"Join")),s&&r.a.createElement("div",null,r.a.createElement(ce.a,null,r.a.createElement(ue.a,null,r.a.createElement(Dn.a,null,r.a.createElement(Gn.a,null,m[s.gametype])),r.a.createElement(he.a,{primary:s.title,secondary:s.gameId}),r.a.createElement($n.a,null,r.a.createElement(ie.a,{"aria-label":"reconnect",onClick:function(){return e.joinGame(o)}},r.a.createElement(x.b,null,"reconnect")))))))}}]),a}(n.Component),ci=t(802),mi=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={};var n=localStorage.getItem("spotifytoken_timestamp"),r=localStorage.getItem("spotify_type");return Date.now()-n<2e3&&r&&e.history.push("/".concat(r)),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-page home-page"},r.a.createElement(C.a,{container:!0,spacing:24},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(x.b,{variant:"h3"},"Welcome to stagehoot")),r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{to:"/play"},r.a.createElement(x.a,{className:"card-button"},r.a.createElement(q.a,{title:"Play"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Connect to a game as player"))))),r.a.createElement(C.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{to:"/host"},r.a.createElement(x.a,{className:"card-button"},r.a.createElement(q.a,{title:"Host"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Host a created game using game pin"))))),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(b.a,{to:"/create"},r.a.createElement(x.a,{className:"card-button"},r.a.createElement(q.a,{title:"Create"}),r.a.createElement(N.a,null,r.a.createElement(x.b,{variant:"subtitle1",align:"center"},"Setup a new game and recive a related game pin")))))))}}]),a}(n.Component),ui=Object(ci.a)(mi),di=t(357),hi=t(350),pi=t.n(hi),gi=t(352),vi=t.n(gi),fi=t(353),bi=t.n(fi),yi=t(356),Ei=t.n(yi),wi=t(354),ki=t.n(wi),Oi=t(355),ji=t.n(Oi),Ci=t(167),xi=t.n(Ci),Si=t(126),qi=t.n(Si),Pi=t(351),Ni=t.n(Pi),zi={success:pi.a,warning:Ni.a,error:vi.a,info:bi.a};var Gi=Object($.withStyles)(function(e){return{success:{backgroundColor:ki.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:ji.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var a=e.classes,t=e.message,n=e.onClose,i=e.variant,o=Object(di.a)(e,["classes","message","onClose","variant"]),s=zi[i];return r.a.createElement(qi.a,Object.assign({className:a[i],"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(s,{className:ae()(a.icon,a.iconVariant)}),t),action:[r.a.createElement(ie.a,{key:"close","aria-label":"Close",color:"inherit",className:a.close,onClick:n},r.a.createElement(Ei.a,{className:a.icon}))]},o))}),Ti=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).handleClose=function(e){var a=t.props.hideSnackbar;"clickaway"!==e&&a()},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.snack;return r.a.createElement("div",null,r.a.createElement(xi.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(Gi,{onClose:this.handleClose,variant:e.variant,message:e.message})))}}]),a}(r.a.Component),Mi=function(e){function a(e){var t;Object(s.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={snack:"",showHeader:!0};var n=window.location.hash.substring(1).split("&").reduce(function(e,a){if(a){var t=a.split("=");e[t[0]]=decodeURIComponent(t[1])}return e},{});return window.location.hash="",n.access_token&&(localStorage.setItem("spotifytoken",n.access_token),localStorage.setItem("spotifytoken_timestamp",Date.now())),t.showSnackbar=t.showSnackbar.bind(Object(d.a)(Object(d.a)(t))),t.hideSnackbar=t.hideSnackbar.bind(Object(d.a)(Object(d.a)(t))),t.toggleHeader=t.toggleHeader.bind(Object(d.a)(Object(d.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"hideSnackbar",value:function(){var e=this.state.snack;e.open=!1,this.setState({snack:e})}},{key:"showSnackbar",value:function(e){e.open=!0,this.setState({snack:e})}},{key:"toggleHeader",value:function(e){this.setState({showHeader:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},this.state.showHeader&&r.a.createElement(O,null),r.a.createElement("div",{id:"content"},r.a.createElement(p.a,{exact:!0,path:"/play",render:function(){return r.a.createElement(li,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),r.a.createElement(p.a,{exact:!0,path:"/host",render:function(){return r.a.createElement(Zn,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),r.a.createElement(p.a,{exact:!0,path:"/create",render:function(){return r.a.createElement(Ae,{showSnackbar:e.showSnackbar})}}),r.a.createElement(p.a,{exact:!0,path:"/",render:function(){return r.a.createElement(ui,null)}})),this.state.snack&&r.a.createElement(Ti,{snack:this.state.snack,hideSnackbar:this.hideSnackbar})))}}]),a}(n.Component);o.a.render(r.a.createElement(Mi,null),document.getElementById("root"))}},[[400,2,1]]]);
//# sourceMappingURL=main.b6eb0c65.chunk.js.map