(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{282:function(e,a,t){e.exports=t(608)},287:function(e,a,t){},289:function(e,a,t){},449:function(e,a,t){e.exports={cyanColor:"#66b1bb",redColor:"#EF9A9A",purpleColor:"#CE93D8",greenColor:"#9db484"}},608:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(41),i=t.n(s),o=(t(287),t(5)),l=t(6),c=t(9),m=t(7),u=t(8),h=t(1),d=(t(289),t(220)),p=t.n(d),g=(t(295),t(297),p.a.initializeApp({apiKey:"AIzaSyB8vYoKiw2DlJycM5bqKKaU4vK_0n7HcsU",authDomain:"stagehoot.firebaseapp.com",databaseURL:"https://stagehoot.firebaseio.com",projectId:"stagehoot",storageBucket:"stagehoot.appspot.com",messagingSenderId:"589747985768"})),b=t(609),v=t(115),y=t.n(v),E=t(91),f=t.n(E),O=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e="Stagehoot";return"ettkilomjol-dev"===g.options.projectId&&(e="Ett Kilo Mj\xf6l DEV"),r.a.createElement("div",{id:"header"},r.a.createElement(y.a,{position:"static"},r.a.createElement(f.a,{className:"toolbar"},r.a.createElement("div",{className:"appbar-container--left"},r.a.createElement(b.a,{className:"appbar-title text-big",to:"/"},e)))))}}]),a}(n.Component),j=t(10),k=t.n(j),w=t(4),C=t(37),q=t.n(C),x=t(38),S=t.n(x),N=t(42),P=t(23),z=t(21),A=t.n(z),G=t(14),Q=t.n(G),F=t(31),M=t.n(F),_=t(13),T=t.n(_),D=t(15),I=t.n(D),K=t(32),B=t.n(K),L=t(51),W=t.n(L),H=t(52),R=t.n(H),J=t(30),U=t.n(J),V=t(33),Y=t.n(V),Z=t(34),X=t(16),$=t.n(X),ee=t(116),ae=t.n(ee),te=t(50),ne=t.n(te),re=t(46),se=t.n(re),ie=t(53),oe=t.n(ie),le=t(54),ce=t.n(le),me=t(60),ue=t.n(me),he=t(222),de=t.n(he),pe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={expanded:!1},t.deleteQuestion=t.deleteQuestion.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"deleteQuestion",value:function(){this.props.deleteQuestion(this.props.question)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ae.a,{className:e.card},r.a.createElement(q.a,{action:r.a.createElement(ne.a,{onClick:this.deleteQuestion},r.a.createElement(de.a,null)),title:this.props.question.question,subheader:this.props.question.timelimit?this.props.question.timelimit+" seconds":"default timelimit"}),r.a.createElement(S.a,null,r.a.createElement(se.a,{variant:"subtitle1",align:"left"},"Correct answers"),r.a.createElement(oe.a,null,this.props.question.correctAnswers.map(function(e,a){return r.a.createElement(ce.a,{key:a},r.a.createElement(ue.a,{primary:e}))})),r.a.createElement(se.a,{variant:"subtitle1",align:"left"},"Wrong answers"),r.a.createElement(oe.a,null,this.props.question.wrongAnswers.map(function(e,a){return r.a.createElement(ce.a,{key:a},r.a.createElement(ue.a,{primary:e}))}))))}}]),a}(n.Component),ge=Object(Z.withStyles)(function(e){return{card:{maxWidth:400}}})(pe),be=t(71),ve=t.n(be),ye=t(92),Ee=t.n(ye);function fe(e){return"multiple"===e.aType||"boolean"===e.aType?10+Math.floor((e.correctAnswers.join().length+e.wrongAnswers.join().length)/30):"free"===e.aType?20:(e.aType,20)}function Oe(e){return(new DOMParser).parseFromString("<!doctype html><body>".concat(e),"text/html").body.textContent}function je(e){for(var a=[],t=0;t<e.length;t++)a.push(Oe(e[t]));return a}var ke,we,Ce=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.state={nrOfQuestions:"10",category:"0",difficulty:"0",aType:"0"},t.generateQuestions=t.generateQuestions.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"generateQuestions",value:function(){var e=this.state,a=e.nrOfQuestions,t=e.category,n=e.difficulty,r=e.aType,s=this.props,i=s.addQuestions,o=s.showSnackbar,l="https://opentdb.com/api.php?";"0"!==a&&(l+="amount=".concat(a)),"0"!==t&&(l+="&category=".concat(t)),"0"!==n&&(l+="&difficulty=".concat(n)),"0"!==r&&(l+="&type=".concat(r)),fetch(l).then(function(e){return e.json()}).then(function(e){if(0===e.response_code){for(var a=[],t=0;t<e.results.length;t++){var n=e.results[t],r={question:Oe(n.question),correctAnswers:[Oe(n.correct_answer)],wrongAnswers:je(n.incorrect_answers),qType:"text",aType:n.type,category:n.category,difficulty:n.difficulty};a.push(r)}i(a)}else{var s={variant:"error",message:"Could not generate questions( code: ".concat(e.response_code,")")};o(s)}})}},{key:"render",value:function(){var e=this.state,a=e.nrOfQuestions,t=e.category,n=e.difficulty,s=e.aType;return r.a.createElement("div",null,r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(A.a,{label:"Number of questions",name:"nrOfQuestions",value:a,margin:"normal",onChange:this.handleChange("nrOfQuestions")}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(M.a,{htmlFor:"category"},"Category"),r.a.createElement(B.a,{value:t||"",onChange:this.handleChangeSelect,name:"category",inputProps:{id:"category"}},r.a.createElement(T.a,{value:"0"},"Any category"),r.a.createElement(T.a,{value:"9"},"General Knowledge"),r.a.createElement(T.a,{value:"10"},"Entertainment: Books"),r.a.createElement(T.a,{value:"11"},"Entertainment: Film"),r.a.createElement(T.a,{value:"12"},"Entertainment: Music"),r.a.createElement(T.a,{value:"13"},"Entertainment: Musicals and Theatres"),r.a.createElement(T.a,{value:"14"},"Entertainment: Television"),r.a.createElement(T.a,{value:"15"},"Entertainment: Video Games"),r.a.createElement(T.a,{value:"16"},"Entertainment: Board Games"),r.a.createElement(T.a,{value:"17"},"Science and Nature"),r.a.createElement(T.a,{value:"18"},"Science: Computers"),r.a.createElement(T.a,{value:"19"},"Science: Mathematics"),r.a.createElement(T.a,{value:"20"},"Mythology"),r.a.createElement(T.a,{value:"21"},"Sports"),r.a.createElement(T.a,{value:"22"},"Geography"),r.a.createElement(T.a,{value:"23"},"History"),r.a.createElement(T.a,{value:"24"},"Politics"),r.a.createElement(T.a,{value:"25"},"Art"),r.a.createElement(T.a,{value:"26"},"Celebrities"),r.a.createElement(T.a,{value:"27"},"Animals"),r.a.createElement(T.a,{value:"28"},"Vehicles"),r.a.createElement(T.a,{value:"29"},"Entertainment: Comics"),r.a.createElement(T.a,{value:"30"},"Science: Gadgets"),r.a.createElement(T.a,{value:"31"},"Entertainment: Japanese Anime and Manga"),r.a.createElement(T.a,{value:"32"},"Entertainment: Cartoon and Animations")))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(M.a,{htmlFor:"difficulty"},"Difficulty"),r.a.createElement(B.a,{value:n||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty"}},r.a.createElement(T.a,{value:"0"},"Any difficulty"),r.a.createElement(T.a,{value:"easy"},"Easy"),r.a.createElement(T.a,{value:"medium"},"Medium"),r.a.createElement(T.a,{value:"hard"},"Hard")))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(M.a,{htmlFor:"aType"},"Answer type"),r.a.createElement(B.a,{value:s||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType"}},r.a.createElement(T.a,{value:"0"},"Any type"),r.a.createElement(T.a,{value:"multiple"},"Multiple choice"),r.a.createElement(T.a,{value:"boolean"},"True/False")))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(Q.a,{onClick:this.generateQuestions,variant:"contained"},"Generate"))))}}]),a}(n.Component),qe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleTrueFalse=function(e){var a=e.target.value;t.setState({correctAnswer:a,wrongAnswerOne:"true"===a?"false":"true"})},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.state={question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:"",timelimit:"10",qType:"text",aType:"multiple",generateQuestions:!0},t.sendQuestion=t.sendQuestion.bind(Object(h.a)(Object(h.a)(t))),t.toggleGenerateQuestion=t.toggleGenerateQuestion.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"sendQuestion",value:function(){var e=this.state,a=e.question,t=e.correctAnswer,n=e.wrongAnswerOne,r=e.wrongAnswerTwo,s=e.wrongAnswerThree,i=e.timelimit,o=e.qType,l=e.aType,c=this.props.addQuestion,m={question:a,correctAnswers:[t],wrongAnswers:[n,r,s],timelimit:i,qType:o,aType:l};this.setState({question:"",correctAnswer:"",wrongAnswerOne:"",wrongAnswerTwo:"",wrongAnswerThree:""}),c(m)}},{key:"toggleGenerateQuestion",value:function(){var e=this.state.generateQuestions;this.setState({generateQuestions:!e})}},{key:"render",value:function(){var e=this.state,a=e.question,t=e.correctAnswer,n=e.wrongAnswerOne,s=e.wrongAnswerTwo,i=e.wrongAnswerThree,o=e.timelimit,l=e.qType,c=e.aType,m=e.generateQuestions,u=this.props,h=u.addQuestions,d=u.showSnackbar,p=u.isTimelimit;return m?r.a.createElement("div",null,r.a.createElement(Q.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Custom questions"),r.a.createElement(Q.a,{onClick:this.toggleGenerateQuestion,disabled:!0,variant:"contained"},"Auto generate questions"),r.a.createElement(Ce,{addQuestions:h,showSnackbar:d})):r.a.createElement("div",null,r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(Q.a,{onClick:this.toggleGenerateQuestion,disabled:!0,variant:"contained"},"Custom questions"),r.a.createElement(Q.a,{onClick:this.toggleGenerateQuestion,variant:"contained"},"Auto generate questions")),r.a.createElement(k.a,{item:!0,xs:12,md:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"qtype-required"},"Question type"),r.a.createElement(B.a,{value:l||"",onChange:this.handleChangeSelect,name:"qType",inputProps:{id:"qtype-required"}},r.a.createElement(T.a,{value:"text"},"Text"),r.a.createElement(T.a,{value:"image"},"Image"),r.a.createElement(T.a,{value:"video"},"Video")))),r.a.createElement(k.a,{item:!0,xs:12,md:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"aType-required"},"Answer type"),r.a.createElement(B.a,{value:c||"",onChange:this.handleChangeSelect,name:"aType",inputProps:{id:"aType-required"}},r.a.createElement(T.a,{value:"boolean"},"True/false"),r.a.createElement(T.a,{value:"player"},"Player"),r.a.createElement(T.a,{value:"multiple"},"Mulitichoice"),r.a.createElement(T.a,{value:"free"},"Free text")))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{fullWidth:!0},r.a.createElement(A.a,{label:"Question",name:"question",value:a,margin:"normal",onChange:this.handleChange("question")}))),"multiple"===c&&r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Correct answer",name:"correctAnswer",margin:"normal",value:t,onChange:this.handleChange("correctAnswer")}))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Wrong answer",name:"wrongAnswerOne",margin:"normal",value:n,onChange:this.handleChange("wrongAnswerOne")}))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Wrong answer",name:"wrongAnswerTwo",margin:"normal",value:s,onChange:this.handleChange("wrongAnswerTwo")}))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Wrong answer",name:"wrongAnswerThree",margin:"normal",value:i,onChange:this.handleChange("wrongAnswerThree")})))),"boolean"===c&&r.a.createElement("div",null,r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(W.a,{component:"legend"},"Answer"),r.a.createElement(Ee.a,{"aria-label":"answer",name:"correctAnswer",value:t,onChange:this.handleTrueFalse},r.a.createElement(U.a,{value:"true",control:r.a.createElement(ve.a,null),label:"True"}),r.a.createElement(U.a,{value:"false",control:r.a.createElement(ve.a,null),label:"False"}))))),p&&r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Time limit",name:"timelimit",type:"number",value:o,margin:"normal",onChange:this.handleChange("timelimit")}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(Q.a,{onClick:this.sendQuestion,variant:"contained"},"Add question"))))}}]),a}(n.Component),xe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"quiz",gamemode:"normal",timelimit:!0,timescore:!1,questions:[],gamePass:""},t.addQuestion=t.addQuestion.bind(Object(h.a)(Object(h.a)(t))),t.addQuestions=t.addQuestions.bind(Object(h.a)(Object(h.a)(t))),t.deleteQuestion=t.deleteQuestion.bind(Object(h.a)(Object(h.a)(t))),t.createQuiz=t.createQuiz.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"addQuestion",value:function(e){var a=this.state,t=a.questions,n=a.timelimit,r=this.props.showSnackbar,s=e;0===t.length?s.id=1:s.id=Math.max.apply(Math,Object(N.a)(t.map(function(e){return e.id})))+1,n&&!s.timelimit&&(s.timelimit=fe(s)),t.push(s),this.setState({questions:t});r({variant:"success",message:"Added question"})}},{key:"addQuestions",value:function(e){for(var a=this.state,t=a.questions,n=a.timelimit,r=this.props.showSnackbar,s=0;s<e.length;s++){var i=e[s];0===t.length?i.id=1:i.id=Math.max.apply(Math,Object(N.a)(t.map(function(e){return e.id})))+1,n&&!i.timelimit&&(i.timelimit=fe(i)),t.push(i)}this.setState({questions:t});r({variant:"success",message:"Added questions"})}},{key:"deleteQuestion",value:function(e){var a=this.state.questions,t=a.map(function(e){return e.id}).indexOf(e.id);a.splice(t,1),this.setState({questions:a})}},{key:"createQuiz",value:function(){var e=this.props.createQuiz,a=this.state,t=a.timelimit;e({password:a.gamePass,gametype:a.gametype,tile:a.title,quiz:{gamemode:"normal",timelimit:t,timescore:a.timescore,questions:a.questions}})}},{key:"render",value:function(){var e=this,a=this.state,t=a.timelimit,n=a.gamePass,s=a.gametype,i=a.title,o=a.timescore,l=a.gamemode,c=a.questions,m=this.props.showSnackbar;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(k.a,{container:!0,spacing:8},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(w.b,{variant:"h4"},"New quiz")),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"Gametype"),r.a.createElement(B.a,{value:s||"",onChange:this.handleChangeSelect,name:"gametype",inputProps:{id:"gametype-required"}},r.a.createElement(T.a,{value:"quiz"},"Quiz"),r.a.createElement(T.a,{value:"survey"},"Survey"),r.a.createElement(T.a,{value:"discussion"},"Discussion"),r.a.createElement(T.a,{value:"minigame"},"Mini game")))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"Gamemode"),r.a.createElement(B.a,{value:l||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(T.a,{value:"normal"},"Normal"),r.a.createElement(T.a,{value:"wild"},"Wild")))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(W.a,{component:"legend"},"Game options"),r.a.createElement(R.a,null,r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:t,onChange:this.handleChangeBool("timelimit"),value:"timelimit"}),label:"Time limited questions"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:o,onChange:this.handleChangeBool("timescore"),value:"timescore"}),label:"Time based score"})))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Title",name:"title",value:i,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Password",type:"password",name:"gamePass",margin:"normal",value:n,onChange:this.handleChange("gamePass")}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(Q.a,{onClick:this.createQuiz,variant:"contained"},"Create quiz")))),r.a.createElement(k.a,{item:!0,xs:12,md:6},r.a.createElement(qe,{addQuestions:this.addQuestions,addQuestion:this.addQuestion,isTimelimit:!!t,showSnackbar:m})),r.a.createElement(k.a,{container:!0},c.map(function(a,t){return r.a.createElement(k.a,{item:!0,xs:12,md:6,key:a.id},r.a.createElement(ge,{question:a,transitionDelay:t,deleteQuestion:e.deleteQuestion}))}))))}}]),a}(n.Component),Se=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"tetris",gamemode:"survival",password:""},t.validateGame=t.validateGame.bind(Object(h.a)(Object(h.a)(t))),t.createGame=t.createGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state;e({password:a.password,gametype:a.gametype,title:a.title,minigame:{gamemode:a.gamemode}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(k.a,{container:!0,spacing:8},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(k.a,{item:!0,xs:4},r.a.createElement(I.a,{required:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(B.a,{value:n||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(T.a,{value:"survival"},"Survival"),r.a.createElement(T.a,{value:"race"},"Race"))),r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")})),r.a.createElement(Q.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),Ne=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.state={title:"",gametype:"snake",gamemode:"survival",racetarget:20,opponentCollision:!1,eatOpponents:!1,wallCollision:!0,password:"",difficulty:"300"},t.createGame=t.createGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(){var e=this.props.createGame,a=this.state,t=a.password,n=a.gametype,r=a.title,s=a.gamemode,i=a.wallCollision,o=a.opponentCollision;e({password:t,gametype:n,title:r,minigame:{gamemode:s,wallCollision:i,eatOpponents:a.eatOpponents,opponentCollision:o,racetarget:a.racetarget,difficulty:a.difficulty}})}},{key:"render",value:function(){var e=this.state,a=e.password,t=e.title,n=e.gamemode,s=e.wallCollision,i=e.opponentCollision,o=e.eatOpponents,l=e.racetarget,c=e.difficulty;return r.a.createElement("div",{className:"app-page create-page"},r.a.createElement(k.a,{container:!0,spacing:24},r.a.createElement("form",{autoComplete:"off"},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(w.b,{variant:"h4"},"New Snake game")),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(B.a,{value:n||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(T.a,{value:"survival"},"Survival"),r.a.createElement(T.a,{value:"race"},"Race")))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{required:!0,fullWidth:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(B.a,{value:c||"",fullWidth:!0,onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(T.a,{value:"500"},"Easy"),r.a.createElement(T.a,{value:"300"},"Medium"),r.a.createElement(T.a,{value:"100"},"Hard"),r.a.createElement(T.a,{value:"75"},"Pro")))),r.a.createElement(k.a,{item:!0,xs:12},"race"===n&&r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Snake length",name:"racetarget",type:"number",value:l,margin:"normal",onChange:this.handleChange("racetarget")}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:s,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:i,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:i&&o,disabled:!i,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Title",name:"title",value:t,margin:"normal",onChange:this.handleChange("title")})),r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Password",type:"password",name:"password",margin:"normal",value:a,onChange:this.handleChange("password")}))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(Q.a,{onClick:this.createGame,variant:"contained"},"Create")))))}}]),a}(n.Component),Pe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).setGameType=function(e){return function(a){t.setState({gametype:e})}},t.state={gametype:""},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.createGame,a=this.state.gametype;return r.a.createElement("div",{className:"app-page create-page"},!a&&r.a.createElement(k.a,{container:!0,spacing:24},r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("snake")},r.a.createElement(q.a,{title:"Snake"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Create a classic game of snake or change the modes to fit your audience")))),r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("tetris")},r.a.createElement(q.a,{title:"Tetris"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Game is not available yet"))))),"snake"===a&&r.a.createElement(Ne,{createGame:e}),"tetris"===a&&r.a.createElement(Se,{createGame:e}))}}]),a}(n.Component),ze=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).setGameType=function(e){return function(){t.setState({gametype:e})}},t.state={gametype:"",gameId:""},t.createGame=t.createGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createGame",value:function(e){var a=e;a.gameId=function(){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<6;t++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}(),a.created=Date.now(),a.status="CREATED",a.phase="setup";var t=this,n=g.database().ref("/games").push();a.key=n.key,n.set(a,function(e){if(e){t.setState({errorText:"Error: ".concat(e)});t.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{t.props.showSnackbar({variant:"success",message:"Successfully created!"}),t.setState({gameId:a.gameId,gametype:"done"}),localStorage.setItem("RecentGameId",a.gameId)}})}},{key:"render",value:function(){var e=this.state,a=e.gametype,t=e.gameId,n=this.props.showSnackbar;return r.a.createElement("div",{className:"app-page create-page"},!a&&r.a.createElement(k.a,{container:!0,spacing:24},r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("quiz")},r.a.createElement(q.a,{title:"Quiz"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Create your own quiz or generate one fast and easy")))),r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("minigame")},r.a.createElement(q.a,{title:"Mini Game"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Create a game to play just for fun or team building purposes")))),r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("survey")},r.a.createElement(q.a,{title:"Survey"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Survey your audience")))),r.a.createElement(k.a,{item:!0,xs:6},r.a.createElement(w.a,{className:"card-button",onClick:this.setGameType("discussion")},r.a.createElement(q.a,{title:"Discussion"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Create a discussion on a sppecified topic"))))),"quiz"===a&&r.a.createElement(xe,{createQuiz:this.createGame,showSnackbar:n}),"minigame"===a&&r.a.createElement(Pe,{createGame:this.createGame,showSnackbar:n}),"done"===a&&r.a.createElement("div",null,r.a.createElement(w.b,{variant:"h2"},r.a.createElement("span",null,"Created game PIN: ")," ",r.a.createElement("span",{className:"dynamic-text"},t)),r.a.createElement(b.a,{to:"/host"},"Host game")))}}]),a}(n.Component),Ae=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChangeBool=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.checked))}},t.state={surveyPlayers:!1,answerStreak:!0,nameGenerator:!1,remoteMode:!1,useTeams:!1,randomizeQuestionOrder:!1,autoPlayQuestions:!1},t.startGame=t.startGame.bind(Object(h.a)(Object(h.a)(t))),t.createTeamGame=t.createTeamGame.bind(Object(h.a)(Object(h.a)(t))),t.createClassicGame=t.createClassicGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"createTeamGame",value:function(){this.startGame(!0)}},{key:"createClassicGame",value:function(){this.startGame(!1)}},{key:"startGame",value:function(e){var a={},t=this.props.game.quiz;t.surveyPlayers=this.state.surveyPlayers,t.answerStreak=this.state.answerStreak,t.nameGenerator=this.state.nameGenerator,t.remoteMode=this.state.remoteMode,t.useTeams=e,t.autoPlayQuestions=this.state.autoPlayQuestions,t.randomizeQuestionOrder=this.state.randomizeQuestionOrder,t.currentQuestion=0,a.quiz=t,a.phase="connection",a.status="IN_PROGRESS",this.props.gameFunc.update(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h4"},"Game Settings"),r.a.createElement(Q.a,{onClick:this.createClassicGame,variant:"contained"},"Classic"),r.a.createElement(Q.a,{onClick:this.createTeamGame,variant:"contained"},"Team mode"),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(R.a,null,r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.nameGenerator,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.remoteMode,onChange:this.handleChangeBool("remoteMode"),value:"remoteMode"}),label:"Remote playmode"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.answerStreak,onChange:this.handleChangeBool("answerStreak"),value:"answerStreak"}),label:"Use answer scorestreak"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.surveyPlayers,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.randomizeQuestionOrder,onChange:this.handleChangeBool("randomizeQuestionOrder"),value:"randomizeQuestionOrder"}),label:"Randomize question order"}),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:this.state.autoPlayQuestions,onChange:this.handleChangeBool("autoPlayQuestions"),value:"autoPlayQuestions"}),label:"Auto play questions"}))))}}]),a}(n.Component),Ge=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game.players;return e=e?Object.values(e):[],r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h2"},r.a.createElement("span",null,"Join game at: "),r.a.createElement("span",{className:"dynamic-text"},"mannfeldt.github.io/stagehoot")),r.a.createElement(w.b,{variant:"h2"},r.a.createElement("span",null,"Enter game PIN: "),r.a.createElement("span",{className:"dynamic-text"},this.props.game.gameId)),r.a.createElement(w.b,{variant:"subtitle1"},this.props.game.title)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(k.a,{container:!0},e.map(function(e,a){return r.a.createElement(k.a,{key:a,item:!0,xs:3},r.a.createElement(w.b,{paragraph:!0,variant:"body1",className:"dynamic-text"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(Q.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(n.Component),Qe=(t(449),function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return"slow"===this.props.speed?r.a.createElement("div",{className:"demo_slow"},r.a.createElement("div",{className:"demo_slow__colored-blocks"},r.a.createElement("div",{className:"demo_slow__colored-blocks-rotater"},r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"}),r.a.createElement("div",{className:"demo_slow__colored-block"})),r.a.createElement("div",{className:"demo_slow__colored-blocks-inner"}),r.a.createElement("div",{className:"demo_slow__text"},"Ready")),r.a.createElement("div",{className:"demo_slow__inner"},r.a.createElement("svg",{className:"demo_slow__numbers",viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("path",{className:"demo_slow__num-path-1",d:"M40,28 55,22 55,78"}),r.a.createElement("path",{className:"demo_slow__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),r.a.createElement("path",{className:"demo_slow__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),r.a.createElement("path",{className:"demo_slow__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),r.a.createElement("path",{className:"demo_slow__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),r.a.createElement("path",{className:"demo_slow__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r l0,-61 L40,28"})))):r.a.createElement("div",{className:"demo"},r.a.createElement("div",{className:"demo__colored-blocks"},r.a.createElement("div",{className:"demo__colored-blocks-rotater"},r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"}),r.a.createElement("div",{className:"demo__colored-block"})),r.a.createElement("div",{className:"demo__colored-blocks-inner"}),r.a.createElement("div",{className:"demo__text"},"Ready")),r.a.createElement("div",{className:"demo__inner"},r.a.createElement("svg",{className:"demo__numbers",viewBox:"0 0 100 100"},r.a.createElement("defs",null,r.a.createElement("path",{className:"demo__num-path-1",d:"M40,28 55,22 55,78"}),r.a.createElement("path",{className:"demo__num-join-1-2",d:"M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"}),r.a.createElement("path",{className:"demo__num-path-2",d:"M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"}),r.a.createElement("path",{className:"demo__num-join-2-3",d:"M28,69 Q25,44 34.4,27.4"}),r.a.createElement("path",{className:"demo__num-path-3",d:"M30,20 60,20 40,50 a18,15 0 1,1 -12,19"})),r.a.createElement("path",{className:"demo__numbers-path",d:"M-10,20 60,20 40,50 a18,15 0 1,1 -12,19\r Q25,44 34.4,27.4\r l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73\r a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83\r l0,-61 L40,28"}))))}}]),a}(n.PureComponent)),Fe=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"awaiting_question"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h2"},"Starting quiz"),r.a.createElement(Qe,{speed:"slow"}))}}]),a}(n.Component),Me=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:t.startCounter()},t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){a--,e.setState({counter:a}),0===a&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"show_question"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h2"},"Loading next question"),r.a.createElement(Qe,{speed:"slow"}))}}]),a}(n.Component),_e=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={question:""},t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e});var a=3e3+20*e.question.length;setTimeout(this.nextPhase,a)}},{key:"nextPhase",value:function(){var e=[];if("multiple"===this.state.question.aType?(e=this.state.question.wrongAnswers.concat(this.state.question.correctAnswers),e=this.shuffle(e)):"boolean"===this.state.question.aType&&(e=["True","False"]),e.length){var a={phase:"answer"};a.quiz=this.props.game.quiz,a.quiz.questions[a.quiz.currentQuestion].answers=e,this.props.gameFunc.update(a)}else this.props.gameFunc.update({phase:"answer"})}},{key:"shuffle",value:function(e){for(var a=e.length;a>0;){var t=Math.floor(Math.random()*a),n=e[--a];e[a]=e[t],e[t]=n}return e}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h2"},this.state.question.question)),r.a.createElement("div",{className:"quiz-middle-section"}),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),Te=t(45),De=t.n(Te),Ie=t(124),Ke=t.n(Ie),Be=t(126),Le=t.n(Be),We=t(125),He=t.n(We),Re=t(127),Je=t.n(Re),Ue=[{icon:r.a.createElement(Ke.a,null),color:"#80DEEA"},{icon:r.a.createElement(He.a,null),color:"#EF9A9A"},{icon:r.a.createElement(Le.a,null),color:"#CE93D8"},{icon:r.a.createElement(Je.a,null),color:"#C5E1A5"}],Ve=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=Ue[this.props.index],t=this.props.classes;return r.a.createElement("div",{className:"full-height"},this.props.answerQuestion&&r.a.createElement(De.a,{onClick:function(){e.props.answerQuestion(e.props.answer)},className:t.playAnswer,style:{backgroundColor:a.color}},r.a.createElement("div",{className:"button-answer-icon"},a.icon),this.props.remoteMode&&r.a.createElement("div",{className:t.answer},this.props.answer)),!this.props.answerQuestion&&r.a.createElement(De.a,{className:t.paper,style:{backgroundColor:a.color}},r.a.createElement("div",{className:t.icon},a.icon),r.a.createElement("div",{className:t.answer},this.props.answer)))}}]),a}(n.Component),Ye=Object(Z.withStyles)(function(e){return{root:{flexGrow:1},paper:{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary},playAnswer:{width:"50vw",height:"100%",textAlign:"center",color:e.palette.text.secondary},icon:{float:"left",fontSize:"28",color:"white",marginLeft:"10px"},answer:{fontSize:"24",color:"white"}}})(Ve),Ze=t(117),Xe=t.n(Ze),$e=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.classes,t=e.text,n=e.value,s=e.startValue,i=null===n?s:n;i<0&&(i=0);var o=i/(s<1?0:s);return r.a.createElement("div",{className:a.container},r.a.createElement(w.b,{variant:"caption",className:a.text},t),r.a.createElement(Xe.a,{className:a.circle,classes:{colorSecondary:a.circle},variant:"static",value:100*o,thickness:4,size:300}))}}]),a}(n.PureComponent),ea=Object(Z.withStyles)(function(e){return{text:{marginBottom:"-200px",fontSize:"86px",paddingTop:"160px"},circle:{color:"#6JpDK4"}}})($e),aa=t(118),ta=t.n(aa),na=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(w.b,{variant:"h5"},"Answers collected"),r.a.createElement(ta.a,{className:e.bar,variant:"determinate",value:this.props.value}))}}]),a}(n.Component),ra=Object(Z.withStyles)(function(e){return{bar:{color:"#32386D"}}})(na),sa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={counter:null,timelimit:0,started:!1,isTimelimited:!0,question:{question:"",answers:[]}},t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];if(this.setState({question:a,isTimelimited:this.props.game.quiz.timelimit,timelimit:10*a.timelimit}),this.props.game.quiz.timelimit)var t=this.props.game.players?Object.keys(this.props.game.players):[],n=10*a.timelimit,r=setInterval(function(){for(var s=0,i=0;i<t.length;i++)e.props.game.players[t[i]].answers&&e.props.game.players[t[i]].answers[a.id]&&s++;n--,e.setState({counter:n,started:!0}),(n<=-5||s===t.length)&&(e.nextPhase(),clearInterval(r))},100)}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"result_question"})}},{key:"render",value:function(){var e=[];this.props.game&&(e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers);for(var a=0,t=this.props.game.players?Object.keys(this.props.game.players):[],n=0;n<t.length;n++)this.props.game.players[t[n]].answers&&this.props.game.players[t[n]].answers[this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id]&&a++;var s=a/t.length*100;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h2"},this.state.question.question)),r.a.createElement("div",{className:"quiz-middle-section"},!this.state.isTimelimited&&r.a.createElement(Q.a,{onClick:this.nextPhase},"Next"),this.state.isTimelimited&&r.a.createElement(ea,{startValue:this.state.timelimit,value:this.state.counter,text:Math.ceil(this.state.counter/10)}),r.a.createElement("div",{className:"quiz-answercounter-container"},r.a.createElement(ra,{value:s}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(k.a,{container:!0,className:"align-bottom"},e.map(function(e,a){return r.a.createElement(k.a,{key:a,item:!0,xs:6},r.a.createElement(Ye,{answer:e,index:a}))}))))}}]),a}(n.Component),ia=t(128),oa=["#80DEEA","#EF9A9A","#CE93D8","#C5E1A5"],la=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(h.a)(Object(h.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(h.a)(Object(h.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getChartData",value:function(){for(var e={labels:[],datasets:[{data:[],label:"podium",backgroundColor:[],borderWidth:1}]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=[],n=0;n<a.length;n++){var r={},s=this.props.game.players[a[n]],i=0;if(s.answers){for(var o=0;o<Object.keys(s.answers).length;o++){var l=this.props.game.quiz.questions[o],c=s.answers[l.id];c&&(i+=c.score)}r.score=i,r.name=s.name,t.push(r)}}t.sort(function(e,a){return a.score-e.score});for(var m=t.length>20?20:t.length,u=0;u<m;u++)e.labels.push(t[u].name),e.datasets[0].data.push(t[u].score),e.datasets[0].backgroundColor.push(oa[u%4]);return e}},{key:"getChartHeight",value:function(){var e=70+30*this.getChartData().labels.length;return e>740&&(e=740),e}},{key:"getChartOptions",value:function(){var e=(740-this.getChartHeight())/2;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(e){e.animationObject.onAnimationProgress=function(){var a=this.chart.ctx,t=this.chart;a.textAlign="center",a.textBaseline="bottom",a.font="20px Roboto";var n=e.animationObject.currentStep/e.animationObject.numSteps,r=t.getDatasetMeta(0);r.hidden||r.data.forEach(function(e,r){var s=Math.floor(t.data.datasets[0].data[r]*n).toString();a.fillStyle=oa[r%4];var i=e.tooltipPosition();a.fillText(s,i.x+2+6*s.length,i.y+e._model.height/2)})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!0,beginAtZero:!0}],xAxes:[{display:!0,beginAtZero:!0}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:60,top:e,bottom:e}}}}},{key:"getWinnerString",value:function(){return"Congratulations [name of player]! "}},{key:"render",value:function(){return r.a.createElement("div",{style:{maxHeight:740}},r.a.createElement(ia.b,{data:this.getChartData,height:740,options:this.getChartOptions()}),r.a.createElement(w.b,{variant:"subtitle1"},this.getWinnerString()))}}]),a}(n.Component),ca=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h2"},"Final score"),r.a.createElement(la,{game:this.props.game})),r.a.createElement("div",{className:"align-bottom "},r.a.createElement("div",null,r.a.createElement(Q.a,{onClick:this.props.gameFunc.restart},"Replay quiz"),r.a.createElement(Q.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),r.a.createElement(Q.a,{onClick:function(){return alert("show results")}},"Show results"),r.a.createElement(Q.a,{onClick:function(){return alert("start survey")}},"Start survey"),r.a.createElement(Q.a,null,r.a.createElement(b.a,{to:"/create"},"Host game")))))}}]),a}(n.Component),ma=[{icon:r.a.createElement(Ke.a,null),color:"#80DEEA"},{icon:r.a.createElement(He.a,null),color:"#EF9A9A"},{icon:r.a.createElement(Le.a,null),color:"#CE93D8"},{icon:r.a.createElement(Je.a,null),color:"#C5E1A5"}],ua=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getChartData=t.getChartData.bind(Object(h.a)(Object(h.a)(t))),t.getChartOptions=t.getChartOptions.bind(Object(h.a)(Object(h.a)(t))),t.getChartHeight=t.getChartHeight.bind(Object(h.a)(Object(h.a)(t))),t.getAnswerData=t.getAnswerData.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getAnswerData",value:function(){for(var e={data:[],topPlayer:{score:0,playerKey:""},correctAnswers:[]},a=[],t=this.props.game.players?Object.keys(this.props.game.players):[],n=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],r=0;r<t.length;r++){var s=this.props.game.players[t[r]];if(s.answers){var i=s.answers[n.id];i&&(a.push(i.answer),i.score>e.topPlayer.score&&(e.topPlayer.score=i.score,e.topPlayer.playerKey=s.key))}}for(var o=0;o<n.answers.length;o++){for(var l=0,c=0;c<a.length;c++)n.answers.indexOf(a[c])===o&&l++;e.data.push(l),n.correctAnswers.indexOf(n.answers[o])>-1&&e.correctAnswers.push(o)}return e}},{key:"getChartData",value:function(){var e={labels:[],datasets:[{data:[],label:"asdf",backgroundColor:[],borderWidth:1}]},a=this.getAnswerData();e.datasets[0].borderColor=[],e.datasets[0].data=a.data;for(var t=0;t<a.data.length;t++)e.labels.push(""),e.datasets[0].backgroundColor.push(ma[t].color);return e}},{key:"getChartHeight",value:function(){var e=this.getAnswerData(),a=65+25*Math.max.apply(Math,Object(N.a)(e.data));return a>300?300:a}},{key:"getChartOptions",value:function(){var e=this;return{maintainAspectRatio:!1,showTooltips:!1,responsiveAnimationDuration:1e3,animation:{easing:"easeInOutCubic",duration:"2000",onProgress:function(a){var t=e.getAnswerData();a.animationObject.onAnimationProgress=function(){var e=this.chart.ctx,n=this.chart;e.textAlign="center",e.fillStyle="black",e.textBaseline="bottom",e.font="24px Roboto";var r=a.animationObject.currentStep/a.animationObject.numSteps,s=n.getDatasetMeta(0);s.hidden||s.data.forEach(function(a,s){var i=Math.floor(n.data.datasets[0].data[s]*r),o=a.tooltipPosition();if(e.fillStyle=ma[s].color,e.fillText(i,o.x,o.y-2),e.beginPath(),e.rect(o.x-a._view.width/2,n.height-32,a._view.width,22),e.fill(),t.correctAnswers.indexOf(s)>-1){var l=new Image;l.src="/stagehoot/baseline-done_outline-24px.svg",l.height=100,l.width=100;var c=n.height-34;e.drawImage(l,o.x-12,c)}})}}},scales:{yAxes:[{ticks:{beginAtZero:!0},display:!1,beginAtZero:!0}],xAxes:[{display:!1}]},legend:{display:!1},tooltips:{enabled:!1},events:[],layout:{padding:{left:0,right:0,top:25,bottom:40}}}}},{key:"render",value:function(){return r.a.createElement(ia.a,{data:this.getChartData,height:this.getChartHeight(),options:this.getChartOptions()})}}]),a}(n.Component),ha=t(120),da=t.n(ha),pa=t(63),ga=t.n(pa),ba=t(121),va=t.n(ba),ya=t(119),Ea=t.n(ya),fa=t(122),Oa=t.n(fa),ja=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChangePage=function(e,a){t.setState({page:a})},t.handleChangeRowsPerPage=function(e){t.setState({rowsPerPage:e.target.value})},t.state={leaderboardData:t.getLeaderboardData(),page:0,rowsPerPage:10},t.startScoreCounter=t.startScoreCounter.bind(Object(h.a)(Object(h.a)(t))),t.getScoreCellWidth=t.getScoreCellWidth.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){setTimeout(this.startScoreCounter,2e3)}},{key:"startScoreCounter",value:function(){var e=this,a=setInterval(function(){for(var t=e.state.leaderboardData,n=!0,r=0;r<t.players.length;r++){var s=t.players[r];s.currentQuestionScore>0&&(n=!1,s.currentQuestionScore--,s.totalScore++)}t.players.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.setState({leaderboard:t}),n&&clearInterval(a)},10)}},{key:"getLeaderboardData",value:function(){for(var e={players:[]},a=this.props.game.players?Object.keys(this.props.game.players):[],t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion],n=[],r=0;r<a.length;r++){var s={},i=this.props.game.players[a[r]],o=0;if(i.answers)for(var l=0;l<this.props.game.quiz.questions.length;l++){var c=this.props.game.quiz.questions[l],m=i.answers[c.id];m&&(m.questionId===t.id?(s.currentQuestionScore=m.score,s.lastScore=m.score):o+=m.score)}s.totalScore=o,s.name=i.name,s.key=i.key,n.push(s)}return n.sort(function(e,a){return a.totalScore<e.totalScore?-1:a.totalScore>e.totalScore?1:0}),e.players=n,e}},{key:"getLeaderboardScore",value:function(e){return 0===e.currentQuestionScore?"".concat(e.totalScore," (+").concat(e.lastScore,")"):"".concat(e.totalScore,"           ")}},{key:"getScoreCellWidth",value:function(){for(var e=0,a=this.getLeaderboardData(),t=0;t<a.players.length;t++){var n=a.players[t],r="".concat(n.totalScore," (+").concat(n.lastScore,")");r.length>e&&(e=r.length)}return 6*e+65}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.leaderboardData,s=t.rowsPerPage,i=t.page;return r.a.createElement("div",{className:a.root},r.a.createElement(Ea.a,{className:a.table},r.a.createElement(da.a,null,n.players.slice(i*s,i*s+s).map(function(a,t){return r.a.createElement(va.a,{key:a.key},r.a.createElement(ga.a,{padding:"dense"},t+1),r.a.createElement(ga.a,null,a.name),r.a.createElement(ga.a,{style:{width:e.getScoreCellWidth()}},e.getLeaderboardScore(a)))}))),n.players.length>10&&r.a.createElement(Oa.a,{component:"div",count:n.players.length,rowsPerPage:s,page:i,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),a}(n.Component),ka=Object(Z.withStyles)(function(e){return{root:{width:"100%"},table:{maxWidth:700,whiteSpace:"nowrap"}}})(ja),wa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t.nextQuestion=t.nextQuestion.bind(Object(h.a)(Object(h.a)(t))),t.finalizeQuiz=t.finalizeQuiz.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextQuestion",value:function(){var e={};e.quiz=this.props.game.quiz,e.quiz.currentQuestion=e.quiz.currentQuestion+1,e.phase="awaiting_question",this.props.gameFunc.update(e)}},{key:"finalizeQuiz",value:function(){this.props.gameFunc.update({phase:"final_result"})}},{key:"render",value:function(){var e=[],a="";this.props.game&&(e=(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion]).answers);var t="undefined"===typeof this.props.game.quiz.questions[this.props.game.quiz.currentQuestion+1];return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h6",style:{float:"right"}},"Game PIN:".concat(this.props.game.gameId," ")),r.a.createElement(w.b,{variant:"h5"},a.question)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,md:6,xs:12},r.a.createElement("div",{className:"quiz-answer-chart"},r.a.createElement(ua,{game:this.props.game}))),r.a.createElement(k.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(ka,{game:this.props.game}))))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement("div",null,t&&r.a.createElement(Q.a,{onClick:this.finalizeQuiz},"Finalize result"),!t&&r.a.createElement(Q.a,{onClick:this.nextQuestion},"Next question"),r.a.createElement(Q.a,{onClick:this.props.gameFunc.restart},"Restart quiz"),r.a.createElement(Q.a,{onClick:this.props.gameFunc.quit},"Quit quiz"),r.a.createElement(Q.a,{onClick:this.props.gameFunc.end},"End quiz")),r.a.createElement(k.a,{className:"align-bottom",container:!0},e.map(function(e,a){return r.a.createElement(k.a,{key:a,item:!0,xs:6},r.a.createElement(Ye,{answer:e,index:a}))}))))}}]),a}(n.Component),Ca=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"HostEnd toggleHeader()")}}]),a}(n.Component),qa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"host-container"},"setup"===this.props.game.phase&&r.a.createElement(Ae,{game:this.props.game,gameFunc:this.props.gameFunc}),"connection"===this.props.game.phase&&r.a.createElement(Ge,{game:this.props.game,gameFunc:this.props.gameFunc}),"starting"===this.props.game.phase&&r.a.createElement(Fe,{game:this.props.game,gameFunc:this.props.gameFunc}),"awaiting_question"===this.props.game.phase&&r.a.createElement(Me,{game:this.props.game,gameFunc:this.props.gameFunc}),"show_question"===this.props.game.phase&&r.a.createElement(_e,{game:this.props.game,gameFunc:this.props.gameFunc}),"answer"===this.props.game.phase&&r.a.createElement(sa,{game:this.props.game,gameFunc:this.props.gameFunc}),"result_question"===this.props.game.phase&&r.a.createElement(wa,{game:this.props.game,gameFunc:this.props.gameFunc}),"final_result"===this.props.game.phase&&r.a.createElement(ca,{game:this.props.game,gameFunc:this.props.gameFunc}),"end"===this.props.game.phase&&r.a.createElement(Ca,{game:this.props.game,gameFunc:this.props.gameFunc}))}}]),a}(n.Component),xa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.handleChangeBool=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.checked))}},t.handleChangeSelect=function(e){t.setState(Object(P.a)({},e.target.name,e.target.value))},t.startGame=function(e){var a=t.props,n=a.game,r=a.gameFunc,s=t.state,i={surveyPlayers:s.surveyPlayers,nameGenerator:s.nameGenerator,multiplayerMode:e,wallCollision:s.wallCollision,opponentCollision:s.opponentCollision,eatOpponents:s.eatOpponents,racetarget:s.racetarget,difficulty:s.difficulty,gamemode:s.gamemode};n.minigame=i,n.phase="connection",n.status="IN_PROGRESS",r.update(n)},t.state={surveyPlayers:!1,nameGenerator:!1,gamemode:e.game.minigame.gamemode,racetarget:e.game.minigame.racetarget,opponentCollision:e.game.minigame.opponentCollision,eatOpponents:e.game.minigame.eatOpponents,wallCollision:e.game.minigame.wallCollision,difficulty:e.game.minigame.difficulty},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.surveyPlayers,n=a.nameGenerator,s=a.wallCollision,i=a.opponentCollision,o=a.eatOpponents,l=a.racetarget,c=a.difficulty,m=a.gamemode;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h4"},"Game Settings"),r.a.createElement(Q.a,{onClick:function(){return e.startGame("classic")},variant:"contained"},"Classic"),r.a.createElement(Q.a,{onClick:function(){return e.startGame("coop")},variant:"contained"},"Co-op multiplayer"),r.a.createElement(Q.a,{onClick:function(){return e.startGame("team")},variant:"contained"},"Team multiplayer"),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(R.a,null,r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:n,onChange:this.handleChangeBool("nameGenerator"),value:"nameGenerator"}),label:"Generate names for players"}),r.a.createElement(I.a,{required:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"Game mode"),r.a.createElement(B.a,{value:m||"",onChange:this.handleChangeSelect,name:"gamemode",inputProps:{id:"gamemode-required"}},r.a.createElement(T.a,{value:"survival"},"Survival"),r.a.createElement(T.a,{value:"race"},"Race"))),"race"===m&&r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Snake length",name:"racetarget",type:"number",value:l,margin:"normal",onChange:this.handleChange("racetarget")})),r.a.createElement(I.a,{required:!0},r.a.createElement(M.a,{htmlFor:"gametype-required"},"difficulty"),r.a.createElement(B.a,{value:c||"",onChange:this.handleChangeSelect,name:"difficulty",inputProps:{id:"difficulty-required"}},r.a.createElement(T.a,{value:"500"},"Easy"),r.a.createElement(T.a,{value:"300"},"Medium"),r.a.createElement(T.a,{value:"100"},"Hard"),r.a.createElement(T.a,{value:"75"},"Pro"))),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:s,onChange:this.handleChangeBool("wallCollision"),value:"wallCollision"}),label:"Wall collisions"})),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:i,onChange:this.handleChangeBool("opponentCollision"),value:"opponentCollision"}),label:"Opponent collisions"})),r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:i&&o,disabled:!i,onChange:this.handleChangeBool("eatOpponents"),value:"eatOpponents"}),label:"Eat opponent on collision"})),r.a.createElement(U.a,{control:r.a.createElement(Y.a,{checked:t,onChange:this.handleChangeBool("surveyPlayers"),value:"surveyPlayers"}),label:"Survey players after game"}))))}}]),a}(n.Component),Sa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props.game,a=e.players;return a=a?Object.values(a):[],r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h2"},r.a.createElement("span",null,"Join game with Game PIN: "),r.a.createElement("span",{className:"dynamic-text"},e.gameId)),r.a.createElement(w.b,{variant:"subtitle1"},e.title)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(k.a,{container:!0},a.map(function(e){return r.a.createElement(k.a,{key:e.key,item:!0,xs:3},r.a.createElement(w.b,{paragraph:!0,variant:"body1",className:"dynamic-text"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(Q.a,{onClick:this.nextPhase,variant:"contained"},"Start")))}}]),a}(n.Component),Na=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t.startCounter(),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this;setInterval(function(){e.setState(function(e){return{counter:e.counter+1}})},1e3);return 5}},{key:"nextPhase",value:function(){this.props.gameFunc.update({phase:"gameplay"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h2"},"Starting game"),r.a.createElement(Qe,{speed:"slow"}))}}]),a}(n.Component),Pa=20;function za(e,a){var t=e.filter(function(e){return"down"===e.direction&&e.body}),n=Object(N.a)(new Set(t.map(function(e){return e.body[0].x}))),r=8*Pa,s=2*Pa;return{x:Fa(a-2*r,r,n),y:s}}function Aa(e,a){var t=e.filter(function(e){return"up"===e.direction&&e.body}),n=Object(N.a)(new Set(t.map(function(e){return e.body[0].x}))),r=8*Pa,s=a.width-2*r,i=a.height-3*Pa;return{x:Fa(s,r,n),y:i}}function Ga(e,a){var t=e.filter(function(e){return"left"===e.direction&&e.body}),n=Object(N.a)(new Set(t.map(function(e){return e.body[0].y}))),r=8*Pa,s=a.height-2*r;return{x:a.width-3*Pa,y:Fa(s,r,n)}}function Qa(e,a){var t=e.filter(function(e){return"right"===e.direction&&e.body}),n=Object(N.a)(new Set(t.map(function(e){return e.body[0].y}))),r=8*Pa;return{x:2*Pa,y:Fa(a-2*r,r,n)}}function Fa(e,a,t){var n=Math.round(Math.random()*e/Pa)*Pa+a;return t.some(function(e){return e===n||e===n-Pa||e===n+Pa})?Fa(e,a,t):n}function Ma(e){var a=e.body;return!(a.length<5)&&a.slice(4).some(function(e){return e.x===a[0].x&&e.y===a[0].y})}function _a(e,a,t){var n=e.x<0,r=e.y<0,s=e.x>t-Pa,i=e.y>a-Pa;return n||r||s||i}var Ta=20,Da=function(e){function a(e){var t;Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).togglePausGame=function(){t.setState(function(e){return{isPaused:!e.isPaused,overlay:!1}})};var n=Math.floor(window.innerHeight/Ta)*Ta,r=Math.floor(window.innerWidth/Ta)*Ta,s=2*e.game.minigame.snakes.length;return t.state={gameTicker:null,ticks:0,winners:[],snakes:function(e,a){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.direction=r.actions[t%4],r.moves=[];var s=void 0;switch(r.direction){case"right":s=Qa(e,a.height),r.body=[{x:s.x,y:s.y},{x:s.x-Pa,y:s.y},{x:s.x-2*Pa,y:s.y},{x:s.x-3*Pa,y:s.y}];break;case"left":s=Ga(e,a),r.body=[{x:s.x,y:s.y},{x:s.x+Pa,y:s.y},{x:s.x+2*Pa,y:s.y},{x:s.x+3*Pa,y:s.y}];break;case"up":s=Aa(e,a),r.body=[{x:s.x,y:s.y},{x:s.x,y:s.y+Pa},{x:s.x,y:s.y+2*Pa},{x:s.x,y:s.y+3*Pa}];break;case"down":s=za(e,a.width),r.body=[{x:s.x,y:s.y},{x:s.x,y:s.y-Pa},{x:s.x,y:s.y-2*Pa},{x:s.x,y:s.y-3*Pa}]}}return e}(e.game.minigame.snakes,{height:n,width:r}),foods:function(e){for(var a=[],t=0;t<e;t++)a.push({active:!1});return a}(s),settings:{snake:{size:Ta,speed:e.game.minigame.difficulty,border:"#000",respawntime:3},food:{background:"#EC5E0B",border:"#73AA24"},canvas:{height:n,width:r,background:"#F5F5F5",border:"#000"}}},t.drawSnakes=t.drawSnakes.bind(Object(h.a)(Object(h.a)(t))),t.generateFood=t.generateFood.bind(Object(h.a)(Object(h.a)(t))),t.generateSnakes=t.generateSnakes.bind(Object(h.a)(Object(h.a)(t))),t.resetCanvas=t.resetCanvas.bind(Object(h.a)(Object(h.a)(t))),t.drawFood=t.drawFood.bind(Object(h.a)(Object(h.a)(t))),t.detectCollisions=t.detectCollisions.bind(Object(h.a)(Object(h.a)(t))),t.initControllerListener=t.initControllerListener.bind(Object(h.a)(Object(h.a)(t))),t.generateFoods=t.generateFoods.bind(Object(h.a)(Object(h.a)(t))),t.isEndGame=t.isEndGame.bind(Object(h.a)(Object(h.a)(t))),t.togglePausGame=t.togglePausGame.bind(Object(h.a)(Object(h.a)(t))),t.renderOverlay=t.renderOverlay.bind(Object(h.a)(Object(h.a)(t))),t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,a=e.snakes,t=e.settings,n=document.querySelector("#snakeboard");we=n.querySelector("canvas"),ke=we.getContext("2d"),this.resetCanvas(),this.generateSnakes(),this.generateFoods();var r=this,s=setInterval(function(){if(r.state.isPaused){if(r.state.overlay)return;r.renderOverlay()}else 0===r.state.winners.length?(r.resetCanvas(),r.generateSnakes(),r.generateFoods(),r.detectCollisions(),r.isEndGame()):r.nextPhase()},t.snake.speed);this.setState({gameTicker:s});for(var i=0,o=a.length;i<o;i++){var l=a[i];this.initControllerListener(l)}}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"nextPhase",value:function(){var e=this.state,a=e.gameTicker,t=e.snakes,n=e.winners,r=e.ticks,s=this.props,i=s.game,o=s.gameFunc;clearInterval(a),i.minigame.snakes=t,i.minigame.winners=n,i.minigame.ticks=r,i.phase="final_result",o.update(i)}},{key:"initControllerListener",value:function(e){var a=this.props.game,t=g.database().ref("/games/".concat(a.key,"/minigame/snakes/").concat(e.id)),n=this;t.on("value",function(a){var t=a.val();t&&!n.state.isPaused?n.setState(function(a){var n=Object(N.a)(a.snakes);return t.move&&n[e.id].moves.push(t.move),{snakes:n}}):console.log("move error")})}},{key:"isEndGame",value:function(){var e=this.state.snakes,a=this.props.game.minigame,t=a.gamemode,n=a.racetarget;if(!("survival"===t&&e.filter(function(e){return!e.dead}).length>1)&&("race"!==t||e.some(function(e){return e.body.length>=n}))){var r=[];if("survival"===t){var s=e.filter(function(e){return!e.dead});if(1===s.length)r=s;else{var i=e.reduce(function(e,a){return e.score>a.score?e:a});r.push(i)}}else"race"===t&&(r=e.filter(function(e){return e.body.length>=n}));this.setState(function(){return{winners:r,isPaused:!0,overlay:!1}})}}},{key:"resetCanvas",value:function(){var e=this.state.settings;we.width=e.canvas.width,we.height=e.canvas.height,ke.fillStyle=e.canvas.background,ke.fillRect(0,0,we.width,we.height)}},{key:"generateSnakes",value:function(){for(var e=this.state,a=e.snakes,t=e.foods,n=e.settings,r=this.props.game,s=[],i=!r.minigame.wallCollision,o=function(e,o){var l=a[e];if(l.respawning)return Date.now()>l.respawntime&&(l.dead=!1,l.respawning=!1),s.push(l),"continue";if(l.dead){if("survival"===r.minigame.gamemode)return l.body=[],s.push(l),"continue";if("race"===r.minigame.gamemode){var c=n.canvas.width-Ta,m=function(e,a){return{x:Math.round(Math.random()*(a-14*Pa)/Pa)*Pa+4*Pa,y:Math.round(Math.random()*(e-2*Pa)/Pa)*Pa+2*Pa}}(n.canvas.height-Ta,c);return l.body=[{x:m.x,y:m.y},{x:m.x-Ta,y:m.y},{x:m.x-2*Ta,y:m.y},{x:m.x-3*Ta,y:m.y}],l.direction="right",l.respawning=!0,l.respawntime=Date.now()+1e3*n.snake.respawntime,s.push(l),"continue"}}var u,h,d={up:{x:l.body[0].x,y:i&&0===l.body[0].y?we.height-Ta:l.body[0].y-Ta},down:{x:l.body[0].x,y:i&&l.body[0].y>=we.height-Ta?0:l.body[0].y+Ta},right:{x:i&&l.body[0].x>=we.width-Ta?0:l.body[0].x+Ta,y:l.body[0].y},left:{x:i&&0===l.body[0].x?we.width-Ta:l.body[0].x-Ta,y:l.body[0].y}},p=l.moves.shift();u=p,h=l.direction,u&&{left:"right",right:"left",up:"down",down:"up"}[u]!==h&&(l.direction=p);var g=d[l.direction];l.body.unshift(g);var b=t.find(function(e){return e.active&&l.body[0].x===e.x&&l.body[0].y===e.y});b?(l.score+=10,b.active=!1):l.body.pop(),s.push(l)},l=0,c=a.length;l<c;l++)o(l);this.setState(function(e){return{snakes:s,foods:t,ticks:e.ticks+1}}),this.drawSnakes(s)}},{key:"drawSnakes",value:function(e){var a=this.state,t=a.settings,n=a.ticks;ke.globalCompositeOperation="multiply",ke.strokestyle=t.snake.border;for(var r=0,s=e.length;r<s;r++){var i=e[r];i.respawning&&n%2===0?ke.fillStyle=t.canvas.background:ke.fillStyle=i.color;for(var o=0,l=i.body.length;o<l;o++){var c=i.body[o];ke.fillRect(c.x,c.y,Ta,Ta),ke.strokeRect(c.x,c.y,Ta,Ta)}}}},{key:"generateFoods",value:function(){for(var e=this.state.foods,a=0,t=e.length;a<t;a++){var n=e[a];n.active||(n=this.generateFood()),this.drawFood(n),e[a]=n}this.setState(function(){return{foods:e}})}},{key:"generateFood",value:function(){var e=this.state,a=e.snakes,t=e.settings,n=t.canvas.width-Ta,r=t.canvas.height-Ta,s=Math.round(Math.random()*n/Ta)*Ta,i=Math.round(Math.random()*r/Ta)*Ta;return a.some(function(e){return e.body.some(function(e){return e.x===s&&e.y===i})})?this.generateFood():{active:!0,x:s,y:i}}},{key:"drawFood",value:function(e){var a=this.state.settings;ke.fillStyle=a.food.background,ke.strokestyle=a.food.border,ke.fillRect(e.x,e.y,Ta,Ta),ke.strokeRect(e.x,e.y,Ta,Ta)}},{key:"detectCollisions",value:function(){for(var e=this.state.snakes,a=this.props.game.minigame,t=0;t<e.length;t++)e[t].dead||(Ma(e[t])&&(e[t].dead=!0),a.wallCollision&&_a(e[t].body[0],we.height,we.width)&&(e[t].dead=!0));a.opponentCollision&&(e=function(e,a){for(var t=0,n=e.length;t<n;t++)if(!e[t].dead)for(var r=e[t],s=0;s<n;s++)if(s!==t&&!e[s].dead)for(var i=e[s],o=0,l=i.body.length;o<l;o++)i.body[o].x===r.body[0].x&&i.body[o].y===r.body[0].y&&(0===o?(r.dead=!0,i.dead=!0):a?1===o?i.dead=!0:(i.body.length=o,l=o):r.dead=!0);return e}(e,a.eatOpponents)),this.setState(function(){return{snakes:e}})}},{key:"renderOverlay",value:function(){var e=this.state,a=e.ticks,t=e.snakes,n=e.winners,r=this.props.game;this.setState(function(){return{overlay:!0}}),ke.globalAlpha=.4,ke.textAlign="center",ke.font="100px roboto",ke.fillStyle="#000000",1===a?ke.fillText("Click to start",we.width/2,we.height/2):n.length>0?ke.fillText("Game over",we.width/2,we.height/2):ke.fillText("Paused",we.width/2,we.height/2),ke.globalAlpha=1,ke.font="20px roboto";for(var s=0;s<t.length;s++){var i=t[s];if(i.body[0]){var o=Math.max(Ta,i.body[0].x),l=Math.max(Ta,i.body[0].y);o>=we.width&&(o=we.width-2*Ta),l>=we.height&&(l=we.height-2*Ta);var c=1===i.playerKeys.length?r.players[i.playerKeys[0]].name:i.name;ke.fillStyle=i.color;var m={right:{textAlign:"center",yPos:l-Ta/5},left:{textAlign:"start",yPos:l-Ta/5},up:{textAlign:"start",yPos:l-Ta/5},down:{textAlign:"start",yPos:l+2*Ta}};ke.textAlign=m[i.direction].textAlign,ke.fillText(c,o,m[i.direction].yPos)}}}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container",id:"snakeboard",role:"button",tabIndex:0,onClick:this.togglePausGame,onKeyDown:this.togglePausGame},r.a.createElement("canvas",null))}}]),a}(n.Component),Ia=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"tetris.js")}}]),a}(n.Component),Ka=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).replayGame=t.replayGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"replayGame",value:function(){this.props.gameFunc.update({phase:"starting"})}},{key:"render",value:function(){var e=this.props,a=e.gameFunc,t=e.game;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h2"},"Final score"),r.a.createElement(w.b,{variant:"h2"},t.minigame.winners[0].name)),r.a.createElement("div",{className:"align-bottom "},r.a.createElement("div",null,r.a.createElement(Q.a,{onClick:this.replayGame},"Replay game"),r.a.createElement(Q.a,{onClick:a.restart},"Re-host game"),r.a.createElement(Q.a,{onClick:a.quit},"Quit game"),r.a.createElement(Q.a,{onClick:function(){return alert("show results")}},"Show results"),r.a.createElement(Q.a,{onClick:function(){return alert("start survey")}},"Start survey"),r.a.createElement(Q.a,null,r.a.createElement(b.a,{to:"/create"},"Create new game")))))}}]),a}(n.Component),Ba=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.game;return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,null,"hur seer detta ut konstigt med dollarsign?HostEnd toggleheader()".concat(e.title)))}}]),a}(n.PureComponent);function La(e,a){var t=a;if(t<2)return[e];var n,r=e.length,s=[],i=0;if(r%t===0)for(n=Math.floor(r/t);i<r;)s.push(e.slice(i,i+=n));else for(;i<r;)n=Math.ceil((r-i)/t),t-=1,s.push(e.slice(i,i+=n));return s}var Wa=["#F44336","#9C27B0","#2196F3","#4CAF50","#FFEB3B","#FF9800","#607D8B","#795548","#E91E63","#3F51B5","#673AB7","#00BCD4","#03A9F4","#8BC34A","#CDDC39","#009688","#FFC107","#FF5722"],Ha=["Stan","Jane","Sara","Dan","Lisa","Joe","Rose","Ray","Lyra","Sam","Lucy","Ben","Noa","Mark","Eve","Ned","Ann","Todd"],Ra=20,Ja=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).startCounter(),t.nextPhase=t.nextPhase.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"startCounter",value:function(){var e=this,a=5,t=setInterval(function(){0===(a-=1)&&(e.nextPhase(),clearInterval(t))},1e3);return 5}},{key:"nextPhase",value:function(){var e,a=this.props,t=a.game,n=a.gameFunc,r={classic:function(e){for(var a=Object.keys(e),t=[],n=0;n<a.length;n++){var r={playerKeys:[e[a[n]].key],actions:["up","down","right","left"],score:0,color:Wa[n%Wa.length],name:Ha[n%Ha.length],id:n};t.push(r)}return t}(t.players),team:function(e){for(var a=Object.keys(e),t=[],n=0;n<a.length;n++){var r={playerKeys:[e[a[n]].key],direction:"right",id:n,score:0,body:[{x:300,y:100},{x:300-Ra,y:100},{x:300-2*Ra,y:100},{x:300-3*Ra,y:100}]};t.push(r)}return t}(t.players),coop:function(e){var a=[],t={playerKeys:Object.keys(e),direction:"right",actions:["up","down","right","left"],score:0,color:Wa[Math.floor(Math.random()*Wa.length)],name:Ha[Math.floor(Math.random()*Ha.length)],id:0,body:[{x:300,y:90},{x:300-Ra,y:90},{x:300-2*Ra,y:90},{x:300-3*Ra,y:90}]};return a.push(t),a}(t.players)};e=r[t.minigame.multiplayerMode];for(var s=0;s<e.length;s++)for(var i=La(e[s].actions,e[s].playerKeys.length),o=0;o<e[s].playerKeys.length;o++){var l=t.players[e[s].playerKeys[o]];l.snakeId=e[s].id,l.controlActions=i[o]}t.minigame.snakes=e,t.phase="gameplay",n.update(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement(w.b,{variant:"h2"},"Starting game"),r.a.createElement(Qe,{speed:"slow"}))}}]),a}(n.Component),Ua=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.game,t=e.gameFunc;switch(a.gametype){case"snake":return r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(xa,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(Sa,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(Ja,{game:a,gameFunc:t}),"gameplay"===a.phase&&r.a.createElement(Da,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(Ka,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(Ba,{game:a,gameFunc:t}));case"tetris":return r.a.createElement("div",{className:"host-container"},"setup"===a.phase&&r.a.createElement(xa,{game:a,gameFunc:t}),"connection"===a.phase&&r.a.createElement(Sa,{game:a,gameFunc:t}),"starting"===a.phase&&r.a.createElement(Na,{game:a,gameFunc:t}),"gameplay"===a.phase&&r.a.createElement(Ia,{game:a,gameFunc:t}),"final_result"===a.phase&&r.a.createElement(Ka,{game:a,gameFunc:t}),"end"===a.phase&&r.a.createElement(Ba,{game:a,gameFunc:t}));default:return null}}}]),a}(n.PureComponent),Va=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.state={game:{},gameId:localStorage.getItem("RecentGameId")||"",password:""},t.updateGame=t.updateGame.bind(Object(h.a)(Object(h.a)(t))),t.fetchGame=t.fetchGame.bind(Object(h.a)(Object(h.a)(t))),t.initGameListiner=t.initGameListiner.bind(Object(h.a)(Object(h.a)(t))),t.restartGame=t.restartGame.bind(Object(h.a)(Object(h.a)(t))),t.quitGame=t.quitGame.bind(Object(h.a)(Object(h.a)(t))),t.endGame=t.endGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"updateGame",value:function(e){var a=this;g.database().ref("games/".concat(a.state.game.key)).update(e,function(e){if(e){a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}})}},{key:"restartGame",value:function(){var e={players:[],phase:"setup"};this.updateGame(e)}},{key:"quitGame",value:function(){this.updateGame({phase:null}),this.props.toggleHeader(!0)}},{key:"endGame",value:function(){this.updateGame({phase:"final_result"})}},{key:"fetchGame",value:function(){var e=this;g.database().ref("games").orderByChild("gameId").equalTo(e.state.gameId).once("value",function(a){if(a.val()){var t;if(a.forEach(function(e){t=e.val()}),t.password===e.state.password)e.initGameListiner(t.key),e.props.toggleHeader();else{e.props.showSnackbar({variant:"error",message:"Could not find matching game"})}}else{e.props.showSnackbar({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=g.database().ref("games/".concat(e)),t=this;a.on("value",function(e){var a=e.val();a.phase||(a.phase="setup"),a?t.setState({game:a}):t.setState({game:""})})}},{key:"render",value:function(){var e={update:this.updateGame,restart:this.restartGame,end:this.endGame,quit:this.quitGame};return this.state.game.phase?r.a.createElement("div",{className:"page-container host-page"},"quiz"===this.state.game.gametype&&r.a.createElement(qa,{game:this.state.game,gameFunc:e}),"snake"===this.state.game.gametype&&r.a.createElement(Ua,{game:this.state.game,gameFunc:e}),"tetris"===this.state.game.gametype&&r.a.createElement(Ua,{game:this.state.game,gameFunc:e})):r.a.createElement("div",{className:"page-container host-page"},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Game PIN",name:"Game ID",value:this.state.gameId,margin:"normal",onChange:this.handleChange("gameId")})),r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Password",type:"password",name:"password",margin:"normal",value:this.state.password,onChange:this.handleChange("password")})),r.a.createElement(Q.a,{onClick:this.fetchGame,variant:"contained"},"Fetch"))}}]),a}(n.Component),Ya=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.state={name:"",authId:"",playerCreated:!1},t.createPlayer=t.createPlayer.bind(Object(h.a)(Object(h.a)(t))),t.generateName=t.generateName.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){!this.props.playerKey&&this.props.game.quiz.nameGenerator&&this.props.addPlayer(this.generatePlayer())}},{key:"createPlayer",value:function(){var e={name:this.state.name,score:0};this.props.addPlayer(e),this.setState({playerCreated:!0})}},{key:"generatePlayer",value:function(){return{name:this.generateName(),score:0}}},{key:"generateName",value:function(){var e=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],a=["ninja","chair","pancake","statue","unicorn","rainbows","laser","senor","bunny","captain","nibblets","cupcake","carrot","gnomes","glitter","potato","salad","toejam","curtains","beets","toilet","exorcism","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"],t="",n=[];this.props.game.players&&(n=Object.values(this.props.game.players).map(function(e){return e.name}));for(var r=0;r<20;r++){var s="";if(s=r>10?e[Math.floor(Math.random()*e.length)]+" "+e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)]:e[Math.floor(Math.random()*e.length)]+" "+a[Math.floor(Math.random()*a.length)],!(n.indexOf(s)>-1)){t=s;break}}return t}},{key:"render",value:function(){var e=this.props.game.players,a="";e&&this.props.playerKey&&(a=e[this.props.playerKey].name);var t=[];return e&&(t=Object.values(e)),this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},a&&r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h5"},"Welcome ",r.a.createElement("span",{className:"dynamic-text"},a),"! ")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{paragraph:!0,variant:"subtitle1"},"Players in lobby"),r.a.createElement(k.a,{container:!0},t.map(function(e,a){return r.a.createElement(k.a,{key:e.key,item:!0,md:3,xs:6},r.a.createElement(w.b,{paragraph:!0,variant:"body1"},e.name))}))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(w.b,{paragraph:!0,variant:"subtitle1"},"Waiting for the host to start the game"))),!a&&r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(Q.a,{onClick:this.createPlayer,variant:"contained"},"done"))):r.a.createElement("div",{className:"phase-container"},a&&r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Welcome ",r.a.createElement("span",{className:"dynamic-text"},a),"!"),r.a.createElement(w.b,{variant:"subtitle1"}," Watch the screen, your name should show.")),r.a.createElement("div",{className:"quiz-bottom-section"})),!a&&r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Name",name:"name",value:this.state.name,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(Q.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(n.Component),Za=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h5"},"Starting quiz")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(Qe,{speed:"slow"})),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Starting quiz...")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),Xa=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h5"},"Loading question")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(Qe,{speed:"slow"})),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Look at the screen.")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),$a=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return this.props.game.quiz.remoteMode?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Look at the question on the screen!")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),et=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).answerQuestion=function(e){t.setState({selectedAnswer:e,hasAnswered:!0});var a=Date.now()-t.state.startTime,n=0;if(t.state.question.correctAnswers.indexOf(e)>-1){switch(t.state.question.difficulty){case"easy":n+=100;break;case"medium":n+=200;break;case"hard":n+=300;break;case void 0:n+=200}if(t.props.game.quiz.timelimit&&t.state.question.timelimit){var r=a/(1e3*t.state.question.timelimit);n+=Math.floor(n/Math.max(.2,r)/10)}}var s={answer:e,score:n,answerTime:a,questionId:t.state.question.id};t.props.saveAnswer(s)},t.state={counter:0,question:{},hasAnswered:!1,selectedAnswer:""},t.answerQuestion=t.answerQuestion.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion];this.setState({question:e,startTime:Date.now()})}},{key:"render",value:function(){var e=this,a=[];return this.props.game&&(a=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].answers),this.props.game.quiz.remoteMode?this.state.hasAnswered?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{paragraph:!0,variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"body1"},"You answered: ",r.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h5"},this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].question)),r.a.createElement("div",{className:"quiz-middle-and-bottom-section"},r.a.createElement(k.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return r.a.createElement(k.a,{key:t,item:!0,xs:6},r.a.createElement(Ye,{answer:a,index:t,answerQuestion:e.answerQuestion,remoteMode:!0}))})))):this.state.hasAnswered?r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"body1"},"You answered: ",r.a.createElement("span",{className:"dynamic-text"},this.state.selectedAnswer))),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-complete-section"},r.a.createElement(k.a,{container:!0,spacing:8,className:"full-height"},a.map(function(a,t){return r.a.createElement(k.a,{key:t,item:!0,xs:6},r.a.createElement(Ye,{answer:a,index:t,answerQuestion:e.answerQuestion}))}))))}}]),a}(n.Component),at=t(72),tt=t.n(at),nt=t(73),rt=t.n(nt),st=t(74),it=t.n(st),ot=t(64),lt=t.n(ot),ct=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a,n){t.setState({expanded:!!n&&e})}},t.state={expanded:null},t.getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e=[],a=this.props.game.players[this.props.playerKey],t=0;t<this.props.game.quiz.questions.length;t++){var n={question:{},score:0,time:0,answer:""},r=this.props.game.quiz.questions[t];a.answers[r.id]?(n.score=a.answers[r.id].score,n.answer=a.answers[r.id].answer,n.time=a.answers[r.id].answerTime):(n.score=0,n.answer="no answer",n.time=0),n.question=r,e.push(n)}return e}},{key:"render",value:function(){var e=this;if(this.props.game.quiz.remoteMode){var a=this.getPlayerAnswerData();return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(w.b,{variant:"h5"},"Quiz finished")),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"subtitle1"},"You finished",r.a.createElement("span",{className:"dynamic-text"},"2nd")," with a score of  ",r.a.createElement("span",{className:"dynamic-text"},"560")),r.a.createElement(tt.a,null,r.a.createElement(rt.a,{expandIcon:r.a.createElement(lt.a,null)},r.a.createElement(w.b,null,"Final scoretable")),r.a.createElement(it.a,null,r.a.createElement("div",null,r.a.createElement(la,{game:this.props.game})))),r.a.createElement(tt.a,null,r.a.createElement(rt.a,{expandIcon:r.a.createElement(lt.a,null)},r.a.createElement(w.b,null,"Your own data")),r.a.createElement(it.a,{style:{display:"block"}},a.map(function(a,t){return r.a.createElement(tt.a,{key:a.question.id,expanded:e.state.expanded===a.question.id,onChange:e.handleChange(a.question.id)},r.a.createElement(rt.a,{expandIcon:r.a.createElement(lt.a,null)},r.a.createElement(w.b,{variant:"subtitle1"},a.question.question),r.a.createElement(w.b,{variant:"subtitle2"},a.score,"pt")),r.a.createElement(it.a,null,r.a.createElement(w.b,null,"Your answer: ",a.answer),r.a.createElement(w.b,null,"Your time: ",a.time/1e3,"sec"),r.a.createElement(w.b,{variant:"subtitle1",align:"left"},"Correct answers"),r.a.createElement(oe.a,null,a.question.correctAnswers.map(function(e,a){return r.a.createElement(ce.a,{key:e},r.a.createElement(ue.a,{primary:e}))})),r.a.createElement(w.b,{variant:"subtitle1",align:"left"},"Wrong answers"),r.a.createElement(oe.a,null,a.question.wrongAnswers.map(function(e,a){return r.a.createElement(ce.a,{key:e},r.a.createElement(ue.a,{primary:e}))}))))})))),r.a.createElement("div",{className:"quiz-bottom-section"}))}return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Look at the screen.")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component);function mt(e){var a=e.playerData,t=a.hasAnswered&&0===a.currentQuestionScore,n=a.currentQuestionScore>0;return r.a.createElement("div",null,n>0&&r.a.createElement(w.b,{variant:"h5"},"Correct answer!"),t&&r.a.createElement(w.b,{variant:"h5"},"Wrong answer!"),!a.hasAnswered&&r.a.createElement(w.b,{variant:"h5"},"You did not answer the question"),a.hasAnswered&&r.a.createElement("div",null,r.a.createElement(w.b,{variant:"body1"},r.a.createElement("div",null,r.a.createElement("span",null,"Score: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.currentQuestionScore)),r.a.createElement("div",null,r.a.createElement("span",null,"Time: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.answerTime)),r.a.createElement("div",null,r.a.createElement("span",null,"Total score: ")," ",r.a.createElement("span",{className:"dynamic-text"},a.totalScore)))),a.oldLeaderboardPosition!==a.newLeaderboardPosition&&r.a.createElement("div",null,r.a.createElement(w.b,{variant:"body1"},r.a.createElement("span",null,"Old position:"),r.a.createElement("span",null," ",a.oldLeaderboardPosition),r.a.createElement("span",null,"New position: "),r.a.createElement("span",null,a.newLeaderboardPosition))),a.oldLeaderboardPosition===a.newLeaderboardPosition&&r.a.createElement("div",null,r.a.createElement(w.b,{variant:"body1"},r.a.createElement("span",null,"Position: "),r.a.createElement("span",null," ",a.newLeaderboardPosition))))}var ut=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).getPlayerAnswerData=t.getPlayerAnswerData.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"getPlayerAnswerData",value:function(){for(var e=this.props,a=e.game,t=e.playerKey,n={totalScore:0,currentQuestionScore:0,newLeaderboardPosition:1,oldLeaderboardPosition:1,answerTime:0,hasAnswered:!1},r=a.quiz.questions[a.quiz.currentQuestion],s=a.players[t],i=0;i<a.quiz.questions.length;i++){var o=a.quiz.questions[i],l=!!s.answers&&s.answers[o.id];l&&(l.questionId===r.id&&(n.hasAnswered=!0,n.currentQuestionScore=l.score,n.answerTime=l.answerTime),n.totalScore+=l.score)}for(var c=a.players?Object.keys(a.players):[],m=0;m<c.length;m++)if(c[m]!==s.key){for(var u=a.players[c[m]],h=0,d=0,p=0;p<a.quiz.questions.length;p++){var g=a.quiz.questions[p],b=!!u.answers&&u.answers[g.id];b&&(b.questionId===r.id&&(d=b.score),h+=b.score)}h>n.totalScore&&(n.newLeaderboardPosition+=1),h-d>n.totalScore-n.currentQuestionScore&&(n.oldLeaderboardPosition+=1)}return n}},{key:"render",value:function(){var e=this.props.game,a=this.getPlayerAnswerData();if(e.quiz.remoteMode){var t;e&&(t=e.quiz.questions[e.quiz.currentQuestion]);var n=t.answers;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"},r.a.createElement(mt,{playerData:a})),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(k.a,{container:!0},r.a.createElement(k.a,{item:!0,md:6,xs:12},r.a.createElement("div",{className:"quiz-answer-chart"},r.a.createElement(ua,{game:e}))),r.a.createElement(k.a,{item:!0,md:6,xs:12},r.a.createElement("div",null,r.a.createElement(ka,{game:e}))))),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(k.a,{container:!0},n.map(function(e,a){return r.a.createElement(k.a,{key:e,item:!0,xs:6},r.a.createElement(Ye,{answer:e,index:a}))}))))}return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(mt,{playerData:a})),r.a.createElement("div",{className:"quiz-bottom-section"},r.a.createElement(w.b,{variant:"subtitle1"},"Look at the screen to se overall player results")))}}]),a}(n.Component),ht=(n.Component,function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t.saveAnswer=t.saveAnswer.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"saveAnswer",value:function(e){var a=this,t=this.props.game.quiz.questions[this.props.game.quiz.currentQuestion].id;g.database().ref("/games/"+a.props.game.key+"/players/"+this.props.playerKey+"/answers/"+t).set(e,function(e){if(e){a.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else{a.props.showSnackbar({variant:"success",message:"Successfully updated player!"})}})}},{key:"render",value:function(){var e="final_result"===this.props.game.phase||"end"===this.props.game.phase;return r.a.createElement("div",{className:"play-container"},"connection"===this.props.game.phase&&r.a.createElement(Ya,{game:this.props.game,addPlayer:this.props.createPlayer,playerKey:this.props.playerKey}),"starting"===this.props.game.phase&&r.a.createElement(Za,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"awaiting_question"===this.props.game.phase&&r.a.createElement(Xa,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"show_question"===this.props.game.phase&&r.a.createElement($a,{game:this.props.game,updatePlayer:this.props.updatePlayer}),"answer"===this.props.game.phase&&r.a.createElement(et,{game:this.props.game,saveAnswer:this.saveAnswer,playerKey:this.props.playerKey}),"result_question"===this.props.game.phase&&r.a.createElement(ut,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}),e&&r.a.createElement(ct,{game:this.props.game,updatePlayer:this.props.updatePlayer,playerKey:this.props.playerKey}))}}]),a}(n.Component));var dt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.state={name:""},t.createPlayer=t.createPlayer.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.playerKey,t=e.game,n=e.addPlayer;!a&&t.minigame.nameGenerator&&n(this.generatePlayer())}},{key:"createPlayer",value:function(){var e=this.state.name;(0,this.props.addPlayer)({name:e,score:0})}},{key:"generatePlayer",value:function(){var e=this.props.game,a=[];return e.players&&(a=Object.values(e.players).map(function(e){return e.name})),{name:function(e){for(var a=["adamant","adroit","amatory","animistic","antic","arcadian","baleful","bellicose","bilious","boorish","calamitous","caustic","cerulean","comely","concomitant","contumacious","corpulent","crapulous","defamatory","didactic","dilatory","dowdy","efficacious","effulgent","egregious","endemic","equanimous","execrable","fastidious","feckless","fecund","friable","fulsome","garrulous","guileless","gustatory","heuristic","histrionic","hubristic","incendiary","insidious","insolent","intransigent","inveterate","invidious","irksome","jejune","jocular","judicious","lachrymose","limpid","loquacious","luminous","mannered","mendacious","meretricious","minatory","mordant","munificent","nefarious","noxious","obtuse","parsimonious","pendulous","pernicious","pervasive","petulant","platitudinous","precipitate","propitious","puckish","querulous","quiescent","rebarbative","recalcitant","redolent","rhadamanthine","risible","ruminative","sagacious","salubrious","sartorial","sclerotic","serpentine","spasmodic","strident","taciturn","tenacious","tremulous","trenchant","turbulent","turgid","ubiquitous","uxorious","verdant","voluble","voracious","wheedling","withering","zealous"],t=["ninja","chair","pancake","statue","unicorn","rainbows","laser","senor","bunny","captain","nibblets","cupcake","carrot","gnomes","glitter","potato","salad","toejam","curtains","beets","toilet","exorcism","stick figures","mermaid eggs","sea barnacles","dragons","jellybeans","snakes","dolls","bushes","cookies","apples","ice cream","ukulele","kazoo","banjo","opera singer","circus","trampoline","carousel","carnival","locomotive","hot air balloon","praying mantis","animator","artisan","artist","colorist","inker","coppersmith","director","designer","flatter","stylist","leadman","limner","make-up artist","model","musician","penciller","producer","scenographer","set decorator","silversmith","teacher","auto mechanic","beader","bobbin boy","clerk of the chapel","filling station attendant","foreman","maintenance engineering","mechanic","miller","moldmaker","panel beater","patternmaker","plant operator","plumber","sawfiler","shop foreman","soaper","stationary engineer","wheelwright","woodworkers"],n="",r=0;r<20;r++){var s="";if(s=r>10?"".concat(a[Math.floor(Math.random()*a.length)]," ").concat(a[Math.floor(Math.random()*a.length)]," ").concat(t[Math.floor(Math.random()*t.length)]):"".concat(a[Math.floor(Math.random()*a.length)]," ").concat(t[Math.floor(Math.random()*t.length)]),!(e.indexOf(s)>-1)){n=s;break}}return n}(a),score:0}}},{key:"render",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=this.state.name,s="";return a.players&&t&&a.players[t]&&(s=a.players[t].name),r.a.createElement("div",{className:"phase-container"},s?r.a.createElement("div",null,r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},r.a.createElement("span",null,"Welcome"),r.a.createElement("span",{className:"dynamic-text"},s)),r.a.createElement(w.b,{variant:"subtitle1"}," Watch the screen, your name should show.")),r.a.createElement("div",{className:"quiz-bottom-section"})):r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Name",name:"name",value:n,margin:"normal",onChange:this.handleChange("name")})),r.a.createElement(Q.a,{onClick:this.createPlayer,variant:"contained"},"done")))}}]),a}(n.Component),pt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Starting game...")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),gt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"quiz-top-section"}),r.a.createElement("div",{className:"quiz-middle-section"},r.a.createElement(w.b,{variant:"h5"},"Look at the screen. playerKey")),r.a.createElement("div",{className:"quiz-bottom-section"}))}}]),a}(n.Component),bt=t(163),vt=t.n(bt),yt=t(162),Et=t.n(yt),ft=t(161),Ot=t.n(ft),jt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleAction=t.handleAction.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"handleAction",value:function(e){var a=this.props,t=a.playerKey,n=a.game,r=n.players[t];g.database().ref("/games/".concat(n.key,"/minigame/snakes/").concat(r.snakeId,"/move")).set(e,function(e){e&&console.log("error updated snake move")})}},{key:"render",value:function(){var e=this,a=this.props,t=a.game,s=a.playerKey,i=t.players[s],o=t.minigame.snakes[i.snakeId],l=o.actions,c=1===o.playerKeys.length?i.name:o.name;return r.a.createElement("div",{className:"phase-container"},r.a.createElement("div",{className:"player-controlls-container"},l.map(function(a){return r.a.createElement(n.Fragment,{key:a},i.controlActions.includes(a)?r.a.createElement(Q.a,{key:a,className:"player-controlls-action player-controlls-".concat(a),onClick:function(){e.handleAction(a)},style:{backgroundColor:o.color}},"up"===a&&r.a.createElement(Ot.a,{className:"player-controlls-icon"}),"down"===a&&r.a.createElement(lt.a,{className:"player-controlls-icon"}),"right"===a&&r.a.createElement(Et.a,{className:"player-controlls-icon"}),"left"===a&&r.a.createElement(vt.a,{className:"player-controlls-icon"})):r.a.createElement(Q.a,{key:a,className:"player-controlls-action player-controlls-".concat(a),style:{backgroundColor:o.color,opacity:.3}},"up"===a&&r.a.createElement(Ot.a,{className:"player-controlls-icon"}),"down"===a&&r.a.createElement(lt.a,{className:"player-controlls-icon"}),"right"===a&&r.a.createElement(Et.a,{className:"player-controlls-icon"}),"left"===a&&r.a.createElement(vt.a,{className:"player-controlls-icon"})))}),r.a.createElement("div",{className:"player-controlls-action player-controlls-middle"},r.a.createElement(w.b,{variant:"body1"},c))))}}]),a}(n.Component),kt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"phase-container"},"TetrisController.js h\xe4r  ska jag visa knappar f\xf6r moves. och en metod h\xe4r som tar knapptrycket och updaterar en specifik property i firebase baserat p\xe5 gameid, playerkey etc. m\xe5ste ha med snakeId in i dnena kommmponent?")}}]),a}(n.Component),wt=function(e){function a(){return Object(o.a)(this,a),Object(c.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.game,t=e.playerKey,n=e.createPlayer,s="final_result"===a.phase||"end"===a.phase;switch(a.gametype){case"snake":return r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement(dt,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(pt,{game:a}),"gameplay"===a.phase&&r.a.createElement(jt,{game:a,playerKey:t}),s&&r.a.createElement(gt,{game:a,playerKey:t}));case"tetris":return r.a.createElement("div",{className:"play-container"},"connection"===a.phase&&r.a.createElement(dt,{game:a,addPlayer:n,playerKey:t}),"starting"===a.phase&&r.a.createElement(pt,{game:a}),"gameplay"===a.phase&&r.a.createElement(kt,{game:a}),s&&r.a.createElement(gt,{game:a,playerKey:t}));default:return null}}}]),a}(n.PureComponent),Ct=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){return function(a){t.setState(Object(P.a)({},e,a.target.value))}},t.state={game:{},gameId:"",playerKey:""},t.createPlayer=t.createPlayer.bind(Object(h.a)(Object(h.a)(t))),t.fetchGame=t.fetchGame.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"fetchGame",value:function(){var e=this;g.database().ref("games").orderByChild("gameId").equalTo(e.state.gameId).once("value",function(a){if(a.val()){var t;if(a.forEach(function(e){t=e.val()}),"connection"===t.phase){var n=localStorage.getItem("RecentPlayerKey");n&&t.players&&t.players[n]&&e.setState({playerKey:n}),e.initGameListiner(t.key);e.props.showSnackbar({variant:"success",message:"Connected to game"}),e.props.toggleHeader(!1)}else if("setup"===t.phase){e.props.showSnackbar({variant:"error",message:"Game is not yet started"})}else{var r=localStorage.getItem("RecentPlayerKey");if(r&&t.players&&t.players[r]){e.setState({playerKey:r}),e.initGameListiner(t.key);e.props.showSnackbar({variant:"success",message:"Connected to game"}),e.props.toggleHeader(!1)}else{e.props.showSnackbar({variant:"error",message:"Game is in progress"})}}}else{e.props.showSnackbar({variant:"info",message:"No game found"})}})}},{key:"initGameListiner",value:function(e){var a=g.database().ref("games/".concat(e)),t=this;a.on("value",function(e){var a=e.val();a?t.setState({game:a}):t.setState({game:""})})}},{key:"createPlayer",value:function(e){var a=g.database().ref("/games/".concat(this.state.game.key,"/players")).push();e.key=a.key;var t=this;a.set(e,function(a){if(a){t.props.showSnackbar({variant:"error",message:"Unexpected internal error"})}else t.setState({playerKey:e.key}),localStorage.setItem("RecentPlayerKey",e.key)})}},{key:"render",value:function(){return this.state.game.phase?r.a.createElement("div",{className:"page-container play-page"},"quiz"===this.state.game.gametype&&r.a.createElement(ht,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar}),"snake"===this.state.game.gametype&&r.a.createElement(wt,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar}),"tetris"===this.state.game.gametype&&r.a.createElement(wt,{game:this.state.game,createPlayer:this.createPlayer,playerKey:this.state.playerKey,showSnackbar:this.props.showSnackbar})):r.a.createElement("div",{className:"page-container play-page"},r.a.createElement(I.a,null,r.a.createElement(A.a,{label:"Game PIN",name:"Game ID",value:this.state.gameId,margin:"normal",onChange:this.handleChange("gameId")})),r.a.createElement(Q.a,{onClick:this.fetchGame,variant:"contained"},"Join"))}}]),a}(n.Component),qt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app-page home-page"},r.a.createElement(k.a,{container:!0,spacing:24},r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(w.b,{variant:"h3"},"Welcome to stagehoot")),r.a.createElement(k.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{to:"/play"},r.a.createElement(w.a,{className:"card-button"},r.a.createElement(q.a,{title:"Play"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Connect to a game"))))),r.a.createElement(k.a,{item:!0,xs:12,sm:6},r.a.createElement(b.a,{to:"/host"},r.a.createElement(w.a,{className:"card-button"},r.a.createElement(q.a,{title:"Host"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Host a created game"))))),r.a.createElement(k.a,{item:!0,xs:12},r.a.createElement(b.a,{to:"/create"},r.a.createElement(w.a,{className:"card-button"},r.a.createElement(q.a,{title:"Create"}),r.a.createElement(S.a,null,r.a.createElement(w.b,{variant:"subtitle1",align:"center"},"Create a game")))))))}}]),a}(n.Component),xt=t(232),St=t(224),Nt=t.n(St),Pt=t(226),zt=t.n(Pt),At=t(227),Gt=t.n(At),Qt=t(230),Ft=t.n(Qt),Mt=t(228),_t=t.n(Mt),Tt=t(229),Dt=t.n(Tt),It=t(123),Kt=t.n(It),Bt=t(93),Lt=t.n(Bt),Wt=t(225),Ht=t.n(Wt),Rt={success:Nt.a,warning:Ht.a,error:zt.a,info:Gt.a};var Jt=Object(Z.withStyles)(function(e){return{success:{backgroundColor:_t.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:Dt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var a=e.classes,t=e.message,n=e.onClose,s=e.variant,i=Object(xt.a)(e,["classes","message","onClose","variant"]),o=Rt[s];return r.a.createElement(Lt.a,Object.assign({className:a[s],"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(o,{className:$()(a.icon,a.iconVariant)}),t),action:[r.a.createElement(ne.a,{key:"close","aria-label":"Close",color:"inherit",className:a.close,onClick:n},r.a.createElement(Ft.a,{className:a.icon}))]},i))}),Ut=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(c.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).handleClose=function(e){var a=t.props.hideSnackbar;"clickaway"!==e&&a()},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props.snack;return r.a.createElement("div",null,r.a.createElement(Kt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(Jt,{onClose:this.handleClose,variant:e.variant,message:e.message})))}}]),a}(r.a.Component),Vt=t(611),Yt=t(610),Zt=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(m.a)(a).call(this,e))).state={snack:"",showHeader:!0},t.showSnackbar=t.showSnackbar.bind(Object(h.a)(Object(h.a)(t))),t.hideSnackbar=t.hideSnackbar.bind(Object(h.a)(Object(h.a)(t))),t.toggleHeader=t.toggleHeader.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"hideSnackbar",value:function(){var e=this.state.snack;e.open=!1,this.setState({snack:e})}},{key:"showSnackbar",value:function(e){e.open=!0,this.setState({snack:e})}},{key:"toggleHeader",value:function(e){this.setState({showHeader:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(Vt.a,null,r.a.createElement("div",{className:"App"},this.state.showHeader&&r.a.createElement(O,null),r.a.createElement("div",{id:"content"},r.a.createElement(Yt.a,{exact:!0,path:"/play",render:function(){return r.a.createElement(Ct,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),r.a.createElement(Yt.a,{exact:!0,path:"/host",render:function(){return r.a.createElement(Va,{showSnackbar:e.showSnackbar,toggleHeader:e.toggleHeader})}}),r.a.createElement(Yt.a,{exact:!0,path:"/create",render:function(){return r.a.createElement(ze,{showSnackbar:e.showSnackbar})}}),r.a.createElement(Yt.a,{exact:!0,path:"/",render:function(){return r.a.createElement(qt,null)}})),this.state.snack&&r.a.createElement(Ut,{snack:this.state.snack,hideSnackbar:this.hideSnackbar})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Zt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[282,2,1]]]);
//# sourceMappingURL=main.8e45e4ef.chunk.js.map